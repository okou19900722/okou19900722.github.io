{"pageProps":{"categories":["releases","guides","news"],"page":11,"posts":[{"filename":"blog/2016-12-02-oauth2-got-easy.mdx","date":"2016-12-02","slug":"oauth2-got-easy","meta":{"title":"OAuth2 got easy","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"Oauth2 support exists in Eclipse Vert.x since version 3.2.0. The implementation follows the principles that rule the whole vert.x ecosystem."},"readingTime":{"text":"2 min read","minutes":1.865,"time":111900,"words":373},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Oauth2\"), \" sup\\xADport ex\\xADists in Eclipse Vert.x since ver\\xADsion 3.2.0. The im\\xADple\\xADmen\\xADta\\xADtion fol\\xADlows the prin\\xADci\\xADples that rule the whole vert.x ecosys\\xADtem: un\\xADopin\\xADion\\xADated, it does what you want it to do, sim\\xADple but not too sim\\xADple.\"), mdx(\"p\", null, \"This works fine be\\xADcause \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth2\"), \" is a widely spread stan\\xADdard and ven\\xADdors ad\\xADhere to it quite well. How\\xADever due to the API and the de\\xADtails of the spec\\xADi\\xADfi\\xADca\\xADtion it re\\xADquires some knowl\\xADedge on what kind of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"flow\"), \" your ap\\xADpli\\xADca\\xADtion needs to sup\\xADport, what are the end\\xADpoints for au\\xADtho\\xADriz\\xADing and get\\xADting to\\xADkens. This in\\xADfor\\xADma\\xADtion, even though eas\\xADily ac\\xADces\\xADsi\\xADble to any\\xADone who\\u2019s got the time and will, to read the ven\\xADdor doc\\xADu\\xADmen\\xADta\\xADtion is easy to find, but it means that de\\xADvel\\xADop\\xADers would need to spend time in a non-\\u200Bproject problem-\\u200Brelated task.\"), mdx(\"p\", null, \"Vert.x thrives for being fast and pro\\xADduc\\xADtive, so what if we could help you fo\\xADcus\\xADing on your de\\xADvel\\xADop\\xADment tasks rather than read\\xADing Oauth2 provider doc\\xADu\\xADmen\\xADta\\xADtion? This is what you can ex\\xADpect for the next re\\xADlease.\"), mdx(\"p\", null, \"Out of the box you will find out that you can in\\xADstan\\xADti\\xADate an OAuth2 provider as easy as:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"Provider.create(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"vertx\"), \", clientId, clientSecret)\\n\")), mdx(\"p\", null, \"That\\u2019s it! sim\\xADple, to the point, sure it makes some as\\xADsump\\xADtions, it as\\xADsumes that you want to use the \\u201D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AUTH_CODE\"), \"\\u201D flow which is what you nor\\xADmally do for web ap\\xADpli\\xADca\\xADtions with a back\\xADend.\"), mdx(\"p\", null, \"The sup\\xADported \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Provider\"), \" im\\xADple\\xADmen\\xADta\\xADtions will con\\xADfig\\xADure the base API (which will be still avail\\xADable) with the cor\\xADrect URLs, scope en\\xADcod\\xADing scheme or extra con\\xADfig\\xADu\\xADra\\xADtion such as \\u201D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"shopId\"), \"\\u201D/\\u201D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GUID\"), \"\\u201D for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Shopify\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Azure AD\"), \".\"), mdx(\"p\", null, \"So what sup\\xADported \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Provider\"), \"s can you al\\xADready find?\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://app.net/\"\n  }), \"App.net\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://azure.microsoft.com/en-us/\"\n  }), \"Azure\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://box.com\"\n  }), \"Box.com\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://dropbox.com\"\n  }), \"Drop\\xADbox\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://facebook.com\"\n  }), \"Face\\xADbook\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://foursquare.com\"\n  }), \"Foursquare\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://github.com\"\n  }), \"Github\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://google.com\"\n  }), \"Google\"), \" (ei\\xADther \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AUTH_CODE\"), \" flow or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Server to Server\"), \" flow) \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://instagram.com\"\n  }), \"In\\xADsta\\xADgram\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://keycloak.org\"\n  }), \"Key\\xADcloak\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://linkedin.com\"\n  }), \"LinkedIn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://mailchimp.com\"\n  }), \"Mailchimp\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://salesforce.com\"\n  }), \"Sales\\xADforce\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://shopify.com\"\n  }), \"Shopify\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://soundcloud.com\"\n  }), \"Sound\\xADcloud\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://stripe.com\"\n  }), \"Stripe\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://twitter.com\"\n  }), \"Twit\\xADter\"))), mdx(\"p\", null, \"That\\u2019s a hand\\xADful of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Provider\"), \"s, but there is more. Say that you want to en\\xADsure that your SSL con\\xADnec\\xADtions are valid and want to con\\xADtrol the cer\\xADtifi\\xADcate val\\xADi\\xADda\\xADtion. Every provider also ac\\xADcepts a Http\\xADClien\\xADtOp\\xADtions ob\\xADject that will be used in\\xADter\\xADnally when con\\xADtact\\xADing your provider, so in this case, you have full se\\xADcu\\xADrity con\\xADtrol of your con\\xADnec\\xADtion, not just de\\xADfaults.\"), mdx(\"p\", null, \"You can ex\\xADpect this new code to land for 3.4 as it is not avail\\xADable in the cur\\xADrent re\\xADlease (3.3.3).\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p><code>Oauth2</code> sup­port ex­ists in Eclipse Vert.x since ver­sion 3.2.0. The im­ple­men­ta­tion fol­lows the prin­ci­ples that rule the whole vert.x ecosys­tem: un­opin­ion­ated, it does what you want it to do, sim­ple but not too sim­ple.</p><p>This works fine be­cause <code>OAuth2</code> is a widely spread stan­dard and ven­dors ad­here to it quite well. How­ever due to the API and the de­tails of the spec­i­fi­ca­tion it re­quires some knowl­edge on what kind of <em>flow</em> your ap­pli­ca­tion needs to sup­port, what are the end­points for au­tho­riz­ing and get­ting to­kens. This in­for­ma­tion, even though eas­ily ac­ces­si­ble to any­one who’s got the time and will, to read the ven­dor doc­u­men­ta­tion is easy to find, but it means that de­vel­op­ers would need to spend time in a non-​project problem-​related task.</p><p>Vert.x thrives for being fast and pro­duc­tive, so what if we could help you fo­cus­ing on your de­vel­op­ment tasks rather than read­ing Oauth2 provider doc­u­men­ta­tion? This is what you can ex­pect for the next re­lease.</p><p>Out of the box you will find out that you can in­stan­ti­ate an OAuth2 provider as easy as:</p><pre><code class=\"hljs language-clojure\">Provider.create(<span class=\"hljs-name\">vertx</span>, clientId, clientSecret)\n</code></pre><p>That’s it! sim­ple, to the point, sure it makes some as­sump­tions, it as­sumes that you want to use the ”<code>AUTH_CODE</code>” flow which is what you nor­mally do for web ap­pli­ca­tions with a back­end.</p><p>The sup­ported <code>Provider</code> im­ple­men­ta­tions will con­fig­ure the base API (which will be still avail­able) with the cor­rect URLs, scope en­cod­ing scheme or extra con­fig­u­ra­tion such as ”<code>shopId</code>”/”<code>GUID</code>” for <code>Shopify</code>/<code>Azure AD</code>.</p><p>So what sup­ported <code>Provider</code>s can you al­ready find?</p><ul><li><a href=\"https://app.net/\">App.net</a></li><li><a href=\"https://azure.microsoft.com/en-us/\">Azure</a></li><li><a href=\"https://box.com\">Box.com</a></li><li><a href=\"https://dropbox.com\">Drop­box</a></li><li><a href=\"https://facebook.com\">Face­book</a></li><li><a href=\"https://foursquare.com\">Foursquare</a></li><li><a href=\"http://github.com\">Github</a></li><li><a href=\"https://google.com\">Google</a> (ei­ther <code>AUTH_CODE</code> flow or <code>Server to Server</code> flow) </li><li><a href=\"https://instagram.com\">In­sta­gram</a></li><li><a href=\"https://keycloak.org\">Key­cloak</a></li><li><a href=\"https://linkedin.com\">LinkedIn</a></li><li><a href=\"https://mailchimp.com\">Mailchimp</a></li><li><a href=\"https://salesforce.com\">Sales­force</a></li><li><a href=\"https://shopify.com\">Shopify</a></li><li><a href=\"https://soundcloud.com\">Sound­cloud</a></li><li><a href=\"https://stripe.com\">Stripe</a></li><li><a href=\"https://twitter.com\">Twit­ter</a></li></ul><p>That’s a hand­ful of <code>Provider</code>s, but there is more. Say that you want to en­sure that your SSL con­nec­tions are valid and want to con­trol the cer­tifi­cate val­i­da­tion. Every provider also ac­cepts a Http­Clien­tOp­tions ob­ject that will be used in­ter­nally when con­tact­ing your provider, so in this case, you have full se­cu­rity con­trol of your con­nec­tion, not just de­faults.</p><p>You can ex­pect this new code to land for 3.4 as it is not avail­able in the cur­rent re­lease (3.3.3).</p>","scope":{}},"tfIdfTerms":[{"term":"will","tf":5},{"term":"support","tf":4},{"term":"want","tf":4},{"term":"flow","tf":4},{"term":"provid","tf":4},{"term":"simpl","tf":3},{"term":"not","tf":3},{"term":"find","tf":3},{"term":"implement","tf":2},{"term":"vendor","tf":2},{"term":"api","tf":2},{"term":"applic","tf":2},{"term":"need","tf":2},{"term":"time","tf":2},{"term":"read","tf":2},{"term":"document","tf":2},{"term":"easi","tf":2},{"term":"develop","tf":2},{"term":"task","tf":2},{"term":"oauth2","tf":2},{"term":"expect","tf":2},{"term":"releas","tf":2},{"term":"box","tf":2},{"term":"us","tf":2},{"term":"configur","tf":2}]},{"filename":"blog/2016-09-28-vert-x-featuring-continuous-delivery-with-jenkins-and-ansible.mdx","date":"2016-09-28","slug":"vert-x-featuring-continuous-delivery-with-jenkins-and-ansible","meta":{"title":"Vert.x featuring Continuous Delivery with Jenkins and Ansible","category":"guides","authors":[{"name":"Ricardo Hernandez","github_id":"ricardohmon"}],"summary":"This blog entry describes an approach to adopt Continuous Delivery for Vert.x applications using Jenkins and Ansible by taking advantage of the Jenkins Job DSL and Ansible plugins."},"readingTime":{"text":"9 min read","minutes":8.965,"time":537900,"words":1793},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This blog entry de\\xADscribes an ap\\xADproach to adopt \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery\"), \" for Vert.x ap\\xADpli\\xADca\\xADtions using Jenk\\xADins and An\\xADsi\\xADble by tak\\xADing ad\\xADvan\\xADtage of the Jenk\\xADins Job DSL and An\\xADsi\\xADble plu\\xADg\\xADins.\"), mdx(\"h2\", {\n    \"id\": \"preamble\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#preamble\"\n  })), \"Preamble\"), mdx(\"p\", null, \"This post was writ\\xADten in con\\xADtext of the project ti\\xADtled \\u201C\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://summerofcode.withgoogle.com/projects/#4858492141699072\"\n  }), \"De\\xADvOps tool\\xADing for Vert.x ap\\xADpli\\xADca\\xADtions\"), \"\\u201D, one of the projects at Vert.x tak\\xADing place dur\\xADing the 2016 edi\\xADtion of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://summerofcode.withgoogle.com/about/\"\n  }), \"Google Sum\\xADmer of Code\"), \", a pro\\xADgram that aims to bring stu\\xADdents to\\xADgether with open source or\\xADga\\xADni\\xADza\\xADtions in order to help them to gain ex\\xADpo\\xADsure to soft\\xADware de\\xADvel\\xADop\\xADment prac\\xADtices and real-\\u200Bworld chal\\xADlenges.\"), mdx(\"h2\", {\n    \"id\": \"introduction\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#introduction\"\n  })), \"Introduction\"), mdx(\"p\", null, \"Sys\\xADtem con\\xADfig\\xADu\\xADra\\xADtion man\\xADage\\xADment (e.g., An\\xADsi\\xADble) has been re\\xADally hype in the re\\xADcent years and there is a strong rea\\xADson for that.\\nCon\\xADfig\\xADu\\xADra\\xADtion man\\xADage\\xADment fa\\xADcil\\xADi\\xADtates con\\xADfig\\xADur\\xADing a new en\\xADvi\\xADron\\xADment fol\\xADlow\\xADing a fixed \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"recipe\"), \" or slightly vary\\xADing it with the help of pa\\xADra\\xADme\\xADters. This has not only the ad\\xADvan\\xADtage of being able to do it more fre\\xADquently but re\\xADduces the chance of er\\xADrors than doing it man\\xADu\\xADally.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Be\\xADyond that, com\\xADbin\\xADing it with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADtin\\xADu\\xADous In\\xADte\\xADgra\\xADtion\"), \" tools (e.g., Jenk\\xADins) al\\xADlows mak\\xADing a de\\xADploy\\xADment as soon as a new code\\xADbase ver\\xADsion is avail\\xADable, which rep\\xADre\\xADsents the main build\\xADing block of a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery\"), \" pipeline, one of the ob\\xADjec\\xADtives of em\\xADbrac\\xADing a De\\xADvOps cul\\xADture.\"), mdx(\"p\", null, \"Given that Vert.x is a frame\\xADwork that con\\xADsists in a few li\\xADbraries which can be shipped within a sin\\xADgle \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fat jar\"), \", adopt\\xADing a De\\xADvOps cul\\xADture while de\\xADvel\\xADop\\xADing a Vert.x-\\u200Bbased ap\\xADpli\\xADca\\xADtion is straight\\xADfor\\xADward.\"), mdx(\"h2\", {\n    \"id\": \"overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#overview\"\n  })), \"Overview\"), mdx(\"p\", null, \"As seen in the di\\xADa\\xADgram below, this post de\\xADscribes a method to de\\xADfine a Jenk\\xADins build job which will react to changes in a code repos\\xADi\\xADtory. After suc\\xADces\\xADfully build\\xADing the project, the job will ex\\xADe\\xADcute an An\\xADsi\\xADble \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"play\\xADbook\"), \" to de\\xADploy the new ap\\xADpli\\xADca\\xADtion ver\\xADsion to the hosts spec\\xADi\\xADfied within the An\\xADsi\\xADble con\\xADfig\\xADu\\xADra\\xADtion.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/continuous-delivery-jenkins-ansible/ansible-jenkins-overview.svg\",\n    \"alt\": \"Overview of the continous delivery process\"\n  }))), mdx(\"h2\", {\n    \"id\": \"creating-a-jenkins-build-job-using-job-dsl\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#creating-a-jenkins-build-job-using-job-dsl\"\n  })), \"Creating a Jenkins build job using Job DSL\"), mdx(\"p\", null, \"Jenk\\xADins has cre\\xADated a con\\xADve\\xADnient way to de\\xADfine build jobs using a DSL. While this op\\xADtion avoids the has\\xADsle of con\\xADfig\\xADur\\xADing build jobs man\\xADu\\xADally, it sup\\xADports all fea\\xADtures of the reg\\xADu\\xADlar in\\xADter\\xADface through its \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://jenkinsci.github.io/job-dsl-plugin/\"\n  }), \"API\"), \". It is pos\\xADsi\\xADble to use An\\xADsi\\xADble to\\xADgether with Jenk\\xADins with the help of the An\\xADsi\\xADble \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://wiki.jenkins-ci.org/display/JENKINS/Ansible+Plugin/\"\n  }), \"plugin\"), \", whose in\\xADstruc\\xADtions are also in\\xADcluded in the Job DSL \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jenkinsci/ansible-plugin/blob/master/README.md\"\n  }), \"API\"), \". Al\\xADter\\xADna\\xADtively to the Job DSL Plu\\xADgin, An\\xADsi\\xADble can be used in\\xADside the de\\xADf\\xADi\\xADn\\xADi\\xADtion of Jenk\\xADins Pipeline, one of tool\\u2019s most re\\xADcent fea\\xADtures.\"), mdx(\"p\", null, \"Below is a sam\\xADple job de\\xADf\\xADi\\xADn\\xADi\\xADtion which can be used after cre\\xADat\\xADing a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"freestyle\"), \" job (seed job) and adding a new build step with the DSL script. In the script, there are a few things to no\\xADtice:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A name for the job cre\\xADated by the seed job is given.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Spe\\xADcific ver\\xADsions of JDK, Maven, and An\\xADsi\\xADble (avail\\xADable in the en\\xADvi\\xADron\\xADment) are used.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Git is se\\xADlected as the SCM plat\\xADform and the tar\\xADget repos\\xADi\\xADtory is de\\xADfined. Also, the build job is trig\\xADgered ac\\xADcord\\xADing to a spe\\xADcific in\\xADter\\xADval.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The Maven \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"pack\\xADage\"), \" goal is in\\xADvoked, which is in\\xADstructed to pack\\xADage the ap\\xADpli\\xADca\\xADtion into a fat jar.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Lastly, An\\xADsi\\xADble is used to call a play\\xADbook avail\\xADable in the filesys\\xADtem. The app will be de\\xADployed to the de\\xADfined tar\\xADget hosts and the cre\\xADden\\xADtials (con\\xADfig\\xADured in Jenk\\xADins) will be used to log into the tar\\xADget hosts. Ad\\xADdi\\xADtion\\xADally, en\\xADabling the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"colorizedOutput\"), \" op\\xADtion will re\\xADsult in a friend\\xADlier for\\xADmat\\xADting of the re\\xADsults in the con\\xADsole out\\xADput. The con\\xADtents of this play\\xADbook will be ad\\xADdressed in the next sec\\xADtion.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-groovy\"\n  }), \"job(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'vertx-microservices-workshop-job'\"), \") {\\n    jdk(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'JDK8'\"), \")\\n    scm {\\n        git(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'git://github.com/ricardohmon/vertx-microservices-workshop.git'\"), \")\\n    }\\n    triggers {\\n        scm(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'*/15 * * * *'\"), \")\\n    }\\n    steps {\\n\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"def\"), \" mvnInst = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'M3.3.9'\"), \"  \\n      maven {  \\n        goals(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'package'\"), \")  \\n        mavenInstallation(mvnInst)  \\n      }  \\n      ansiblePlaybook(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'/ansible/playbook.yml'\"), \") {  \\n        inventoryPath(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'/ansible/hosts'\"), \")  \\n        ansibleName(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'Ansible2.0'\"), \")  \\n        credentialsId(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'vagrant-key'\"), \")  \\n        colorizedOutput(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \")  \\n      }  \\n\\n    }  \\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"deploying-vertx-app-using-ansible\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#deploying-vertx-app-using-ansible\"\n  })), \"Deploying Vert.x app using Ansible\"), mdx(\"p\", null, \"An An\\xADsi\\xADble Play\\xADbook re\\xADsults quite con\\xADve\\xADnient to de\\xADploy a Vert.x ap\\xADpli\\xADca\\xADtion to a num\\xADber of hosts while still tak\\xADing con\\xADsid\\xADer\\xADa\\xADtions for each of them. Below is a sam\\xADple play\\xADbook that de\\xADploys the re\\xADspec\\xADtive ap\\xADpli\\xADca\\xADtion to each of the hosts de\\xADscribed in an \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"in\\xADven\\xADtory\"), \" file. The play\\xADbook com\\xADprises the fol\\xADlow\\xADing tasks and takes the listed con\\xADsid\\xADer\\xADa\\xADtions:\"), mdx(\"p\", null, \"1) A task that tar\\xADgets only hosts with a data\\xADbase.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The tar\\xADget hosts is spec\\xADi\\xADfied with the name of the host (or hosts group) de\\xADfined in the in\\xADven\\xADtory file.\")), mdx(\"p\", null, \"2) Ac\\xADtual ap\\xADpli\\xADca\\xADtion de\\xADploy\\xADment task. Here, sev\\xADeral con\\xADsid\\xADer\\xADa\\xADtions are done:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The ap\\xADpli\\xADca\\xADtion may re\\xADquire that only one host is up\\xADdated at the time.\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"This can be achieved with the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"serial\"), \" op\\xADtion, while the order of the de\\xADploy\\xADment to hosts can be en\\xADforced in the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"hosts\"), \" op\\xADtion.\")), mdx(Alert, {\n    info: true,\n    title: \"Host processing order\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Even though we could have de\\xADclared \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"all\"), \" hosts, An\\xADsi\\xADble does not pro\\xADvide an ex\\xADplicit way to spec\\xADify the order.\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Java is a sys\\xADtem re\\xADquire\\xADment for our Vert.x ap\\xADpli\\xADca\\xADtions.\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"Be\\xADsides in\\xADstalling it (keep read\\xADing), we need to de\\xADclare the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JAVA_HOME\"), \" en\\xADvi\\xADron\\xADment vari\\xADable.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A de\\xADploy\\xADment may just rep\\xADre\\xADsent an up\\xADdate to an al\\xADready run\\xADning ap\\xADpli\\xADca\\xADtion (\", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Con\\xADtin\\xADu\\xADous De\\xADploy\\xADment\"), \"), hence it is con\\xADve\\xADnient to stop the pre\\xADvi\\xADous ap\\xADpli\\xADca\\xADtion in\\xADside the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pre_tasks\"), \" and take post-\\u200Bdeployment ac\\xADtions in the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"post_tasks\"), \".\\nVert.x ships with the con\\xADve\\xADnient \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"start\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"stop\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"list\"), \" com\\xADmands that re\\xADsult very help\\xADful here. We can use the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"list\"), \" com\\xADmand and ex\\xADtract (using regex) the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"id\"), \" of the run\\xADning ap\\xADpli\\xADca\\xADtion of its out\\xADput to stop it be\\xADfore de\\xADploy\\xADing a new ver\\xADsion.\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"If our so\\xADlu\\xADtion in\\xADcludes a load bal\\xADancer or proxy, we could deal with them at this step as de\\xADscribed in An\\xADsi\\xADble\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://docs.ansible.com/ansible/playbooks_delegation.html\"\n  }), \"best prac\\xADtices\"), \" for rolling up\\xADdates\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Call to a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"role\"), \" that makes the ac\\xADtual ap\\xADpli\\xADca\\xADtion de\\xADploy\\xADment. The Jenk\\xADins An\\xADsi\\xADble Plu\\xADgin in\\xADcludes, be\\xADtween oth\\xADers, a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"WORKSPACE\"), \" en\\xADvi\\xADron\\xADment vari\\xADable, which may re\\xADsult very help\\xADful in the fol\\xADlow\\xADing tasks, as shown later.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), \"  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# 1) Special task for the service with a db\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"hosts:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"audit-service\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"remote_user:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vagrant\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"become:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"yes\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"roles:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"db-setup\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# 2) Common tasks for all hosts\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"hosts:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"quote-generator:portfolio-service:compulsive-traders:audit-service:trader-dashboard\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"remote_user:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vagrant\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"become:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"yes\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"serial:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"environment:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"JAVA_HOME:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/lib/jvm/jre-1.8.0-openjdk/\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"pre_tasks:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Check\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exists\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"in\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"target\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"already\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"stat:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path=/usr/share/vertx_app/app-fatjar.jar\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"register:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"st\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"List\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"applications\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"command:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"list\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"register:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running_app_list\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"when:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"st.stat.exists\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"==\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"True\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Stop\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"it\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"is\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"already\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"(avoid\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"multiple\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"instances)\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"command:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"stop\"), \" {\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}{{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"item\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"regex_replace('^(?P<V_id>.\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-.\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-.\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \".\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \".\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"12\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \")\\\\t.*'\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'\\\\\\\\g<V_id>'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \")\"), \" }}{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"with_items:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"{% raw %}\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-template-variable\"\n  }), \"{{ running_app_list.stdout_lines|default([]) }}\"), \"{% endraw %}\\\"\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"when:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"st.stat.exists\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"==\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"True\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"and\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"(item\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"regex_replace('.*\\\\t(.*)$',\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'\\\\\\\\1'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"match('.*/app-fatjar.jar$'))\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# Main role\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"roles:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"role:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vertx-app-deployment\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"jenkins_job_workspace:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-template-variable\"\n  }), \"{{ lookup('env', 'WORKSPACE') }}\"), \"\\\"\"), \" }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"post_tasks:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"List\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"again\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"applications\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"command:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"list\"), \"\\n\")), mdx(\"p\", null, \"Once we took care of the ac\\xADtions shown be\\xADfore, the re\\xADmain\\xADing tasks (in\\xADcluded in the main de\\xADploy\\xADment role) re\\xADduce to the fol\\xADlow\\xADing:\"), mdx(\"p\", null, \"1) Pre\\xADpare the tar\\xADget ma\\xADchine with the proper en\\xADvi\\xADron\\xADment to run our ap\\xADpli\\xADca\\xADtion. This in\\xADcludes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Set up Java (pretty con\\xADve\\xADnient to do it through a pack\\xADage man\\xADager).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Copy the Vert.x ap\\xADpli\\xADca\\xADtion pack\\xADage to the ap\\xADpro\\xADpri\\xADate folder (quite sim\\xADple using a fat jar). The ac\\xADtual name and lo\\xADca\\xADtion of the jar pack\\xADage in the Jenk\\xADins en\\xADvi\\xADron\\xADment can be de\\xADfined using host-\\u200Bspecific \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://docs.ansible.com/ansible/playbooks_delegation.html\"\n  }), \"vari\\xADables\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In case nec\\xADes\\xADsary, copy the re\\xADquired con\\xADfig files.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Install\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1.8\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"and\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"some\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"basic\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dependencies\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"yum:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"name={%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}{{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"item\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"}}{%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"state=present\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"with_items:\"), \"\\n   \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java-1.8.0-openjdk\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Ensure\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dir\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exists\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"file:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path=/usr/share/vertx_app/\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"recurse=yes\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"state=directory\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0744\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Copy\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"application\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"package\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"copy:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"src={%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}{{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app_jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"}}{%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dest=/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0755\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Ensure\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dir\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exists\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"file:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path=/etc/vertx_app/\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"recurse=yes\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"state=directory\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0744\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Copy\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"application\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"file\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"needed\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"copy:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"src={%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}{{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app_config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"}}{%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dest=/etc/vertx_app/config.json\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0755\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"when:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app_config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"is\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"defined\"), \"\\n\")), mdx(\"p\", null, \"2) Run the ap\\xADpli\\xADca\\xADtion as a ser\\xADvice in the host\\xADing ma\\xADchine.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Make sure to ig\\xADnore the hang up sig\\xADnal with the help of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"nohup\"), \" com\\xADmand. Oth\\xADer\\xADwise, An\\xADsi\\xADble will be stuck at this step.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Run\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"application\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"as\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"a\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"service,\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"ignore\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"SIGHUP\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"signal\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"shell:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"nohup\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" {\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}{{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vertx_opts\"), \" }}{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"} \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"start\"), \" {\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}{{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"launch_params\"), \" }}{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"register:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"svc_run_out\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Print\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"run\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"output\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"debug:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"var=svc_run_out.stdout_lines\"), \"\\n\")), mdx(Alert, {\n    info: true,\n    title: \"Launching the Vert.x app\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This ex\\xADam\\xADple uses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start\"), \" com\\xADmand to launch the ap\\xADpli\\xADca\\xADtion as a ser\\xADvice. This method may re\\xADsult more com\\xADfort\\xADable than cre\\xADat\\xADing an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/blog/vert-x-3-init-d-script/\"\n  }), \"init.d script\"), \" or call\\xADing Vert.x from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/#running-at-the-command-line\"\n  }), \"com\\xADmand line\"), \", which would have re\\xADquired to in\\xADstall the Vert.x li\\xADbraries in an in\\xADde\\xADpen\\xADdent An\\xADsi\\xADble task.\")), mdx(\"p\", null, \"This de\\xADscribes all the con\\xADfig\\xADu\\xADra\\xADtion needed to be able to build from a repos\\xADi\\xADtory using Jenk\\xADins and de\\xADploy the re\\xADsults to our hosts with An\\xADsi\\xADble.\"), mdx(\"h2\", {\n    \"id\": \"sample-sources-and-demo\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sample-sources-and-demo\"\n  })), \"Sample sources and demo\"), mdx(\"p\", null, \"The sam\\xADple con\\xADfig\\xADu\\xADra\\xADtions pre\\xADsented be\\xADfore are part of a com\\xADplete demo fo\\xADcused on the Vert.x mi\\xADcroser\\xADvices \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx-lab.dynamis-technologies.com/\"\n  }), \"work\\xADshop\"), \" to ex\\xADem\\xADplify a basic Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery sce\\xADnario. This set up is avail\\xADable in a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ricardohmon/vertx-ansible\"\n  }), \"repos\\xADi\\xADtory\"), \" and con\\xADtains, in ad\\xADdi\\xADtion, a pre-\\u200Bconfigured Jenkins-\\u200Bbased demo ready to host the build job de\\xADscribed the pre\\xADvi\\xADous sec\\xADtions. The demo sce\\xADnario re\\xADquires Va\\xADgrant and Vir\\xADtu\\xADal\\xADbox to be launched.\"), mdx(\"h3\", {\n    \"id\": \"launch-instructions\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#launch-instructions\"\n  })), \"Launch instructions\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Clone or down\\xADload this repos\\xADi\\xADtory, and launch the demo using \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vagrant up\"))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-awk\"\n  }), \"git clone https:\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"//gi\"), \"thub.com\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/ricardohmon/\"), \"vertx-ansible.git\\ncd demo\\nvagrant up\\n\")), mdx(\"p\", null, \"This com\\xADmand will launch a vir\\xADtual ma\\xADchine host\\xADing Jenk\\xADins with the re\\xADquired plu\\xADg\\xADins in\\xADstalled (tools names needed) and also launch five ad\\xADdi\\xADtional VMs that will host the mi\\xADcroser\\xADvices de\\xADployed by Jenk\\xADins.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cre\\xADate a Jenk\\xADins freestyle build job using the DSL job script (seed job) found in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"deployment-jobs/microservices_workshop_dsl.groovy\"), \" and build it.\")), mdx(Alert, {\n    info: true,\n    title: \"Tool configuration assumption\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The DSL Job as\\xADsumes the fol\\xADlow\\xADing tools (with names) have been con\\xADfig\\xADured in Jenk\\xADins: Java 8 (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JDK8\"), \"), Maven (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"M3.3.9\"), \"), An\\xADsi\\xADble (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Ansible2.0\"), \")\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"After build\\xADing the seed job, a new job (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vertx-microservices-workshop-job\"), \") will be cre\\xADated, which will be in charge of pulling re\\xADcent changes of the project, build\\xADing it, and de\\xADploy\\xADing it.\")), mdx(\"h3\", {\n    \"id\": \"demo\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#demo\"\n  })), \"Demo\"), mdx(\"p\", null, \"Watch the pre\\xADvi\\xADous demo in ac\\xADtion in the fol\\xADlow\\xADing screen\\xADcast:\"), mdx(\"div\", {\n    className: \"youtube-embed\"\n  }, mdx(\"iframe\", {\n    src: \"https://www.youtube.com/embed/GQd_Rfeu6Yo\",\n    frameBorder: \"0\",\n    allowFullScreen: true\n  })), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery ap\\xADproach is a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"must\"), \" in mod\\xADern soft\\xADware de\\xADvel\\xADop\\xADment life\\xADcy\\xADcles (in\\xADclud\\xADing Vert.x-\\u200Bbased ap\\xADpli\\xADca\\xADtions) and a step fur\\xADther to\\xADwards adopt\\xADing a De\\xADvOps cul\\xADture. There are a num\\xADber of tools that en\\xADable it and one ex\\xADam\\xADple is the com\\xADbi\\xADna\\xADtion of Jenk\\xADins + An\\xADsi\\xADble de\\xADscribed in this post.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"While Jenk\\xADins of\\xADfers the pos\\xADsi\\xADbil\\xADity to in\\xADte\\xADgrate re\\xADcent changes per\\xADceived in a code\\xADbase and build runnable ar\\xADti\\xADfacts, An\\xADsi\\xADble can help to de\\xADploy them to host\\xADing en\\xADvi\\xADron\\xADments. The usage of both tools can be cou\\xADpled eas\\xADily with the help of the Job DSL plug\\xADin, a fea\\xADture of Jenk\\xADins that al\\xADlows de\\xADscrib\\xADing a build job using a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"domain-\\u200Bspecific lan\\xADguage\"), \", which can help to in\\xADte\\xADgrate ad\\xADdi\\xADtional steps and tools to a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"CD\"), \" pipeline.\"), mdx(\"p\", null, \"Fur\\xADther en\\xADhance\\xADments can be done to this basic pipeline, such as, in\\xADte\\xADgrat\\xADing the re\\xADcent \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin\"\n  }), \"Pipeline plugin\"), \", a fea\\xADture that al\\xADlows a bet\\xADter or\\xADches\\xADtra\\xADtion of CD stages; in\\xADclu\\xADsion of no\\xADti\\xADfi\\xADca\\xADtion and alert\\xADing ser\\xADvices; and, ul\\xADti\\xADmately a zero-\\u200Bdowntime de\\xADploy\\xADment ap\\xADproach, which could be achieved with the help of a proxy; plus, tons of op\\xADtions avail\\xADable trough Jenk\\xADins plu\\xADg\\xADins.\"), mdx(\"p\", null, \"Thanks for read\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>This blog entry de­scribes an ap­proach to adopt <em>Con­tin­u­ous De­liv­ery</em> for Vert.x ap­pli­ca­tions using Jenk­ins and An­si­ble by tak­ing ad­van­tage of the Jenk­ins Job DSL and An­si­ble plu­g­ins.</p><h2 id=\"preamble\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#preamble\"></a>Preamble</h2><p>This post was writ­ten in con­text of the project ti­tled “<a href=\"https://summerofcode.withgoogle.com/projects/#4858492141699072\">De­vOps tool­ing for Vert.x ap­pli­ca­tions</a>”, one of the projects at Vert.x tak­ing place dur­ing the 2016 edi­tion of <a href=\"https://summerofcode.withgoogle.com/about/\">Google Sum­mer of Code</a>, a pro­gram that aims to bring stu­dents to­gether with open source or­ga­ni­za­tions in order to help them to gain ex­po­sure to soft­ware de­vel­op­ment prac­tices and real-​world chal­lenges.</p><h2 id=\"introduction\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#introduction\"></a>Introduction</h2><p>Sys­tem con­fig­u­ra­tion man­age­ment (e.g., An­si­ble) has been re­ally hype in the re­cent years and there is a strong rea­son for that.\nCon­fig­u­ra­tion man­age­ment fa­cil­i­tates con­fig­ur­ing a new en­vi­ron­ment fol­low­ing a fixed <em>recipe</em> or slightly vary­ing it with the help of pa­ra­me­ters. This has not only the ad­van­tage of being able to do it more fre­quently but re­duces the chance of er­rors than doing it man­u­ally.<br/>\n<!-- -->Be­yond that, com­bin­ing it with <em>Con­tin­u­ous In­te­gra­tion</em> tools (e.g., Jenk­ins) al­lows mak­ing a de­ploy­ment as soon as a new code­base ver­sion is avail­able, which rep­re­sents the main build­ing block of a <em>Con­tin­u­ous De­liv­ery</em> pipeline, one of the ob­jec­tives of em­brac­ing a De­vOps cul­ture.</p><p>Given that Vert.x is a frame­work that con­sists in a few li­braries which can be shipped within a sin­gle <em>fat jar</em>, adopt­ing a De­vOps cul­ture while de­vel­op­ing a Vert.x-​based ap­pli­ca­tion is straight­for­ward.</p><h2 id=\"overview\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#overview\"></a>Overview</h2><p>As seen in the di­a­gram below, this post de­scribes a method to de­fine a Jenk­ins build job which will react to changes in a code repos­i­tory. After suc­ces­fully build­ing the project, the job will ex­e­cute an An­si­ble <em>play­book</em> to de­ploy the new ap­pli­ca­tion ver­sion to the hosts spec­i­fied within the An­si­ble con­fig­u­ra­tion.</p><p><img src=\"/images/blog/continuous-delivery-jenkins-ansible/ansible-jenkins-overview.svg\" alt=\"Overview of the continous delivery process\"/></p><h2 id=\"creating-a-jenkins-build-job-using-job-dsl\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#creating-a-jenkins-build-job-using-job-dsl\"></a>Creating a Jenkins build job using Job DSL</h2><p>Jenk­ins has cre­ated a con­ve­nient way to de­fine build jobs using a DSL. While this op­tion avoids the has­sle of con­fig­ur­ing build jobs man­u­ally, it sup­ports all fea­tures of the reg­u­lar in­ter­face through its <a href=\"https://jenkinsci.github.io/job-dsl-plugin/\">API</a>. It is pos­si­ble to use An­si­ble to­gether with Jenk­ins with the help of the An­si­ble <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Ansible+Plugin/\">plugin</a>, whose in­struc­tions are also in­cluded in the Job DSL <a href=\"https://github.com/jenkinsci/ansible-plugin/blob/master/README.md\">API</a>. Al­ter­na­tively to the Job DSL Plu­gin, An­si­ble can be used in­side the de­f­i­n­i­tion of Jenk­ins Pipeline, one of tool’s most re­cent fea­tures.</p><p>Below is a sam­ple job de­f­i­n­i­tion which can be used after cre­at­ing a <em>freestyle</em> job (seed job) and adding a new build step with the DSL script. In the script, there are a few things to no­tice:</p><ul><li>A name for the job cre­ated by the seed job is given.</li><li>Spe­cific ver­sions of JDK, Maven, and An­si­ble (avail­able in the en­vi­ron­ment) are used.</li><li>Git is se­lected as the SCM plat­form and the tar­get repos­i­tory is de­fined. Also, the build job is trig­gered ac­cord­ing to a spe­cific in­ter­val.</li><li>The Maven <em>pack­age</em> goal is in­voked, which is in­structed to pack­age the ap­pli­ca­tion into a fat jar.</li><li>Lastly, An­si­ble is used to call a play­book avail­able in the filesys­tem. The app will be de­ployed to the de­fined tar­get hosts and the cre­den­tials (con­fig­ured in Jenk­ins) will be used to log into the tar­get hosts. Ad­di­tion­ally, en­abling the <code>colorizedOutput</code> op­tion will re­sult in a friend­lier for­mat­ting of the re­sults in the con­sole out­put. The con­tents of this play­book will be ad­dressed in the next sec­tion.</li></ul><pre><code class=\"hljs language-groovy\">job(<span class=\"hljs-string\">&#x27;vertx-microservices-workshop-job&#x27;</span>) {\n    jdk(<span class=\"hljs-string\">&#x27;JDK8&#x27;</span>)\n    scm {\n        git(<span class=\"hljs-string\">&#x27;git://github.com/ricardohmon/vertx-microservices-workshop.git&#x27;</span>)\n    }\n    triggers {\n        scm(<span class=\"hljs-string\">&#x27;*/15 * * * *&#x27;</span>)\n    }\n    steps {\n\n      <span class=\"hljs-keyword\">def</span> mvnInst = <span class=\"hljs-string\">&#x27;M3.3.9&#x27;</span>  \n      maven {  \n        goals(<span class=\"hljs-string\">&#x27;package&#x27;</span>)  \n        mavenInstallation(mvnInst)  \n      }  \n      ansiblePlaybook(<span class=\"hljs-string\">&#x27;/ansible/playbook.yml&#x27;</span>) {  \n        inventoryPath(<span class=\"hljs-string\">&#x27;/ansible/hosts&#x27;</span>)  \n        ansibleName(<span class=\"hljs-string\">&#x27;Ansible2.0&#x27;</span>)  \n        credentialsId(<span class=\"hljs-string\">&#x27;vagrant-key&#x27;</span>)  \n        colorizedOutput(<span class=\"hljs-literal\">true</span>)  \n      }  \n\n    }  \n}\n</code></pre><h2 id=\"deploying-vertx-app-using-ansible\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#deploying-vertx-app-using-ansible\"></a>Deploying Vert.x app using Ansible</h2><p>An An­si­ble Play­book re­sults quite con­ve­nient to de­ploy a Vert.x ap­pli­ca­tion to a num­ber of hosts while still tak­ing con­sid­er­a­tions for each of them. Below is a sam­ple play­book that de­ploys the re­spec­tive ap­pli­ca­tion to each of the hosts de­scribed in an <em>in­ven­tory</em> file. The play­book com­prises the fol­low­ing tasks and takes the listed con­sid­er­a­tions:</p><p>1) A task that tar­gets only hosts with a data­base.</p><ul><li>The tar­get hosts is spec­i­fied with the name of the host (or hosts group) de­fined in the in­ven­tory file.</li></ul><p>2) Ac­tual ap­pli­ca­tion de­ploy­ment task. Here, sev­eral con­sid­er­a­tions are done:</p><ul><li>The ap­pli­ca­tion may re­quire that only one host is up­dated at the time.<br/>This can be achieved with the <code>serial</code> op­tion, while the order of the de­ploy­ment to hosts can be en­forced in the <code>hosts</code> op­tion.</li></ul><div class=\"alert info\"><div class=\"alert-title\">Host processing order</div><p>Even though we could have de­clared <code>all</code> hosts, An­si­ble does not pro­vide an ex­plicit way to spec­ify the order.</p></div><ul><li>Java is a sys­tem re­quire­ment for our Vert.x ap­pli­ca­tions.<br/>Be­sides in­stalling it (keep read­ing), we need to de­clare the <code>JAVA_HOME</code> en­vi­ron­ment vari­able.</li><li>A de­ploy­ment may just rep­re­sent an up­date to an al­ready run­ning ap­pli­ca­tion (<em>Con­tin­u­ous De­ploy­ment</em>), hence it is con­ve­nient to stop the pre­vi­ous ap­pli­ca­tion in­side the <code>pre_tasks</code> and take post-​deployment ac­tions in the <code>post_tasks</code>.\nVert.x ships with the con­ve­nient <code>start</code>/<code>stop</code>/<code>list</code> com­mands that re­sult very help­ful here. We can use the <code>list</code> com­mand and ex­tract (using regex) the <code>id</code> of the run­ning ap­pli­ca­tion of its out­put to stop it be­fore de­ploy­ing a new ver­sion.</li></ul><div class=\"alert info\"><p>If our so­lu­tion in­cludes a load bal­ancer or proxy, we could deal with them at this step as de­scribed in An­si­ble’s <a href=\"http://docs.ansible.com/ansible/playbooks_delegation.html\">best prac­tices</a> for rolling up­dates</p></div><ul><li>Call to a <code>role</code> that makes the ac­tual ap­pli­ca­tion de­ploy­ment. The Jenk­ins An­si­ble Plu­gin in­cludes, be­tween oth­ers, a <code>WORKSPACE</code> en­vi­ron­ment vari­able, which may re­sult very help­ful in the fol­low­ing tasks, as shown later.</li></ul><pre><code class=\"hljs language-yaml\">  <span class=\"hljs-comment\"># 1) Special task for the service with a db</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">audit-service</span>\n  <span class=\"hljs-attr\">remote_user:</span> <span class=\"hljs-string\">vagrant</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db-setup</span>\n\n  <span class=\"hljs-comment\"># 2) Common tasks for all hosts</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">quote-generator:portfolio-service:compulsive-traders:audit-service:trader-dashboard</span>\n  <span class=\"hljs-attr\">remote_user:</span> <span class=\"hljs-string\">vagrant</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">serial:</span> <span class=\"hljs-number\">1</span>\n  <span class=\"hljs-attr\">environment:</span>\n    <span class=\"hljs-attr\">JAVA_HOME:</span> <span class=\"hljs-string\">/usr/lib/jvm/jre-1.8.0-openjdk/</span>\n\n  <span class=\"hljs-attr\">pre_tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Check</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">jar</span> <span class=\"hljs-string\">exists</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">target</span> <span class=\"hljs-string\">already</span>\n    <span class=\"hljs-attr\">stat:</span> <span class=\"hljs-string\">path=/usr/share/vertx_app/app-fatjar.jar</span>\n    <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">st</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">List</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">applications</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">java</span> <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">list</span>\n    <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">running_app_list</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">st.stat.exists</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-literal\">True</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Stop</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">it</span> <span class=\"hljs-string\">is</span> <span class=\"hljs-string\">already</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">(avoid</span> <span class=\"hljs-string\">multiple</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">instances)</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">java</span> <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">stop</span> {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%</span>}{{ <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">regex_replace(&#x27;^(?P&lt;V_id&gt;.</span>[<span class=\"hljs-number\">8</span>]<span class=\"hljs-string\">-.</span>[<span class=\"hljs-number\">4</span>]<span class=\"hljs-string\">-.</span>[<span class=\"hljs-number\">4</span>]<span class=\"hljs-string\">.</span>[<span class=\"hljs-number\">4</span>]<span class=\"hljs-string\">.</span>[<span class=\"hljs-number\">12</span>]<span class=\"hljs-string\">)\\t.*&#x27;</span>, <span class=\"hljs-string\">&#x27;\\\\g&lt;V_id&gt;&#x27;</span><span class=\"hljs-string\">)</span> }}{<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%</span>}\n    <span class=\"hljs-attr\">with_items:</span> <span class=\"hljs-string\">&quot;{% raw %}<span class=\"hljs-template-variable\">{{ running_app_list.stdout_lines|default([]) }}</span>{% endraw %}&quot;</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">st.stat.exists</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-literal\">True</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">(item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">regex_replace(&#x27;.*\\t(.*)$&#x27;,</span> <span class=\"hljs-string\">&#x27;\\\\1&#x27;</span><span class=\"hljs-string\">)</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">match(&#x27;.*/app-fatjar.jar$&#x27;))</span>\n\n  <span class=\"hljs-comment\"># Main role</span>\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> { <span class=\"hljs-attr\">role:</span> <span class=\"hljs-string\">vertx-app-deployment</span>, <span class=\"hljs-attr\">jenkins_job_workspace:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ lookup(&#x27;env&#x27;, &#x27;WORKSPACE&#x27;) }}</span>&quot;</span> }\n\n  <span class=\"hljs-attr\">post_tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">List</span> <span class=\"hljs-string\">again</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">applications</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">java</span> <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">list</span>\n</code></pre><p>Once we took care of the ac­tions shown be­fore, the re­main­ing tasks (in­cluded in the main de­ploy­ment role) re­duce to the fol­low­ing:</p><p>1) Pre­pare the tar­get ma­chine with the proper en­vi­ron­ment to run our ap­pli­ca­tion. This in­cludes:</p><ul><li>Set up Java (pretty con­ve­nient to do it through a pack­age man­ager).</li><li>Copy the Vert.x ap­pli­ca­tion pack­age to the ap­pro­pri­ate folder (quite sim­ple using a fat jar). The ac­tual name and lo­ca­tion of the jar pack­age in the Jenk­ins en­vi­ron­ment can be de­fined using host-​specific <a href=\"http://docs.ansible.com/ansible/playbooks_delegation.html\">vari­ables</a>.</li><li>In case nec­es­sary, copy the re­quired con­fig files.</li></ul><pre><code class=\"hljs language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">Java</span> <span class=\"hljs-number\">1.8</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">some</span> <span class=\"hljs-string\">basic</span> <span class=\"hljs-string\">dependencies</span>\n  <span class=\"hljs-attr\">yum:</span> <span class=\"hljs-string\">name={%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%}{{</span> <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">}}{%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%}</span> <span class=\"hljs-string\">state=present</span>\n  <span class=\"hljs-attr\">with_items:</span>\n   <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">java-1.8.0-openjdk</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Ensure</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">dir</span> <span class=\"hljs-string\">exists</span>\n  <span class=\"hljs-attr\">file:</span> <span class=\"hljs-string\">path=/usr/share/vertx_app/</span> <span class=\"hljs-string\">recurse=yes</span> <span class=\"hljs-string\">state=directory</span> <span class=\"hljs-string\">mode=0744</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copy</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">application</span> <span class=\"hljs-string\">jar</span> <span class=\"hljs-string\">package</span>\n  <span class=\"hljs-attr\">copy:</span> <span class=\"hljs-string\">src={%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%}{{</span> <span class=\"hljs-string\">app_jar</span> <span class=\"hljs-string\">}}{%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%}</span> <span class=\"hljs-string\">dest=/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">mode=0755</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Ensure</span> <span class=\"hljs-string\">config</span> <span class=\"hljs-string\">dir</span> <span class=\"hljs-string\">exists</span>\n  <span class=\"hljs-attr\">file:</span> <span class=\"hljs-string\">path=/etc/vertx_app/</span> <span class=\"hljs-string\">recurse=yes</span> <span class=\"hljs-string\">state=directory</span> <span class=\"hljs-string\">mode=0744</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copy</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">application</span> <span class=\"hljs-string\">config</span> <span class=\"hljs-string\">file</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">needed</span>\n  <span class=\"hljs-attr\">copy:</span> <span class=\"hljs-string\">src={%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%}{{</span> <span class=\"hljs-string\">app_config</span> <span class=\"hljs-string\">}}{%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%}</span> <span class=\"hljs-string\">dest=/etc/vertx_app/config.json</span> <span class=\"hljs-string\">mode=0755</span>\n  <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">app_config</span> <span class=\"hljs-string\">is</span> <span class=\"hljs-string\">defined</span>\n</code></pre><p>2) Run the ap­pli­ca­tion as a ser­vice in the host­ing ma­chine.</p><ul><li>Make sure to ig­nore the hang up sig­nal with the help of <code>nohup</code> com­mand. Oth­er­wise, An­si­ble will be stuck at this step.</li></ul><pre><code class=\"hljs language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Run</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">application</span> <span class=\"hljs-string\">as</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-string\">service,</span> <span class=\"hljs-string\">ignore</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">SIGHUP</span> <span class=\"hljs-string\">signal</span>\n  <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">nohup</span> <span class=\"hljs-string\">java</span> {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%</span>}{{ <span class=\"hljs-string\">vertx_opts</span> }}{<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%</span>} <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">start</span> {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%</span>}{{ <span class=\"hljs-string\">launch_params</span> }}{<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%</span>}\n  <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">svc_run_out</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Print</span> <span class=\"hljs-string\">run</span> <span class=\"hljs-string\">output</span>\n  <span class=\"hljs-attr\">debug:</span> <span class=\"hljs-string\">var=svc_run_out.stdout_lines</span>\n</code></pre><div class=\"alert info\"><div class=\"alert-title\">Launching the Vert.x app</div><p>This ex­am­ple uses the <code>start</code> com­mand to launch the ap­pli­ca­tion as a ser­vice. This method may re­sult more com­fort­able than cre­at­ing an <a href=\"http://vertx.io/blog/vert-x-3-init-d-script/\">init.d script</a> or call­ing Vert.x from <a href=\"https://github.com/vert-x3/vertx-examples/#running-at-the-command-line\">com­mand line</a>, which would have re­quired to in­stall the Vert.x li­braries in an in­de­pen­dent An­si­ble task.</p></div><p>This de­scribes all the con­fig­u­ra­tion needed to be able to build from a repos­i­tory using Jenk­ins and de­ploy the re­sults to our hosts with An­si­ble.</p><h2 id=\"sample-sources-and-demo\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sample-sources-and-demo\"></a>Sample sources and demo</h2><p>The sam­ple con­fig­u­ra­tions pre­sented be­fore are part of a com­plete demo fo­cused on the Vert.x mi­croser­vices <a href=\"http://vertx-lab.dynamis-technologies.com/\">work­shop</a> to ex­em­plify a basic Con­tin­u­ous De­liv­ery sce­nario. This set up is avail­able in a <a href=\"https://github.com/ricardohmon/vertx-ansible\">repos­i­tory</a> and con­tains, in ad­di­tion, a pre-​configured Jenkins-​based demo ready to host the build job de­scribed the pre­vi­ous sec­tions. The demo sce­nario re­quires Va­grant and Vir­tu­al­box to be launched.</p><h3 id=\"launch-instructions\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#launch-instructions\"></a>Launch instructions</h3><ul><li>Clone or down­load this repos­i­tory, and launch the demo using <code>vagrant up</code></li></ul><pre><code class=\"hljs language-awk\">git clone https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/ricardohmon/</span>vertx-ansible.git\ncd demo\nvagrant up\n</code></pre><p>This com­mand will launch a vir­tual ma­chine host­ing Jenk­ins with the re­quired plu­g­ins in­stalled (tools names needed) and also launch five ad­di­tional VMs that will host the mi­croser­vices de­ployed by Jenk­ins.</p><ul><li>Cre­ate a Jenk­ins freestyle build job using the DSL job script (seed job) found in <code>deployment-jobs/microservices_workshop_dsl.groovy</code> and build it.</li></ul><div class=\"alert info\"><div class=\"alert-title\">Tool configuration assumption</div><p>The DSL Job as­sumes the fol­low­ing tools (with names) have been con­fig­ured in Jenk­ins: Java 8 (<code>JDK8</code>), Maven (<code>M3.3.9</code>), An­si­ble (<code>Ansible2.0</code>)</p></div><ul><li>After build­ing the seed job, a new job (<code>vertx-microservices-workshop-job</code>) will be cre­ated, which will be in charge of pulling re­cent changes of the project, build­ing it, and de­ploy­ing it.</li></ul><h3 id=\"demo\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#demo\"></a>Demo</h3><p>Watch the pre­vi­ous demo in ac­tion in the fol­low­ing screen­cast:</p><div class=\"youtube-embed\"><iframe src=\"https://www.youtube.com/embed/GQd_Rfeu6Yo\" frameBorder=\"0\" allowfullscreen=\"\"></iframe></div><h2 id=\"conclusion\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"></a>Conclusion</h2><p>Con­tin­u­ous De­liv­ery ap­proach is a <em>must</em> in mod­ern soft­ware de­vel­op­ment life­cy­cles (in­clud­ing Vert.x-​based ap­pli­ca­tions) and a step fur­ther to­wards adopt­ing a De­vOps cul­ture. There are a num­ber of tools that en­able it and one ex­am­ple is the com­bi­na­tion of Jenk­ins + An­si­ble de­scribed in this post.<br/>\n<!-- -->While Jenk­ins of­fers the pos­si­bil­ity to in­te­grate re­cent changes per­ceived in a code­base and build runnable ar­ti­facts, An­si­ble can help to de­ploy them to host­ing en­vi­ron­ments. The usage of both tools can be cou­pled eas­ily with the help of the Job DSL plug­in, a fea­ture of Jenk­ins that al­lows de­scrib­ing a build job using a <em>domain-​specific lan­guage</em>, which can help to in­te­grate ad­di­tional steps and tools to a <em>CD</em> pipeline.</p><p>Fur­ther en­hance­ments can be done to this basic pipeline, such as, in­te­grat­ing the re­cent <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin\">Pipeline plugin</a>, a fea­ture that al­lows a bet­ter or­ches­tra­tion of CD stages; in­clu­sion of no­ti­fi­ca­tion and alert­ing ser­vices; and, ul­ti­mately a zero-​downtime de­ploy­ment ap­proach, which could be achieved with the help of a proxy; plus, tons of op­tions avail­able trough Jenk­ins plu­g­ins.</p><p>Thanks for read­ing!</p>","scope":{}},"tfIdfTerms":[{"term":"job","tf":24},{"term":"jenkin","tf":21},{"term":"ansibl","tf":21},{"term":"applic","tf":19},{"term":"us","tf":19},{"term":"host","tf":19},{"term":"build","tf":16},{"term":"will","tf":11},{"term":"help","tf":10},{"term":"configur","tf":10},{"term":"deploi","tf":10},{"term":"dsl","tf":9},{"term":"deploy","tf":9},{"term":"describ","tf":8},{"term":"plugin","tf":8},{"term":"tool","tf":8},{"term":"environ","tf":7},{"term":"creat","tf":7},{"term":"result","tf":7},{"term":"demo","tf":7},{"term":"continu","tf":6},{"term":"new","tf":6},{"term":"follow","tf":6},{"term":"defin","tf":6},{"term":"playbook","tf":6}]},{"filename":"blog/2016-09-12-vert-x-3-3-3-is-released.mdx","date":"2016-09-12","slug":"vert-x-3-3-3-is-released","meta":{"title":"Vert.x 3.3.3 is released!","category":"releases","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"We have just released Vert.x 3.3.3, a bug fix release of Vert.x 3.3.x."},"readingTime":{"text":"1 min read","minutes":0.52,"time":31200.000000000004,"words":104},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We have just re\\xADleased Vert.x 3.3.3, a bug fix re\\xADlease of Vert.x 3.3.x.\"), mdx(\"p\", null, \"Since the re\\xADlease of Vert.x 3.3.2, quite a few bugs have been re\\xADported. We would like to thank you all for re\\xADport\\xADing these is\\xADsues.\"), mdx(\"p\", null, \"Vert.x 3.3.3 re\\xADlease notes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.3.3---Release-Notes\"\n  }), \"https://github.com/vert-\\u200Bx3/wiki/wiki/3.3.3-\\u200B\\u2014Release-Notes\"))), mdx(\"p\", null, \"The event bus client using the SockJS bridge are avail\\xADable from NPM, Bower and as a We\\xADb\\xADJar:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-eventbus-client\"\n  }), \"https://www.npmjs.com/pack\\xADage/vertx3-\\u200Beventbus-client\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"https://github.com/vert-\\u200Bx3/vertx-\\u200Bbus-bower\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.webjars.org/\"\n  }), \"http://www.we\\xADb\\xADjars.org/\"))), mdx(\"p\", null, \"Docker im\\xADages are also avail\\xADable on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/u/vertx/\"\n  }), \"Docker Hub\"), \". The Vert.x dis\\xADtri\\xADb\\xADu\\xADtion is also avail\\xADable from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sdkman.io/index.html\"\n  }), \"SD\\xADKMan\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://brew.sh/\"\n  }), \"Home\\xADBrew\"), \".\"), mdx(\"p\", null, \"The ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.3.3%22\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bintray.com/vertx/downloads/distribution/3.3.3/view\"\n  }), \"Bin\\xADtray\"), \".\"), mdx(\"p\", null, \"Happy cod\\xADing !\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>We have just re­leased Vert.x 3.3.3, a bug fix re­lease of Vert.x 3.3.x.</p><p>Since the re­lease of Vert.x 3.3.2, quite a few bugs have been re­ported. We would like to thank you all for re­port­ing these is­sues.</p><p>Vert.x 3.3.3 re­lease notes:</p><ul><li><a href=\"https://github.com/vert-x3/wiki/wiki/3.3.3---Release-Notes\">https://github.com/vert-​x3/wiki/wiki/3.3.3-​—Release-Notes</a></li></ul><p>The event bus client using the SockJS bridge are avail­able from NPM, Bower and as a We­b­Jar:</p><ul><li><a href=\"https://www.npmjs.com/package/vertx3-eventbus-client\">https://www.npmjs.com/pack­age/vertx3-​eventbus-client</a></li><li><a href=\"https://github.com/vert-x3/vertx-bus-bower\">https://github.com/vert-​x3/vertx-​bus-bower</a></li><li><a href=\"http://www.webjars.org/\">http://www.we­b­jars.org/</a></li></ul><p>Docker im­ages are also avail­able on the <a href=\"https://hub.docker.com/u/vertx/\">Docker Hub</a>. The Vert.x dis­tri­b­u­tion is also avail­able from <a href=\"http://sdkman.io/index.html\">SD­KMan</a> and <a href=\"http://brew.sh/\">Home­Brew</a>.</p><p>The ar­ti­facts have been de­ployed to <a href=\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.3.3%22\">Maven Cen­tral</a> and you can get the dis­tri­b­u­tion on <a href=\"https://bintray.com/vertx/downloads/distribution/3.3.3/view\">Bin­tray</a>.</p><p>Happy cod­ing !</p>","scope":{}},"tfIdfTerms":[{"term":"releas","tf":5},{"term":"http","tf":4},{"term":"com","tf":3},{"term":"avail","tf":3},{"term":"bug","tf":2},{"term":"report","tf":2},{"term":"note","tf":2},{"term":"github","tf":2},{"term":"x3","tf":2},{"term":"wiki","tf":2},{"term":"bu","tf":2},{"term":"client","tf":2},{"term":"bower","tf":2},{"term":"webjar","tf":2},{"term":"www","tf":2},{"term":"docker","tf":2},{"term":"distribut","tf":2},{"term":"just","tf":1},{"term":"fix","tf":1},{"term":"quit","tf":1},{"term":"thank","tf":1},{"term":"issu","tf":1},{"term":"event","tf":1},{"term":"us","tf":1},{"term":"sockj","tf":1}]},{"filename":"blog/2016-09-08-centralized-logging-for-vert-x-applications-using-the-elk-stack.mdx","date":"2016-09-08","slug":"centralized-logging-for-vert-x-applications-using-the-elk-stack","meta":{"title":"Centralized logging for Vert.x applications using the ELK stack","category":"guides","authors":[{"name":"Ricardo Hernandez","github_id":"ricardohmon"}],"summary":"This post entry describes a solution to achieve centralized logging of Vert.x applications using the ELK stack (Logstash, Elasticsearch, and Kibana)."},"readingTime":{"text":"11 min read","minutes":10.45,"time":627000,"words":2090},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This post entry de\\xADscribes a so\\xADlu\\xADtion to achieve cen\\xADtral\\xADized log\\xADging of Vert.x ap\\xADpli\\xADca\\xADtions using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.elastic.co/webinars/introduction-elk-stack\"\n  }), \"ELK stack\"), \", a set of tools in\\xADclud\\xADing Logstash, Elas\\xADtic\\xADsearch, and Kibana that are well known to work to\\xADgether seam\\xADlessly.\"), mdx(\"h2\", {\n    \"id\": \"preamble\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#preamble\"\n  })), \"Preamble\"), mdx(\"p\", null, \"This post was writ\\xADten in con\\xADtext of the project ti\\xADtled \\u201C\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://summerofcode.withgoogle.com/projects/#4858492141699072\"\n  }), \"De\\xADvOps tool\\xADing for Vert.x ap\\xADpli\\xADca\\xADtions\"), \"\\u201D, one of the Vert.x projects tak\\xADing place dur\\xADing the 2016 edi\\xADtion of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://summerofcode.withgoogle.com/about/\"\n  }), \"Google Sum\\xADmer of Code\"), \", a pro\\xADgram that aims to bring to\\xADgether stu\\xADdents with open source or\\xADga\\xADni\\xADza\\xADtions, in order to help them to gain ex\\xADpo\\xADsure to soft\\xADware de\\xADvel\\xADop\\xADment prac\\xADtices and real-\\u200Bworld chal\\xADlenges.\"), mdx(\"h2\", {\n    \"id\": \"introduction\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#introduction\"\n  })), \"Introduction\"), mdx(\"p\", null, \"Cen\\xADtral\\xADized log\\xADging is an im\\xADpor\\xADtant topic while build\\xADing a Mi\\xADcroser\\xADvices ar\\xADchi\\xADtec\\xADture and it is a step for\\xADward to adopt\\xADing the De\\xADvOps cul\\xADture. Hav\\xADing an over\\xADall so\\xADlu\\xADtion par\\xADti\\xADtioned into a set of ser\\xADvices dis\\xADtrib\\xADuted across the In\\xADter\\xADnet can rep\\xADre\\xADsent a chal\\xADlenge when try\\xADing to mon\\xADi\\xADtor the log out\\xADput of each of them, hence, a tool that helps to ac\\xADcom\\xADplish this re\\xADsults very help\\xADful.\"), mdx(\"h2\", {\n    \"id\": \"overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#overview\"\n  })), \"Overview\"), mdx(\"p\", null, \"As shown in the di\\xADa\\xADgram below, the gen\\xADeral cen\\xADtral\\xADized log\\xADging so\\xADlu\\xADtion com\\xADprises two main el\\xADe\\xADments: the ap\\xADpli\\xADca\\xADtion server, which runs our Vert.x ap\\xADpli\\xADca\\xADtion; and a sep\\xADa\\xADrate server, host\\xADing the ELK stack. Both el\\xADe\\xADments are linked by File\\xADbeat, a highly con\\xADfig\\xADurable tool ca\\xADpa\\xADble of ship\\xADping our ap\\xADpli\\xADca\\xADtion logs to the Logstash in\\xADstance, i.e., our gate\\xADway to the ELK stack.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/centralized-logging-using-elk/elk-overview.svg\",\n    \"alt\": \"Overview of centralized logging with ELK\"\n  }))), mdx(\"h2\", {\n    \"id\": \"app-logging-configuration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#app-logging-configuration\"\n  })), \"App logging configuration\"), mdx(\"p\", null, \"The ap\\xADproach de\\xADscribed here is based on a File\\xADbeat + Logstash con\\xADfig\\xADu\\xADra\\xADtion, that means first we need to make sure our app logs to a file, whose records will be shipped to Logstash by File\\xADbeat. Luck\\xADily, Vert.x pro\\xADvides the means to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-core/java/#_logging\"\n  }), \"con\\xADfig\\xADure\"), \" al\\xADter\\xADna\\xADtive log\\xADging frame\\xADworks (e.g., Log4j, Log4j2 and SLF4J) be\\xADsides the de\\xADfault JUL log\\xADging. How\\xADever, we can use File\\xADbeat in\\xADde\\xADpen\\xADdently of the log\\xADging frame\\xADwork cho\\xADsen.\"), mdx(\"h3\", {\n    \"id\": \"log4j-logging\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#log4j-logging\"\n  })), \"Log4j Logging\"), mdx(\"p\", null, \"The demo that ac\\xADcom\\xADpa\\xADnies this post re\\xADlies on Log4j2 as the log\\xADging frame\\xADwork. We in\\xADstructed Vert.x to use this frame\\xADwork fol\\xADlow\\xADing the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-core/java/#_logging\"\n  }), \"guide\\xADlines\"), \" and we made sure our log\\xADging calls are made asyn\\xADchro\\xADnous, since we don\\u2019t want them to block our ap\\xADpli\\xADca\\xADtion. For this pur\\xADpose, we opted for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncAppender\"), \" and this was in\\xADcluded in the Log4J con\\xADfig\\xADu\\xADra\\xADtion to\\xADgether with the log out\\xADput for\\xADmat de\\xADscribed in a XML con\\xADfig\\xADu\\xADra\\xADtion avail\\xADable in the ap\\xADpli\\xADca\\xADtion\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Re\\xADsource\"), \" folder.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Configuration\"), \">\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Appenders\"), \">\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"RollingFile\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx_logs\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"append\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"true\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"fileName\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/var/log/vertx.log\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"filePattern\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/var/log/vertx/$${date:yyyy-MM}/vertx-%d{MM-dd-yyyy}-%i.log.gz\\\"\"), \">\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"PatternLayout\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"pattern\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"%d{ISO8601} %-5p %c:%L - %m%n\\\"\"), \" />\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"</\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"RollingFile\"), \">\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Async\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx_async\\\"\"), \">\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"AppenderRef\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"ref\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx_logs\\\"\"), \"/>\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"</\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Async\"), \">\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"</\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Appenders\"), \">\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Loggers\"), \">\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Root\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"level\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"DEBUG\\\"\"), \">\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"<\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"AppenderRef\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"ref\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx_async\\\"\"), \" />\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"</\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Root\"), \">\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"</\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Loggers\"), \">\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"</\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"Configuration\"), \">\"), \"\\n\")), mdx(\"h3\", {\n    \"id\": \"filebeat-configuration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#filebeat-configuration\"\n  })), \"Filebeat configuration\"), mdx(\"p\", null, \"Now that we have con\\xADfig\\xADured the log out\\xADput of our Vert.x ap\\xADpli\\xADca\\xADtion to be stored in the file sys\\xADtem, we del\\xADe\\xADgate to File\\xADbeat the task of for\\xADward\\xADing the logs to the Logstash in\\xADstance. File\\xADbeat can be con\\xADfig\\xADured through a YAML file con\\xADtain\\xADing the logs out\\xADput lo\\xADca\\xADtion and the pat\\xADtern to in\\xADter\\xADpret mul\\xADti\\xADline logs (i.e., stack traces). Also, the Logstash out\\xADput plug\\xADin is con\\xADfig\\xADured with the host lo\\xADca\\xADtion and a se\\xADcure con\\xADnec\\xADtion is en\\xADforced using the cer\\xADtifi\\xADcate from the ma\\xADchine host\\xADing Logstash. We set the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"document_type\"), \" to the type of in\\xADstance that this log be\\xADlongs to, which could later help us while in\\xADdex\\xADing our logs in\\xADside Elas\\xADtic\\xADsearch.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"filebeat:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"prospectors:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"document_type:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"trader_dashboard\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"paths:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/var/log/vertx.log\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"multiline:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"pattern:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"^[0-9]+\\\"\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"negate:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"match:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"after\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"output:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"logstash:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"enabled:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"hosts:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"elk:5044\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"timeout:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"15\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"tls:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"insecure:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"certificate_authoritites:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/etc/pki/tls/certs/logstash-beats.crt\"), \"\\n\")), mdx(\"h2\", {\n    \"id\": \"elk-configuration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#elk-configuration\"\n  })), \"ELK configuration\"), mdx(\"p\", null, \"To take fully ad\\xADvan\\xADtage of the ELK stack with re\\xADspect to Vert.x and our app logs, we need to con\\xADfig\\xADure each of its in\\xADdi\\xADvid\\xADual com\\xADpo\\xADnents, namely Logstash, Elas\\xADtic\\xADsearch and Kibana.\"), mdx(\"h3\", {\n    \"id\": \"logstash\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#logstash\"\n  })), \"Logstash\"), mdx(\"p\", null, \"Logstash is the com\\xADpo\\xADnent within the ELK stack that is in charge of ag\\xADgre\\xADgat\\xADing the logs from each of the sources and for\\xADward\\xADing them to the Elas\\xADtic\\xADsearch in\\xADstance.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Con\\xADfig\\xADur\\xADing Logstash is straight\\xADfor\\xADward with the help of the spe\\xADcific input and out\\xADput plu\\xADg\\xADins for Beats and Elas\\xADtic\\xADsearch, re\\xADspec\\xADtively.\\nIn the pre\\xADvi\\xADous sec\\xADtion we men\\xADtioned that File\\xADbeat could be eas\\xADily cou\\xADpled with Logstash. Now, we see that this can be done by just spec\\xADi\\xADfy\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Beat\"), \" as the input plug\\xADin and set the pa\\xADra\\xADme\\xADters needed to be reached by our ship\\xADpers (lis\\xADten\\xADing port, ssl key and cer\\xADtifi\\xADcate lo\\xADca\\xADtion).\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"input {\\n  beats {\\n    port => 5044\\n    ssl => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n    ssl_certificate => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/etc/pki/tls/certs/logstash-beats.crt\\\"\"), \"\\n    ssl_key => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/etc/pki/tls/private/logstash-beats.key\\\"\"), \"\\n  }\\n}\\n\")), mdx(\"p\", null, \"Now that we are ready to re\\xADceive logs from the app, we can use Logstash fil\\xADter\\xADing ca\\xADpa\\xADbil\\xADi\\xADties to spec\\xADify the for\\xADmat of our logs and ex\\xADtract the fields so they can be in\\xADdexed more ef\\xADfi\\xADciently by Elas\\xADtic\\xADsearch.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"grok\"), \" fil\\xADter\\xADing plug\\xADin comes handy in this sit\\xADu\\xADa\\xADtion. This plug\\xADin al\\xADlows to de\\xADclare the logs for\\xADmat using pre\\xADde\\xADfined and cus\\xADtomized pat\\xADterns based in reg\\xADu\\xADlar ex\\xADpres\\xADsions al\\xADlow\\xADing to de\\xADclare new fields from the in\\xADfor\\xADma\\xADtion ex\\xADtracted from each log line. In the fol\\xADlow\\xADing block, we in\\xADstruct Logstash to rec\\xADog\\xADnize our Log4j pat\\xADtern in\\xADside a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"message\"), \" field, which con\\xADtains the log mes\\xADsage shipped by File\\xADbeat. After that, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"date\"), \" fil\\xADter\\xADing plug\\xADin parses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"timestamp\"), \" field ex\\xADtracted in the pre\\xADvi\\xADous step and re\\xADplaces it for the one set by File\\xADbeat after read\\xADing the log out\\xADput file.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"filter {\\n  grok {\\n    break_on_match => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"\\n    match =>  [ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"message\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"%{LOG4J}\\\"\"), \"]\\n  }\\n  date{\\n    match => [ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"timestamp_string\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ISO8601\\\"\"), \"]\\n    remove_field => [ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"timestamp_string\\\"\"), \" ]\\n  }\\n}\\n\")), mdx(\"p\", null, \"The Log4j pat\\xADtern is not in\\xADcluded within the Logstash con\\xADfig\\xADu\\xADra\\xADtion, how\\xADever, we can spec\\xADify it using pre\\xADde\\xADfined data for\\xADmats shipped with Logstash and adapt it to the spe\\xADcific log for\\xADmats re\\xADquired in our ap\\xADpli\\xADca\\xADtion, as shown next.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-ruby\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# Pattern to match our Log4j format\"), \"\\nSPACING (?\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \":\"), \"[\\\\s]+)\\nLOGGER (?\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \":\"), \"[a-zA-Z$_][a-zA-Z$_0-\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"9\"), \"]*\\\\.)*[a-zA-Z$_][a-zA-Z$_0-\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"9\"), \"]*\\nLINE \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{INT}\"), \"?\\nLOG4J \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{TIMESTAMP_ISO8601:timestamp_string}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{LOGLEVEL:log_level}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{SPACING}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{LOGGER:logger_name}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \":\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{LINE:loc_line}\")), \" - \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%{JAVALOGMESSAGE:log_message}\"), \"\\n\")), mdx(\"p\", null, \"Fi\\xADnally, we take a look at Logstash\\u2019s out\\xADput con\\xADfig\\xADu\\xADra\\xADtion. This sim\\xADply points to our elas\\xADtic\\xADsearch in\\xADstance, in\\xADstructs it to pro\\xADvide a list of all clus\\xADter nodes (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sniffing\"), \"), de\\xADfines the name pat\\xADtern for our in\\xADdices, as\\xADsigns the doc\\xADu\\xADment type ac\\xADcord\\xADing to the meta\\xADdata com\\xADing from File\\xADbeat, and al\\xADlows to de\\xADfine a cus\\xADtom index tem\\xADplate for our data.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-puppet\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"output\"), \" {\\n  elasticsearch {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"hosts\"), \" => [\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \"]\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"sniffing\"), \" => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"manage_template\"), \" => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"index\"), \" => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"%{[@metadata][beat]}-%{+YYYY.MM.dd}\\\"\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"document_type\"), \" => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"%{[@metadata][type]}\\\"\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"template\"), \" => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/etc/filebeat/vertx_app_filebeat.json\\\"\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"template_overwrite\"), \" => \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"\\n  }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"elasticsearch\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#elasticsearch\"\n  })), \"Elasticsearch\"), mdx(\"p\", null, \"Elas\\xADtic\\xADsearch is the cen\\xADtral com\\xADpo\\xADnent that en\\xADables the ef\\xADfi\\xADcient in\\xADdex\\xADing and real-\\u200Btime search ca\\xADpa\\xADbil\\xADi\\xADties of the stack. To take the most ad\\xADvan\\xADtage of Elas\\xADtic\\xADsearch, we can pro\\xADvide an in\\xADdex\\xADing tem\\xADplate of our in\\xADcom\\xADing logs, which can help to op\\xADti\\xADmize the data stor\\xADage and match the queries is\\xADsued by Kibana at a later point.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"In the ex\\xADam\\xADple below, we see an index tem\\xADplate that would be ap\\xADplied to any index match\\xADing the pat\\xADtern \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"filebeat-*\"), \". Ad\\xADdi\\xADtion\\xADally, we de\\xADclare our new log fields \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"type\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"host\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"log_level\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logger_name\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"log_message\"), \", which are set as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"not_analyzed\"), \" ex\\xADcept for the last two that are set as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"analyzed\"), \" al\\xADlow\\xADing to per\\xADform queries based on reg\\xADu\\xADlar ex\\xADpres\\xADsions and not re\\xADstricted to query the full text.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"mappings\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"_default_\\\"\"), \": {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"_all\\\"\"), \": {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"enabled\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \",\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"norms\\\"\"), \": {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"enabled\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"\\n        }\\n      },\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"dynamic_templates\\\"\"), \": [\\n        {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"template1\\\"\"), \": {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"mapping\\\"\"), \": {\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"doc_values\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \",\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"ignore_above\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1024\"), \",\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"not_analyzed\\\"\"), \",\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"{dynamic_type}\\\"\"), \"\\n            },\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"match\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \"\\n          }\\n        }\\n      ],\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"properties\\\"\"), \": {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"@timestamp\\\"\"), \": {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"date\\\"\"), \"\\n        },\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"offset\\\"\"), \": {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"long\\\"\"), \",\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"doc_values\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"true\\\"\"), \"\\n        },\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"string\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"not_analyzed\\\"\"), \" },\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"host\\\"\"), \": { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"string\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"not_analyzed\\\"\"), \" },\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"log_level\\\"\"), \": { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"string\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"not_analyzed\\\"\"), \" },\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"logger_name\\\"\"), \": { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"string\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"analyzed\\\"\"), \" },\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"log_message\\\"\"), \": { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"string\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"analyzed\\\"\"), \" }\\n      }\\n    }\\n  },\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"settings\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"index.refresh_interval\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"5s\\\"\"), \"\\n  },\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"template\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"filebeat-*\\\"\"), \"\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"kibana\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#kibana\"\n  })), \"Kibana\"), mdx(\"p\", null, \"Al\\xADthough we could fetch all our logs from Elas\\xADtic\\xADsearch through its API, Kibana is a pow\\xADer\\xADful tool that al\\xADlows a more friendly query and vi\\xADsu\\xADal\\xADiza\\xADtion.\\nBe\\xADsides the op\\xADtion to query our data through the avail\\xADable in\\xADdexed field names and search boxes al\\xADlow\\xADing typ\\xADing spe\\xADcific queries, Kibana al\\xADlows cre\\xADat\\xADing our own \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vi\\xADsu\\xADal\\xADiza\\xADtions\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Dash\\xADboards\"), \". Com\\xADbined, they rep\\xADre\\xADsent a pow\\xADer\\xADful way to dis\\xADplay data and gain in\\xADsight in a cus\\xADtomized man\\xADner.\\nThe ac\\xADcom\\xADpa\\xADnied demo ships with a cou\\xADple of sam\\xADple dash\\xADboards and vi\\xADsu\\xADal\\xADiza\\xADtions that take ad\\xADvan\\xADtage of the log fields that we spec\\xADi\\xADfied in our index tem\\xADplate and throw valu\\xADable in\\xADsight. This in\\xADcludes: vi\\xADsu\\xADal\\xADiz\\xADing the num\\xADber of log mes\\xADsages re\\xADceived by ELK, ob\\xADserve the pro\\xADpor\\xADtion of mes\\xADsages that each log source pro\\xADduces, and di\\xADrectly find out the sources of error logs.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/centralized-logging-using-elk/kibana-dashboard.png\",\n    \"alt\": \"Kibana Dashboard\\\" width=\\\"550\"\n  }))), mdx(\"h2\", {\n    \"id\": \"log-shipping-challenge\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#log-shipping-challenge\"\n  })), \"Log shipping challenge\"), mdx(\"p\", null, \"The so\\xADlu\\xADtion pre\\xADsented here re\\xADlied on File\\xADbeat to ship log data to Logstash. How\\xADever, if you are fa\\xADmil\\xADiar with the Log4j frame\\xADwork you may be aware that there ex\\xADists a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Sock\\xADe\\xADtAp\\xADpen\\xADder\"), \" that al\\xADlows to write log events di\\xADrectly to a re\\xADmote server using a TCP con\\xADnec\\xADtion. Al\\xADthough in\\xADclud\\xADing the File\\xADbeat + Logstash com\\xADbi\\xADna\\xADtion  may sound an un\\xADnec\\xADes\\xADsary over\\xADhead to the log\\xADging pipeline, they pro\\xADvide a num\\xADber of ben\\xADe\\xADfits in com\\xADpar\\xADi\\xADson to the Log4j socket al\\xADter\\xADna\\xADtive:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The Sock\\xADe\\xADtAp\\xADpen\\xADder re\\xADlies on the spe\\xADcific se\\xADri\\xADal\\xADiza\\xADtion of Log4j\\u2019s \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Lo\\xADgEvent\"), \" ob\\xADjects, which is no an in\\xADter\\xADchange\\xADable for\\xADmat as JSON, which is used by the Beats so\\xADlu\\xADtion. Al\\xADthough there are \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/majikthys/log4j2-logstash-jsonevent-layout\"\n  }), \"at\\xADtempts\"), \" to out\\xADput the logs in a JSON for\\xADmat for Logstash, it doesn\\u2019t sup\\xADport mul\\xADti\\xADline logs, which re\\xADsults in mes\\xADsages being split into dif\\xADfer\\xADent events by Logstash. On the other hand, there is no of\\xADfi\\xADcial nor sta\\xADble \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.elastic.co/guide/en/logstash/current/input-plugins.html\"\n  }), \"input plugin\"), \" for Log4j ver\\xADsion 2.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"While en\\xADabling Log4j\\u2019s async log\\xADging mode in an ap\\xADpli\\xADca\\xADtion del\\xADe\\xADgates log\\xADging op\\xADer\\xADa\\xADtions to sep\\xADa\\xADrate threads, given their co\\xADex\\xADis\\xADtence in the same JVM there is still the risk of data loss in case of a sud\\xADden JVM ter\\xADmi\\xADna\\xADtion with\\xADout proper log chan\\xADnel clos\\xADing.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"File\\xADbeat is a data ship\\xADper de\\xADsigned to deal with many con\\xADstraints that arise in dis\\xADtrib\\xADuted en\\xADvi\\xADron\\xADments in a re\\xADli\\xADable man\\xADner, there\\xADfore it pro\\xADvides op\\xADtions to tai\\xADlor and scale this op\\xADer\\xADa\\xADtion to our needs: the pos\\xADsi\\xADbil\\xADity to load bal\\xADance be\\xADtween mul\\xADti\\xADple Logstash in\\xADstances, spec\\xADify the num\\xADber of si\\xADmul\\xADta\\xADne\\xADous File\\xADbeat work\\xADers that ship log files, and spec\\xADify a com\\xADpres\\xADsion level in order to re\\xADduce the con\\xADsumed band\\xADwidth. Be\\xADsides that, logs can be shipped in spe\\xADcific batch sizes, with max\\xADi\\xADmum amount of re\\xADtries, and spec\\xADi\\xADfy\\xADing a con\\xADnec\\xADtion time\\xADout.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Lastly, al\\xADthough File\\xADbeat can for\\xADward logs di\\xADrectly to Elas\\xADtic\\xADsearch, using Logstash as an in\\xADter\\xADme\\xADdi\\xADary of\\xADfers the pos\\xADsi\\xADbil\\xADity to col\\xADlect logs from di\\xADverse sources (e.g., sys\\xADtem met\\xADrics).\")), mdx(\"h2\", {\n    \"id\": \"demo\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#demo\"\n  })), \"Demo\"), mdx(\"p\", null, \"This post is ac\\xADcom\\xADpa\\xADnied by a demo based on the Vert.x Mi\\xADcroser\\xADvices \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx-lab.dynamis-technologies.com/\"\n  }), \"work\\xADshop\"), \", where each of them is shipped in a Docker con\\xADtainer sim\\xADu\\xADlat\\xADing a dis\\xADtrib\\xADuted sys\\xADtem com\\xADposed of in\\xADde\\xADpen\\xADdent ad\\xADdress\\xADable nodes.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Also, the ELK stack is pro\\xADvi\\xADsioned using a pre\\xADcon\\xADfig\\xADured Docker image by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/spujadas\"\n  }), \"S\\xE9bastien Pu\\xADjadas\"), \".\"), mdx(\"p\", null, \"Fol\\xADlow\\xADing the guide\\xADlines in this post, this demo con\\xADfig\\xADures each of the Mi\\xADcroser\\xADvices of the work\\xADshop, sets up a File\\xADbeat process on each of them to ship the logs to a cen\\xADtral con\\xADtainer host\\xADing the ELK stack.\"), mdx(\"h3\", {\n    \"id\": \"installation\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#installation\"\n  })), \"Installation\"), mdx(\"p\", null, \"In order to run this demo, it is nec\\xADes\\xADsary to have Docker in\\xADstalled, then pro\\xADceed with:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cloning or down\\xADload\\xADing the demo \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ricardohmon/vertx-elk\"\n  }), \"repos\\xADi\\xADtory\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sep\\xADa\\xADrately, ob\\xADtain\\xADing the source code of the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ricardohmon/vertx-microservices-workshop/tree/elk-demo\"\n  }), \"branch\"), \" of the Mi\\xADcroser\\xADvices work\\xADshop adapted for this demo.\")), mdx(\"h3\", {\n    \"id\": \"building-the-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#building-the-example\"\n  })), \"Building the example\"), mdx(\"p\", null, \"The Docker im\\xADages be\\xADlong\\xADing to the Vert.x Mi\\xADcroser\\xADvices work\\xADshop need to be built sep\\xADa\\xADrately to this project be\\xADfore this project can be launched.\"), mdx(\"h3\", {\n    \"id\": \"building-the-vertx-microservices-workshop-docker-images\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#building-the-vertx-microservices-workshop-docker-images\"\n  })), \"Building the Vert.x Microservices workshop Docker images.\"), mdx(\"p\", null, \"Build the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"root\"), \" project and the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Trader Dash\\xADboard\"), \" fol\\xADlowed by each of the mod\\xADules con\\xADtained in the so\\xADlu\\xADtion folder. Issue the fol\\xADlow\\xADing com\\xADmands for this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"mvn clean install\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" trader-dashboard\\nmvn package docker:build\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" ../solution/audit-service\\nmvn package docker:build\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" ../compulsive-traders\\nmvn package docker:build\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" ../portfolio-service\\nmvn package docker:build\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" ../quote-generator/\\nmvn package docker:build\\n\")), mdx(\"h3\", {\n    \"id\": \"running-the-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#running-the-example\"\n  })), \"Running the example\"), mdx(\"p\", null, \"After build\\xADing the pre\\xADvi\\xADous im\\xADages, build and run the ex\\xADam\\xADple in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-elk\"), \" using the fol\\xADlow\\xADing com\\xADmand:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-ebnf\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"docker-compose up\"), \"\\n\")), mdx(\"h3\", {\n    \"id\": \"the-demo\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-demo\"\n  })), \"The demo\"), mdx(\"p\", null, \"You can watch the demo in ac\\xADtion in the fol\\xADlow\\xADing screen\\xADcast:\"), mdx(\"div\", {\n    className: \"youtube-embed\"\n  }, mdx(\"iframe\", {\n    src: \"https://www.youtube.com/embed/8P-MgXSujes\",\n    frameBorder: \"0\",\n    allowFullScreen: true\n  })), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"The ELK stack is a pow\\xADer\\xADful set of tools that ease the ag\\xADgre\\xADga\\xADtion of logs com\\xADing from dis\\xADtrib\\xADuted ser\\xADvices into a cen\\xADtral server. Its main pil\\xADlar, Elas\\xADtic\\xADsearch, pro\\xADvides the in\\xADdex\\xADing and search ca\\xADpa\\xADbil\\xADi\\xADties of our log data. Also, it is ac\\xADcom\\xADpa\\xADnied by the con\\xADve\\xADnient input/out\\xADput com\\xADpo\\xADnents: Logstash, which can be flex\\xADi\\xADbly con\\xADfig\\xADured to ac\\xADcept dif\\xADfer\\xADent data sources; and Kibana, which can be cus\\xADtomized to present the in\\xADfor\\xADma\\xADtion in the most con\\xADve\\xADnient way.\"), mdx(\"p\", null, \"Logstash has been de\\xADsigned to work seam\\xADlessly with File\\xADbeat, the log ship\\xADper which rep\\xADre\\xADsents a ro\\xADbust so\\xADlu\\xADtion that can be adapted to our ap\\xADpli\\xADca\\xADtions with\\xADout hav\\xADing to make \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"sig\\xADnif\\xADi\\xADcant\"), \" changes to our ar\\xADchi\\xADtec\\xADture. In ad\\xADdi\\xADtion, Logstash can ac\\xADcept var\\xADied types of sources, fil\\xADter the data, and process it be\\xADfore de\\xADliv\\xADer\\xADing to Elas\\xADtic\\xADsearch. This flex\\xADi\\xADbil\\xADity comes with the price of hav\\xADing extra el\\xADe\\xADments in our log ag\\xADgre\\xADga\\xADtion pipeline, which can rep\\xADre\\xADsent an in\\xADcrease of pro\\xADcess\\xADing over\\xADhead or a point-\\u200Bof-failure. This ad\\xADdi\\xADtional over\\xADhead could be avoided if an ap\\xADpli\\xADca\\xADtion would be ca\\xADpa\\xADble of de\\xADliv\\xADer\\xADing its log out\\xADput di\\xADrectly to Elas\\xADtic\\xADsearch.\"), mdx(\"p\", null, \"Happy log\\xADging!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>This post entry de­scribes a so­lu­tion to achieve cen­tral­ized log­ging of Vert.x ap­pli­ca­tions using the <a href=\"https://www.elastic.co/webinars/introduction-elk-stack\">ELK stack</a>, a set of tools in­clud­ing Logstash, Elas­tic­search, and Kibana that are well known to work to­gether seam­lessly.</p><h2 id=\"preamble\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#preamble\"></a>Preamble</h2><p>This post was writ­ten in con­text of the project ti­tled “<a href=\"https://summerofcode.withgoogle.com/projects/#4858492141699072\">De­vOps tool­ing for Vert.x ap­pli­ca­tions</a>”, one of the Vert.x projects tak­ing place dur­ing the 2016 edi­tion of <a href=\"https://summerofcode.withgoogle.com/about/\">Google Sum­mer of Code</a>, a pro­gram that aims to bring to­gether stu­dents with open source or­ga­ni­za­tions, in order to help them to gain ex­po­sure to soft­ware de­vel­op­ment prac­tices and real-​world chal­lenges.</p><h2 id=\"introduction\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#introduction\"></a>Introduction</h2><p>Cen­tral­ized log­ging is an im­por­tant topic while build­ing a Mi­croser­vices ar­chi­tec­ture and it is a step for­ward to adopt­ing the De­vOps cul­ture. Hav­ing an over­all so­lu­tion par­ti­tioned into a set of ser­vices dis­trib­uted across the In­ter­net can rep­re­sent a chal­lenge when try­ing to mon­i­tor the log out­put of each of them, hence, a tool that helps to ac­com­plish this re­sults very help­ful.</p><h2 id=\"overview\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#overview\"></a>Overview</h2><p>As shown in the di­a­gram below, the gen­eral cen­tral­ized log­ging so­lu­tion com­prises two main el­e­ments: the ap­pli­ca­tion server, which runs our Vert.x ap­pli­ca­tion; and a sep­a­rate server, host­ing the ELK stack. Both el­e­ments are linked by File­beat, a highly con­fig­urable tool ca­pa­ble of ship­ping our ap­pli­ca­tion logs to the Logstash in­stance, i.e., our gate­way to the ELK stack.</p><p><img src=\"/images/blog/centralized-logging-using-elk/elk-overview.svg\" alt=\"Overview of centralized logging with ELK\"/></p><h2 id=\"app-logging-configuration\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#app-logging-configuration\"></a>App logging configuration</h2><p>The ap­proach de­scribed here is based on a File­beat + Logstash con­fig­u­ra­tion, that means first we need to make sure our app logs to a file, whose records will be shipped to Logstash by File­beat. Luck­ily, Vert.x pro­vides the means to <a href=\"https://vertx.io/docs/vertx-core/java/#_logging\">con­fig­ure</a> al­ter­na­tive log­ging frame­works (e.g., Log4j, Log4j2 and SLF4J) be­sides the de­fault JUL log­ging. How­ever, we can use File­beat in­de­pen­dently of the log­ging frame­work cho­sen.</p><h3 id=\"log4j-logging\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#log4j-logging\"></a>Log4j Logging</h3><p>The demo that ac­com­pa­nies this post re­lies on Log4j2 as the log­ging frame­work. We in­structed Vert.x to use this frame­work fol­low­ing the <a href=\"https://vertx.io/docs/vertx-core/java/#_logging\">guide­lines</a> and we made sure our log­ging calls are made asyn­chro­nous, since we don’t want them to block our ap­pli­ca­tion. For this pur­pose, we opted for the <code>AsyncAppender</code> and this was in­cluded in the Log4J con­fig­u­ra­tion to­gether with the log out­put for­mat de­scribed in a XML con­fig­u­ra­tion avail­able in the ap­pli­ca­tion’s <em>Re­source</em> folder.</p><pre><code class=\"hljs language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Configuration</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Appenders</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">RollingFile</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;vertx_logs&quot;</span> <span class=\"hljs-attr\">append</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">fileName</span>=<span class=\"hljs-string\">&quot;/var/log/vertx.log&quot;</span> <span class=\"hljs-attr\">filePattern</span>=<span class=\"hljs-string\">&quot;/var/log/vertx/$${date:yyyy-MM}/vertx-%d{MM-dd-yyyy}-%i.log.gz&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">PatternLayout</span> <span class=\"hljs-attr\">pattern</span>=<span class=\"hljs-string\">&quot;%d{ISO8601} %-5p %c:%L - %m%n&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">RollingFile</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Async</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;vertx_async&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">AppenderRef</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;vertx_logs&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Async</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Appenders</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Loggers</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Root</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;DEBUG&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">AppenderRef</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;vertx_async&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Root</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Loggers</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Configuration</span>&gt;</span>\n</code></pre><h3 id=\"filebeat-configuration\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#filebeat-configuration\"></a>Filebeat configuration</h3><p>Now that we have con­fig­ured the log out­put of our Vert.x ap­pli­ca­tion to be stored in the file sys­tem, we del­e­gate to File­beat the task of for­ward­ing the logs to the Logstash in­stance. File­beat can be con­fig­ured through a YAML file con­tain­ing the logs out­put lo­ca­tion and the pat­tern to in­ter­pret mul­ti­line logs (i.e., stack traces). Also, the Logstash out­put plug­in is con­fig­ured with the host lo­ca­tion and a se­cure con­nec­tion is en­forced using the cer­tifi­cate from the ma­chine host­ing Logstash. We set the <code>document_type</code> to the type of in­stance that this log be­longs to, which could later help us while in­dex­ing our logs in­side Elas­tic­search.</p><pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">filebeat:</span>\n  <span class=\"hljs-attr\">prospectors:</span>\n    <span class=\"hljs-bullet\">-</span>\n      <span class=\"hljs-attr\">document_type:</span> <span class=\"hljs-string\">trader_dashboard</span>\n      <span class=\"hljs-attr\">paths:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">/var/log/vertx.log</span>\n      <span class=\"hljs-attr\">multiline:</span>\n        <span class=\"hljs-attr\">pattern:</span> <span class=\"hljs-string\">&quot;^[0-9]+&quot;</span>\n        <span class=\"hljs-attr\">negate:</span> <span class=\"hljs-literal\">true</span>\n        <span class=\"hljs-attr\">match:</span> <span class=\"hljs-string\">after</span>\n<span class=\"hljs-attr\">output:</span>\n  <span class=\"hljs-attr\">logstash:</span>\n    <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-attr\">hosts:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">elk:5044</span>\n    <span class=\"hljs-attr\">timeout:</span> <span class=\"hljs-number\">15</span>\n    <span class=\"hljs-attr\">tls:</span>\n      <span class=\"hljs-attr\">insecure:</span> <span class=\"hljs-literal\">false</span>\n      <span class=\"hljs-attr\">certificate_authoritites:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">/etc/pki/tls/certs/logstash-beats.crt</span>\n</code></pre><h2 id=\"elk-configuration\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#elk-configuration\"></a>ELK configuration</h2><p>To take fully ad­van­tage of the ELK stack with re­spect to Vert.x and our app logs, we need to con­fig­ure each of its in­di­vid­ual com­po­nents, namely Logstash, Elas­tic­search and Kibana.</p><h3 id=\"logstash\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#logstash\"></a>Logstash</h3><p>Logstash is the com­po­nent within the ELK stack that is in charge of ag­gre­gat­ing the logs from each of the sources and for­ward­ing them to the Elas­tic­search in­stance.<br/>\n<!-- -->Con­fig­ur­ing Logstash is straight­for­ward with the help of the spe­cific input and out­put plu­g­ins for Beats and Elas­tic­search, re­spec­tively.\nIn the pre­vi­ous sec­tion we men­tioned that File­beat could be eas­ily cou­pled with Logstash. Now, we see that this can be done by just spec­i­fy­ing <code>Beat</code> as the input plug­in and set the pa­ra­me­ters needed to be reached by our ship­pers (lis­ten­ing port, ssl key and cer­tifi­cate lo­ca­tion).</p><pre><code class=\"hljs language-bash\">input {\n  beats {\n    port =&gt; 5044\n    ssl =&gt; <span class=\"hljs-literal\">true</span>\n    ssl_certificate =&gt; <span class=\"hljs-string\">&quot;/etc/pki/tls/certs/logstash-beats.crt&quot;</span>\n    ssl_key =&gt; <span class=\"hljs-string\">&quot;/etc/pki/tls/private/logstash-beats.key&quot;</span>\n  }\n}\n</code></pre><p>Now that we are ready to re­ceive logs from the app, we can use Logstash fil­ter­ing ca­pa­bil­i­ties to spec­ify the for­mat of our logs and ex­tract the fields so they can be in­dexed more ef­fi­ciently by Elas­tic­search.<br/>\n<!-- -->The <code>grok</code> fil­ter­ing plug­in comes handy in this sit­u­a­tion. This plug­in al­lows to de­clare the logs for­mat using pre­de­fined and cus­tomized pat­terns based in reg­u­lar ex­pres­sions al­low­ing to de­clare new fields from the in­for­ma­tion ex­tracted from each log line. In the fol­low­ing block, we in­struct Logstash to rec­og­nize our Log4j pat­tern in­side a <code>message</code> field, which con­tains the log mes­sage shipped by File­beat. After that, the <code>date</code> fil­ter­ing plug­in parses the <code>timestamp</code> field ex­tracted in the pre­vi­ous step and re­places it for the one set by File­beat after read­ing the log out­put file.</p><pre><code class=\"hljs language-bash\">filter {\n  grok {\n    break_on_match =&gt; <span class=\"hljs-literal\">false</span>\n    match =&gt;  [ <span class=\"hljs-string\">&quot;message&quot;</span>, <span class=\"hljs-string\">&quot;%{LOG4J}&quot;</span>]\n  }\n  date{\n    match =&gt; [ <span class=\"hljs-string\">&quot;timestamp_string&quot;</span>, <span class=\"hljs-string\">&quot;ISO8601&quot;</span>]\n    remove_field =&gt; [ <span class=\"hljs-string\">&quot;timestamp_string&quot;</span> ]\n  }\n}\n</code></pre><p>The Log4j pat­tern is not in­cluded within the Logstash con­fig­u­ra­tion, how­ever, we can spec­ify it using pre­de­fined data for­mats shipped with Logstash and adapt it to the spe­cific log for­mats re­quired in our ap­pli­ca­tion, as shown next.</p><pre><code class=\"hljs language-ruby\"><span class=\"hljs-comment\"># Pattern to match our Log4j format</span>\nSPACING (?<span class=\"hljs-symbol\">:</span>[\\s]+)\nLOGGER (?<span class=\"hljs-symbol\">:</span>[a-zA-Z$_][a-zA-Z$_0-<span class=\"hljs-number\">9</span>]*\\.)*[a-zA-Z$_][a-zA-Z$_0-<span class=\"hljs-number\">9</span>]*\nLINE <span class=\"hljs-string\">%{INT}</span>?\nLOG4J <span class=\"hljs-string\">%{TIMESTAMP_ISO8601:timestamp_string}</span> <span class=\"hljs-string\">%{LOGLEVEL:log_level}</span><span class=\"hljs-string\">%{SPACING}</span><span class=\"hljs-string\">%{LOGGER:logger_name}</span><span class=\"hljs-symbol\">:<span class=\"hljs-string\">%{LINE:loc_line}</span></span> - <span class=\"hljs-string\">%{JAVALOGMESSAGE:log_message}</span>\n</code></pre><p>Fi­nally, we take a look at Logstash’s out­put con­fig­u­ra­tion. This sim­ply points to our elas­tic­search in­stance, in­structs it to pro­vide a list of all clus­ter nodes (<code>sniffing</code>), de­fines the name pat­tern for our in­dices, as­signs the doc­u­ment type ac­cord­ing to the meta­data com­ing from File­beat, and al­lows to de­fine a cus­tom index tem­plate for our data.</p><pre><code class=\"hljs language-puppet\"><span class=\"hljs-keyword\">output</span> {\n  elasticsearch {\n    <span class=\"hljs-attr\">hosts</span> =&gt; [<span class=\"hljs-string\">&quot;localhost&quot;</span>]\n    <span class=\"hljs-attr\">sniffing</span> =&gt; <span class=\"hljs-keyword\">true</span>\n    <span class=\"hljs-attr\">manage_template</span> =&gt; <span class=\"hljs-keyword\">true</span>\n    <span class=\"hljs-attr\">index</span> =&gt; <span class=\"hljs-string\">&quot;%{[@metadata][beat]}-%{+YYYY.MM.dd}&quot;</span>\n    <span class=\"hljs-attr\">document_type</span> =&gt; <span class=\"hljs-string\">&quot;%{[@metadata][type]}&quot;</span>\n    <span class=\"hljs-attr\">template</span> =&gt; <span class=\"hljs-string\">&quot;/etc/filebeat/vertx_app_filebeat.json&quot;</span>\n    <span class=\"hljs-attr\">template_overwrite</span> =&gt; <span class=\"hljs-keyword\">true</span>\n  }\n}\n</code></pre><h3 id=\"elasticsearch\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#elasticsearch\"></a>Elasticsearch</h3><p>Elas­tic­search is the cen­tral com­po­nent that en­ables the ef­fi­cient in­dex­ing and real-​time search ca­pa­bil­i­ties of the stack. To take the most ad­van­tage of Elas­tic­search, we can pro­vide an in­dex­ing tem­plate of our in­com­ing logs, which can help to op­ti­mize the data stor­age and match the queries is­sued by Kibana at a later point.<br/>\n<!-- -->In the ex­am­ple below, we see an index tem­plate that would be ap­plied to any index match­ing the pat­tern <code>filebeat-*</code>. Ad­di­tion­ally, we de­clare our new log fields <code>type</code>, <code>host</code>, <code>log_level</code>, <code>logger_name</code>, and <code>log_message</code>, which are set as <code>not_analyzed</code> ex­cept for the last two that are set as <code>analyzed</code> al­low­ing to per­form queries based on reg­u­lar ex­pres­sions and not re­stricted to query the full text.</p><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;mappings&quot;</span>: {\n    <span class=\"hljs-attr\">&quot;_default_&quot;</span>: {\n      <span class=\"hljs-attr\">&quot;_all&quot;</span>: {\n        <span class=\"hljs-attr\">&quot;enabled&quot;</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">&quot;norms&quot;</span>: {\n          <span class=\"hljs-attr\">&quot;enabled&quot;</span>: <span class=\"hljs-literal\">false</span>\n        }\n      },\n      <span class=\"hljs-attr\">&quot;dynamic_templates&quot;</span>: [\n        {\n          <span class=\"hljs-attr\">&quot;template1&quot;</span>: {\n            <span class=\"hljs-attr\">&quot;mapping&quot;</span>: {\n              <span class=\"hljs-attr\">&quot;doc_values&quot;</span>: <span class=\"hljs-literal\">true</span>,\n              <span class=\"hljs-attr\">&quot;ignore_above&quot;</span>: <span class=\"hljs-number\">1024</span>,\n              <span class=\"hljs-attr\">&quot;index&quot;</span>: <span class=\"hljs-string\">&quot;not_analyzed&quot;</span>,\n              <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;{dynamic_type}&quot;</span>\n            },\n            <span class=\"hljs-attr\">&quot;match&quot;</span>: <span class=\"hljs-string\">&quot;*&quot;</span>\n          }\n        }\n      ],\n      <span class=\"hljs-attr\">&quot;properties&quot;</span>: {\n        <span class=\"hljs-attr\">&quot;@timestamp&quot;</span>: {\n          <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;date&quot;</span>\n        },\n        <span class=\"hljs-attr\">&quot;offset&quot;</span>: {\n          <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;long&quot;</span>,\n          <span class=\"hljs-attr\">&quot;doc_values&quot;</span>: <span class=\"hljs-string\">&quot;true&quot;</span>\n        },\n        <span class=\"hljs-attr\">&quot;type&quot;</span>: { <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;string&quot;</span>, <span class=\"hljs-attr\">&quot;index&quot;</span>: <span class=\"hljs-string\">&quot;not_analyzed&quot;</span> },\n        <span class=\"hljs-attr\">&quot;host&quot;</span>: { <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;string&quot;</span>, <span class=\"hljs-attr\">&quot;index&quot;</span>: <span class=\"hljs-string\">&quot;not_analyzed&quot;</span> },\n        <span class=\"hljs-attr\">&quot;log_level&quot;</span>: { <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;string&quot;</span>, <span class=\"hljs-attr\">&quot;index&quot;</span>: <span class=\"hljs-string\">&quot;not_analyzed&quot;</span> },\n        <span class=\"hljs-attr\">&quot;logger_name&quot;</span>: { <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;string&quot;</span>, <span class=\"hljs-attr\">&quot;index&quot;</span>: <span class=\"hljs-string\">&quot;analyzed&quot;</span> },\n        <span class=\"hljs-attr\">&quot;log_message&quot;</span>: { <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;string&quot;</span>, <span class=\"hljs-attr\">&quot;index&quot;</span>: <span class=\"hljs-string\">&quot;analyzed&quot;</span> }\n      }\n    }\n  },\n  <span class=\"hljs-attr\">&quot;settings&quot;</span>: {\n    <span class=\"hljs-attr\">&quot;index.refresh_interval&quot;</span>: <span class=\"hljs-string\">&quot;5s&quot;</span>\n  },\n  <span class=\"hljs-attr\">&quot;template&quot;</span>: <span class=\"hljs-string\">&quot;filebeat-*&quot;</span>\n}\n</code></pre><h3 id=\"kibana\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#kibana\"></a>Kibana</h3><p>Al­though we could fetch all our logs from Elas­tic­search through its API, Kibana is a pow­er­ful tool that al­lows a more friendly query and vi­su­al­iza­tion.\nBe­sides the op­tion to query our data through the avail­able in­dexed field names and search boxes al­low­ing typ­ing spe­cific queries, Kibana al­lows cre­at­ing our own <em>Vi­su­al­iza­tions</em> and <em>Dash­boards</em>. Com­bined, they rep­re­sent a pow­er­ful way to dis­play data and gain in­sight in a cus­tomized man­ner.\nThe ac­com­pa­nied demo ships with a cou­ple of sam­ple dash­boards and vi­su­al­iza­tions that take ad­van­tage of the log fields that we spec­i­fied in our index tem­plate and throw valu­able in­sight. This in­cludes: vi­su­al­iz­ing the num­ber of log mes­sages re­ceived by ELK, ob­serve the pro­por­tion of mes­sages that each log source pro­duces, and di­rectly find out the sources of error logs.</p><p><img src=\"/images/blog/centralized-logging-using-elk/kibana-dashboard.png\" alt=\"Kibana Dashboard&quot; width=&quot;550\"/></p><h2 id=\"log-shipping-challenge\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#log-shipping-challenge\"></a>Log shipping challenge</h2><p>The so­lu­tion pre­sented here re­lied on File­beat to ship log data to Logstash. How­ever, if you are fa­mil­iar with the Log4j frame­work you may be aware that there ex­ists a <em>Sock­e­tAp­pen­der</em> that al­lows to write log events di­rectly to a re­mote server using a TCP con­nec­tion. Al­though in­clud­ing the File­beat + Logstash com­bi­na­tion  may sound an un­nec­es­sary over­head to the log­ging pipeline, they pro­vide a num­ber of ben­e­fits in com­par­i­son to the Log4j socket al­ter­na­tive:</p><ul><li>The Sock­e­tAp­pen­der re­lies on the spe­cific se­ri­al­iza­tion of Log4j’s <em>Lo­gEvent</em> ob­jects, which is no an in­ter­change­able for­mat as JSON, which is used by the Beats so­lu­tion. Al­though there are <a href=\"https://github.com/majikthys/log4j2-logstash-jsonevent-layout\">at­tempts</a> to out­put the logs in a JSON for­mat for Logstash, it doesn’t sup­port mul­ti­line logs, which re­sults in mes­sages being split into dif­fer­ent events by Logstash. On the other hand, there is no of­fi­cial nor sta­ble <a href=\"https://www.elastic.co/guide/en/logstash/current/input-plugins.html\">input plugin</a> for Log4j ver­sion 2.</li><li>While en­abling Log4j’s async log­ging mode in an ap­pli­ca­tion del­e­gates log­ging op­er­a­tions to sep­a­rate threads, given their co­ex­is­tence in the same JVM there is still the risk of data loss in case of a sud­den JVM ter­mi­na­tion with­out proper log chan­nel clos­ing.</li><li>File­beat is a data ship­per de­signed to deal with many con­straints that arise in dis­trib­uted en­vi­ron­ments in a re­li­able man­ner, there­fore it pro­vides op­tions to tai­lor and scale this op­er­a­tion to our needs: the pos­si­bil­ity to load bal­ance be­tween mul­ti­ple Logstash in­stances, spec­ify the num­ber of si­mul­ta­ne­ous File­beat work­ers that ship log files, and spec­ify a com­pres­sion level in order to re­duce the con­sumed band­width. Be­sides that, logs can be shipped in spe­cific batch sizes, with max­i­mum amount of re­tries, and spec­i­fy­ing a con­nec­tion time­out.</li><li>Lastly, al­though File­beat can for­ward logs di­rectly to Elas­tic­search, using Logstash as an in­ter­me­di­ary of­fers the pos­si­bil­ity to col­lect logs from di­verse sources (e.g., sys­tem met­rics).</li></ul><h2 id=\"demo\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#demo\"></a>Demo</h2><p>This post is ac­com­pa­nied by a demo based on the Vert.x Mi­croser­vices <a href=\"http://vertx-lab.dynamis-technologies.com/\">work­shop</a>, where each of them is shipped in a Docker con­tainer sim­u­lat­ing a dis­trib­uted sys­tem com­posed of in­de­pen­dent ad­dress­able nodes.<br/>\n<!-- -->Also, the ELK stack is pro­vi­sioned using a pre­con­fig­ured Docker image by <a href=\"https://github.com/spujadas\">Sébastien Pu­jadas</a>.</p><p>Fol­low­ing the guide­lines in this post, this demo con­fig­ures each of the Mi­croser­vices of the work­shop, sets up a File­beat process on each of them to ship the logs to a cen­tral con­tainer host­ing the ELK stack.</p><h3 id=\"installation\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#installation\"></a>Installation</h3><p>In order to run this demo, it is nec­es­sary to have Docker in­stalled, then pro­ceed with:</p><ul><li>Cloning or down­load­ing the demo <a href=\"https://github.com/ricardohmon/vertx-elk\">repos­i­tory</a>.</li><li>Sep­a­rately, ob­tain­ing the source code of the <a href=\"https://github.com/ricardohmon/vertx-microservices-workshop/tree/elk-demo\">branch</a> of the Mi­croser­vices work­shop adapted for this demo.</li></ul><h3 id=\"building-the-example\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#building-the-example\"></a>Building the example</h3><p>The Docker im­ages be­long­ing to the Vert.x Mi­croser­vices work­shop need to be built sep­a­rately to this project be­fore this project can be launched.</p><h3 id=\"building-the-vertx-microservices-workshop-docker-images\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#building-the-vertx-microservices-workshop-docker-images\"></a>Building the Vert.x Microservices workshop Docker images.</h3><p>Build the <em>root</em> project and the <em>Trader Dash­board</em> fol­lowed by each of the mod­ules con­tained in the so­lu­tion folder. Issue the fol­low­ing com­mands for this:</p><pre><code class=\"hljs language-bash\">mvn clean install\n<span class=\"hljs-built_in\">cd</span> trader-dashboard\nmvn package docker:build\n<span class=\"hljs-built_in\">cd</span> ../solution/audit-service\nmvn package docker:build\n<span class=\"hljs-built_in\">cd</span> ../compulsive-traders\nmvn package docker:build\n<span class=\"hljs-built_in\">cd</span> ../portfolio-service\nmvn package docker:build\n<span class=\"hljs-built_in\">cd</span> ../quote-generator/\nmvn package docker:build\n</code></pre><h3 id=\"running-the-example\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#running-the-example\"></a>Running the example</h3><p>After build­ing the pre­vi­ous im­ages, build and run the ex­am­ple in <code>vertx-elk</code> using the fol­low­ing com­mand:</p><pre><code class=\"hljs language-ebnf\"><span class=\"hljs-attribute\">docker-compose up</span>\n</code></pre><h3 id=\"the-demo\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-demo\"></a>The demo</h3><p>You can watch the demo in ac­tion in the fol­low­ing screen­cast:</p><div class=\"youtube-embed\"><iframe src=\"https://www.youtube.com/embed/8P-MgXSujes\" frameBorder=\"0\" allowfullscreen=\"\"></iframe></div><h2 id=\"conclusion\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"></a>Conclusion</h2><p>The ELK stack is a pow­er­ful set of tools that ease the ag­gre­ga­tion of logs com­ing from dis­trib­uted ser­vices into a cen­tral server. Its main pil­lar, Elas­tic­search, pro­vides the in­dex­ing and search ca­pa­bil­i­ties of our log data. Also, it is ac­com­pa­nied by the con­ve­nient input/out­put com­po­nents: Logstash, which can be flex­i­bly con­fig­ured to ac­cept dif­fer­ent data sources; and Kibana, which can be cus­tomized to present the in­for­ma­tion in the most con­ve­nient way.</p><p>Logstash has been de­signed to work seam­lessly with File­beat, the log ship­per which rep­re­sents a ro­bust so­lu­tion that can be adapted to our ap­pli­ca­tions with­out hav­ing to make <em>sig­nif­i­cant</em> changes to our ar­chi­tec­ture. In ad­di­tion, Logstash can ac­cept var­ied types of sources, fil­ter the data, and process it be­fore de­liv­er­ing to Elas­tic­search. This flex­i­bil­ity comes with the price of hav­ing extra el­e­ments in our log ag­gre­ga­tion pipeline, which can rep­re­sent an in­crease of pro­cess­ing over­head or a point-​of-failure. This ad­di­tional over­head could be avoided if an ap­pli­ca­tion would be ca­pa­ble of de­liv­er­ing its log out­put di­rectly to Elas­tic­search.</p><p>Happy log­ging!</p>","scope":{}},"tfIdfTerms":[{"term":"log","tf":56},{"term":"logstash","tf":26},{"term":"filebeat","tf":18},{"term":"configur","tf":17},{"term":"elasticsearch","tf":15},{"term":"us","tf":13},{"term":"applic","tf":12},{"term":"output","tf":11},{"term":"ship","tf":11},{"term":"data","tf":11},{"term":"elk","tf":10},{"term":"stack","tf":10},{"term":"log4j","tf":10},{"term":"demo","tf":10},{"term":"index","tf":10},{"term":"set","tf":9},{"term":"sourc","tf":8},{"term":"allow","tf":8},{"term":"solut","tf":7},{"term":"kibana","tf":7},{"term":"follow","tf":7},{"term":"format","tf":7},{"term":"plugin","tf":7},{"term":"specifi","tf":7},{"term":"field","tf":7}]},{"filename":"blog/2016-09-01-vert-x-blueprint-tutorials.mdx","date":"2016-09-01","slug":"vert-x-blueprint-tutorials","meta":{"title":"Vert.x Blueprint Tutorials","category":"guides","authors":[{"name":"Eric Zhao","github_id":"sczyh30"}],"summary":"The Vert.x Blueprint project aims to provide guidelines to Vert.x users to implement various applications such as message-based applications and microservices."},"readingTime":{"text":"3 min read","minutes":2.6,"time":156000,"words":520},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The Vert.x Blue\\xADprint project aims to pro\\xADvide guide\\xADlines to Vert.x users to im\\xADple\\xADment var\\xADi\\xADous ap\\xADpli\\xADca\\xADtions such as message-\\u200Bbased ap\\xADpli\\xADca\\xADtions and mi\\xADcroser\\xADvices. This post in\\xADtro\\xADduces the con\\xADtent of each blue\\xADprints.\"), mdx(\"p\", null, \"This work has been done in the con\\xADtext of a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developers.google.com/open-source/gsoc/\"\n  }), \"Google Sum\\xADmer of Code project\"), \" .\"), mdx(\"h1\", {\n    \"id\": \"overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#overview\"\n  })), \"Overview\"), mdx(\"p\", null, \"The blue\\xADprint project con\\xADtains three parts: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Todo Back\\xADend\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x Kue\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"On\\xADline Shop\\xADping Mi\\xADcroser\\xADvice\"), \". Both runnable code and very de\\xADtailed doc\\xADu\\xADments and tu\\xADto\\xADri\\xADals (both in Eng\\xADlish and Chi\\xADnese) are pro\\xADvided.\"), mdx(\"h1\", {\n    \"id\": \"vertx-blueprint---todo-backend\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-blueprint---todo-backend\"\n  })), \"Vert.x Blueprint - Todo Backend\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Repos\\xADi\\xADtory\"), \": \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sczyh30/vertx-blueprint-todo-backend\"\n  }), \"sczyh30/vertx-\\u200Bblueprint-todo-backend\"), \".\"), mdx(\"p\", null, \"This blue\\xADprint is a todo-\\u200Bbackend im\\xADple\\xADmen\\xADta\\xADtion using Vert.x and var\\xADi\\xADous per\\xADsis\\xADtence (e.g. Redis or MySQL). It is in\\xADtended to be an in\\xADtro\\xADduc\\xADtion to basic Vert.x web REST\\xADful ser\\xADvice de\\xADvel\\xADop\\xADment. From this blue\\xADprint, de\\xADvel\\xADop\\xADers  learn:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What is Vert.x and its prin\\xADci\\xADples\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"What is and how to use \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Verticle\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to de\\xADvelop a REST API using \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/\"\n  }), \"Vert.x Web\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to make use of \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"asyn\\xADchro\\xADnous de\\xADvel\\xADop\\xADment model\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Future\"), \"-\\u200Bbased asyn\\xADchro\\xADnous pat\\xADterns\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to use per\\xADsis\\xADtence such as \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Redis\"), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"MySQL\"), \" with the help of Vert.x async data\")), mdx(\"p\", null, \"The tu\\xADto\\xADri\\xADals are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-todo-backend/\"\n  }), \"Vert.x Blue\\xADprint - Todo Back\\xADend (Eng\\xADlish ver\\xADsion)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-todo-backend/cn/\"\n  }), \"Vert.x Blue\\xADprint - Todo Back\\xADend (Chi\\xADnese ver\\xADsion)\"))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-todo-backend/master/docs/img/vertx-todobackend-ui.png\",\n    \"alt\": null\n  }))), mdx(\"h1\", {\n    \"id\": \"vertx-blueprint---vertx-kue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-blueprint---vertx-kue\"\n  })), \"Vert.x Blueprint - Vert.x Kue\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Repos\\xADi\\xADtory\"), \": \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sczyh30/vertx-blueprint-job-queue\"\n  }), \"sczyh30/vertx-\\u200Bblueprint-job-queue\"), \".\"), mdx(\"p\", null, \"This blue\\xADprint is a pri\\xADor\\xADity job queue de\\xADvel\\xADoped with Vert.x and backed by Redis. It\\u2019s a Vert.x im\\xADple\\xADmen\\xADta\\xADtion ver\\xADsion of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Automattic/kue\"\n  }), \"Au\\xADtomat\\xADtic/kue\"), \" that can be used in pro\\xADduc\\xADtion.\"), mdx(\"p\", null, \"The list of fea\\xADtures pro\\xADvided by Vert.x Kue is avail\\xADable here: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sczyh30/vertx-blueprint-job-queue/blob/master/docs/en/vertx-kue-features-en.md\"\n  }), \"Vert.x Kue Fea\\xADtures\"), \".\"), mdx(\"p\", null, \"This blue\\xADprint is in\\xADtended to be an in\\xADtro\\xADduc\\xADtion to message-\\u200Bbased ap\\xADpli\\xADca\\xADtion de\\xADvel\\xADop\\xADment using Vert.x. From this blue\\xADprint, de\\xADvel\\xADop\\xADers learn:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to make use of \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Vert.x Event Bus\"), \" (dis\\xADtrib\\xADuted)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to de\\xADvelop mes\\xADsage based ap\\xADpli\\xADca\\xADtions with Vert.x\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Event and mes\\xADsage pat\\xADterns with the event bus (Pub/sub, point to point)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to de\\xADsign clus\\xADtered Vert.x ap\\xADpli\\xADca\\xADtions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to de\\xADsign and im\\xADple\\xADment a job queue\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to use \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Vert.x Ser\\xADvice Proxy\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"More com\\xADplex usage of \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-redis-client/java/\"\n  }), \"Vert.x Redis\"))), mdx(\"p\", null, \"The tu\\xADto\\xADr\\xADial are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Eng\\xADlish ver\\xADsion\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-job-queue/kue-core/index.html\"\n  }), \"Vert.x Kue Core Tu\\xADto\\xADr\\xADial - Eng\\xADlish Ver\\xADsion\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-job-queue/kue-http/index.html\"\n  }), \"Vert.x Kue Web Tu\\xADto\\xADr\\xADial - Eng\\xADlish Ver\\xADsion\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Chi\\xADnese ver\\xADsion\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-job-queue/cn/kue-core/index.html\"\n  }), \"Vert.x \\u84DD\\u56FE - Vert.x Kue (Core\\u90E8\\u5206)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-job-queue/cn/kue-http/index.html\"\n  }), \"Vert.x \\u84DD\\u56FE - Vert.x Kue (Web\\u90E8\\u5206)\"))))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-job-queue/master/docs/images/vertx_kue_ui_1.png\",\n    \"alt\": null\n  }))), mdx(\"h1\", {\n    \"id\": \"vertx-blueprint---online-shopping-microservice\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h1\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-blueprint---online-shopping-microservice\"\n  })), \"Vert.x Blueprint - Online Shopping Microservice\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Repos\\xADi\\xADtory\"), \": \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sczyh30/vertx-blueprint-microservice\"\n  }), \"sczyh30/vertx-\\u200Bblueprint-microservice\"), \".\"), mdx(\"p\", null, \"This blue\\xADprint is a micro-\\u200Bshop mi\\xADcroser\\xADvice ap\\xADpli\\xADca\\xADtion de\\xADvel\\xADoped with Vert.x. It is in\\xADtended to be an il\\xADlus\\xADtra\\xADtion on how to de\\xADvelop mi\\xADcroser\\xADvice ap\\xADpli\\xADca\\xADtions using Vert.x. From this blue\\xADprint, de\\xADvel\\xADop\\xADers learn:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Mi\\xADcroser\\xADvice de\\xADvel\\xADop\\xADment with Vert.x\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Asyn\\xADchro\\xADnous de\\xADvel\\xADop\\xADment model\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Re\\xADac\\xADtive pat\\xADterns\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Event sourc\\xADing pat\\xADterns\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Asyn\\xADchro\\xADnous RPC on the clus\\xADtered event bus\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Var\\xADi\\xADous type of ser\\xADvices (e.g. HTTP end\\xADpoint, mes\\xADsage source, event bus ser\\xADvice)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vert.x Ser\\xADvice Dis\\xADcov\\xADery\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vert.x Cir\\xADcuit Breaker\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Mi\\xADcroser\\xADvice with poly\\xADglot per\\xADsis\\xADtence\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to im\\xADple\\xADment an API Gate\\xADway\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Global au\\xADthen\\xADti\\xADca\\xADtion (OAuth 2 + Key\\xADcloak)\")), mdx(\"p\", null, \"And many more things\\u2026\"), mdx(\"p\", null, \"The tu\\xADto\\xADr\\xADial are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Eng\\xADlish ver\\xADsion\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-microservice/index.html\"\n  }), \"Vert.x Mi\\xADcroser\\xADvice Blue\\xADprint Tu\\xADto\\xADr\\xADial - De\\xADvel\\xADop\\xADment\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-microservice/api-gateway.html\"\n  }), \"Vert.x Mi\\xADcroser\\xADvice Blue\\xADprint Tu\\xADto\\xADr\\xADial - API Gate\\xADway\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Chi\\xADnese ver\\xADsion\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-microservice/cn/index.html\"\n  }), \"Vert.x \\u84DD\\u56FE - Micro Shop \\u5FAE\\u670D\\u52A1\\u5B9E\\u6218 (\\u5F00\\u53D1\\u7BC7)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://sczyh30.github.io/vertx-blueprint-microservice/cn/api-gateway.html\"\n  }), \"Vert.x \\u84DD\\u56FE - Micro Shop \\u5FAE\\u670D\\u52A1\\u5B9E\\u6218 (API Gate\\xADway)\"))))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-microservice/master/docs/images/shopping-spa-product-detail.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-microservice/master/docs/images/monitor-dashboard.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"Enjoy the code car\\xADni\\xADval with Vert.x!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>The Vert.x Blue­print project aims to pro­vide guide­lines to Vert.x users to im­ple­ment var­i­ous ap­pli­ca­tions such as message-​based ap­pli­ca­tions and mi­croser­vices. This post in­tro­duces the con­tent of each blue­prints.</p><p>This work has been done in the con­text of a <a href=\"https://developers.google.com/open-source/gsoc/\">Google Sum­mer of Code project</a> .</p><h1 id=\"overview\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#overview\"></a>Overview</h1><p>The blue­print project con­tains three parts: <strong>Todo Back­end</strong>, <strong>Vert.x Kue</strong> and <strong>On­line Shop­ping Mi­croser­vice</strong>. Both runnable code and very de­tailed doc­u­ments and tu­to­ri­als (both in Eng­lish and Chi­nese) are pro­vided.</p><h1 id=\"vertx-blueprint---todo-backend\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-blueprint---todo-backend\"></a>Vert.x Blueprint - Todo Backend</h1><p><strong>Repos­i­tory</strong>: <a href=\"https://github.com/sczyh30/vertx-blueprint-todo-backend\">sczyh30/vertx-​blueprint-todo-backend</a>.</p><p>This blue­print is a todo-​backend im­ple­men­ta­tion using Vert.x and var­i­ous per­sis­tence (e.g. Redis or MySQL). It is in­tended to be an in­tro­duc­tion to basic Vert.x web REST­ful ser­vice de­vel­op­ment. From this blue­print, de­vel­op­ers  learn:</p><ul><li>What is Vert.x and its prin­ci­ples</li><li>What is and how to use <code>Verticle</code></li><li>How to de­velop a REST API using <a href=\"http://vertx.io/docs/vertx-web/java/\">Vert.x Web</a></li><li>How to make use of <strong>asyn­chro­nous de­vel­op­ment model</strong></li><li><code>Future</code>-​based asyn­chro­nous pat­terns</li><li>How to use per­sis­tence such as <em>Redis</em> and <em>MySQL</em> with the help of Vert.x async data</li></ul><p>The tu­to­ri­als are:</p><ul><li><a href=\"http://sczyh30.github.io/vertx-blueprint-todo-backend/\">Vert.x Blue­print - Todo Back­end (Eng­lish ver­sion)</a></li><li><a href=\"http://sczyh30.github.io/vertx-blueprint-todo-backend/cn/\">Vert.x Blue­print - Todo Back­end (Chi­nese ver­sion)</a></li></ul><p><img src=\"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-todo-backend/master/docs/img/vertx-todobackend-ui.png\"/></p><h1 id=\"vertx-blueprint---vertx-kue\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-blueprint---vertx-kue\"></a>Vert.x Blueprint - Vert.x Kue</h1><p><strong>Repos­i­tory</strong>: <a href=\"https://github.com/sczyh30/vertx-blueprint-job-queue\">sczyh30/vertx-​blueprint-job-queue</a>.</p><p>This blue­print is a pri­or­ity job queue de­vel­oped with Vert.x and backed by Redis. It’s a Vert.x im­ple­men­ta­tion ver­sion of <a href=\"https://github.com/Automattic/kue\">Au­tomat­tic/kue</a> that can be used in pro­duc­tion.</p><p>The list of fea­tures pro­vided by Vert.x Kue is avail­able here: <a href=\"https://github.com/sczyh30/vertx-blueprint-job-queue/blob/master/docs/en/vertx-kue-features-en.md\">Vert.x Kue Fea­tures</a>.</p><p>This blue­print is in­tended to be an in­tro­duc­tion to message-​based ap­pli­ca­tion de­vel­op­ment using Vert.x. From this blue­print, de­vel­op­ers learn:</p><ul><li>How to make use of <strong>Vert.x Event Bus</strong> (dis­trib­uted)</li><li>How to de­velop mes­sage based ap­pli­ca­tions with Vert.x</li><li>Event and mes­sage pat­terns with the event bus (Pub/sub, point to point)</li><li>How to de­sign clus­tered Vert.x ap­pli­ca­tions</li><li>How to de­sign and im­ple­ment a job queue</li><li>How to use <strong>Vert.x Ser­vice Proxy</strong></li><li>More com­plex usage of <a href=\"http://vertx.io/docs/vertx-redis-client/java/\">Vert.x Redis</a></li></ul><p>The tu­to­r­ial are:</p><ul><li>Eng­lish ver­sion<ul><li><a href=\"http://sczyh30.github.io/vertx-blueprint-job-queue/kue-core/index.html\">Vert.x Kue Core Tu­to­r­ial - Eng­lish Ver­sion</a></li><li><a href=\"http://sczyh30.github.io/vertx-blueprint-job-queue/kue-http/index.html\">Vert.x Kue Web Tu­to­r­ial - Eng­lish Ver­sion</a></li></ul></li><li>Chi­nese ver­sion<ul><li><a href=\"http://sczyh30.github.io/vertx-blueprint-job-queue/cn/kue-core/index.html\">Vert.x 蓝图 - Vert.x Kue (Core部分)</a></li><li><a href=\"http://sczyh30.github.io/vertx-blueprint-job-queue/cn/kue-http/index.html\">Vert.x 蓝图 - Vert.x Kue (Web部分)</a></li></ul></li></ul><p><img src=\"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-job-queue/master/docs/images/vertx_kue_ui_1.png\"/></p><h1 id=\"vertx-blueprint---online-shopping-microservice\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-blueprint---online-shopping-microservice\"></a>Vert.x Blueprint - Online Shopping Microservice</h1><p><strong>Repos­i­tory</strong>: <a href=\"https://github.com/sczyh30/vertx-blueprint-microservice\">sczyh30/vertx-​blueprint-microservice</a>.</p><p>This blue­print is a micro-​shop mi­croser­vice ap­pli­ca­tion de­vel­oped with Vert.x. It is in­tended to be an il­lus­tra­tion on how to de­velop mi­croser­vice ap­pli­ca­tions using Vert.x. From this blue­print, de­vel­op­ers learn:</p><ul><li>Mi­croser­vice de­vel­op­ment with Vert.x</li><li>Asyn­chro­nous de­vel­op­ment model</li><li>Re­ac­tive pat­terns</li><li>Event sourc­ing pat­terns</li><li>Asyn­chro­nous RPC on the clus­tered event bus</li><li>Var­i­ous type of ser­vices (e.g. HTTP end­point, mes­sage source, event bus ser­vice)</li><li>Vert.x Ser­vice Dis­cov­ery</li><li>Vert.x Cir­cuit Breaker</li><li>Mi­croser­vice with poly­glot per­sis­tence</li><li>How to im­ple­ment an API Gate­way</li><li>Global au­then­ti­ca­tion (OAuth 2 + Key­cloak)</li></ul><p>And many more things…</p><p>The tu­to­r­ial are:</p><ul><li>Eng­lish ver­sion<ul><li><a href=\"http://sczyh30.github.io/vertx-blueprint-microservice/index.html\">Vert.x Mi­croser­vice Blue­print Tu­to­r­ial - De­vel­op­ment</a></li><li><a href=\"http://sczyh30.github.io/vertx-blueprint-microservice/api-gateway.html\">Vert.x Mi­croser­vice Blue­print Tu­to­r­ial - API Gate­way</a></li></ul></li><li>Chi­nese ver­sion<ul><li><a href=\"http://sczyh30.github.io/vertx-blueprint-microservice/cn/index.html\">Vert.x 蓝图 - Micro Shop 微服务实战 (开发篇)</a></li><li><a href=\"http://sczyh30.github.io/vertx-blueprint-microservice/cn/api-gateway.html\">Vert.x 蓝图 - Micro Shop 微服务实战 (API Gate­way)</a></li></ul></li></ul><p><img src=\"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-microservice/master/docs/images/shopping-spa-product-detail.png\"/></p><p><img src=\"https://raw.githubusercontent.com/sczyh30/vertx-blueprint-microservice/master/docs/images/monitor-dashboard.png\"/></p><p>Enjoy the code car­ni­val with Vert.x!</p>","scope":{}},"tfIdfTerms":[{"term":"blueprint","tf":20},{"term":"develop","tf":14},{"term":"microservic","tf":10},{"term":"us","tf":10},{"term":"kue","tf":9},{"term":"version","tf":9},{"term":"tutori","tf":8},{"term":"applic","tf":7},{"term":"todo","tf":6},{"term":"backend","tf":6},{"term":"english","tf":6},{"term":"event","tf":6},{"term":"implement","tf":5},{"term":"messag","tf":5},{"term":"shop","tf":5},{"term":"servic","tf":5},{"term":"base","tf":4},{"term":"chines","tf":4},{"term":"redi","tf":4},{"term":"web","tf":4},{"term":"api","tf":4},{"term":"asynchron","tf":4},{"term":"pattern","tf":4},{"term":"bu","tf":4},{"term":"project","tf":3}]},{"filename":"blog/2016-08-26-vert-x-fall-conferences.mdx","date":"2016-08-26","slug":"vert-x-fall-conferences","meta":{"title":"Vert.x fall conferences","category":"news","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"A lot of Vert.x conferences are planned this fall around the world, here is a quick recap of these events."},"readingTime":{"text":"1 min read","minutes":0.98,"time":58800,"words":196},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"A lot of Vert.x con\\xADfer\\xADences are planned this fall around the world, here is a quick recap of these events:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Java\\xADZone\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://2016.javazone.no/program/lets-build-a-scalable-async-vert-x-app-in-60-min\"\n  }), \"Let\\u2019s build a scal\\xADable async Vert.x app in < 60 min\"), \" - Paulo Lopes (Wednes\\xADday, 18:20 - 19:20)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Geecon Re\\xADac\\xADtive in Sopot\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://2016.reactive.geecon.org/#bio\"\n  }), \"Re\\xADac\\xADtive back-\\u200Bpressure with Vert.x\"), \" - Julien Viet (9th of Sep\\xADtem\\xADber, 11:45 - 12:30)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"JavaOne\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Re\\xADac\\xADtive Mi\\xADcroser\\xADvices with Vert.x - Burr Sut\\xADter (Thurs\\xADday, Sep 22, 4:00 p.m. - 5:00 p.m.)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Re\\xADac\\xADtive Dis\\xADtrib\\xADuted Ap\\xADpli\\xADca\\xADtions with Vert.x - Clement Es\\xADcoffier (Wednes\\xADday, Sep 21, 8:30 a.m. - 9:30 a.m.)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vert.x: From Zero to (Micro-\\u200B) Hero (Hands-\\u200Bon Lab) - Clement Es\\xADcoffier (Thurs\\xADday, Sep 22, 12:00 p.m. - 2:00 p.m.)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Go Re\\xADac\\xADtive with Vert.x in Or\\xADa\\xADcle Ap\\xADpli\\xADca\\xADtion Con\\xADtainer Cloud - Edson Yanaga (Mon\\xADday, Sep 19, 5:30 p.m. - 6:30 p.m.)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Re\\xADac\\xADtive Sum\\xADmit\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://reactivesummit2016.sched.org/event/7emt/reactive-polyglot-microservices-with-openshift-and-vertx\"\n  }), \"Re\\xADac\\xADtive Poly\\xADglot Mi\\xADcroser\\xADvices with Open\\xADShift and Vert.x\"), \" - Clement Es\\xADcoffier (Tues\\xADday, Oc\\xADto\\xADber 4, 11:20am - 12:10pm)\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"De\\xADvoxx BE\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://cfp.devoxx.be/2016/talk/BED-6160/Better_performance_with_HTTP%2F2\"\n  }), \"Bet\\xADter per\\xADfor\\xADmance with HTTP/2\"), \" - Julien Viet\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://cfp.devoxx.be/2016/talk/HKC-9910/Reactive_Microservices_with_Vert.x\"\n  }), \"Re\\xADac\\xADtive Mi\\xADcroser\\xADvices with Vert.x\"), \" - Edi\\xADson Yanaga and Burr Sut\\xADter\")))), mdx(\"p\", null, \"If you are going at one of these con\\xADfer\\xADences, don\\u2019t miss the op\\xADpor\\xADtu\\xADnity to learn more about Vert.x!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>A lot of Vert.x con­fer­ences are planned this fall around the world, here is a quick recap of these events:</p><ul><li>Java­Zone<ul><li><a href=\"https://2016.javazone.no/program/lets-build-a-scalable-async-vert-x-app-in-60-min\">Let’s build a scal­able async Vert.x app in &lt; 60 min</a> - Paulo Lopes (Wednes­day, 18:20 - 19:20)</li></ul></li><li>Geecon Re­ac­tive in Sopot<ul><li><a href=\"http://2016.reactive.geecon.org/#bio\">Re­ac­tive back-​pressure with Vert.x</a> - Julien Viet (9th of Sep­tem­ber, 11:45 - 12:30)</li></ul></li><li>JavaOne<ul><li>Re­ac­tive Mi­croser­vices with Vert.x - Burr Sut­ter (Thurs­day, Sep 22, 4:00 p.m. - 5:00 p.m.)</li><li>Re­ac­tive Dis­trib­uted Ap­pli­ca­tions with Vert.x - Clement Es­coffier (Wednes­day, Sep 21, 8:30 a.m. - 9:30 a.m.)</li><li>Vert.x: From Zero to (Micro-​) Hero (Hands-​on Lab) - Clement Es­coffier (Thurs­day, Sep 22, 12:00 p.m. - 2:00 p.m.)</li><li>Go Re­ac­tive with Vert.x in Or­a­cle Ap­pli­ca­tion Con­tainer Cloud - Edson Yanaga (Mon­day, Sep 19, 5:30 p.m. - 6:30 p.m.)</li></ul></li><li>Re­ac­tive Sum­mit<ul><li><a href=\"https://reactivesummit2016.sched.org/event/7emt/reactive-polyglot-microservices-with-openshift-and-vertx\">Re­ac­tive Poly­glot Mi­croser­vices with Open­Shift and Vert.x</a> - Clement Es­coffier (Tues­day, Oc­to­ber 4, 11:20am - 12:10pm)</li></ul></li><li>De­voxx BE<ul><li><a href=\"http://cfp.devoxx.be/2016/talk/BED-6160/Better_performance_with_HTTP%2F2\">Bet­ter per­for­mance with HTTP/2</a> - Julien Viet</li><li><a href=\"http://cfp.devoxx.be/2016/talk/HKC-9910/Reactive_Microservices_with_Vert.x\">Re­ac­tive Mi­croser­vices with Vert.x</a> - Edi­son Yanaga and Burr Sut­ter</li></ul></li></ul><p>If you are going at one of these con­fer­ences, don’t miss the op­por­tu­nity to learn more about Vert.x!</p>","scope":{}},"tfIdfTerms":[{"term":"reactiv","tf":8},{"term":"30","tf":5},{"term":"sep","tf":4},{"term":"00","tf":4},{"term":"12","tf":3},{"term":"microservic","tf":3},{"term":"clement","tf":3},{"term":"escoffi","tf":3},{"term":"11","tf":2},{"term":"19","tf":2},{"term":"20","tf":2},{"term":"22","tf":2},{"term":"confer","tf":2},{"term":"wednesdai","tf":2},{"term":"julien","tf":2},{"term":"viet","tf":2},{"term":"burr","tf":2},{"term":"sutter","tf":2},{"term":"thursdai","tf":2},{"term":"applic","tf":2},{"term":"go","tf":2},{"term":"yanaga","tf":2},{"term":"18","tf":1},{"term":"21","tf":1},{"term":"45","tf":1}]}],"numPages":16},"__N_SSG":true}