{"pageProps":{"categories":["releases","guides","news"],"page":9,"posts":[{"filename":"blog/2017-05-22-presentation-of-the-vert-x-swagger-project.mdx","date":"2017-05-22","slug":"presentation-of-the-vert-x-swagger-project","meta":{"title":"Presentation of the Vert.x-Swagger project","category":"guides","authors":[{"name":"Florent Chamfroy","github_id":"phiz71"}],"summary":"This post is an introduction to the Vert.x-Swagger project, and describe how to use the Swagger-Codegen plugin and the SwaggerRouter class."},"readingTime":{"text":"5 min read","minutes":4.705,"time":282300,"words":941},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This post is an in\\xADtro\\xADduc\\xADtion to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/phiz71/vertx-swagger\"\n  }), \"Vert.x-\\u200BSwagger\"), \" project, and de\\xADscribe how to use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Swagger-Codegen\"), \" plug\\xADin and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SwaggerRouter\"), \" class.\"), mdx(\"h2\", {\n    \"id\": \"eclipse-vertx--swagger\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#eclipse-vertx--swagger\"\n  })), \"Eclipse Vert.x & Swagger\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/\"\n  }), \"Vert.x\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/\"\n  }), \"Vert.x Web\"), \" are very con\\xADve\\xADnient to write REST API and es\\xADpe\\xADcially the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/Router.html\"\n  }), \"Router\"), \" which is very use\\xADful to man\\xADage all re\\xADsources of an API.\"), mdx(\"p\", null, \"But when I start a new API, I usu\\xADally use the \\u201Cdesign-\\u200Bfirst\\u201D ap\\xADproach and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://swagger.io/specification/\"\n  }), \"Swag\\xADger\"), \" is my best friend to de\\xADfine what my API is sup\\xADposed to do. And then, comes the \\u201Cbor\\xADing\\u201D part of the job : con\\xADvert the swag\\xADger file con\\xADtent into java code. That\\u2019s al\\xADways the same : re\\xADsources, op\\xADer\\xADa\\xADtions, mod\\xADels\\u2026\"), mdx(\"p\", null, \"For\\xADtu\\xADnately, Swag\\xADger pro\\xADvides a code\\xADgen tool : \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/swagger-api/swagger-codegen\"\n  }), \"Swagger-\\u200BCodegen\"), \". With this tool, you can gen\\xADer\\xADate a server stub based on your swag\\xADger de\\xADf\\xADi\\xADn\\xADi\\xADtion file.\\nHow\\xADever, even if this gen\\xADer\\xADa\\xADtor pro\\xADvides many dif\\xADfer\\xADent lan\\xADguages and frame\\xADwork, Vert.X is miss\\xADing.\"), mdx(\"p\", null, \"This is where the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/phiz71/vertx-swagger\"\n  }), \"Vert.x-\\u200BSwagger\"), \" project comes in.\"), mdx(\"h2\", {\n    \"id\": \"the-project\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-project\"\n  })), \"The project\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x-\\u200BSwagger\"), \" is a maven project pro\\xADvid\\xADing 2 mod\\xADules.\"), mdx(\"h3\", {\n    \"id\": \"vertx-swagger-codegen\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-swagger-codegen\"\n  })), \"vertx-swagger-codegen\"), mdx(\"p\", null, \"It\\u2019s a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/swagger-api/swagger-codegen\"\n  }), \"Swagger-\\u200BCodegen\"), \" plug\\xADin, which add the ca\\xADpa\\xADbil\\xADity of gen\\xADer\\xADat\\xADing a Java Vert.x Web\\xADServer to the gen\\xADer\\xADa\\xADtor.\"), mdx(\"p\", null, \"The gen\\xADer\\xADated server mainly con\\xADtains :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POJOs for \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"definitions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"one Ver\\xADti\\xADcle per \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"tag\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"one Main\\xADVer\\xADti\\xADcle, which man\\xADage oth\\xADers APIVer\\xADti\\xADcle and start an HttpServer.\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The Main\\xADVer\\xADti\\xADcle use \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"vertx-\\u200Bswagger-router\"))), mdx(\"h3\", {\n    \"id\": \"vertx-swagger-router\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-swagger-router\"\n  })), \"vertx-swagger-router\"), mdx(\"p\", null, \"The main class of this mod\\xADule is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SwaggerRouter\"), \". It\\u2019s more or less a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Fac\\xADtory\"), \" (and maybe I should re\\xADname the class) that can cre\\xADate a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/Router.html\"\n  }), \"Router\"), \", using the swag\\xADger de\\xADf\\xADi\\xADn\\xADi\\xADtion file to con\\xADfig\\xADure all the routes. For each route, it ex\\xADtracts pa\\xADra\\xADme\\xADters from the re\\xADquest (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Path\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Header\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Body\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Form\"), \") and send them on the event\\xADBus, using ei\\xADther the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"operationId\"), \" as the ad\\xADdress or a com\\xADputed id (just a pa\\xADra\\xADme\\xADter in the con\\xADstruc\\xADtor).\"), mdx(\"h2\", {\n    \"id\": \"let-see-how-it-works\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#let-see-how-it-works\"\n  })), \"Let see how it works\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"For this post, I will use a sim\\xADpli\\xADfied swag\\xADger file but you can find a more com\\xADplex ex\\xADam\\xADple \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/phiz71/vertx-swagger/tree/master/sample/petstore-vertx-server\"\n  }), \"here\"), \" based on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://petstore.swagger.io/\"\n  }), \"pet\\xADstore\"), \" swag\\xADger file\")), mdx(\"h3\", {\n    \"id\": \"generating-the-server\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#generating-the-server\"\n  })), \"Generating the server\"), mdx(\"p\", null, \"First, choose your swag\\xADger de\\xADf\\xADi\\xADn\\xADi\\xADtion. Here\\u2019s a YAML File, but it could be a JSON file:\"), mdx(Gist, {\n    url: \"https://gist.github.com/phiz71/6c654f3da2d4124d3fe65e5aaaaedf55\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"Then, down\\xADload these li\\xADbraries :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://central.maven.org/maven2/io/swagger/swagger-codegen-cli/2.2.2/swagger-codegen-cli-2.2.2.jar\"\n  }), \"swagger-\\u200Bcodegen-cli\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://central.maven.org/maven2/com/github/phiz71/vertx-swagger-codegen/1.0.0/vertx-swagger-codegen-1.0.0.jar\"\n  }), \"vertx-\\u200Bswagger-codegen\"))), mdx(\"p\", null, \"Fi\\xADnally, run this com\\xADmand\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -cp /path/to/swagger-codegen-cli-2.2.2.jar:/path/to/vertx-swagger-codegen-1.0.0.jar io.swagger.codegen.SwaggerCodegen generate \\\\\\n  -l java-vertx \\\\\\n  -o path/to/destination/folder \\\\\\n  -i path/to/swagger/definition \\\\\\n  --group-id your.group.id \\\\\\n  --artifact-id your.artifact.id\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"For more In\\xADfor\\xADma\\xADtion about how Swag\\xADger\\xADCode\\xADgen works, you can read this \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/swagger-api/swagger-codegen#getting-started\"\n  }), \"https://github.com/swagger-\\u200Bapi/swagger-\\u200Bcodegen#getting-\\u200Bstarted\"))), mdx(\"p\", null, \"You should have some\\xADthing like that in your con\\xADsole:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-gradle\"\n  }), \"[main] INFO io.swagger.parser.Swagger20Parser - reading \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"from\"), \" ./wineCellarSwagger.yaml\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/model/\"), \"Bottle.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/model/\"), \"CellarInformation.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/verticle/\"), \"BottlesApi.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/verticle/\"), \"BottlesApiVerticle.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/verticle/I\"), \"nformationApi.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/verticle/I\"), \"nformationApiVerticle.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"resources/swagger.json\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"java\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/io/\"), \"swagger\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/server/\"), \"api/MainApiVerticle.java\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"resources/vertx-\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"default\"), \"-jul-logging.properties\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"pom.xml\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \"README.md\\n[main] INFO io.swagger.codegen.AbstractGenerator - writing \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"file\"), \" [path\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/to/\"), \"destination\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/folder]/\"), \".swagger-codegen-ignore\\n\")), mdx(\"p\", null, \"And this in your des\\xADti\\xADna\\xADtion folder:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-swagger-presentation/GeneratedProject.png\",\n    \"alt\": \"Generated sources\"\n  }))), mdx(\"h3\", {\n    \"id\": \"what-have-been-created-\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#what-have-been-created-\"\n  })), \"What have been created ?\"), mdx(\"p\", null, \"As you can see in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1\"), \",  the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"vertx-\\u200Bswagger-codegen\"), \" plug\\xADin has cre\\xADated one POJO by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"definition\"), \" in the swag\\xADger file.\"), mdx(\"h4\", {\n    \"id\": \"example--the-bottle-definition\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#example--the-bottle-definition\"\n  })), \"Example : the bottle definition\"), mdx(Gist, {\n    url: \"https://gist.github.com/phiz71/eabafda440b24881126089128d677121\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"In \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"2a\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"2b\"), \" you can find :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"an in\\xADter\\xADface which con\\xADtains a func\\xADtion per \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"operation\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"a ver\\xADti\\xADcle which de\\xADfines all \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"operationId\"), \" and cre\\xADate \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_the_event_bus_api\"\n  }), \"Event\\xADBus\"), \" con\\xADsumers \")), mdx(\"h4\", {\n    \"id\": \"example--the-bottles-interface\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#example--the-bottles-interface\"\n  })), \"Example : the Bottles interface\"), mdx(Gist, {\n    url: \"https://gist.github.com/phiz71/be1ca2f550f44aea7fb2710b383e26ed\",\n    mdxType: \"Gist\"\n  }), mdx(\"h4\", {\n    \"id\": \"example--the-bottles-verticle\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#example--the-bottles-verticle\"\n  })), \"Example : the Bottles verticle\"), mdx(Gist, {\n    url: \"https://gist.github.com/phiz71/c0aadbb4f26ebed8e2e145d0b4a8d210\",\n    mdxType: \"Gist\"\n  }), mdx(\"h3\", {\n    \"id\": \"-and-now-\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#-and-now-\"\n  })), \"\\u2026 and now ?\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"23\"), \" of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"BottlesApiVerticle.java\"), \", you can see this\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"BottlesApi service = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" BottlesApiImpl();\\n\")), mdx(\"p\", null, \"This line will not com\\xADpile until the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"BottlesApiImpl\"), \" class is cre\\xADated.\"), mdx(\"p\", null, \"In all \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"XXXAPI\"), \"Ver\\xADti\\xADcles, you will find a vari\\xADable called \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ser\\xADvice\"), \". It is a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"XXXAPI\"), \" type and it is in\\xADstan\\xADci\\xADated with a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"XXXAPI\"), \"Impl con\\xADtruc\\xADtor. This class does not exist yet since it is the busi\\xADness of your API.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"And so you will have to cre\\xADate these im\\xADple\\xADmen\\xADta\\xADtions.\")), mdx(\"h2\", {\n    \"id\": \"fine-but-what-if-i-dont-want-to-build-my-api-like-this-\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#fine-but-what-if-i-dont-want-to-build-my-api-like-this-\"\n  })), \"Fine, but what if I don\\u2019t want to build my API like this ?\"), mdx(\"p\", null, \"Well, Vert.x is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"un\\xADopin\\xADion\\xADated\"), \" but the way the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"vertx-\\u200Bswagger-codegen\"), \" cre\\xADates the server stub \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"is not\"), \".\\nSo if you want to im\\xADple\\xADment your API the way you want, while en\\xADjoy\\xADing dy\\xADnamic rout\\xADing based on a swag\\xADger file, the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"vertx-\\u200Bswagger-router\"), \" li\\xADbrary can be used stand\\xADalone. \"), mdx(\"p\", null, \"Just im\\xADport this jar into your project:\"), mdx(Gist, {\n    url: \"https://gist.github.com/phiz71/56e723362a1d1370c7262bff246fb087\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"You will be able to cre\\xADate your \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/Router.html\"\n  }), \"Router\"), \" like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"FileSystem vertxFileSystem = vertx.fileSystem();\\nvertxFileSystem.readFile(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"***YOUR_SWAGGER_FILE***\\\"\"), \", readFile -> {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (readFile.succeeded()) {\\n        Swagger swagger = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" SwaggerParser().parse(readFile.result().toString(Charset.forName(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"utf-8\\\"\"), \"))); \\n        Router swaggerRouter = SwaggerRouter.swaggerRouter(Router.router(vertx), swagger, vertx.eventBus(), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" OperationIdServiceIdResolver());\\n        [...]\\n   } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n        [...]\\n   }\\n});\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"You can ig\\xADnore the last pa\\xADra\\xADme\\xADter in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SwaggerRouter.swaggerRouter(...)\"), \". As a re\\xADsult, ad\\xADdresses will be com\\xADputed in\\xADstead of using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"operationId\"), \" from the swag\\xADger file.\\nFor in\\xADstance, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET /bottles/{bottle_id}\"), \" will be\\xADcome \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"GET_bot\\xADtles_bottle-\\u200Bid\"))), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"Vert.x and Swag\\xADger are great tools to build and doc\\xADu\\xADment an API but using both in the same project can be painful. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/phiz71/vertx-swagger\"\n  }), \"Vert.x-\\u200BSwagger\"), \" project was made to save time, let\\xADting the de\\xADvel\\xADop\\xADers fo\\xADcus\\xADing on busi\\xADness code.\\nIt can be seen as an API frame\\xADwork over Vert.X.\"), mdx(\"p\", null, \"You can also use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SwaggerRouter\"), \" in your own project with\\xADout using Swagger-\\u200BCodegen.\"), mdx(\"p\", null, \"In fu\\xADture re\\xADleases, more in\\xADfor\\xADma\\xADtion from the swag\\xADger file will be used to con\\xADfig\\xADure the router and cer\\xADtainly oth\\xADers lan\\xADguages will be sup\\xADported.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Though Vert.x is poly\\xADglot, Vert.x-\\u200BSwagger project only sup\\xADports Java. If you want to con\\xADtribute to sup\\xADport more lan\\xADguages, you\\u2019re wel\\xADcome :)\")), mdx(\"p\", null, \"Thanks for read\\xADing.\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>This post is an in­tro­duc­tion to the <a href=\"https://github.com/phiz71/vertx-swagger\">Vert.x-​Swagger</a> project, and de­scribe how to use the <code>Swagger-Codegen</code> plug­in and the <code>SwaggerRouter</code> class.</p><h2 id=\"eclipse-vertx--swagger\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#eclipse-vertx--swagger\"></a>Eclipse Vert.x &amp; Swagger</h2><p><a href=\"http://vertx.io/docs/vertx-core/java/\">Vert.x</a> and <a href=\"http://vertx.io/docs/vertx-web/java/\">Vert.x Web</a> are very con­ve­nient to write REST API and es­pe­cially the <a href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/Router.html\">Router</a> which is very use­ful to man­age all re­sources of an API.</p><p>But when I start a new API, I usu­ally use the “design-​first” ap­proach and <a href=\"http://swagger.io/specification/\">Swag­ger</a> is my best friend to de­fine what my API is sup­posed to do. And then, comes the “bor­ing” part of the job : con­vert the swag­ger file con­tent into java code. That’s al­ways the same : re­sources, op­er­a­tions, mod­els…</p><p>For­tu­nately, Swag­ger pro­vides a code­gen tool : <a href=\"https://github.com/swagger-api/swagger-codegen\">Swagger-​Codegen</a>. With this tool, you can gen­er­ate a server stub based on your swag­ger de­f­i­n­i­tion file.\nHow­ever, even if this gen­er­a­tor pro­vides many dif­fer­ent lan­guages and frame­work, Vert.X is miss­ing.</p><p>This is where the <a href=\"https://github.com/phiz71/vertx-swagger\">Vert.x-​Swagger</a> project comes in.</p><h2 id=\"the-project\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-project\"></a>The project</h2><p><strong>Vert.x-​Swagger</strong> is a maven project pro­vid­ing 2 mod­ules.</p><h3 id=\"vertx-swagger-codegen\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-swagger-codegen\"></a>vertx-swagger-codegen</h3><p>It’s a <a href=\"https://github.com/swagger-api/swagger-codegen\">Swagger-​Codegen</a> plug­in, which add the ca­pa­bil­ity of gen­er­at­ing a Java Vert.x Web­Server to the gen­er­a­tor.</p><p>The gen­er­ated server mainly con­tains :</p><ul><li>POJOs for <code>definitions</code></li><li>one Ver­ti­cle per <code>tag</code></li><li>one Main­Ver­ti­cle, which man­age oth­ers APIVer­ti­cle and start an HttpServer.</li></ul><div class=\"alert info\"><p>The Main­Ver­ti­cle use <em>vertx-​swagger-router</em></p></div><h3 id=\"vertx-swagger-router\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-swagger-router\"></a>vertx-swagger-router</h3><p>The main class of this mod­ule is <code>SwaggerRouter</code>. It’s more or less a <em>Fac­tory</em> (and maybe I should re­name the class) that can cre­ate a <a href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/Router.html\">Router</a>, using the swag­ger de­f­i­n­i­tion file to con­fig­ure all the routes. For each route, it ex­tracts pa­ra­me­ters from the re­quest (<code>Query</code>, <code>Path</code>, <code>Header</code>, <code>Body</code>, <code>Form</code>) and send them on the event­Bus, using ei­ther the <code>operationId</code> as the ad­dress or a com­puted id (just a pa­ra­me­ter in the con­struc­tor).</p><h2 id=\"let-see-how-it-works\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#let-see-how-it-works\"></a>Let see how it works</h2><div class=\"alert info\"><p>For this post, I will use a sim­pli­fied swag­ger file but you can find a more com­plex ex­am­ple <a href=\"https://github.com/phiz71/vertx-swagger/tree/master/sample/petstore-vertx-server\">here</a> based on the <a href=\"http://petstore.swagger.io/\">pet­store</a> swag­ger file</p></div><h3 id=\"generating-the-server\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#generating-the-server\"></a>Generating the server</h3><p>First, choose your swag­ger de­f­i­n­i­tion. Here’s a YAML File, but it could be a JSON file:</p><div>...waiting for Gist...</div><p>Then, down­load these li­braries :</p><ul><li><a href=\"http://central.maven.org/maven2/io/swagger/swagger-codegen-cli/2.2.2/swagger-codegen-cli-2.2.2.jar\">swagger-​codegen-cli</a></li><li><a href=\"http://central.maven.org/maven2/com/github/phiz71/vertx-swagger-codegen/1.0.0/vertx-swagger-codegen-1.0.0.jar\">vertx-​swagger-codegen</a></li></ul><p>Fi­nally, run this com­mand</p><pre><code class=\"hljs language-bash\">java -cp /path/to/swagger-codegen-cli-2.2.2.jar:/path/to/vertx-swagger-codegen-1.0.0.jar io.swagger.codegen.SwaggerCodegen generate \\\n  -l java-vertx \\\n  -o path/to/destination/folder \\\n  -i path/to/swagger/definition \\\n  --group-id your.group.id \\\n  --artifact-id your.artifact.id\n</code></pre><div class=\"alert info\"><p>For more In­for­ma­tion about how Swag­ger­Code­gen works, you can read this <a href=\"https://github.com/swagger-api/swagger-codegen#getting-started\">https://github.com/swagger-​api/swagger-​codegen#getting-​started</a></p></div><p>You should have some­thing like that in your con­sole:</p><pre><code class=\"hljs language-gradle\">[main] INFO io.swagger.parser.Swagger20Parser - reading <span class=\"hljs-keyword\">from</span> ./wineCellarSwagger.yaml\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api<span class=\"hljs-regexp\">/model/</span>Bottle.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api<span class=\"hljs-regexp\">/model/</span>CellarInformation.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api<span class=\"hljs-regexp\">/verticle/</span>BottlesApi.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api<span class=\"hljs-regexp\">/verticle/</span>BottlesApiVerticle.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api<span class=\"hljs-regexp\">/verticle/I</span>nformationApi.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api<span class=\"hljs-regexp\">/verticle/I</span>nformationApiVerticle.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>resources/swagger.json\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>java<span class=\"hljs-regexp\">/io/</span>swagger<span class=\"hljs-regexp\">/server/</span>api/MainApiVerticle.java\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>src<span class=\"hljs-regexp\">/main/</span>resources/vertx-<span class=\"hljs-keyword\">default</span>-jul-logging.properties\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>pom.xml\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>README.md\n[main] INFO io.swagger.codegen.AbstractGenerator - writing <span class=\"hljs-keyword\">file</span> [path<span class=\"hljs-regexp\">/to/</span>destination<span class=\"hljs-regexp\">/folder]/</span>.swagger-codegen-ignore\n</code></pre><p>And this in your des­ti­na­tion folder:</p><p><img src=\"/images/blog/vertx-swagger-presentation/GeneratedProject.png\" alt=\"Generated sources\"/></p><h3 id=\"what-have-been-created-\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#what-have-been-created-\"></a>What have been created ?</h3><p>As you can see in <strong>1</strong>,  the <em>vertx-​swagger-codegen</em> plug­in has cre­ated one POJO by <code>definition</code> in the swag­ger file.</p><h4 id=\"example--the-bottle-definition\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#example--the-bottle-definition\"></a>Example : the bottle definition</h4><div>...waiting for Gist...</div><p>In <strong>2a</strong> and <strong>2b</strong> you can find :</p><ul><li>an in­ter­face which con­tains a func­tion per <code>operation</code></li><li>a ver­ti­cle which de­fines all <code>operationId</code> and cre­ate <a href=\"http://vertx.io/docs/vertx-core/java/#_the_event_bus_api\">Event­Bus</a> con­sumers </li></ul><h4 id=\"example--the-bottles-interface\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#example--the-bottles-interface\"></a>Example : the Bottles interface</h4><div>...waiting for Gist...</div><h4 id=\"example--the-bottles-verticle\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#example--the-bottles-verticle\"></a>Example : the Bottles verticle</h4><div>...waiting for Gist...</div><h3 id=\"-and-now-\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#-and-now-\"></a>… and now ?</h3><p>Line <code>23</code> of <code>BottlesApiVerticle.java</code>, you can see this</p><pre><code class=\"hljs language-java\">BottlesApi service = <span class=\"hljs-keyword\">new</span> BottlesApiImpl();\n</code></pre><p>This line will not com­pile until the <code>BottlesApiImpl</code> class is cre­ated.</p><p>In all <strong>XXXAPI</strong>Ver­ti­cles, you will find a vari­able called <em>ser­vice</em>. It is a <strong>XXXAPI</strong> type and it is in­stan­ci­ated with a <strong>XXXAPI</strong>Impl con­truc­tor. This class does not exist yet since it is the busi­ness of your API.</p><p><strong>And so you will have to cre­ate these im­ple­men­ta­tions.</strong></p><h2 id=\"fine-but-what-if-i-dont-want-to-build-my-api-like-this-\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#fine-but-what-if-i-dont-want-to-build-my-api-like-this-\"></a>Fine, but what if I don’t want to build my API like this ?</h2><p>Well, Vert.x is <strong>un­opin­ion­ated</strong> but the way the <em>vertx-​swagger-codegen</em> cre­ates the server stub <strong>is not</strong>.\nSo if you want to im­ple­ment your API the way you want, while en­joy­ing dy­namic rout­ing based on a swag­ger file, the <em>vertx-​swagger-router</em> li­brary can be used stand­alone. </p><p>Just im­port this jar into your project:</p><div>...waiting for Gist...</div><p>You will be able to cre­ate your <a href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/Router.html\">Router</a> like this:</p><pre><code class=\"hljs language-java\">FileSystem vertxFileSystem = vertx.fileSystem();\nvertxFileSystem.readFile(<span class=\"hljs-string\">&quot;***YOUR_SWAGGER_FILE***&quot;</span>, readFile -&gt; {\n    <span class=\"hljs-keyword\">if</span> (readFile.succeeded()) {\n        Swagger swagger = <span class=\"hljs-keyword\">new</span> SwaggerParser().parse(readFile.result().toString(Charset.forName(<span class=\"hljs-string\">&quot;utf-8&quot;</span>))); \n        Router swaggerRouter = SwaggerRouter.swaggerRouter(Router.router(vertx), swagger, vertx.eventBus(), <span class=\"hljs-keyword\">new</span> OperationIdServiceIdResolver());\n        [...]\n   } <span class=\"hljs-keyword\">else</span> {\n        [...]\n   }\n});\n</code></pre><div class=\"alert info\"><p>You can ig­nore the last pa­ra­me­ter in <code>SwaggerRouter.swaggerRouter(...)</code>. As a re­sult, ad­dresses will be com­puted in­stead of using <code>operationId</code> from the swag­ger file.\nFor in­stance, <code>GET /bottles/{bottle_id}</code> will be­come <em>GET_bot­tles_bottle-​id</em></p></div><h2 id=\"conclusion\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"></a>Conclusion</h2><p>Vert.x and Swag­ger are great tools to build and doc­u­ment an API but using both in the same project can be painful. The <a href=\"https://github.com/phiz71/vertx-swagger\">Vert.x-​Swagger</a> project was made to save time, let­ting the de­vel­op­ers fo­cus­ing on busi­ness code.\nIt can be seen as an API frame­work over Vert.X.</p><p>You can also use the <code>SwaggerRouter</code> in your own project with­out using Swagger-​Codegen.</p><p>In fu­ture re­leases, more in­for­ma­tion from the swag­ger file will be used to con­fig­ure the router and cer­tainly oth­ers lan­guages will be sup­ported.</p><div class=\"alert info\"><p>Though Vert.x is poly­glot, Vert.x-​Swagger project only sup­ports Java. If you want to con­tribute to sup­port more lan­guages, you’re wel­come :)</p></div><p>Thanks for read­ing.</p>","scope":{}},"tfIdfTerms":[{"term":"swagger","tf":32},{"term":"us","tf":13},{"term":"file","tf":11},{"term":"api","tf":10},{"term":"codegen","tf":10},{"term":"project","tf":9},{"term":"creat","tf":8},{"term":"router","tf":7},{"term":"gener","tf":6},{"term":"class","tf":5},{"term":"server","tf":4},{"term":"definit","tf":4},{"term":"verticl","tf":4},{"term":"plugin","tf":3},{"term":"start","tf":3},{"term":"java","tf":3},{"term":"provid","tf":3},{"term":"tool","tf":3},{"term":"base","tf":3},{"term":"languag","tf":3},{"term":"on","tf":3},{"term":"rout","tf":3},{"term":"paramet","tf":3},{"term":"post","tf":2},{"term":"manag","tf":2}]},{"filename":"blog/2017-05-09-time-scheduling-with-chime.mdx","date":"2017-05-09","slug":"time-scheduling-with-chime","meta":{"title":"Time scheduling with Chime","category":"guides","authors":[{"name":"Lisi","github_id":"LisiLisenok"}],"summary":"Eclipse Vert.x executes periodic and delayed actions with periodic and one-shot timers. Chime is a time scheduler verticle that works on the Vert.x event bus."},"readingTime":{"text":"8 min read","minutes":7.34,"time":440400,"words":1468},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Eclipse Vert.x ex\\xADe\\xADcutes pe\\xADri\\xADodic and de\\xADlayed ac\\xADtions with\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_executing_periodic_and_delayed_actions\"\n  }), \"pe\\xADri\\xADodic and one-\\u200Bshot timers\"), \".\\nThis is the base for time sched\\xADul\\xADing and reach fea\\xADture ex\\xADten\\xADsion must be rather in\\xADter\\xADest\\xADing.\\nBe no\\xADti\\xADfied at cer\\xADtain date / time, take into ac\\xADcount hol\\xADi\\xADdays,\\nre\\xADpeat no\\xADti\\xADfi\\xADca\\xADtions until a given date, apply time zone,\\ntake into ac\\xADcount day\\xADlight sav\\xADing time etc.\\nThere are a lot of use\\xADful fea\\xADtures time sched\\xADuler may in\\xADtro\\xADduce to the Vert.x stack.  \"), mdx(\"h2\", {\n    \"id\": \"chime\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#chime\"\n  })), \"Chime\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LisiLisenok/Chime\"\n  }), \"Chime\"), \" is time sched\\xADuler ver\\xADti\\xADcle which works on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" event bus and pro\\xADvides:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"sched\\xADul\\xADing with \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"cron-\\u200Bstyle\"), \", \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"in\\xADter\\xADval\"), \" or \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"union\"), \" timers:\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"at a cer\\xADtain time of day (to the sec\\xADond);  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"on cer\\xADtain days of the week, month or year;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"with a given time in\\xADter\\xADval;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"with nearly any com\\xADbi\\xADna\\xADtion of all of above;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADpeat\\xADing a given num\\xADber of times;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADpeat\\xADing until a given time / date;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADpeat\\xADing in\\xADfi\\xADnitely  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"prox\\xADy\\xADing event bus with con\\xADven\\xADtional in\\xADter\\xADfaces  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ap\\xADply\\xADing time zones avail\\xADable on \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"JVM\"), \" with day\\xADlight sav\\xADing time taken into ac\\xADcount  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"flex\\xADi\\xADble timers man\\xADage\\xADment sys\\xADtem:  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"group\\xADing timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"defin\\xADing a timer start or end times  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"paus\\xADing / re\\xADsum\\xADing;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"fire count\\xADing;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lis\\xADten\\xADing and send\\xADing mes\\xADsages via event bus with \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"JSON\"), \";  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"pub\\xADlish\\xADing\"), \" or \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"send\\xADing\"), \" timer fire event to the ad\\xADdress of your choice.  \")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" is writ\\xADten in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://ceylon-lang.org\"\n  }), \"Cey\\xADlon\"), \" and is avail\\xADable at\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://herd.ceylon-lang.org/modules/herd.schedule.chime\"\n  }), \"Cey\\xADlon Herd\"), \".\")), mdx(\"h2\", {\n    \"id\": \"running\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#running\"\n  })), \"Running\"), mdx(\"h3\", {\n    \"id\": \"ceylon-users\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#ceylon-users\"\n  })), \"Ceylon users\"), mdx(\"p\", null, \"De\\xADploy \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Verticle.deployVerticle\"), \" method.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Ceylon\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.ceylon.core {vertx}\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" herd.schedule.chime {Chime}\\nChime().deploy(vertx.vertx());\\n\")), mdx(\"p\", null, \"Or with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.deployVerticle(\\\\\\\"ceylon:herd.schedule.chime/0.2.1\\\\\\\");\"), \"\\nbut en\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory is avail\\xADable at class path.   \"), mdx(\"h3\", {\n    \"id\": \"java-users\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#java-users\"\n  })), \"Java users\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"En\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory is avail\\xADable at class path.  \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Put Cey\\xADlon ver\\xADsions to con\\xADsis\\xADtency. For in\\xADstance, Vert.x 3.4.1 de\\xADpends on Cey\\xADlon 1.3.0\\nwhile Chime 0.2.1 de\\xADpends on Cey\\xADlon 1.3.2. \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_deploying_verticles_programmatically\"\n  }), \"De\\xADploy ver\\xADti\\xADcle\"), \", like:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Java\"\n  }), \"vertx.deployVerticle(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ceylon:herd.schedule.chime/0.2.1\\\"\"), \")\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Ex\\xADam\\xADple with Maven is avail\\xADable at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LisiLisenok/ChimeJavaExample\"\n  }), \"Github\"), \".\")), mdx(\"h2\", {\n    \"id\": \"schedulers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#schedulers\"\n  })), \"Schedulers\"), mdx(\"p\", null, \"Well, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" ver\\xADti\\xADcle is de\\xADployed. Let\\u2019s see its struc\\xADture.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"In order to pro\\xADvide flex\\xADi\\xADble and broad ways to man\\xADage tim\\xADing two level ar\\xADchi\\xADtec\\xADture is adopted.\\nIt con\\xADsists of sched\\xADulers and timers. Timer is a unit which fires at a given time.\\nWhile sched\\xADuler is a set or group of timers and pro\\xADvides fol\\xADlow\\xADing:    \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"cre\\xADat\\xADing and delet\\xADing timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"paus\\xADing / re\\xADsum\\xADing all timers work\\xADing within the sched\\xADuler;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"info on the run\\xADning timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"de\\xADfault time zone;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lis\\xADten\\xADing event bus at the given sched\\xADuler ad\\xADdress for the re\\xADquests to.  \")), mdx(\"p\", null, \"Any timer op\\xADer\\xADates within some sched\\xADuler. And one or sev\\xADeral sched\\xADulers have to be cre\\xADated be\\xADfore start\\xADing sched\\xADul\\xADing.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"When \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" ver\\xADti\\xADcle is de\\xADployed it starts lis\\xADten event bus at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"chime\"), \" ad\\xADdress (can be con\\xADfig\\xADured).\\nIn order to cre\\xADate sched\\xADuler send to this ad\\xADdress a JSON mes\\xADsage.  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"operation\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"Once sched\\xADuler is cre\\xADated it starts lis\\xADten event bus at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sched\\xADuler name\"), \" ad\\xADdress.\\nSend\\xADing mes\\xADsages to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"chime\"), \" ad\\xADdress or to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sched\\xADuler name\"), \" ad\\xADdress are rather equiv\\xADa\\xADlent,\\nex\\xADcept\\xADing that chime ad\\xADdress pro\\xADvides ser\\xADvices for every sched\\xADuler, while sched\\xADuler ad\\xADdress\\npro\\xADvides ser\\xADvices for this par\\xADtic\\xADu\\xADlar sched\\xADuler only.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"The re\\xADquest sent to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" has to con\\xADtain \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"op\\xADer\\xADa\\xADtion\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"name\"), \" keys.\\nName key pro\\xADvides sched\\xADuler or timer name. While op\\xADer\\xADa\\xADtion key shows an ac\\xADtion \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" has to per\\xADform.\\nThere are only four pos\\xADsi\\xADble op\\xADer\\xADa\\xADtions:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"cre\\xADate - cre\\xADate new sched\\xADuler or timer;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"delete - delete sched\\xADuler or timer;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"info - re\\xADquest info on \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Chime\"), \" or on a par\\xADtic\\xADu\\xADlar sched\\xADuler or timer;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"state - set or get sched\\xADuler or timer state (run\\xADning, paused or com\\xADpleted).  \")), mdx(\"h2\", {\n    \"id\": \"timers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#timers\"\n  })), \"Timers\"), mdx(\"p\", null, \"Now we have sched\\xADuler cre\\xADated and timers can be run within. There are two ways to ac\\xADcess a given timer:  \"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Send\\xADing mes\\xADsage to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"chime\"), \" ad\\xADdress with \\u2018name\\u2019 field set to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"sched\\xADuler name:timer name\"), \".  \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Send\\xADing mes\\xADsage to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"sched\\xADuler name\"), \" ad\\xADdress with \\u2018name\\u2019 field set to ei\\xADther \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"timer name\"), \" or \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"sched\\xADuler name:timer name\"), \".  \")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#timer-request\"\n  }), \"Timer re\\xADquest\"), \" is rather com\\xADpli\\xADcated and con\\xADtains a lot of de\\xADtails. In this blog post only basic fea\\xADtures are con\\xADsid\\xADered:  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"operation\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name:timer name\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"description\\\"\"), \": {}\\n};\\n\")), mdx(\"p\", null, \"This is rather sim\\xADi\\xADlar to re\\xADquest sent to cre\\xADate a sched\\xADuler.\\nThe dif\\xADfer\\xADence is only \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"de\\xADscrip\\xADtion\"), \" field is added.\\nThis de\\xADscrip\\xADtion is an JSON ob\\xADject which iden\\xADti\\xADfies par\\xADtic\\xADu\\xADlar timer type and its de\\xADtails.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"The other fields not shown here are op\\xADtional and in\\xADcludes:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ini\\xADtial timer state (paused or run\\xADning);  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"start or end date-\\u200Btime;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"num\\xADber of re\\xADpeat\\xADing times;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"is timer mes\\xADsage to be pub\\xADlished or sent;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"timer fire mes\\xADsage and de\\xADliv\\xADery op\\xADtions;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"time zone.  \")), mdx(\"h2\", {\n    \"id\": \"timer-descriptions\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#timer-descriptions\"\n  })), \"Timer descriptions\"), mdx(\"p\", null, \"Cur\\xADrently, three types of timers are sup\\xADported:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"In\\xADter\\xADval timer\"), \" which fires after each given time pe\\xADriod (min\\xADi\\xADmum 1 sec\\xADond):  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"interval\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"delay\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"timer delay in seconds, Integer\\\"\"), \"\\n};\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Cron style timer\"), \" which is de\\xADfined with cron-\\u200Bstyle:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"seconds\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"minutes\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"hours\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"days of month\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"months\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"days of week\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week in cron style, String, optional\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"years\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"years in cron style, String, optional\\\"\"), \"  \\n};\\n\")), mdx(\"p\", null, \"Cron timer is rather pow\\xADer\\xADful and flex\\xADi\\xADble. In\\xADves\\xADti\\xADgate \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#cron-expression\"\n  }), \"spec\\xADi\\xADfi\\xADca\\xADtion\"), \" for the com\\xADplete list of fea\\xADtures.  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Union timer\"), \" which com\\xADbines a num\\xADber of timers into a one:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"union\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"timers\\\"\"), \": [\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"list of the timer descriptions\\\"\"), \"]  \\n};\\n\")), mdx(\"p\", null, \"Union timer may be use\\xADful to fire at a list of spe\\xADcific dates / times.\"), mdx(\"h2\", {\n    \"id\": \"timer-events\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#timer-events\"\n  })), \"Timer events\"), mdx(\"p\", null, \"Once timer is started it sends or pub\\xADlishes mes\\xADsages to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sched\\xADuler name:timer name\"), \" ad\\xADdress in JSON for\\xADmat.\\nTwo types of events are sent:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"fire event which oc\\xADcurs when time reaches next timer value:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name:timer name, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"event\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fire\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"count\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"total number of fire times, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"time\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ISO formated time / date, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"seconds\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"number of seconds since last minute, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"minutes\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"number of minutes since last hour, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"hours\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hour of day, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"day of month\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"day of month, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"month\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"month, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"year\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"year, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"time zone\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"time zone the timer works in, String\\\"\"), \"\\n};\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"com\\xADplete event which oc\\xADcurs when timer is ex\\xADhausted by some cri\\xADte\\xADria given at timer cre\\xADate re\\xADquest:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name:timer name, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"event\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"complete\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"count\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"total number of fire times, Integer\\\"\"), \"  \\n};\\n\")), mdx(\"p\", null, \"Ba\\xADsi\\xADcally, now we know every\\xADthing to be happy with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \": sched\\xADulers and re\\xADquests to them, timers and timer events.\\nWill see some ex\\xADam\\xADples in the next sec\\xADtion.  \"), mdx(\"h2\", {\n    \"id\": \"examples\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#examples\"\n  })), \"Examples\"), mdx(\"h3\", {\n    \"id\": \"ceylon-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#ceylon-example\"\n  })), \"Ceylon example\"), mdx(\"p\", null, \"Let\\u2019s con\\xADsider a timer which has to fire every month at 16-30 last Sun\\xADday.  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Ceylon\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// listen the timer events\"), \"\\neventBus.consumer (\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \",\\n  (Throwable|Message<JsonObject?> msg) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"is\"), \" Message<JsonObject?> msg) { print(msg.body()); }\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" { print(msg); }  \\n  }\\n);\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// create scheduler and timer\"), \"\\neventBus.send<JsonObject> (\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"chime\\\"\"), \",\\n  JsonObject {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"operation\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \" -> JsonObject {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"30\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"16\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SundayL\\\"\"), \"\\n    }\\n  }\\n);\\n\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"\\u2019*\\u2019 means any, \\u2018Sun\\xADdayL\\u2019 means last Sun\\xADday.\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"If \\u2018cre\\xADate\\u2019 re\\xADquest is sent to Chime ad\\xADdress with name set to \\u2018sched\\xADuler name:timer name\\u2019 and cor\\xADre\\xADspond\\xADing sched\\xADuler hasn\\u2019t been cre\\xADated be\\xADfore then Chime cre\\xADates both new sched\\xADuler and new timer.\")), mdx(\"h3\", {\n    \"id\": \"java-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#java-example\"\n  })), \"Java example\"), mdx(\"p\", null, \"Let\\u2019s con\\xADsider a timer which has to fire every Mon\\xADday at 8-30 and every Fri\\xADday at 17-30.  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// listen the timer events\"), \"\\nMessageConsumer<JsonObject> consumer = eventBus.consumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \");\\nconsumer.handler (\\n  message -> {\\n    System.out.println(message.body());\\n    }\\n);\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// description of timers\"), \"\\nJsonObject mondayTimer = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"30\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"8\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Monday\\\"\"), \");\\nJsonObject fridayTimer = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"30\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"17\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Friday\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// union timer - combines mondayTimer and fridayTimer\"), \"\\nJsonArray combination = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonArray()).add(mondayTimer)\\n  .add(fridayTimer);\\nJsonObject timer = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"union\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"timers\\\"\"), \", combination);\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// create scheduler and timer\"), \"\\neventBus.send (\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"chime\\\"\"), \",\\n  (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"operation\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \")\\n    .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \")\\n    .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \", timer)\\n);\\n\")), mdx(Alert, {\n    warning: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"En\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory with right ver\\xADsion is avail\\xADable at class path.\")), mdx(\"h2\", {\n    \"id\": \"at-the-end\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#at-the-end\"\n  })), \"At the end\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"herd.schedule.chime\"), \" mod\\xADule pro\\xADvides some fea\\xADtures not men\\xADtioned here:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"con\\xADve\\xADnient builders use\\xADful to fill in JSON de\\xADscrip\\xADtion of var\\xADi\\xADous timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"prox\\xADy\\xADing event bus with con\\xADven\\xADtional in\\xADter\\xADfaces;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"read\\xADing JSON timer event into an ob\\xADject;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"at\\xADtach\\xADing JSON mes\\xADsage to the timer fire event;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"man\\xADag\\xADing time zones.  \")), mdx(\"p\", null, \"There are also some ideas for the fu\\xADture:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"cus\\xADtom or user-\\u200Bdefined timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lim\\xADit\\xADing the timer fire time / date with cal\\xADen\\xADdar;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ex\\xADtract\\xADing timer fire mes\\xADsage from ex\\xADter\\xADnal source.  \")), mdx(\"p\", null, \"This is very quick in\\xADtro\\xADduc\\xADtion to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" and if you are in\\xADter\\xADested in you may read\\nmore in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html\"\n  }), \"Chime doc\\xADu\\xADmen\\xADta\\xADtion\"), \" or even \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LisiLisenok/Chime\"\n  }), \"con\\xADtribute\"), \" to.  \"), mdx(\"p\", null, \"Thank\\u2019s for the read\\xADing and enjoy with cod\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>Eclipse Vert.x ex­e­cutes pe­ri­odic and de­layed ac­tions with\n<a href=\"http://vertx.io/docs/vertx-core/java/#_executing_periodic_and_delayed_actions\">pe­ri­odic and one-​shot timers</a>.\nThis is the base for time sched­ul­ing and reach fea­ture ex­ten­sion must be rather in­ter­est­ing.\nBe no­ti­fied at cer­tain date / time, take into ac­count hol­i­days,\nre­peat no­ti­fi­ca­tions until a given date, apply time zone,\ntake into ac­count day­light sav­ing time etc.\nThere are a lot of use­ful fea­tures time sched­uler may in­tro­duce to the Vert.x stack.  </p><h2 id=\"chime\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#chime\"></a>Chime</h2><p><a href=\"https://github.com/LisiLisenok/Chime\">Chime</a> is time sched­uler ver­ti­cle which works on <em>Vert.x</em> event bus and pro­vides:  </p><ul><li>sched­ul­ing with <em>cron-​style</em>, <em>in­ter­val</em> or <em>union</em> timers:</li><li>at a cer­tain time of day (to the sec­ond);  </li><li>on cer­tain days of the week, month or year;  </li><li>with a given time in­ter­val;  </li><li>with nearly any com­bi­na­tion of all of above;  </li><li>re­peat­ing a given num­ber of times;  </li><li>re­peat­ing until a given time / date;  </li><li>re­peat­ing in­fi­nitely  </li><li>prox­y­ing event bus with con­ven­tional in­ter­faces  </li><li>ap­ply­ing time zones avail­able on <em>JVM</em> with day­light sav­ing time taken into ac­count  </li><li>flex­i­ble timers man­age­ment sys­tem:  </li><li>group­ing timers;  </li><li>defin­ing a timer start or end times  </li><li>paus­ing / re­sum­ing;  </li><li>fire count­ing;  </li><li>lis­ten­ing and send­ing mes­sages via event bus with <em>JSON</em>;  </li><li><em>pub­lish­ing</em> or <em>send­ing</em> timer fire event to the ad­dress of your choice.  </li></ul><div class=\"alert info\"><p><em>Chime</em> is writ­ten in <a href=\"https://ceylon-lang.org\">Cey­lon</a> and is avail­able at\n<a href=\"https://herd.ceylon-lang.org/modules/herd.schedule.chime\">Cey­lon Herd</a>.</p></div><h2 id=\"running\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#running\"></a>Running</h2><h3 id=\"ceylon-users\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#ceylon-users\"></a>Ceylon users</h3><p>De­ploy <em>Chime</em> using <code>Verticle.deployVerticle</code> method.</p><pre><code class=\"hljs language-Ceylon\"><span class=\"hljs-keyword\">import</span> io.vertx.ceylon.core {vertx}\n<span class=\"hljs-keyword\">import</span> herd.schedule.chime {Chime}\nChime().deploy(vertx.vertx());\n</code></pre><p>Or with <code>vertx.deployVerticle(\\&quot;ceylon:herd.schedule.chime/0.2.1\\&quot;);</code>\nbut en­sure that Cey­lon ver­ti­cle fac­tory is avail­able at class path.   </p><h3 id=\"java-users\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#java-users\"></a>Java users</h3><ol><li>En­sure that Cey­lon ver­ti­cle fac­tory is avail­able at class path.  </li><li>Put Cey­lon ver­sions to con­sis­tency. For in­stance, Vert.x 3.4.1 de­pends on Cey­lon 1.3.0\nwhile Chime 0.2.1 de­pends on Cey­lon 1.3.2. </li><li><a href=\"http://vertx.io/docs/vertx-core/java/#_deploying_verticles_programmatically\">De­ploy ver­ti­cle</a>, like:  </li></ol><pre><code class=\"hljs language-Java\">vertx.deployVerticle(<span class=\"hljs-string\">&quot;ceylon:herd.schedule.chime/0.2.1&quot;</span>)\n</code></pre><div class=\"alert info\"><p>Ex­am­ple with Maven is avail­able at <a href=\"https://github.com/LisiLisenok/ChimeJavaExample\">Github</a>.</p></div><h2 id=\"schedulers\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#schedulers\"></a>Schedulers</h2><p>Well, <em>Chime</em> ver­ti­cle is de­ployed. Let’s see its struc­ture.<br/>\n<!-- -->In order to pro­vide flex­i­ble and broad ways to man­age tim­ing two level ar­chi­tec­ture is adopted.\nIt con­sists of sched­ulers and timers. Timer is a unit which fires at a given time.\nWhile sched­uler is a set or group of timers and pro­vides fol­low­ing:    </p><ul><li>cre­at­ing and delet­ing timers;  </li><li>paus­ing / re­sum­ing all timers work­ing within the sched­uler;  </li><li>info on the run­ning timers;  </li><li>de­fault time zone;  </li><li>lis­ten­ing event bus at the given sched­uler ad­dress for the re­quests to.  </li></ul><p>Any timer op­er­ates within some sched­uler. And one or sev­eral sched­ulers have to be cre­ated be­fore start­ing sched­ul­ing.<br/>\n<!-- -->When <em>Chime</em> ver­ti­cle is de­ployed it starts lis­ten event bus at <strong>chime</strong> ad­dress (can be con­fig­ured).\nIn order to cre­ate sched­uler send to this ad­dress a JSON mes­sage.  </p><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;operation&quot;</span>: <span class=\"hljs-string\">&quot;create&quot;</span>,\n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name&quot;</span>\n}\n</code></pre><p>Once sched­uler is cre­ated it starts lis­ten event bus at <strong>sched­uler name</strong> ad­dress.\nSend­ing mes­sages to <strong>chime</strong> ad­dress or to <strong>sched­uler name</strong> ad­dress are rather equiv­a­lent,\nex­cept­ing that chime ad­dress pro­vides ser­vices for every sched­uler, while sched­uler ad­dress\npro­vides ser­vices for this par­tic­u­lar sched­uler only.<br/>\n<!-- -->The re­quest sent to the <em>Chime</em> has to con­tain <strong>op­er­a­tion</strong> and <strong>name</strong> keys.\nName key pro­vides sched­uler or timer name. While op­er­a­tion key shows an ac­tion <em>Chime</em> has to per­form.\nThere are only four pos­si­ble op­er­a­tions:  </p><ul><li>cre­ate - cre­ate new sched­uler or timer;  </li><li>delete - delete sched­uler or timer;  </li><li>info - re­quest info on <em>Chime</em> or on a par­tic­u­lar sched­uler or timer;  </li><li>state - set or get sched­uler or timer state (run­ning, paused or com­pleted).  </li></ul><h2 id=\"timers\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#timers\"></a>Timers</h2><p>Now we have sched­uler cre­ated and timers can be run within. There are two ways to ac­cess a given timer:  </p><ol><li>Send­ing mes­sage to <strong>chime</strong> ad­dress with ‘name’ field set to <strong>sched­uler name:timer name</strong>.  </li><li>Send­ing mes­sage to <strong>sched­uler name</strong> ad­dress with ‘name’ field set to ei­ther <strong>timer name</strong> or <strong>sched­uler name:timer name</strong>.  </li></ol><p><a href=\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#timer-request\">Timer re­quest</a> is rather com­pli­cated and con­tains a lot of de­tails. In this blog post only basic fea­tures are con­sid­ered:  </p><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;operation&quot;</span>: <span class=\"hljs-string\">&quot;create&quot;</span>,\n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name:timer name&quot;</span>,\n  <span class=\"hljs-attr\">&quot;description&quot;</span>: {}\n};\n</code></pre><p>This is rather sim­i­lar to re­quest sent to cre­ate a sched­uler.\nThe dif­fer­ence is only <strong>de­scrip­tion</strong> field is added.\nThis de­scrip­tion is an JSON ob­ject which iden­ti­fies par­tic­u­lar timer type and its de­tails.<br/>\n<!-- -->The other fields not shown here are op­tional and in­cludes:  </p><ul><li>ini­tial timer state (paused or run­ning);  </li><li>start or end date-​time;  </li><li>num­ber of re­peat­ing times;  </li><li>is timer mes­sage to be pub­lished or sent;  </li><li>timer fire mes­sage and de­liv­ery op­tions;  </li><li>time zone.  </li></ul><h2 id=\"timer-descriptions\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#timer-descriptions\"></a>Timer descriptions</h2><p>Cur­rently, three types of timers are sup­ported:  </p><ul><li><strong>In­ter­val timer</strong> which fires after each given time pe­riod (min­i­mum 1 sec­ond):  </li></ul><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;interval&quot;</span>,\n  <span class=\"hljs-attr\">&quot;delay&quot;</span>: <span class=\"hljs-string\">&quot;timer delay in seconds, Integer&quot;</span>\n};\n</code></pre><ul><li><strong>Cron style timer</strong> which is de­fined with cron-​style:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;cron&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;seconds&quot;</span>: <span class=\"hljs-string\">&quot;seconds in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;minutes&quot;</span>: <span class=\"hljs-string\">&quot;minutes in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;hours&quot;</span>: <span class=\"hljs-string\">&quot;hours in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;days of month&quot;</span>: <span class=\"hljs-string\">&quot;days of month in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;months&quot;</span>: <span class=\"hljs-string\">&quot;months in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;days of week&quot;</span>: <span class=\"hljs-string\">&quot;days of week in cron style, String, optional&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;years&quot;</span>: <span class=\"hljs-string\">&quot;years in cron style, String, optional&quot;</span>  \n};\n</code></pre><p>Cron timer is rather pow­er­ful and flex­i­ble. In­ves­ti­gate <a href=\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#cron-expression\">spec­i­fi­ca­tion</a> for the com­plete list of fea­tures.  </p><ul><li><strong>Union timer</strong> which com­bines a num­ber of timers into a one:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;union&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;timers&quot;</span>: [<span class=\"hljs-string\">&quot;list of the timer descriptions&quot;</span>]  \n};\n</code></pre><p>Union timer may be use­ful to fire at a list of spe­cific dates / times.</p><h2 id=\"timer-events\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#timer-events\"></a>Timer events</h2><p>Once timer is started it sends or pub­lishes mes­sages to <strong>sched­uler name:timer name</strong> ad­dress in JSON for­mat.\nTwo types of events are sent:  </p><ul><li>fire event which oc­curs when time reaches next timer value:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name:timer name, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;event&quot;</span>: <span class=\"hljs-string\">&quot;fire&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;count&quot;</span>: <span class=\"hljs-string\">&quot;total number of fire times, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;time&quot;</span>: <span class=\"hljs-string\">&quot;ISO formated time / date, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;seconds&quot;</span>: <span class=\"hljs-string\">&quot;number of seconds since last minute, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;minutes&quot;</span>: <span class=\"hljs-string\">&quot;number of minutes since last hour, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;hours&quot;</span>: <span class=\"hljs-string\">&quot;hour of day, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;day of month&quot;</span>: <span class=\"hljs-string\">&quot;day of month, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;month&quot;</span>: <span class=\"hljs-string\">&quot;month, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;year&quot;</span>: <span class=\"hljs-string\">&quot;year, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;time zone&quot;</span>: <span class=\"hljs-string\">&quot;time zone the timer works in, String&quot;</span>\n};\n</code></pre><ul><li>com­plete event which oc­curs when timer is ex­hausted by some cri­te­ria given at timer cre­ate re­quest:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name:timer name, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;event&quot;</span>: <span class=\"hljs-string\">&quot;complete&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;count&quot;</span>: <span class=\"hljs-string\">&quot;total number of fire times, Integer&quot;</span>  \n};\n</code></pre><p>Ba­si­cally, now we know every­thing to be happy with <em>Chime</em>: sched­ulers and re­quests to them, timers and timer events.\nWill see some ex­am­ples in the next sec­tion.  </p><h2 id=\"examples\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#examples\"></a>Examples</h2><h3 id=\"ceylon-example\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#ceylon-example\"></a>Ceylon example</h3><p>Let’s con­sider a timer which has to fire every month at 16-30 last Sun­day.  </p><pre><code class=\"hljs language-Ceylon\"><span class=\"hljs-comment\">// listen the timer events</span>\neventBus.consumer (\n  <span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>,\n  (Throwable|Message&lt;JsonObject?&gt; msg) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">is</span> Message&lt;JsonObject?&gt; msg) { print(msg.body()); }\n    <span class=\"hljs-keyword\">else</span> { print(msg); }  \n  }\n);\n<span class=\"hljs-comment\">// create scheduler and timer</span>\neventBus.send&lt;JsonObject&gt; (\n  <span class=\"hljs-string\">&quot;chime&quot;</span>,\n  JsonObject {\n    <span class=\"hljs-string\">&quot;operation&quot;</span> -&gt; <span class=\"hljs-string\">&quot;create&quot;</span>,\n    <span class=\"hljs-string\">&quot;name&quot;</span> -&gt; <span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>,\n    <span class=\"hljs-string\">&quot;description&quot;</span> -&gt; JsonObject {\n      <span class=\"hljs-string\">&quot;type&quot;</span> -&gt; <span class=\"hljs-string\">&quot;cron&quot;</span>,\n      <span class=\"hljs-string\">&quot;seconds&quot;</span> -&gt; <span class=\"hljs-string\">&quot;0&quot;</span>,\n      <span class=\"hljs-string\">&quot;minutes&quot;</span> -&gt; <span class=\"hljs-string\">&quot;30&quot;</span>,\n      <span class=\"hljs-string\">&quot;hours&quot;</span> -&gt; <span class=\"hljs-string\">&quot;16&quot;</span>,\n      <span class=\"hljs-string\">&quot;days of month&quot;</span> -&gt; <span class=\"hljs-string\">&quot;*&quot;</span>,\n      <span class=\"hljs-string\">&quot;months&quot;</span> -&gt; <span class=\"hljs-string\">&quot;*&quot;</span>,\n      <span class=\"hljs-string\">&quot;days of week&quot;</span> -&gt; <span class=\"hljs-string\">&quot;SundayL&quot;</span>\n    }\n  }\n);\n\n</code></pre><div class=\"alert info\"><p>’*’ means any, ‘Sun­dayL’ means last Sun­day.</p></div><div class=\"alert info\"><p>If ‘cre­ate’ re­quest is sent to Chime ad­dress with name set to ‘sched­uler name:timer name’ and cor­re­spond­ing sched­uler hasn’t been cre­ated be­fore then Chime cre­ates both new sched­uler and new timer.</p></div><h3 id=\"java-example\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#java-example\"></a>Java example</h3><p>Let’s con­sider a timer which has to fire every Mon­day at 8-30 and every Fri­day at 17-30.  </p><pre><code class=\"hljs language-Java\"><span class=\"hljs-comment\">// listen the timer events</span>\nMessageConsumer&lt;JsonObject&gt; consumer = eventBus.consumer(<span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>);\nconsumer.handler (\n  message -&gt; {\n    System.out.println(message.body());\n    }\n);\n<span class=\"hljs-comment\">// description of timers</span>\nJsonObject mondayTimer = (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cron&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;seconds&quot;</span>, <span class=\"hljs-string\">&quot;0&quot;</span>).put(<span class=\"hljs-string\">&quot;minutes&quot;</span>, <span class=\"hljs-string\">&quot;30&quot;</span>).put(<span class=\"hljs-string\">&quot;hours&quot;</span>, <span class=\"hljs-string\">&quot;8&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of month&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>).put(<span class=\"hljs-string\">&quot;months&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of week&quot;</span>, <span class=\"hljs-string\">&quot;Monday&quot;</span>);\nJsonObject fridayTimer = (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cron&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;seconds&quot;</span>, <span class=\"hljs-string\">&quot;0&quot;</span>).put(<span class=\"hljs-string\">&quot;minutes&quot;</span>, <span class=\"hljs-string\">&quot;30&quot;</span>).put(<span class=\"hljs-string\">&quot;hours&quot;</span>, <span class=\"hljs-string\">&quot;17&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of month&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>).put(<span class=\"hljs-string\">&quot;months&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of week&quot;</span>, <span class=\"hljs-string\">&quot;Friday&quot;</span>);\n<span class=\"hljs-comment\">// union timer - combines mondayTimer and fridayTimer</span>\nJsonArray combination = (<span class=\"hljs-keyword\">new</span> JsonArray()).add(mondayTimer)\n  .add(fridayTimer);\nJsonObject timer = (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;union&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;timers&quot;</span>, combination);\n<span class=\"hljs-comment\">// create scheduler and timer</span>\neventBus.send (\n  <span class=\"hljs-string\">&quot;chime&quot;</span>,\n  (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;operation&quot;</span>, <span class=\"hljs-string\">&quot;create&quot;</span>)\n    .put(<span class=\"hljs-string\">&quot;name&quot;</span>, <span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>)\n    .put(<span class=\"hljs-string\">&quot;description&quot;</span>, timer)\n);\n</code></pre><div class=\"alert warning\"><p>En­sure that Cey­lon ver­ti­cle fac­tory with right ver­sion is avail­able at class path.</p></div><h2 id=\"at-the-end\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#at-the-end\"></a>At the end</h2><p><code>herd.schedule.chime</code> mod­ule pro­vides some fea­tures not men­tioned here:  </p><ul><li>con­ve­nient builders use­ful to fill in JSON de­scrip­tion of var­i­ous timers;  </li><li>prox­y­ing event bus with con­ven­tional in­ter­faces;  </li><li>read­ing JSON timer event into an ob­ject;  </li><li>at­tach­ing JSON mes­sage to the timer fire event;  </li><li>man­ag­ing time zones.  </li></ul><p>There are also some ideas for the fu­ture:  </p><ul><li>cus­tom or user-​defined timers;  </li><li>lim­it­ing the timer fire time / date with cal­en­dar;  </li><li>ex­tract­ing timer fire mes­sage from ex­ter­nal source.  </li></ul><p>This is very quick in­tro­duc­tion to the <em>Chime</em> and if you are in­ter­ested in you may read\nmore in <a href=\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html\">Chime doc­u­men­ta­tion</a> or even <a href=\"https://github.com/LisiLisenok/Chime\">con­tribute</a> to.  </p><p>Thank’s for the read­ing and enjoy with cod­ing!</p>","scope":{}},"tfIdfTerms":[{"term":"timer","tf":55},{"term":"schedul","tf":34},{"term":"time","tf":24},{"term":"chime","tf":19},{"term":"name","tf":18},{"term":"event","tf":15},{"term":"address","tf":13},{"term":"fire","tf":12},{"term":"creat","tf":12},{"term":"messag","tf":10},{"term":"ceylon","tf":10},{"term":"given","tf":9},{"term":"request","tf":8},{"term":"verticl","tf":7},{"term":"bu","tf":7},{"term":"provid","tf":7},{"term":"send","tf":7},{"term":"json","tf":7},{"term":"date","tf":6},{"term":"avail","tf":6},{"term":"start","tf":6},{"term":"featur","tf":5},{"term":"rather","tf":5},{"term":"repeat","tf":5},{"term":"zone","tf":5}]},{"filename":"blog/2017-04-26-building-a-real-time-web-app-with-angular-ngrx-and-vert-x.mdx","date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x","meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"readingTime":{"text":"7 min read","minutes":6.23,"time":373800,"words":1246},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Nowa\\xADdays, there are mul\\xADti\\xADple tech stacks to build a real-\\u200Btime web app. What are the best choices to build real-\\u200Btime An\\xADgu\\xADlar client apps, con\\xADnected to a JVM-\\u200Bbased back\\xADend? This ar\\xADti\\xADcle de\\xADscribes an An\\xADgu\\xADlar+Vertx real-\\u200Btime ar\\xADchi\\xADtec\\xADture with a Proof of Con\\xADcept demo app.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/@benorama/building-a-realtime-web-app-with-angular-ngrx-and-vert-x-a5381c0397a1\"\n  }), \"Medium post\"))), mdx(\"h2\", {\n    \"id\": \"intro\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#intro\"\n  })), \"Intro\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Wel\\xADcome to the real-\\u200Btime web!\"), \" It\\u2019s time to move on from tra\\xADdi\\xADtional syn\\xADchro\\xADnous HTTP re\\xADquest/re\\xADsponse ar\\xADchi\\xADtec\\xADtures to re\\xADac\\xADtive apps with con\\xADnected clients (ouch\\u2026 that\\u2019s a lot of buzz\\xADwords in just one sen\\xADtence)!\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/data-in-motion.jpg\",\n    \"alt\": null\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Image source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.voxxed.com\"\n  }), \"https://www.voxxed.com\"))), mdx(\"p\", null, \"To build this kind of app, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.meteor.com\"\n  }), \"Me\\xADte\\xADorJS\"), \" is the new cool kid on the block (v1.0 re\\xADleased in oc\\xADto\\xADber 2014): \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"a full stack Javascript plat\\xADform to build connected-\\u200Bclient re\\xADac\\xADtive ap\\xADpli\\xADca\\xADtions\"), \". It al\\xADlows JS de\\xADvel\\xADop\\xADers to build and de\\xADploy amaz\\xADing mod\\xADern web and mo\\xADbile apps (iOS/An\\xADdroid) in no time, using a uni\\xADfied back\\xADend+fron\\xADtend code within a sin\\xADgle app repo. That\\u2019s a pretty am\\xADbi\\xADtious ap\\xADproach but it re\\xADquires a very opin\\xADion\\xADated and highly cou\\xADpled JS tech stack and it\\u2019s still a pretty niche frame\\xADwork.\"), mdx(\"p\", null, \"More\\xADover, we are a Java shop on the back\\xADend. At Ago\\xADra\\xADPulse, we rely heav\\xADily on :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://angular.io\"\n  }), \"An\\xADgu\\xADlar\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://ionicframework.com\"\n  }), \"Ionic\"), \" for the JS fron\\xADtend (with a shared busi\\xADness/data ar\\xADchi\\xADtec\\xADture based on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"Ngrx\"), \"),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.groovy-lang.org\"\n  }), \"Groovy\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://grails.org\"\n  }), \"Grails\"), \" ecosys\\xADtem for the JVM back\\xADend.\")), mdx(\"p\", null, \"So my ques\\xADtion is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"What are the best choices to build real-\\u200Btime An\\xADgu\\xADlar client apps, con\\xADnected to a JVM-\\u200Bbased back\\xADend these days?\")), mdx(\"p\", null, \"Our re\\xADquire\\xADments are pretty basic. We don\\u2019t need full Me\\xADteor\\u2019s end-\\u200Bto-end ap\\xADpli\\xADca\\xADtion model.\\nWe just want to be able to :\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"build a re\\xADac\\xADtive app with an event bus on the JVM, and\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"ex\\xADtend the event bus down to the browser to be able to pub\\xADlish/sub\\xADscribe to real-\\u200Btime events from an An\\xADgu\\xADlar app.\")), mdx(\"h3\", {\n    \"id\": \"server-side-jvm\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#server-side-jvm\"\n  })), \"Server side (JVM)\"), mdx(\"p\", null, \"Re\\xADac\\xADtive apps is a hot topic nowa\\xADdays and there are many great libs/plat\\xADforms to build this type of event-\\u200Bdriven ar\\xADchi\\xADtec\\xADture on the JVM:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \",\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.lightbend.com\"\n  }), \"Light\\xADbend\"), \" plat\\xADform (Play, Akka, Scala),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Spring \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://projectreactor.io\"\n  }), \"Project Re\\xADac\\xADtor\"), \" (in\\xADte\\xADgrated into Grails 3.0).\")), mdx(\"h3\", {\n    \"id\": \"client-side\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#client-side\"\n  })), \"Client side\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://facebook.github.io/react/\"\n  }), \"Re\\xADac\\xADtJS\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://angular.io\"\n  }), \"An\\xADgu\\xADlar\"), \" are the two most pop\\xADu\\xADlar frame\\xADwork right now to build mod\\xADern JS apps. Most plat\\xADforms use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sockjs/sockjs-client\"\n  }), \"SockJS\"), \" to han\\xADdle real-\\u200Btime con\\xADnec\\xADtions:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/groovy/\"\n  }), \"Vertx-\\u200Bweb\"), \" pro\\xADvides a SockJS server im\\xADple\\xADmen\\xADta\\xADtion with an event bus bridge and a \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/groovy/#_sockjs_event_bus_bridge\"\n  }), \"vertx-\\u200Bevenbus.js\"), \" client li\\xADbrary (very easy to use),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Spring pro\\xADvides web\\xADsocket SockJS sup\\xADport though Spring Mes\\xADsag\\xADing and Web\\xADsocket libs (see an ex\\xADam\\xADple \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://spring.io/guides/gs/messaging-stomp-websocket/\"\n  }), \"here\"), \")\")), mdx(\"h3\", {\n    \"id\": \"final-choice-vertx--angular\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#final-choice-vertx--angular\"\n  })), \"Final choice: Vert.x + Angular\"), mdx(\"p\", null, \"In the end, I\\u2019ve cho\\xADsen to ex\\xADper\\xADi\\xADment with Vert.x for its ex\\xADcel\\xADlent Groovy sup\\xADport, dis\\xADtrib\\xADuted event bus, scal\\xADa\\xADbil\\xADity and ease of use.\"), mdx(\"p\", null, \"I en\\xADjoyed it very much. Let me show you the re\\xADsult of my ex\\xADper\\xADi\\xADmen\\xADta\\xADtion which is the root of our real-\\u200Btime fea\\xADtures com\\xADing very soon in Ago\\xADra\\xADPulse v6.0!\"), mdx(\"h2\", {\n    \"id\": \"why-vertx\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#why-vertx\"\n  })), \"Why Vert.x?\"), mdx(\"p\", null, \"Like other re\\xADac\\xADtive plat\\xADform, Vert.x is event dri\\xADven and non block\\xADing. It scales very well (even more that Node.js).\"), mdx(\"p\", null, \"Un\\xADlike other re\\xADac\\xADtive plat\\xADforms, Vert.x is poly\\xADglot: you can use Vert.x with mul\\xADti\\xADple lan\\xADguages in\\xADclud\\xADing Java, JavaScript, Groovy, Ruby, Cey\\xADlon, Scala and Kotlin.\"), mdx(\"p\", null, \"Un\\xADlike Node.js, Vert.x is a gen\\xADeral pur\\xADpose tool-\\u200Bkit and un\\xADopin\\xADion\\xADated. It\\u2019s a ver\\xADsa\\xADtile plat\\xADform suit\\xADable for many things: from sim\\xADple net\\xADwork util\\xADi\\xADties, so\\xADphis\\xADti\\xADcated mod\\xADern web ap\\xADpli\\xADca\\xADtions, HTTP/REST mi\\xADcroser\\xADvices or a full blown back-\\u200Bend message-\\u200Bbus ap\\xADpli\\xADca\\xADtion.\"), mdx(\"p\", null, \"Like other re\\xADac\\xADtive plat\\xADforms, it looks scary in the be\\xADgin\\xADing when you read the doc\\xADu\\xADmen\\xADta\\xADtion\\u2026 ;) But once you start play\\xADing with it, it re\\xADmains fun and sim\\xADple to use, es\\xADpe\\xADcially with Groovy! Vert.x re\\xADally al\\xADlows you to build sub\\xADstan\\xADtial sys\\xADtems with\\xADout get\\xADting tan\\xADgled in com\\xADplex\\xADity.\"), mdx(\"p\", null, \"In my case, I was mainly in\\xADter\\xADested by the dis\\xADtrib\\xADuted event-\\u200Bbus pro\\xADvided (a core fea\\xADture of Vert.x).\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"To val\\xADi\\xADdate our ap\\xADproach, we built pro\\xADto\\xADtypes with the fol\\xADlow\\xADing goals:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"share and syn\\xADchro\\xADnize a com\\xADmon (Ngrx-\\u200Bbased) state be\\xADtween mul\\xADti\\xADple con\\xADnected clients, and\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dis\\xADtrib\\xADute real-\\u200Btime (Ngrx-\\u200Bbased) ac\\xADtions across mul\\xADti\\xADple con\\xADnected clients, which im\\xADpact local states/re\\xADduc\\xADers.\"))), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"@ngrx/store\"), \" is a RxJS pow\\xADered state man\\xADage\\xADment in\\xADspired by Redux for An\\xADgu\\xADlar apps. It\\u2019s cur\\xADrently the most pop\\xADu\\xADlar way to struc\\xADture com\\xADplex busi\\xADness logic in An\\xADgu\\xADlar apps.\")), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/redux.png\",\n    \"alt\": \"Redux\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.smashingmagazine.com/2016/06/an-introduction-to-redux/\"\n  }), \"https://www.smash\\xADing\\xADmagazine.com/2016/06/an-\\u200Bintroduction-to-redux/\"))), mdx(\"h2\", {\n    \"id\": \"proof-of-concept\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#proof-of-concept\"\n  })), \"PROOF OF CONCEPT\"), mdx(\"p\", null, \"Here is the repo of our ini\\xADtial proof of con\\xADcept:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://github.com/benorama/ngrx-realtime-app\"\n  }), \"http://github.com/beno\\xADrama/ngrx-\\u200Brealtime-app\")), mdx(\"p\", null, \"The repo is di\\xADvided into two sep\\xADa\\xADrate projects:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Vert.x server app\"), \", based on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \" (ver\\xADsion 3.3), man\\xADaged by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://gradle.org\"\n  }), \"Gra\\xADdle\"), \", with a main ver\\xADti\\xADcle de\\xADvel\\xADoped in \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://groovy-lang.org\"\n  }), \"Groovy\"), \" lang.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"An\\xADgu\\xADlar client app\"), \", based on An\\xADgu\\xADlar (ver\\xADsion 4.0.1), man\\xADaged by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://angular.io\"\n  }), \"An\\xADgu\\xADlar\"), \" CLI with state, re\\xADduc\\xADers and ac\\xADtions logic based on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"@ngrx/store\"), \" (ver\\xADsion 2.2.1)\")), mdx(\"p\", null, \"For the demo, we are using the counter ex\\xADam\\xADple code (ac\\xADtions and re\\xADduc\\xADers) from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"@ngrx/store\"), \".\"), mdx(\"p\", null, \"The counter client busi\\xADness logic is based on:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"CounterState\"), \" in\\xADter\\xADface, counter state model,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"counterReducer\"), \" re\\xADducer, counter state man\\xADage\\xADment based on dis\\xADpatched ac\\xADtions, and\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"In\\xADcre\\xADment\"), \", \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"decre\\xADment\"), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"reset\"), \" counter ac\\xADtions.\")), mdx(\"p\", null, \"State is main\\xADtained server-\\u200Bside with a sim\\xADple sin\\xADgle\\xADton \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CounterService\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-groovy\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"CounterService\"), \" {\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" INCREMENT = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'[Counter] Increment'\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" DECREMENT = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'[Counter] Decrement'\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" RESET = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'[Counter] Reset'\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" total = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" handleEvent(event) {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"switch\"), \"(event.type) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"INCREMENT:\"), \"\\n                total++\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"break\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"DECREMENT:\"), \"\\n                total--\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"break\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"RESET:\"), \"\\n                total = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"break\"), \"\\n        }\\n    }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"client-state-initialization-through-requestresponse\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#client-state-initialization-through-requestresponse\"\n  })), \"Client state initialization through Request/Response\"), mdx(\"p\", null, \"Ini\\xADtial state is ini\\xADtial\\xADized with sim\\xADple \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"re\\xADquest/re\\xADsponse\"), \" (or send/reply) on the event bus.\\nOnce the client is con\\xADnected, it sends a re\\xADquest to the event bus at the ad\\xADdress \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"counter::total\"), \". The server replies di\\xADrectly with the value of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CounterService\"), \" total and the client dis\\xADpatches lo\\xADcally a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"reset\"), \" ac\\xADtion with the total value from the reply.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/vertx-request-response.png\",\n    \"alt\": \"Vertx Request Response\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"\n  }), \"https://www.slideshare.net/Red\\xADHat\\xADDe\\xADvel\\xADop\\xADers/vertx-\\u200Bmicroservices-were-never-so-easy-clement-escoffier\"))), mdx(\"p\", null, \"Here is an ex\\xADtract of the cor\\xADre\\xADspond\\xADing code (from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppEventBusService\"), \"):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-typescript\"\n  }), \"initializeCounter() {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".eventBusService.send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'counter::total'\"), \", body, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"error, message\"), \") =>\"), \" {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle reply\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (message && message.body) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"let\"), \" localAction = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" CounterActions.ResetAction();\\n            localAction.payload = message.body; \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Total value\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".store.dispatch(localAction);\\n        }\\n    });\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"actions-distribution-through-publishsubscribe\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#actions-distribution-through-publishsubscribe\"\n  })), \"Actions distribution through Publish/Subscribe\"), mdx(\"p\", null, \"Ac\\xADtion dis\\xADtri\\xADb\\xADu\\xADtion/sync uses the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"pub\\xADlish/sub\\xADscribe\"), \" pat\\xADtern.\"), mdx(\"p\", null, \"Counter ac\\xADtions are pub\\xADlished from the client to the event bus at the ad\\xADdress \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"counter::ac\\xADtions\"), \".\"), mdx(\"p\", null, \"Any client that have sub\\xADscribed to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"counter::ac\\xADtions\"), \" ad\\xADdress will re\\xADceive the ac\\xADtions and re\\xADdis\\xADpatch them lo\\xADcally to im\\xADpact app states/re\\xADduc\\xADers.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/vertx-publish-subscribe.png\",\n    \"alt\": \"Vertx Publish Subscribe\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"\n  }), \"https://www.slideshare.net/Red\\xADHat\\xADDe\\xADvel\\xADop\\xADers/vertx-\\u200Bmicroservices-were-never-so-easy-clement-escoffier\"))), mdx(\"p\", null, \"Here is an ex\\xADtract of the cor\\xADre\\xADspond\\xADing code (from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppEventBusService\"), \"):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-typescript\"\n  }), \"publishAction(action: RemoteAction) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (action.publishedByUser) {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"console\"), \".error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"This action has already been published\\\"\"), \");\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n    }\\n    action.publishedByUser = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".currentUser;\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".eventBusService.publish(action.eventBusAddress, action);\\n}\\nsubscribeToActions(eventBusAddress: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"string\"), \") {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".eventBusService.registerHandler(eventBusAddress, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"error, message\"), \") =>\"), \" {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle message from subscription\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (message.body.publishedByUser === \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".currentUser) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Ignore action sent by current manager\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"let\"), \" localAction = message.body;\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".store.dispatch(localAction);\\n    });\\n}\\n\")), mdx(\"p\", null, \"The event bus pub\\xADlish\\xADing logic is achieved through a sim\\xADple Ngrx Ef\\xADfects. Any ac\\xADtions that ex\\xADtend \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RemoteAction\"), \" class will be pub\\xADlished to the event bus.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-typescript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Injectable\"), \"()\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"export\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" AppEventBusEffects {\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"constructor\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" actions$: Actions, \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" appEventBusService: AppEventBusService\"), \") {}\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Listen to all actions and publish remote actions to account event bus\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Effect\"), \"({dispatch: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"}) remoteAction$ = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".actions$\\n        .filter(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"action\"), \" =>\"), \" action \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"instanceof\"), \" RemoteAction && action.publishedByUser == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"undefined\"), \")\\n        .do(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"action: RemoteAction\"), \") =>\"), \" {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".appEventBusService.publishAction(action);\\n        });\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Effect\"), \"({dispatch: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"}) login$ = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".actions$\\n        .ofType(UserActionTypes.LOGIN)\\n        .do(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"() =>\"), \" {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".appEventBusService.connect();\\n        });\\n}\\n\")), mdx(\"p\", null, \"You can see all of this in ac\\xADtion by lo\\xADcally launch\\xADing the server and the client app in two sep\\xADa\\xADrate browser win\\xADdows.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/demo-app-screen.png\",\n    \"alt\": \"Demo app screen\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Bonus: the demo app also in\\xADcludes user sta\\xADtus (of\\xADfline/on\\xADline), based of the event bus con\\xADnec\\xADtion sta\\xADtus.\")), mdx(\"p\", null, \"The counter state is shared and syn\\xADchro\\xADnized be\\xADtween con\\xADnected clients and each local ac\\xADtion is dis\\xADtrib\\xADuted in real-\\u200Btime to other clients.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Mis\\xADsion ac\\xADcom\\xADplished!\")), mdx(Alert, {\n    info: true,\n    title: \"Typescript version of Vertx EventBus Client\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The app uses our own Type\\xADscript ver\\xADsion of the of\\xADfi\\xADcial JS \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"Vertx Event\\xADBus Client\"), \". It can be found \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gist.github.com/benorama/93373c3c1c3574732d6cc1b4754aab9f\"\n  }), \"here\"), \", any feed\\xADback, im\\xADprove\\xADment sug\\xADges\\xADtions are wel\\xADcome!\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>Nowa­days, there are mul­ti­ple tech stacks to build a real-​time web app. What are the best choices to build real-​time An­gu­lar client apps, con­nected to a JVM-​based back­end? This ar­ti­cle de­scribes an An­gu­lar+Vertx real-​time ar­chi­tec­ture with a Proof of Con­cept demo app.</p><div class=\"alert info\"><p>This is a re-​publication of the fol­low­ing <a href=\"https://medium.com/@benorama/building-a-realtime-web-app-with-angular-ngrx-and-vert-x-a5381c0397a1\">Medium post</a></p></div><h2 id=\"intro\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#intro\"></a>Intro</h2><p><strong>Wel­come to the real-​time web!</strong> It’s time to move on from tra­di­tional syn­chro­nous HTTP re­quest/re­sponse ar­chi­tec­tures to re­ac­tive apps with con­nected clients (ouch… that’s a lot of buzz­words in just one sen­tence)!</p><p><img src=\"/images/blog/vertx-realtime-angular-ngrx/data-in-motion.jpg\"/></p><p><em>Image source: <a href=\"https://www.voxxed.com\">https://www.voxxed.com</a></em></p><p>To build this kind of app, <a href=\"https://www.meteor.com\">Me­te­orJS</a> is the new cool kid on the block (v1.0 re­leased in oc­to­ber 2014): <strong>a full stack Javascript plat­form to build connected-​client re­ac­tive ap­pli­ca­tions</strong>. It al­lows JS de­vel­op­ers to build and de­ploy amaz­ing mod­ern web and mo­bile apps (iOS/An­droid) in no time, using a uni­fied back­end+fron­tend code within a sin­gle app repo. That’s a pretty am­bi­tious ap­proach but it re­quires a very opin­ion­ated and highly cou­pled JS tech stack and it’s still a pretty niche frame­work.</p><p>More­over, we are a Java shop on the back­end. At Ago­ra­Pulse, we rely heav­ily on :</p><ul><li><a href=\"https://angular.io\">An­gu­lar</a> and <a href=\"http://ionicframework.com\">Ionic</a> for the JS fron­tend (with a shared busi­ness/data ar­chi­tec­ture based on <a href=\"https://github.com/ngrx/store\">Ngrx</a>),</li><li><a href=\"http://www.groovy-lang.org\">Groovy</a> and <a href=\"https://grails.org\">Grails</a> ecosys­tem for the JVM back­end.</li></ul><p>So my ques­tion is:</p><blockquote><p>What are the best choices to build real-​time An­gu­lar client apps, con­nected to a JVM-​based back­end these days?</p></blockquote><p>Our re­quire­ments are pretty basic. We don’t need full Me­teor’s end-​to-end ap­pli­ca­tion model.\nWe just want to be able to :</p><ol><li>build a re­ac­tive app with an event bus on the JVM, and</li><li>ex­tend the event bus down to the browser to be able to pub­lish/sub­scribe to real-​time events from an An­gu­lar app.</li></ol><h3 id=\"server-side-jvm\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#server-side-jvm\"></a>Server side (JVM)</h3><p>Re­ac­tive apps is a hot topic nowa­days and there are many great libs/plat­forms to build this type of event-​driven ar­chi­tec­ture on the JVM:</p><ul><li><a href=\"http://vertx.io\">Vert.x</a>,</li><li><a href=\"https://www.lightbend.com\">Light­bend</a> plat­form (Play, Akka, Scala),</li><li>Spring <a href=\"http://projectreactor.io\">Project Re­ac­tor</a> (in­te­grated into Grails 3.0).</li></ul><h3 id=\"client-side\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#client-side\"></a>Client side</h3><p><a href=\"http://facebook.github.io/react/\">Re­ac­tJS</a> and <a href=\"https://angular.io\">An­gu­lar</a> are the two most pop­u­lar frame­work right now to build mod­ern JS apps. Most plat­forms use <a href=\"https://github.com/sockjs/sockjs-client\">SockJS</a> to han­dle real-​time con­nec­tions:</p><ul><li><a href=\"http://vertx.io/docs/vertx-web/groovy/\">Vertx-​web</a> pro­vides a SockJS server im­ple­men­ta­tion with an event bus bridge and a <a href=\"http://vertx.io/docs/vertx-web/groovy/#_sockjs_event_bus_bridge\">vertx-​evenbus.js</a> client li­brary (very easy to use),</li><li>Spring pro­vides web­socket SockJS sup­port though Spring Mes­sag­ing and Web­socket libs (see an ex­am­ple <a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\">here</a>)</li></ul><h3 id=\"final-choice-vertx--angular\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#final-choice-vertx--angular\"></a>Final choice: Vert.x + Angular</h3><p>In the end, I’ve cho­sen to ex­per­i­ment with Vert.x for its ex­cel­lent Groovy sup­port, dis­trib­uted event bus, scal­a­bil­ity and ease of use.</p><p>I en­joyed it very much. Let me show you the re­sult of my ex­per­i­men­ta­tion which is the root of our real-​time fea­tures com­ing very soon in Ago­ra­Pulse v6.0!</p><h2 id=\"why-vertx\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#why-vertx\"></a>Why Vert.x?</h2><p>Like other re­ac­tive plat­form, Vert.x is event dri­ven and non block­ing. It scales very well (even more that Node.js).</p><p>Un­like other re­ac­tive plat­forms, Vert.x is poly­glot: you can use Vert.x with mul­ti­ple lan­guages in­clud­ing Java, JavaScript, Groovy, Ruby, Cey­lon, Scala and Kotlin.</p><p>Un­like Node.js, Vert.x is a gen­eral pur­pose tool-​kit and un­opin­ion­ated. It’s a ver­sa­tile plat­form suit­able for many things: from sim­ple net­work util­i­ties, so­phis­ti­cated mod­ern web ap­pli­ca­tions, HTTP/REST mi­croser­vices or a full blown back-​end message-​bus ap­pli­ca­tion.</p><p>Like other re­ac­tive plat­forms, it looks scary in the be­gin­ing when you read the doc­u­men­ta­tion… ;) But once you start play­ing with it, it re­mains fun and sim­ple to use, es­pe­cially with Groovy! Vert.x re­ally al­lows you to build sub­stan­tial sys­tems with­out get­ting tan­gled in com­plex­ity.</p><p>In my case, I was mainly in­ter­ested by the dis­trib­uted event-​bus pro­vided (a core fea­ture of Vert.x).</p><p><strong>To val­i­date our ap­proach, we built pro­to­types with the fol­low­ing goals:</strong></p><ul><li><strong>share and syn­chro­nize a com­mon (Ngrx-​based) state be­tween mul­ti­ple con­nected clients, and</strong></li><li><strong>dis­trib­ute real-​time (Ngrx-​based) ac­tions across mul­ti­ple con­nected clients, which im­pact local states/re­duc­ers.</strong></li></ul><div class=\"alert info\"><p><a href=\"https://github.com/ngrx/store\">@ngrx/store</a> is a RxJS pow­ered state man­age­ment in­spired by Redux for An­gu­lar apps. It’s cur­rently the most pop­u­lar way to struc­ture com­plex busi­ness logic in An­gu­lar apps.</p></div><p><img src=\"/images/blog/vertx-realtime-angular-ngrx/redux.png\" alt=\"Redux\"/></p><p><em>Source: <a href=\"https://www.smashingmagazine.com/2016/06/an-introduction-to-redux/\">https://www.smash­ing­magazine.com/2016/06/an-​introduction-to-redux/</a></em></p><h2 id=\"proof-of-concept\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#proof-of-concept\"></a>PROOF OF CONCEPT</h2><p>Here is the repo of our ini­tial proof of con­cept:</p><p><a href=\"http://github.com/benorama/ngrx-realtime-app\">http://github.com/beno­rama/ngrx-​realtime-app</a></p><p>The repo is di­vided into two sep­a­rate projects:</p><ul><li><strong>Vert.x server app</strong>, based on <a href=\"http://vertx.io\">Vert.x</a> (ver­sion 3.3), man­aged by <a href=\"https://gradle.org\">Gra­dle</a>, with a main ver­ti­cle de­vel­oped in <a href=\"http://groovy-lang.org\">Groovy</a> lang.</li><li><strong>An­gu­lar client app</strong>, based on An­gu­lar (ver­sion 4.0.1), man­aged by <a href=\"https://angular.io\">An­gu­lar</a> CLI with state, re­duc­ers and ac­tions logic based on <a href=\"https://github.com/ngrx/store\">@ngrx/store</a> (ver­sion 2.2.1)</li></ul><p>For the demo, we are using the counter ex­am­ple code (ac­tions and re­duc­ers) from <a href=\"https://github.com/ngrx/store\">@ngrx/store</a>.</p><p>The counter client busi­ness logic is based on:</p><ul><li><code>CounterState</code> in­ter­face, counter state model,</li><li><code>counterReducer</code> re­ducer, counter state man­age­ment based on dis­patched ac­tions, and</li><li><em>In­cre­ment</em>, <em>decre­ment</em> and <em>reset</em> counter ac­tions.</li></ul><p>State is main­tained server-​side with a sim­ple sin­gle­ton <code>CounterService</code>.</p><pre><code class=\"hljs language-groovy\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CounterService</span> {</span>\n    <span class=\"hljs-keyword\">static</span> INCREMENT = <span class=\"hljs-string\">&#x27;[Counter] Increment&#x27;</span>\n    <span class=\"hljs-keyword\">static</span> DECREMENT = <span class=\"hljs-string\">&#x27;[Counter] Decrement&#x27;</span>\n    <span class=\"hljs-keyword\">static</span> RESET = <span class=\"hljs-string\">&#x27;[Counter] Reset&#x27;</span>\n    <span class=\"hljs-keyword\">int</span> total = <span class=\"hljs-number\">0</span>\n    <span class=\"hljs-keyword\">void</span> handleEvent(event) {\n        <span class=\"hljs-keyword\">switch</span>(event.type) {\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-attr\">INCREMENT:</span>\n                total++\n                <span class=\"hljs-keyword\">break</span>\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-attr\">DECREMENT:</span>\n                total--\n                <span class=\"hljs-keyword\">break</span>\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-attr\">RESET:</span>\n                total = <span class=\"hljs-number\">0</span>\n                <span class=\"hljs-keyword\">break</span>\n        }\n    }\n}\n</code></pre><h3 id=\"client-state-initialization-through-requestresponse\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#client-state-initialization-through-requestresponse\"></a>Client state initialization through Request/Response</h3><p>Ini­tial state is ini­tial­ized with sim­ple <strong>re­quest/re­sponse</strong> (or send/reply) on the event bus.\nOnce the client is con­nected, it sends a re­quest to the event bus at the ad­dress <strong>counter::total</strong>. The server replies di­rectly with the value of <code>CounterService</code> total and the client dis­patches lo­cally a <em>reset</em> ac­tion with the total value from the reply.</p><p><img src=\"/images/blog/vertx-realtime-angular-ngrx/vertx-request-response.png\" alt=\"Vertx Request Response\"/></p><p><em>Source: <a href=\"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\">https://www.slideshare.net/Red­Hat­De­vel­op­ers/vertx-​microservices-were-never-so-easy-clement-escoffier</a></em></p><p>Here is an ex­tract of the cor­re­spond­ing code (from <code>AppEventBusService</code>):</p><pre><code class=\"hljs language-typescript\">initializeCounter() {\n    <span class=\"hljs-built_in\">this</span>.eventBusService.send(<span class=\"hljs-string\">&#x27;counter::total&#x27;</span>, body, <span class=\"hljs-function\">(<span class=\"hljs-params\">error, message</span>) =&gt;</span> {\n    <span class=\"hljs-comment\">// Handle reply</span>\n    <span class=\"hljs-keyword\">if</span> (message &amp;&amp; message.body) {\n            <span class=\"hljs-keyword\">let</span> localAction = <span class=\"hljs-keyword\">new</span> CounterActions.ResetAction();\n            localAction.payload = message.body; <span class=\"hljs-comment\">// Total value</span>\n            <span class=\"hljs-built_in\">this</span>.store.dispatch(localAction);\n        }\n    });\n}\n</code></pre><h3 id=\"actions-distribution-through-publishsubscribe\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#actions-distribution-through-publishsubscribe\"></a>Actions distribution through Publish/Subscribe</h3><p>Ac­tion dis­tri­b­u­tion/sync uses the <strong>pub­lish/sub­scribe</strong> pat­tern.</p><p>Counter ac­tions are pub­lished from the client to the event bus at the ad­dress <strong>counter::ac­tions</strong>.</p><p>Any client that have sub­scribed to <strong>counter::ac­tions</strong> ad­dress will re­ceive the ac­tions and re­dis­patch them lo­cally to im­pact app states/re­duc­ers.</p><p><img src=\"/images/blog/vertx-realtime-angular-ngrx/vertx-publish-subscribe.png\" alt=\"Vertx Publish Subscribe\"/></p><p><em>Source: <a href=\"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\">https://www.slideshare.net/Red­Hat­De­vel­op­ers/vertx-​microservices-were-never-so-easy-clement-escoffier</a></em></p><p>Here is an ex­tract of the cor­re­spond­ing code (from <code>AppEventBusService</code>):</p><pre><code class=\"hljs language-typescript\">publishAction(action: RemoteAction) {\n    <span class=\"hljs-keyword\">if</span> (action.publishedByUser) {\n        <span class=\"hljs-built_in\">console</span>.error(<span class=\"hljs-string\">&quot;This action has already been published&quot;</span>);\n        <span class=\"hljs-keyword\">return</span>;\n    }\n    action.publishedByUser = <span class=\"hljs-built_in\">this</span>.currentUser;\n    <span class=\"hljs-built_in\">this</span>.eventBusService.publish(action.eventBusAddress, action);\n}\nsubscribeToActions(eventBusAddress: <span class=\"hljs-built_in\">string</span>) {\n    <span class=\"hljs-built_in\">this</span>.eventBusService.registerHandler(eventBusAddress, <span class=\"hljs-function\">(<span class=\"hljs-params\">error, message</span>) =&gt;</span> {\n        <span class=\"hljs-comment\">// Handle message from subscription</span>\n        <span class=\"hljs-keyword\">if</span> (message.body.publishedByUser === <span class=\"hljs-built_in\">this</span>.currentUser) {\n            <span class=\"hljs-comment\">// Ignore action sent by current manager</span>\n            <span class=\"hljs-keyword\">return</span>;\n        }\n        <span class=\"hljs-keyword\">let</span> localAction = message.body;\n        <span class=\"hljs-built_in\">this</span>.store.dispatch(localAction);\n    });\n}\n</code></pre><p>The event bus pub­lish­ing logic is achieved through a sim­ple Ngrx Ef­fects. Any ac­tions that ex­tend <code>RemoteAction</code> class will be pub­lished to the event bus.</p><pre><code class=\"hljs language-typescript\"><span class=\"hljs-meta\">@Injectable</span>()\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> AppEventBusEffects {\n\n    <span class=\"hljs-keyword\">constructor</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">private</span> actions$: Actions, <span class=\"hljs-keyword\">private</span> appEventBusService: AppEventBusService</span>) {}\n    <span class=\"hljs-comment\">// Listen to all actions and publish remote actions to account event bus</span>\n    <span class=\"hljs-meta\">@Effect</span>({dispatch: <span class=\"hljs-literal\">false</span>}) remoteAction$ = <span class=\"hljs-built_in\">this</span>.actions$\n        .filter(<span class=\"hljs-function\"><span class=\"hljs-params\">action</span> =&gt;</span> action <span class=\"hljs-keyword\">instanceof</span> RemoteAction &amp;&amp; action.publishedByUser == <span class=\"hljs-literal\">undefined</span>)\n        .do(<span class=\"hljs-function\">(<span class=\"hljs-params\">action: RemoteAction</span>) =&gt;</span> {\n            <span class=\"hljs-built_in\">this</span>.appEventBusService.publishAction(action);\n        });\n\n    <span class=\"hljs-meta\">@Effect</span>({dispatch: <span class=\"hljs-literal\">false</span>}) login$ = <span class=\"hljs-built_in\">this</span>.actions$\n        .ofType(UserActionTypes.LOGIN)\n        .do(<span class=\"hljs-function\">() =&gt;</span> {\n            <span class=\"hljs-built_in\">this</span>.appEventBusService.connect();\n        });\n}\n</code></pre><p>You can see all of this in ac­tion by lo­cally launch­ing the server and the client app in two sep­a­rate browser win­dows.</p><p><img src=\"/images/blog/vertx-realtime-angular-ngrx/demo-app-screen.png\" alt=\"Demo app screen\"/></p><p><em>Bonus: the demo app also in­cludes user sta­tus (of­fline/on­line), based of the event bus con­nec­tion sta­tus.</em></p><p>The counter state is shared and syn­chro­nized be­tween con­nected clients and each local ac­tion is dis­trib­uted in real-​time to other clients.</p><p><strong>Mis­sion ac­com­plished!</strong></p><div class=\"alert info\"><div class=\"alert-title\">Typescript version of Vertx EventBus Client</div><p>The app uses our own Type­script ver­sion of the of­fi­cial JS <a href=\"https://github.com/vert-x3/vertx-bus-bower\">Vertx Event­Bus Client</a>. It can be found <a href=\"https://gist.github.com/benorama/93373c3c1c3574732d6cc1b4754aab9f\">here</a>, any feed­back, im­prove­ment sug­ges­tions are wel­come!</p></div>","scope":{}},"tfIdfTerms":[{"term":"app","tf":21},{"term":"client","tf":19},{"term":"action","tf":15},{"term":"event","tf":14},{"term":"time","tf":12},{"term":"angular","tf":12},{"term":"bu","tf":12},{"term":"base","tf":11},{"term":"state","tf":11},{"term":"build","tf":10},{"term":"real","tf":10},{"term":"connect","tf":10},{"term":"counter","tf":10},{"term":"us","tf":9},{"term":"platform","tf":8},{"term":"js","tf":8},{"term":"ngrx","tf":8},{"term":"http","tf":7},{"term":"reactiv","tf":7},{"term":"jvm","tf":6},{"term":"publish","tf":6},{"term":"server","tf":6},{"term":"distribut","tf":6},{"term":"web","tf":5},{"term":"backend","tf":5}]},{"filename":"blog/2017-04-14-dynamic-routing-in-serverless-microservice-with-vert-x-event-bus.mdx","date":"2017-04-14","slug":"dynamic-routing-in-serverless-microservice-with-vert-x-event-bus","meta":{"title":"Dynamic Routing in Serverless Microservice with Vert.x Event Bus","category":"guides","authors":[{"name":"Rowell Belen","github_id":"bytekast"}],"summary":"The Serverless Framework has become the de facto toolkit for building and deploying serverless functions or applications."},"readingTime":{"text":"3 min read","minutes":2.6,"time":156000,"words":520},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\"\n  }), \"blog post\"))), mdx(\"h2\", {\n    \"id\": \"serverless-framework\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#serverless-framework\"\n  })), \"Serverless framework\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com\"\n  }), \"Server\\xADless Frame\\xADwork\"), \" has be\\xADcome the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"De Facto\"), \" toolkit for build\\xADing and de\\xADploy\\xADing Server\\xADless func\\xADtions or ap\\xADpli\\xADca\\xADtions. Its com\\xADmu\\xADnity has done a great job ad\\xADvanc\\xADing the tools around Server\\xADless ar\\xADchi\\xADtec\\xADture.\"), mdx(\"p\", null, \"How\\xADever, in the Server\\xADless com\\xADmu\\xADnity there is de\\xADbate among de\\xADvel\\xADop\\xADers on whether a sin\\xADgle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS Lambda\"), \" func\\xADtion should only be re\\xADspon\\xADsi\\xADble for a sin\\xADgle API end\\xADpoint. My an\\xADswer, based on my real-\\u200Bworld pro\\xADduc\\xADtion ex\\xADpe\\xADri\\xADence, is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO\"), \". \"), mdx(\"p\", null, \"Imag\\xADine if you are build\\xADing a set of APIs with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"10\"), \" end\\xADpoints and you need to de\\xADploy the APIs to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DEV\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"STAGE\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PROD\"), \" en\\xADvi\\xADron\\xADments. Now you are look\\xADing at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"30\"), \" dif\\xADfer\\xADent func\\xADtions to ver\\xADsion, de\\xADploy and man\\xADage - not to men\\xADtion the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Copy & Paste\"), \" code and con\\xADfig\\xADu\\xADra\\xADtion that will re\\xADsult from this type of set-\\u200Bup. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO THANKS!!!\"), \" \"), mdx(\"p\", null, \"I be\\xADlieve a more prag\\xADmatic ap\\xADproach is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 Lambda Func\\xADtion\"), \" == \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 Mi\\xADcroser\\xADvice\"), \".\"), mdx(\"p\", null, \"For ex\\xADam\\xADple, if you were build\\xADing a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" with basic \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CRUD\"), \" func\\xADtion\\xADal\\xADity, you should im\\xADple\\xADment \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CREATE\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"READ\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UPDATE\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \" in a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sin\\xADgle\"), \" Lambda func\\xADtion. In the code, you should re\\xADsolve the de\\xADsired ac\\xADtion by in\\xADspect\\xADing the re\\xADquest or the con\\xADtext.\"), mdx(\"h2\", {\n    \"id\": \"vertx-to-the-rescue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-to-the-rescue\"\n  })), \"Vert.x to the rescue\"), mdx(\"p\", null, \"There are many ben\\xADe\\xADfits to using \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" in any ap\\xADpli\\xADca\\xADtion. With \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \", you get a rock-\\u200Bsolid and light\\xADweight toolkit for build\\xADing \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"re\\xADac\\xADtive\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"highly per\\xADfor\\xADmant\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"event-\\u200Bdriven\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"non-\\u200Bblocking\"), \" ap\\xADpli\\xADca\\xADtions. The toolkit even pro\\xADvides asyn\\xADchro\\xADnous \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"APIs\"), \" for ac\\xADcess\\xADing tra\\xADdi\\xADtional block\\xADing dri\\xADvers such as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-jdbc-client/groovy/\"\n  }), \"JDBC\")), \".\"), mdx(\"p\", null, \"How\\xADever, for this ex\\xADam\\xADple, we will mainly focus on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\n  }), \"Event Bus\"), \". The event bus al\\xADlows dif\\xADfer\\xADent parts of your ap\\xADpli\\xADca\\xADtion to com\\xADmu\\xADni\\xADcate with each other via event mes\\xADsages. It sup\\xADports \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pub\\xADlish/sub\\xADscribe\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"point to point\"), \", and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"request-\\u200Bresponse mes\\xADsag\\xADing\"), \".\"), mdx(\"p\", null, \"For the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" ex\\xADam\\xADple above, we could treat the com\\xADbi\\xADna\\xADtion of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTTP METHOD\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RESOURCE PATH\"), \" as a unique event chan\\xADnel, and reg\\xADis\\xADter the sub\\xADscribers/han\\xADdlers to re\\xADspond ap\\xADpro\\xADpri\\xADately.\"), mdx(\"p\", null, \"Let\\u2019s dive right in.\"), mdx(\"h2\", {\n    \"id\": \"goal\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#goal\"\n  })), \"Goal\"), mdx(\"p\", null, \"Cre\\xADate a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADac\\xADtive\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"message-\\u200Bdriven\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"asyn\\xADchro\\xADnous\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" CRUD op\\xADer\\xADa\\xADtions in a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"sin\\xADgle\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"aws.amazon.com/lambda\"\n  }), \"AWS Lambda Func\\xADtion\")), \" using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com\"\n  }), \"Server\\xADless Frame\\xADwork\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Serverless stack definition\"), \":\"), mdx(Gist, {\n    url: \"https://gist.github.com/bytekast/48daa2ca479156c98d2735cca181ef30\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"solution\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#solution\"\n  })), \"Solution\"), mdx(\"p\", null, \"Use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \"\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\n  }), \"Event Bus\"), \" to han\\xADdle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dy\\xADnamic rout\\xADing\"), \" to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"event han\\xADdlers\"), \" based on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HTTP method\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADsource path\"), \" from the API input.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Lambda Handler\"), \":\"), mdx(Gist, {\n    url: \"https://gist.github.com/bytekast/d5a544f8cdcd327a12010100b2ba2d66\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"code-review\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#code-review\"\n  })), \"Code review\"), mdx(\"p\", null, \"Lines \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"14-19\"), \" ini\\xADtial\\xADizes the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" in\\xADstance. AWS Lambda will hold on to this in\\xADstance for the life of the con\\xADtainer/\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"JVM\"), \". It is reused in sub\\xADse\\xADquent re\\xADquests.\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"17\"), \" reg\\xADis\\xADters the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Ser\\xADvice\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"han\\xADdlers\")), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"22\"), \" de\\xADfines the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"main han\\xADdler\"), \" method that is called when the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lambda func\\xADtion\"), \" is in\\xADvoked.\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"27\"), \" sends the Lambda func\\xADtion input to the (dy\\xADnamic) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ad\\xADdress\"), \" where han\\xADdlers are wait\\xADing to re\\xADspond. \"), mdx(\"p\", null, \"Lines \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"44-66\"), \" de\\xADfines the spe\\xADcific \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"han\\xADdlers\"), \" and binds them to the ap\\xADpro\\xADpri\\xADate \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"chan\\xADnels\"), \" (http method + re\\xADsource path)\"), mdx(\"h2\", {\n    \"id\": \"summary\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#summary\"\n  })), \"Summary\"), mdx(\"p\", null, \"As you can see, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \"\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\n  }), \"Event Bus\"), \" makes it very easy to dy\\xADnam\\xADi\\xADcally sup\\xADport mul\\xADti\\xADple routes in a sin\\xADgle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server\\xADless\"), \" func\\xADtion. This re\\xADduces the num\\xADber of func\\xADtions you have to man\\xADage, de\\xADploy and main\\xADtain in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS\"), \". In ad\\xADdi\\xADtion, you gain ac\\xADcess to asyn\\xADchro\\xADnous, non-\\u200Bblocking APIs that come stan\\xADdard with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Server\\xADless + Vert.x = BLISS\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<div class=\"alert info\"><p>This is a re-​publication of the fol­low­ing <a href=\"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\">blog post</a></p></div><h2 id=\"serverless-framework\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#serverless-framework\"></a>Serverless framework</h2><p>The <a href=\"https://serverless.com\">Server­less Frame­work</a> has be­come the <em>De Facto</em> toolkit for build­ing and de­ploy­ing Server­less func­tions or ap­pli­ca­tions. Its com­mu­nity has done a great job ad­vanc­ing the tools around Server­less ar­chi­tec­ture.</p><p>How­ever, in the Server­less com­mu­nity there is de­bate among de­vel­op­ers on whether a sin­gle <strong>AWS Lambda</strong> func­tion should only be re­spon­si­ble for a sin­gle API end­point. My an­swer, based on my real-​world pro­duc­tion ex­pe­ri­ence, is <strong>NO</strong>. </p><p>Imag­ine if you are build­ing a set of APIs with <strong>10</strong> end­points and you need to de­ploy the APIs to <strong>DEV</strong>, <strong>STAGE</strong> and <strong>PROD</strong> en­vi­ron­ments. Now you are look­ing at <strong>30</strong> dif­fer­ent func­tions to ver­sion, de­ploy and man­age - not to men­tion the <em>Copy &amp; Paste</em> code and con­fig­u­ra­tion that will re­sult from this type of set-​up. <strong>NO THANKS!!!</strong> </p><p>I be­lieve a more prag­matic ap­proach is <strong>1 Lambda Func­tion</strong> == <strong>1 Mi­croser­vice</strong>.</p><p>For ex­am­ple, if you were build­ing a <strong>User Mi­croser­vice</strong> with basic <strong>CRUD</strong> func­tion­al­ity, you should im­ple­ment <code>CREATE</code>, <code>READ</code>, <code>UPDATE</code> and <code>DELETE</code> in a <strong>sin­gle</strong> Lambda func­tion. In the code, you should re­solve the de­sired ac­tion by in­spect­ing the re­quest or the con­text.</p><h2 id=\"vertx-to-the-rescue\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-to-the-rescue\"></a>Vert.x to the rescue</h2><p>There are many ben­e­fits to using <strong>Vert.x</strong> in any ap­pli­ca­tion. With <strong>Vert.x</strong>, you get a rock-​solid and light­weight toolkit for build­ing <strong>re­ac­tive</strong>, <strong>highly per­for­mant</strong>, <strong>event-​driven</strong> and <strong>non-​blocking</strong> ap­pli­ca­tions. The toolkit even pro­vides asyn­chro­nous <em>APIs</em> for ac­cess­ing tra­di­tional block­ing dri­vers such as <strong><a href=\"http://vertx.io/docs/vertx-jdbc-client/groovy/\">JDBC</a></strong>.</p><p>How­ever, for this ex­am­ple, we will mainly focus on the <a href=\"http://vertx.io/docs/vertx-core/groovy/#event_bus\">Event Bus</a>. The event bus al­lows dif­fer­ent parts of your ap­pli­ca­tion to com­mu­ni­cate with each other via event mes­sages. It sup­ports <em>pub­lish/sub­scribe</em>, <em>point to point</em>, and <em>request-​response mes­sag­ing</em>.</p><p>For the <strong>User Mi­croser­vice</strong> ex­am­ple above, we could treat the com­bi­na­tion of the <code>HTTP METHOD</code> and <code>RESOURCE PATH</code> as a unique event chan­nel, and reg­is­ter the sub­scribers/han­dlers to re­spond ap­pro­pri­ately.</p><p>Let’s dive right in.</p><h2 id=\"goal\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#goal\"></a>Goal</h2><p>Cre­ate a <em>re­ac­tive</em>, <em>message-​driven</em>, <em>asyn­chro­nous</em> <strong>User Mi­croser­vice</strong> with <code>GET</code>, <code>POST</code>, <code>DELETE</code>, <code>PUT</code> CRUD op­er­a­tions in a <em>sin­gle</em> <strong><a href=\"aws.amazon.com/lambda\">AWS Lambda Func­tion</a></strong> using the <a href=\"https://serverless.com\">Server­less Frame­work</a></p><p><code>Serverless stack definition</code>:</p><div>...waiting for Gist...</div><h2 id=\"solution\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#solution\"></a>Solution</h2><p>Use <a href=\"http://vertx.io\">Vert.x</a>’s <a href=\"http://vertx.io/docs/vertx-core/groovy/#event_bus\">Event Bus</a> to han­dle <strong>dy­namic rout­ing</strong> to <strong>event han­dlers</strong> based on <em>HTTP method</em> and <em>re­source path</em> from the API input.</p><p><code>Lambda Handler</code>:</p><div>...waiting for Gist...</div><h2 id=\"code-review\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#code-review\"></a>Code review</h2><p>Lines <code>14-19</code> ini­tial­izes the <strong>Vert.x</strong> in­stance. AWS Lambda will hold on to this in­stance for the life of the con­tainer/<strong>JVM</strong>. It is reused in sub­se­quent re­quests.</p><p>Line <code>17</code> reg­is­ters the <strong>User Ser­vice</strong> <em>han­dlers</em></p><p>Line <code>22</code> de­fines the <strong>main han­dler</strong> method that is called when the <strong>Lambda func­tion</strong> is in­voked.</p><p>Line <code>27</code> sends the Lambda func­tion input to the (dy­namic) <strong>ad­dress</strong> where han­dlers are wait­ing to re­spond. </p><p>Lines <code>44-66</code> de­fines the spe­cific <em>han­dlers</em> and binds them to the ap­pro­pri­ate <em>chan­nels</em> (http method + re­source path)</p><h2 id=\"summary\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#summary\"></a>Summary</h2><p>As you can see, <a href=\"http://vertx.io\">Vert.x</a>’s <a href=\"http://vertx.io/docs/vertx-core/groovy/#event_bus\">Event Bus</a> makes it very easy to dy­nam­i­cally sup­port mul­ti­ple routes in a sin­gle <strong>Server­less</strong> func­tion. This re­duces the num­ber of func­tions you have to man­age, de­ploy and main­tain in <strong>AWS</strong>. In ad­di­tion, you gain ac­cess to asyn­chro­nous, non-​blocking APIs that come stan­dard with <strong>Vert.x</strong>.</p><blockquote><p>Server­less + Vert.x = BLISS</p></blockquote>","scope":{}},"tfIdfTerms":[{"term":"function","tf":11},{"term":"serverless","tf":8},{"term":"event","tf":8},{"term":"lambda","tf":7},{"term":"api","tf":6},{"term":"handler","tf":6},{"term":"singl","tf":5},{"term":"line","tf":5},{"term":"build","tf":4},{"term":"deploi","tf":4},{"term":"applic","tf":4},{"term":"aw","tf":4},{"term":"microservic","tf":4},{"term":"user","tf":4},{"term":"bu","tf":4},{"term":"framework","tf":3},{"term":"toolkit","tf":3},{"term":"commun","tf":3},{"term":"code","tf":3},{"term":"will","tf":3},{"term":"exampl","tf":3},{"term":"request","tf":3},{"term":"us","tf":3},{"term":"block","tf":3},{"term":"asynchron","tf":3}]},{"filename":"blog/2017-03-20-scala-is-here.mdx","date":"2017-03-20","slug":"scala-is-here","meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"readingTime":{"text":"8 min read","minutes":7.065,"time":423900.00000000006,"words":1413},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TL;DR:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Scala sup\\xADport for Vert.x is here!\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It is based on Scala 2.12, no sup\\xADport for 2.11 planned\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"all Vert.x-\\u200Bmodules are avail\\xADable in a Scala fla\\xADvor\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It\\u2019s awe\\xADsome\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Get started \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-sbt-starter\"\n  }), \"here\"))), mdx(\"h2\", {\n    \"id\": \"intro\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#intro\"\n  })), \"Intro\"), mdx(\"p\", null, \"The rise of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://scala-lang.org/\"\n  }), \"Scala\"), \" as one of the most im\\xADpor\\xADtant lan\\xADguages on the JVM caught many (me in\\xADcluded) by sur\\xADprise. This hy\\xADbrid of func\\xADtional and im\\xADper\\xADa\\xADtive par\\xADa\\xADdigms struck a chord with many de\\xADvel\\xADop\\xADers. Thanks to Scala a lot of peo\\xADple who\\u2019d never have touched a lan\\xADguage like Haskell got ex\\xADposed to func\\xADtional pro\\xADgram\\xADming. This ex\\xADpo\\xADsure was one of the dri\\xADving forces to get streams and lambda into the JVM.\"), mdx(\"p\", null, \"With the re\\xADlease of Vert.x 3.4.0 we fi\\xADnally in\\xADtro\\xADduced Scala to the fam\\xADily of sup\\xADported lan\\xADguages: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala\"\n  }), \"vertx-\\u200Blang-scala\"), \".\"), mdx(\"p\", null, \"In this post I will in\\xADtro\\xADduce the new stack and how the power of Scala can be used in your fa\\xADvorite re\\xADac\\xADtive toolkit.\"), mdx(\"h2\", {\n    \"id\": \"basics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#basics\"\n  })), \"Basics\"), mdx(\"p\", null, \"vertx-\\u200Blang-scala is based on Scala 2.12. There are no plans to sup\\xADport 2.11.\"), mdx(\"p\", null, \"All mod\\xADules avail\\xADable for Vert.x are sup\\xADported (you can check  \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala/tree/master/vertx-lang-scala-stack\"\n  }), \"here\"), \" ).\"), mdx(Alert, {\n    info: true,\n    title: \"Future and Promise both need a ExecutionContext\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Mod\\xADules use the fol\\xADlow\\xADing naming-\\u200Bscheme: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"io.vertx:\", \"<\", \"name-\\u200Bof-vertx-module\", \">\", \"-\\u200Bscala_2.12:\", \"<\", \"vertx-\\u200Bmajor-version\", \">\"), \". The Scala ver\\xADsion of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"io.vertx:vert-\\u200Bweb:3.4.0\"), \" would be \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"io.vertx:vertx-\\u200Bweb-scala_2.12:3.4.0\"), \".\")), mdx(\"p\", null, \"There is an sbt-\\u200Bbased \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-sbt-starter\"\n  }), \"quickstart-\\u200Bproject\"), \" avail\\xADable that will be up\\xADdated for each Vert.x-\\u200Brelease.\"), mdx(\"p\", null, \"Please note: Al\\xADthough \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.scala-sbt.org/\"\n  }), \"sbt\"), \" is used in this quick\\xADstart it is by no means re\\xADquired. There are no spe\\xADcial plu\\xADg\\xADins in\\xADvolved so vertx-\\u200Blang-scala can eas\\xADily be used with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.gradle.org/current/userguide/scala_plugin.html\"\n  }), \"Gra\\xADdle\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/davidB/scala-maven-plugin\"\n  }), \"Maven\"), \".\"), mdx(\"p\", null, \"I use sbt as it is the de\\xADfault build sys\\xADtem used for Scala projects.\"), mdx(\"h2\", {\n    \"id\": \"quickstart\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#quickstart\"\n  })), \"Quickstart\"), mdx(\"p\", null, \"Let\\u2019s get started by cloning the quick\\xADstart:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"git \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" git@github.com:vert-x3/vertx-sbt-starter.git\\n\")), mdx(\"p\", null, \"You just got the fol\\xADlow\\xADing things:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An sbt project con\\xADtain\\xADing de\\xADpen\\xADden\\xADcies to Vert.x-\\u200Bcore and Vert.x-web\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The abil\\xADity to cre\\xADate a fat-\\u200Bjat via \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sbt assembly\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The abil\\xADity to cre\\xADate a docker con\\xADtainer via \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sbt docker\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A few ex\\xADam\\xADple ver\\xADti\\xADcles\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Unit test ex\\xADam\\xADples\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"a pre-\\u200Bconfigured Scala-\\u200Bshell in\\xADside sbt\")), mdx(\"p\", null, \"We will now run the ap\\xADpli\\xADca\\xADtion to get some quick sat\\xADis\\xADfac\\xADtion. Use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sbt assembly\"), \" to pro\\xADduce the fat-\\u200Bjar fol\\xADlowed by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"java -jar target/scala-2.12/vertx-scala-sbt-assembly-0.1-SNAPSHOT.jar\"), \". Now point your browser to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8666/hello\"\n  }), \"http://lo\\xADcal\\xADhost:8666/hello\"), \" for a clas\\xADsic wel\\xADcome mes\\xADsage.\"), mdx(\"h2\", {\n    \"id\": \"the-details\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-details\"\n  })), \"The details\"), mdx(\"p\", null, \"Open your IDE so we can take a look at what\\u2019s going on under the hood. We start with the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HttpVer\\xADti\\xADcle\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" io.vertx.scala.sbt\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.lang.scala.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"ScalaVerticle\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.scala.ext.web.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Router\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" scala.concurrent.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Future\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"HttpVerticle\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"ScalaVerticle\"), \" \"), \"{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <1>\"), \"\\n\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"override\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"def\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"startFuture\")), \"(): \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Future\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Unit\"), \"] = { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <2>\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"val\"), \" router = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Router\"), \".router(vertx) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <3>\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"val\"), \" route = router\\n      .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \")\\n        .handler(_.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"world\\\"\"), \"))\\n\\n    vertx \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//<4>\"), \"\\n      .createHttpServer()\\n      .requestHandler(router.accept)\\n      .listenFuture(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8666\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.0.0\\\"\"), \")  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <5>\"), \"\\n        .map(_ => ()) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <6>\"), \"\\n  }\\n}\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"ScalaVer\\xADti\\xADcle\"), \" is the base class for all Scala-\\u200BVerticles. It pro\\xADvides all re\\xADquired meth\\xADods to in\\xADte\\xADgrate with the Vert.x-\\u200Bruntime.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"There are two ways to start a Ver\\xADti\\xADcle. Over\\xADrid\\xADing \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\\xADFu\\xADture\"), \", like in this ex\\xADam\\xADple, tells Vert.x to only con\\xADsider the Ver\\xADti\\xADcle fully started after the re\\xADturned \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[Unit]\"), \" has been suc\\xADcess\\xADfully com\\xADpleted. Al\\xADter\\xADna\\xADtively one can over\\xADride \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\"), \" and by that sig\\xADnal to Vert.x the in\\xADstant avail\\xADabil\\xADity of the Ver\\xADti\\xADcle.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This block cre\\xADates a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Router\"), \" for in\\xADcom\\xADing HTTP-\\u200Brequests. It reg\\xADis\\xADters a han\\xADdler to an\\xADswer with \\u201Cworld\\u201D if a re\\xADquest to the URL \\u201C/hello\\u201D ar\\xADrives. The class is com\\xADing from the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/scala/\"\n  }), \"Vert.x-\\u200Bweb-module\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Every Ver\\xADti\\xADcle has ac\\xADcess to the Vert.x-\\u200Binstance. Here we use it to cre\\xADate a web\\xADserver and reg\\xADis\\xADter our router to han\\xADdle in\\xADcom\\xADing re\\xADquests.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We fi\\xADnally reached the rea\\xADson why I use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\\xADFu\\xADture\"), \" in the first place. All op\\xADer\\xADa\\xADtions in Vert.x are asyn\\xADchro\\xADnous. So start\\xADing the web\\xADserver most def\\xADi\\xADnitely means it takes some more time until it bound to the given port (8666 in this case). That\\u2019s why \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"lis\\xADten\\xADFu\\xADture\"), \" is used, which re\\xADturns a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" which in turn con\\xADtains the ac\\xADtual in\\xADstance of the web\\xADserver that just got started. So our Ver\\xADti\\xADcle will be ready to re\\xADceive re\\xADquests \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"after\"), \" the re\\xADturned \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" has been com\\xADpleted.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In most cases we can re\\xADturn the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" di\\xADrectly. In this case the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" re\\xADturned by \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"lis\\xADten\\xADFu\\xADture\"), \" has the wrong type. We get a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[HttpServer]\"), \" but we need a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[Unit]\"), \" as you can see in the sig\\xADna\\xADture of \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\\xADFu\\xADture\"), \". This call takes care of map\\xADping the given \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[HttpServer]\"), \" to the re\\xADquired re\\xADturn type.\")), mdx(\"h2\", {\n    \"id\": \"testing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#testing\"\n  })), \"Testing\"), mdx(\"p\", null, \"I use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.scalatest.org/\"\n  }), \"Sca\\xADlaT\\xADest\"), \" for all my test\\xADing needs. It comes with stel\\xADlar sup\\xADport for asyn\\xADchro\\xADnous op\\xADer\\xADa\\xADtions and is a per\\xADfect fit for test\\xADing Vert.x-\\u200Bapplications.\"), mdx(\"p\", null, \"The fol\\xADlow\\xADing \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HttpVer\\xADti\\xADcle\\xADSpec\"), \" shows how to test an HTTP-\\u200BAPI using only Vert.x-\\u200Bclasses. Per\\xADson\\xADally I pre\\xADfer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://rest-assured.io/\"\n  }), \"REST-\\u200Bassured\"), \" with its rich DSL. For this post I wanted to stick with Vert.x-API, so here we go.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" io.vertx.scala.sbt\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" org.scalatest.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Matchers\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" scala.concurrent.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Promise\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"HttpVerticleSpec\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"VerticleTesting\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"HttpVerticle\"), \"] \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"with\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Matchers\"), \" \"), \"{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <1>\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"HttpVerticle\\\"\"), \" should \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bind to 8666 and answer with 'world'\\\"\"), \" in { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <2>\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"val\"), \" promise = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Promise\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"String\"), \"] \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <3>\"), \"\\n\\n    vertx.createHttpClient()  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <4>\"), \"\\n      .getNow(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8666\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"127.0.0.1\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \",\\n        r => {\\n          r.exceptionHandler(promise.failure)\\n          r.bodyHandler(b => promise.success(b.toString))\\n        })\\n\\n    promise.future.map(res => res should equal(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"world\\\"\"), \")) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <5>\"), \"\\n  }\\n\\n}\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Ver\\xADti\\xADcleTest\\xADing\"), \" is a base class for your tests in\\xADcluded with the quickstart-\\u200Bproject. It\\u2019s a small helper that takes care of de\\xADploy\\xADing/un-\\u200Bdeploying the Ver\\xADti\\xADcle to be tested and man\\xADages a Vert.x-\\u200Binstance. It ad\\xADdi\\xADtion\\xADally ex\\xADtends \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.scalatest.org/user_guide/async_testing\"\n  }), \"AsyncFlat\\xADSpec\"), \" so we can use Fu\\xADtures as test-\\u200Breturn-types.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Isn\\u2019t it nice and read\\xADable?\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The promise is re\\xADquired as the whole test will run async\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We use the vertx-\\u200Binstance pro\\xADvided by \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Ver\\xADti\\xADcleTest\\xADing\"), \" to cre\\xADate a Netty-\\u200Bbased Http\\xADClient. We in\\xADstruct the client to call the spec\\xADi\\xADfied URL and to suc\\xADceed the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Promise\"), \" with the re\\xADturned body.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This cre\\xADates the ac\\xADtual as\\xADser\\xADtion. After get\\xADting the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" from the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Promise\"), \" an as\\xADser\\xADtion is cre\\xADated: \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"The Re\\xADsult should be equal to the String \\u201Cworld\\u201D\"), \". Sca\\xADlaT\\xADest takes care of eval\\xADu\\xADat\\xADing the re\\xADturned \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \".\")), mdx(\"p\", null, \"That\\u2019s all you need to get started!\"), mdx(\"h2\", {\n    \"id\": \"futures-in-vertx-lang-scala\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#futures-in-vertx-lang-scala\"\n  })), \"Futures in vertx-lang-scala\"), mdx(\"p\", null, \"Now for a more in depth topic I think is worth men\\xADtion\\xADing. vertx-\\u200Blang-scala treats async op\\xADer\\xADa\\xADtions the Scala-\\u200Bway which is a lit\\xADtle dif\\xADfer\\xADent from what you might be used from Vert.x. For async op\\xADer\\xADa\\xADtions like sub\\xADscrib\\xADing to the event\\xADbus or de\\xADploy\\xADing a Ver\\xADti\\xADcle you would call a method like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), \"vertx.deployVerticle(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"com.foo.OtherVerticle\\\"\"), \", res -> {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (res.succeeded()) {\\n    startFuture.complete();\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    startFuture.fail(res.cause());\\n  }\\n});\\n\")), mdx(\"p\", null, \"The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"de\\xADployVer\\xADti\\xADcle\"), \" method takes the Verticle-\\u200Bname and a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler\", \"[Asyn\\xADcRe\\xADsult]\"), \" as its ar\\xADgu\\xADments. The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler\", \"[Asyn\\xADcRe\\xADsult]\"), \" is called after Vert.x tried de\\xADploy\\xADing the Ver\\xADti\\xADcle. This style can also be used for Scala (which might ease the tran\\xADsi\\xADtion when com\\xADing from the Java-\\u200Bworld) but their is a way more \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"scalaish\"), \" way of doing this.\"), mdx(\"p\", null, \"For every method tak\\xADing a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler\", \"[Asyn\\xADcRe\\xADsult]\"), \" as its ar\\xADgu\\xADment I cre\\xADate an al\\xADter\\xADna\\xADtive method using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://docs.scala-lang.org/overviews/core/futures.html\"\n  }), \"Scala-\\u200BFutures\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), \"vertx.deployVerticleFuture(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"com.foo.OtherVerticle\\\"\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <1>\"), \"\\n  .onComplete{  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <2>\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Success\"), \"(s) => println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"s\\\"Verticle id is: \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-subst\"\n  }), \"$s\"), \"\\\"\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// <3>\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Failure\"), \"(t) => t.printStackTrace()\\n  }\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A method pro\\xADvid\\xADing a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" based al\\xADter\\xADna\\xADtive gets \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" ap\\xADpended to its name and re\\xADturns a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" in\\xADstead of tak\\xADing a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Han\\xADdler\"), \" as its ar\\xADgu\\xADment.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We are now free to use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" the way we want. In this case on\\xADCom\\xADplete is used to react on the com\\xADple\\xADtion.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Pat\\xADtern match\\xADing on the re\\xADsult \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"<\", \"3\"))), mdx(\"p\", null, \"I strongly rec\\xADom\\xADmend using this ap\\xADproach over using \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdlers\"), \" as you won\\u2019t run into Callback-\\u200Bhell and you get all the good\\xADies Scala pro\\xADvides for async op\\xADer\\xADa\\xADtions.\"), mdx(Alert, {\n    info: true,\n    title: \"Future and Promise both need a ExecutionContext\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/VertxExecutionContext.scala\"\n  }), \"Vertx\\xADEx\\xADe\\xADcu\\xADtion\\xADCon\\xADtext\"), \" is made im\\xADplic\\xADitly avail\\xADable in\\xADside the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/ScalaVerticle.scala\"\n  }), \"ScalaVer\\xADti\\xADcle\"), \". It makes sure all  op\\xADer\\xADa\\xADtions are ex\\xADe\\xADcuted on the cor\\xADrect Event Loop. If you are using Vert.x with\\xADout Ver\\xADti\\xADcles you have to pro\\xADvide it on your own.\")), mdx(\"h2\", {\n    \"id\": \"using-the-console\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#using-the-console\"\n  })), \"Using the console\"), mdx(\"p\", null, \"A great fea\\xADture of sbt is the em\\xADbed\\xADded, con\\xADfig\\xADurable Scala-\\u200Bconsole. The con\\xADsole avail\\xADable in the quickstart-\\u200Bproject is pre-\\u200Bconfigured to pro\\xADvide a fresh Vert.x-\\u200Binstance and all re\\xADquired im\\xADports so you can start play\\xADing around with Vert.x in an in\\xADstant.\"), mdx(\"p\", null, \"Ex\\xADe\\xADcute the fol\\xADlow\\xADing com\\xADmands in the project-\\u200Bfolder to de\\xADploy the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HttpVer\\xADti\\xADcle\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"sbt\\n> console\\nscala> vertx.deployVerticle(nameForVerticle[HttpVerticle])\\nscala> vertx.deploymentIDs\\n\")), mdx(\"p\", null, \"After  ex\\xADe\\xADcut\\xADing this se\\xADquence you can now point your browser \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8666/hello\"\n  }), \"http://lo\\xADcal\\xADhost:8666/hello\"), \" to see our mes\\xADsage. The last com\\xADmand is\\xADsued shows the Ids under which Ver\\xADti\\xADcles have been de\\xADployed.\"), mdx(\"p\", null, \"To get rid of the de\\xADploy\\xADment you can now type \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.undeploy(vertx.deploymentIDs.head)\"), \".\"), mdx(\"h2\", {\n    \"id\": \"thats-it\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#thats-it\"\n  })), \"That\\u2019s it!\"), mdx(\"p\", null, \"This was a very quick in\\xADtro\\xADduc\\xADtion to our new Scala-\\u200Bstack. I hope to have given you a lit\\xADtle taste of the Scala good\\xADness now avail\\xADable with Vert.x. I rec\\xADom\\xADmend dig\\xADging a lit\\xADtle more through the quick\\xADstart to get a feel\\xADing for what\\u2019s there.\\nIn my next blog post I will ex\\xADplain some of the de\\xADci\\xADsions I made and the ob\\xADsta\\xADcles I faced with the dif\\xADfer\\xADences be\\xADtween Java and Scala /Hint: They are way big\\xADger than I was aware of).\"), mdx(\"p\", null, \"Enjoy!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p><strong>TL;DR:</strong></p><ul><li>Scala sup­port for Vert.x is here!</li><li>It is based on Scala 2.12, no sup­port for 2.11 planned</li><li>all Vert.x-​modules are avail­able in a Scala fla­vor</li><li>It’s awe­some</li><li>Get started <a href=\"https://github.com/vert-x3/vertx-sbt-starter\">here</a></li></ul><h2 id=\"intro\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#intro\"></a>Intro</h2><p>The rise of <a href=\"http://scala-lang.org/\">Scala</a> as one of the most im­por­tant lan­guages on the JVM caught many (me in­cluded) by sur­prise. This hy­brid of func­tional and im­per­a­tive par­a­digms struck a chord with many de­vel­op­ers. Thanks to Scala a lot of peo­ple who’d never have touched a lan­guage like Haskell got ex­posed to func­tional pro­gram­ming. This ex­po­sure was one of the dri­ving forces to get streams and lambda into the JVM.</p><p>With the re­lease of Vert.x 3.4.0 we fi­nally in­tro­duced Scala to the fam­ily of sup­ported lan­guages: <a href=\"https://github.com/vert-x3/vertx-lang-scala\">vertx-​lang-scala</a>.</p><p>In this post I will in­tro­duce the new stack and how the power of Scala can be used in your fa­vorite re­ac­tive toolkit.</p><h2 id=\"basics\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#basics\"></a>Basics</h2><p>vertx-​lang-scala is based on Scala 2.12. There are no plans to sup­port 2.11.</p><p>All mod­ules avail­able for Vert.x are sup­ported (you can check  <a href=\"https://github.com/vert-x3/vertx-lang-scala/tree/master/vertx-lang-scala-stack\">here</a> ).</p><div class=\"alert info\"><div class=\"alert-title\">Future and Promise both need a ExecutionContext</div><p>Mod­ules use the fol­low­ing naming-​scheme: <em>io.vertx:<!-- -->&lt;<!-- -->name-​of-vertx-module<!-- -->&gt;<!-- -->-​scala_2.12:<!-- -->&lt;<!-- -->vertx-​major-version<!-- -->&gt;</em>. The Scala ver­sion of <em>io.vertx:vert-​web:3.4.0</em> would be <em>io.vertx:vertx-​web-scala_2.12:3.4.0</em>.</p></div><p>There is an sbt-​based <a href=\"https://github.com/vert-x3/vertx-sbt-starter\">quickstart-​project</a> avail­able that will be up­dated for each Vert.x-​release.</p><p>Please note: Al­though <a href=\"http://www.scala-sbt.org/\">sbt</a> is used in this quick­start it is by no means re­quired. There are no spe­cial plu­g­ins in­volved so vertx-​lang-scala can eas­ily be used with <a href=\"https://docs.gradle.org/current/userguide/scala_plugin.html\">Gra­dle</a> or <a href=\"https://github.com/davidB/scala-maven-plugin\">Maven</a>.</p><p>I use sbt as it is the de­fault build sys­tem used for Scala projects.</p><h2 id=\"quickstart\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#quickstart\"></a>Quickstart</h2><p>Let’s get started by cloning the quick­start:</p><pre><code class=\"hljs language-bash\">git <span class=\"hljs-built_in\">clone</span> git@github.com:vert-x3/vertx-sbt-starter.git\n</code></pre><p>You just got the fol­low­ing things:</p><ul><li>An sbt project con­tain­ing de­pen­den­cies to Vert.x-​core and Vert.x-web</li><li>The abil­ity to cre­ate a fat-​jat via <code>sbt assembly</code></li><li>The abil­ity to cre­ate a docker con­tainer via <code>sbt docker</code></li><li>A few ex­am­ple ver­ti­cles</li><li>Unit test ex­am­ples</li><li>a pre-​configured Scala-​shell in­side sbt</li></ul><p>We will now run the ap­pli­ca­tion to get some quick sat­is­fac­tion. Use <code>sbt assembly</code> to pro­duce the fat-​jar fol­lowed by <code>java -jar target/scala-2.12/vertx-scala-sbt-assembly-0.1-SNAPSHOT.jar</code>. Now point your browser to <a href=\"http://localhost:8666/hello\">http://lo­cal­host:8666/hello</a> for a clas­sic wel­come mes­sage.</p><h2 id=\"the-details\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-details\"></a>The details</h2><p>Open your IDE so we can take a look at what’s going on under the hood. We start with the <em>HttpVer­ti­cle</em>.</p><pre><code class=\"hljs language-scala\"><span class=\"hljs-keyword\">package</span> io.vertx.scala.sbt\n\n<span class=\"hljs-keyword\">import</span> io.vertx.lang.scala.<span class=\"hljs-type\">ScalaVerticle</span>\n<span class=\"hljs-keyword\">import</span> io.vertx.scala.ext.web.<span class=\"hljs-type\">Router</span>\n\n<span class=\"hljs-keyword\">import</span> scala.concurrent.<span class=\"hljs-type\">Future</span>\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HttpVerticle</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ScalaVerticle</span> </span>{ <span class=\"hljs-comment\">// &lt;1&gt;</span>\n\n\n  <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">startFuture</span></span>(): <span class=\"hljs-type\">Future</span>[<span class=\"hljs-type\">Unit</span>] = { <span class=\"hljs-comment\">// &lt;2&gt;</span>\n    <span class=\"hljs-keyword\">val</span> router = <span class=\"hljs-type\">Router</span>.router(vertx) <span class=\"hljs-comment\">// &lt;3&gt;</span>\n    <span class=\"hljs-keyword\">val</span> route = router\n      .get(<span class=\"hljs-string\">&quot;/hello&quot;</span>)\n        .handler(_.response().end(<span class=\"hljs-string\">&quot;world&quot;</span>))\n\n    vertx <span class=\"hljs-comment\">//&lt;4&gt;</span>\n      .createHttpServer()\n      .requestHandler(router.accept)\n      .listenFuture(<span class=\"hljs-number\">8666</span>, <span class=\"hljs-string\">&quot;0.0.0.0&quot;</span>)  <span class=\"hljs-comment\">// &lt;5&gt;</span>\n        .map(_ =&gt; ()) <span class=\"hljs-comment\">// &lt;6&gt;</span>\n  }\n}\n</code></pre><ol><li><em>ScalaVer­ti­cle</em> is the base class for all Scala-​Verticles. It pro­vides all re­quired meth­ods to in­te­grate with the Vert.x-​runtime.</li><li>There are two ways to start a Ver­ti­cle. Over­rid­ing <em>start­Fu­ture</em>, like in this ex­am­ple, tells Vert.x to only con­sider the Ver­ti­cle fully started after the re­turned <em>Fu­ture<!-- -->[Unit]</em> has been suc­cess­fully com­pleted. Al­ter­na­tively one can over­ride <em>start</em> and by that sig­nal to Vert.x the in­stant avail­abil­ity of the Ver­ti­cle.</li><li>This block cre­ates a <em>Router</em> for in­com­ing HTTP-​requests. It reg­is­ters a han­dler to an­swer with “world” if a re­quest to the URL “/hello” ar­rives. The class is com­ing from the <a href=\"http://vertx.io/docs/vertx-web/scala/\">Vert.x-​web-module</a>.</li><li>Every Ver­ti­cle has ac­cess to the Vert.x-​instance. Here we use it to cre­ate a web­server and reg­is­ter our router to han­dle in­com­ing re­quests.</li><li>We fi­nally reached the rea­son why I use <em>start­Fu­ture</em> in the first place. All op­er­a­tions in Vert.x are asyn­chro­nous. So start­ing the web­server most def­i­nitely means it takes some more time until it bound to the given port (8666 in this case). That’s why <em>lis­ten­Fu­ture</em> is used, which re­turns a <em>Fu­ture</em> which in turn con­tains the ac­tual in­stance of the web­server that just got started. So our Ver­ti­cle will be ready to re­ceive re­quests <em>after</em> the re­turned <em>Fu­ture</em> has been com­pleted.</li><li>In most cases we can re­turn the <em>Fu­ture</em> di­rectly. In this case the <em>Fu­ture</em> re­turned by <em>lis­ten­Fu­ture</em> has the wrong type. We get a <em>Fu­ture<!-- -->[HttpServer]</em> but we need a <em>Fu­ture<!-- -->[Unit]</em> as you can see in the sig­na­ture of <em>start­Fu­ture</em>. This call takes care of map­ping the given <em>Fu­ture<!-- -->[HttpServer]</em> to the re­quired re­turn type.</li></ol><h2 id=\"testing\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#testing\"></a>Testing</h2><p>I use <a href=\"http://www.scalatest.org/\">Sca­laT­est</a> for all my test­ing needs. It comes with stel­lar sup­port for asyn­chro­nous op­er­a­tions and is a per­fect fit for test­ing Vert.x-​applications.</p><p>The fol­low­ing <em>HttpVer­ti­cle­Spec</em> shows how to test an HTTP-​API using only Vert.x-​classes. Per­son­ally I pre­fer <a href=\"http://rest-assured.io/\">REST-​assured</a> with its rich DSL. For this post I wanted to stick with Vert.x-API, so here we go.</p><pre><code class=\"hljs language-scala\"><span class=\"hljs-keyword\">package</span> io.vertx.scala.sbt\n\n<span class=\"hljs-keyword\">import</span> org.scalatest.<span class=\"hljs-type\">Matchers</span>\n\n<span class=\"hljs-keyword\">import</span> scala.concurrent.<span class=\"hljs-type\">Promise</span>\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HttpVerticleSpec</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">VerticleTesting</span>[<span class=\"hljs-type\">HttpVerticle</span>] <span class=\"hljs-keyword\">with</span> <span class=\"hljs-title\">Matchers</span> </span>{ <span class=\"hljs-comment\">// &lt;1&gt;</span>\n\n  <span class=\"hljs-string\">&quot;HttpVerticle&quot;</span> should <span class=\"hljs-string\">&quot;bind to 8666 and answer with &#x27;world&#x27;&quot;</span> in { <span class=\"hljs-comment\">// &lt;2&gt;</span>\n    <span class=\"hljs-keyword\">val</span> promise = <span class=\"hljs-type\">Promise</span>[<span class=\"hljs-type\">String</span>] <span class=\"hljs-comment\">// &lt;3&gt;</span>\n\n    vertx.createHttpClient()  <span class=\"hljs-comment\">// &lt;4&gt;</span>\n      .getNow(<span class=\"hljs-number\">8666</span>, <span class=\"hljs-string\">&quot;127.0.0.1&quot;</span>, <span class=\"hljs-string\">&quot;/hello&quot;</span>,\n        r =&gt; {\n          r.exceptionHandler(promise.failure)\n          r.bodyHandler(b =&gt; promise.success(b.toString))\n        })\n\n    promise.future.map(res =&gt; res should equal(<span class=\"hljs-string\">&quot;world&quot;</span>)) <span class=\"hljs-comment\">// &lt;5&gt;</span>\n  }\n\n}\n</code></pre><ol><li><em>Ver­ti­cleTest­ing</em> is a base class for your tests in­cluded with the quickstart-​project. It’s a small helper that takes care of de­ploy­ing/un-​deploying the Ver­ti­cle to be tested and man­ages a Vert.x-​instance. It ad­di­tion­ally ex­tends <a href=\"http://www.scalatest.org/user_guide/async_testing\">AsyncFlat­Spec</a> so we can use Fu­tures as test-​return-types.</li><li>Isn’t it nice and read­able?</li><li>The promise is re­quired as the whole test will run async</li><li>We use the vertx-​instance pro­vided by <em>Ver­ti­cleTest­ing</em> to cre­ate a Netty-​based Http­Client. We in­struct the client to call the spec­i­fied URL and to suc­ceed the <em>Promise</em> with the re­turned body.</li><li>This cre­ates the ac­tual as­ser­tion. After get­ting the <em>Fu­ture</em> from the <em>Promise</em> an as­ser­tion is cre­ated: <em>The Re­sult should be equal to the String “world”</em>. Sca­laT­est takes care of eval­u­at­ing the re­turned <em>Fu­ture</em>.</li></ol><p>That’s all you need to get started!</p><h2 id=\"futures-in-vertx-lang-scala\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#futures-in-vertx-lang-scala\"></a>Futures in vertx-lang-scala</h2><p>Now for a more in depth topic I think is worth men­tion­ing. vertx-​lang-scala treats async op­er­a­tions the Scala-​way which is a lit­tle dif­fer­ent from what you might be used from Vert.x. For async op­er­a­tions like sub­scrib­ing to the event­bus or de­ploy­ing a Ver­ti­cle you would call a method like this:</p><pre><code class=\"hljs language-scala\">vertx.deployVerticle(<span class=\"hljs-string\">&quot;com.foo.OtherVerticle&quot;</span>, res -&gt; {\n  <span class=\"hljs-keyword\">if</span> (res.succeeded()) {\n    startFuture.complete();\n  } <span class=\"hljs-keyword\">else</span> {\n    startFuture.fail(res.cause());\n  }\n});\n</code></pre><p>The <em>de­ployVer­ti­cle</em> method takes the Verticle-​name and a <em>Han­dler<!-- -->[Asyn­cRe­sult]</em> as its ar­gu­ments. The <em>Han­dler<!-- -->[Asyn­cRe­sult]</em> is called after Vert.x tried de­ploy­ing the Ver­ti­cle. This style can also be used for Scala (which might ease the tran­si­tion when com­ing from the Java-​world) but their is a way more <em>scalaish</em> way of doing this.</p><p>For every method tak­ing a <em>Han­dler<!-- -->[Asyn­cRe­sult]</em> as its ar­gu­ment I cre­ate an al­ter­na­tive method using <a href=\"http://docs.scala-lang.org/overviews/core/futures.html\">Scala-​Futures</a>.</p><pre><code class=\"hljs language-scala\">vertx.deployVerticleFuture(<span class=\"hljs-string\">&quot;com.foo.OtherVerticle&quot;</span>) <span class=\"hljs-comment\">// &lt;1&gt;</span>\n  .onComplete{  <span class=\"hljs-comment\">// &lt;2&gt;</span>\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Success</span>(s) =&gt; println(<span class=\"hljs-string\">s&quot;Verticle id is: <span class=\"hljs-subst\">$s</span>&quot;</span>) <span class=\"hljs-comment\">// &lt;3&gt;</span>\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-type\">Failure</span>(t) =&gt; t.printStackTrace()\n  }\n</code></pre><ol><li>A method pro­vid­ing a <em>Fu­ture</em> based al­ter­na­tive gets <em>Fu­ture</em> ap­pended to its name and re­turns a <em>Fu­ture</em> in­stead of tak­ing a <em>Han­dler</em> as its ar­gu­ment.</li><li>We are now free to use <em>Fu­ture</em> the way we want. In this case on­Com­plete is used to react on the com­ple­tion.</li><li>Pat­tern match­ing on the re­sult <em>&lt;<!-- -->3</em></li></ol><p>I strongly rec­om­mend using this ap­proach over using <em>Han­dlers</em> as you won’t run into Callback-​hell and you get all the good­ies Scala pro­vides for async op­er­a­tions.</p><div class=\"alert info\"><div class=\"alert-title\">Future and Promise both need a ExecutionContext</div><p>The <a href=\"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/VertxExecutionContext.scala\">Vertx­Ex­e­cu­tion­Con­text</a> is made im­plic­itly avail­able in­side the <a href=\"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/ScalaVerticle.scala\">ScalaVer­ti­cle</a>. It makes sure all  op­er­a­tions are ex­e­cuted on the cor­rect Event Loop. If you are using Vert.x with­out Ver­ti­cles you have to pro­vide it on your own.</p></div><h2 id=\"using-the-console\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#using-the-console\"></a>Using the console</h2><p>A great fea­ture of sbt is the em­bed­ded, con­fig­urable Scala-​console. The con­sole avail­able in the quickstart-​project is pre-​configured to pro­vide a fresh Vert.x-​instance and all re­quired im­ports so you can start play­ing around with Vert.x in an in­stant.</p><p>Ex­e­cute the fol­low­ing com­mands in the project-​folder to de­ploy the <em>HttpVer­ti­cle</em>:</p><pre><code class=\"hljs language-bash\">sbt\n&gt; console\nscala&gt; vertx.deployVerticle(nameForVerticle[HttpVerticle])\nscala&gt; vertx.deploymentIDs\n</code></pre><p>After  ex­e­cut­ing this se­quence you can now point your browser <a href=\"http://localhost:8666/hello\">http://lo­cal­host:8666/hello</a> to see our mes­sage. The last com­mand is­sued shows the Ids under which Ver­ti­cles have been de­ployed.</p><p>To get rid of the de­ploy­ment you can now type <code>vertx.undeploy(vertx.deploymentIDs.head)</code>.</p><h2 id=\"thats-it\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#thats-it\"></a>That’s it!</h2><p>This was a very quick in­tro­duc­tion to our new Scala-​stack. I hope to have given you a lit­tle taste of the Scala good­ness now avail­able with Vert.x. I rec­om­mend dig­ging a lit­tle more through the quick­start to get a feel­ing for what’s there.\nIn my next blog post I will ex­plain some of the de­ci­sions I made and the ob­sta­cles I faced with the dif­fer­ences be­tween Java and Scala /Hint: They are way big­ger than I was aware of).</p><p>Enjoy!</p>","scope":{}},"tfIdfTerms":[{"term":"scala","tf":25},{"term":"us","tf":23},{"term":"futur","tf":17},{"term":"verticl","tf":13},{"term":"start","tf":10},{"term":"return","tf":10},{"term":"test","tf":9},{"term":"creat","tf":8},{"term":"base","tf":7},{"term":"avail","tf":7},{"term":"quickstart","tf":7},{"term":"take","tf":7},{"term":"support","tf":6},{"term":"will","tf":6},{"term":"sbt","tf":6},{"term":"project","tf":6},{"term":"provid","tf":6},{"term":"method","tf":6},{"term":"handler","tf":6},{"term":"oper","tf":6},{"term":"deploi","tf":6},{"term":"modul","tf":5},{"term":"lang","tf":5},{"term":"follow","tf":5},{"term":"requir","tf":5}]},{"filename":"blog/2017-03-13-data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh.mdx","date":"2017-03-13","slug":"data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh","meta":{"title":"Data-driven Apps made easy with Vert.x 3.4.0 and headless CMS Gentics Mesh","category":"guides","authors":[{"name":"Johannes Schüth","github_id":"jotschi"}],"summary":"I would like to share why Vert.x is not only a robust foundation for the headless Content Management System Gentics Mesh but also how it can be used to build a template-based web server."},"readingTime":{"text":"6 min read","minutes":5.8,"time":348000,"words":1160},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In this ar\\xADti\\xADcle, I would like to share why Vert.x is not only a ro\\xADbust foun\\xADda\\xADtion for the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/\"\n  }), \"head\\xADless Con\\xADtent Man\\xADage\\xADment Sys\\xADtem Gen\\xADtics Mesh\"), \" but also how the re\\xADcent re\\xADlease 3.4.0 can be used to build a template-\\u200Bbased web server with Gen\\xADtics Mesh and han\\xADdle\\xADbars.\"), mdx(\"p\", null, \"A head\\xADless CMS fo\\xADcuses on de\\xADliv\\xADer\\xADing your con\\xADtent through an API and al\\xADlows ed\\xADi\\xADtors cre\\xADat\\xADing and man\\xADag\\xADing that data through a web-\\u200Bbased in\\xADter\\xADface. Un\\xADlike a tra\\xADdi\\xADtional CMS, it does not pro\\xADvide a specif\\xADi\\xADcally ren\\xADdered out\\xADput. The fron\\xADtend part (the head) is lit\\xADer\\xADally cut off, al\\xADlow\\xADing de\\xADvel\\xADop\\xADers cre\\xADate web\\xADsites, apps, or any other data-\\u200Bdriven projects with their favourite tech\\xADnolo\\xADgies.\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/blog/vert-x-3-4-0-is-released/\"\n  }), \"Vert.x 3.4.0\"), \" has just been re\\xADleased and it comes with a bunch of new fea\\xADtures and bug fixes. I am es\\xADpe\\xADcially ex\\xADcited about a small en\\xADhance\\xADment that changes the way in which the han\\xADdle\\xADbars tem\\xADplate en\\xADgine han\\xADdle their con\\xADtext data. Pre\\xADvi\\xADously it was not pos\\xADsi\\xADble to re\\xADsolve Vert.x \\u2018s JsonOb\\xADjects within the ren\\xADder con\\xADtext. With my en\\xADhance\\xADment \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/pull/509\"\n  }), \"#509\"), \" - re\\xADleased in Vert.x 3.4.0 - it is now pos\\xADsi\\xADble to ac\\xADcess nested data from these ob\\xADjects within your tem\\xADplates. Pre\\xADvi\\xADously this would have re\\xADquired flat\\xADten\\xADing out each ob\\xADject and re\\xADsolv\\xADing it in\\xADdi\\xADvid\\xADu\\xADally, which would have been very cum\\xADber\\xADsome.\"), mdx(\"p\", null, \"I\\u2019m going to demon\\xADstrate this en\\xADhance\\xADment by show\\xADing how to build a prod\\xADuct cat\\xADa\\xADlogue using Vert.x to\\xADgether with han\\xADdle\\xADbars tem\\xADplates to ren\\xADder and serve the web pages. The prod\\xADuct data is man\\xADaged, stored and de\\xADliv\\xADered by the CMS server as source for JSON data.\"), mdx(\"h2\", {\n    \"id\": \"clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n  })), \"Clone, Import, Download, Start - Set up your product catalogue website quickly\"), mdx(\"p\", null, \"Let\\u2019s quickly set up every\\xADthing you need to run the web\\xADsite be\\xADfore I walk you through the code.\"), mdx(\"h3\", {\n    \"id\": \"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n  })), \"1.  Clone - \", mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example\"\n  }), \"Get the full Vert.x with Gentics Mesh example from Github\")), mdx(\"p\", null, \"Fire up your ter\\xADmi\\xADnal and clone the ex\\xADam\\xADple ap\\xADpli\\xADca\\xADtion to the di\\xADrec\\xADtory of your choice.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"git \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" git@github.com:gentics/mesh-vertx-example.git\\n\")), mdx(\"h3\", {\n    \"id\": \"2-import---the-maven-project-in-your-favourite-ide\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#2-import---the-maven-project-in-your-favourite-ide\"\n  })), \"2. Import - The maven project in your favourite IDE\"), mdx(\"p\", null, \"The ap\\xADpli\\xADca\\xADtion is set up as a maven project and can be im\\xADported in Eclipse IDE via File \\u2192 Im\\xADport \\u2192 Ex\\xADist\\xADing Maven Project\"), mdx(\"h3\", {\n    \"id\": \"3-download-----get-the-headless-cms-gentics-mesh\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#3-download-----get-the-headless-cms-gentics-mesh\"\n  })), \"3. Download \\xA0- \\xA0Get the headless CMS Gentics Mesh\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/Download\"\n  }), \"Down\\xADload the lat\\xADest ver\\xADsion of Gen\\xADtics Mesh\"), \" and start the CMS with this one-\\u200Bliner\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -jar mesh-demo-0.6.xx.jar\\n\")), mdx(\"p\", null, \"For the cur\\xADrent ex\\xADam\\xADple we are going to use the read-\\u200Bonly user cre\\xADden\\xADtials (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"we\\xADb\\xADclient:we\\xADb\\xADclient\"), \").\\nIf you want to play around with the demo data you can point your browser to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080/mesh-ui/\"\n  }), \"http://lo\\xADcal\\xADhost:8080/mesh-\\u200Bui/\"), \" to reach the Gen\\xADtics Mesh user in\\xADter\\xADface and use one of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/getting-started.html#_startup\"\n  }), \"avail\\xADable demo cre\\xADden\\xADtials\"), \" to login.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-ui.jpg\",\n    \"alt\": \"Gentics Mesh User Interface\"\n  }))), mdx(\"h3\", {\n    \"id\": \"4-start---the-application-and-browse-the-product-catalogue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#4-start---the-application-and-browse-the-product-catalogue\"\n  })), \"4. Start - The application and browse the product catalogue\"), mdx(\"p\", null, \"You can start the Vert.x web server by run\\xADning Server.java.\"), mdx(\"p\", null, \"That\\u2019s it - now you can ac\\xADcess the prod\\xADuct cat\\xADa\\xADlogue web\\xADsite in your browser: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:3000\"\n  }), \"http://lo\\xADcal\\xADhost:3000\")), mdx(\"h2\", {\n    \"id\": \"why-vertx-is-a-good-fit-for-gentics-mesh\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#why-vertx-is-a-good-fit-for-gentics-mesh\"\n  })), \"Why Vert.x is a good fit for Gentics Mesh\"), mdx(\"p\", null, \"Be\\xADfore dig\\xADging into the ex\\xADam\\xADple, let me share a few thoughts on Vert.x and Gen\\xADtics Mesh in com\\xADbi\\xADna\\xADtion. In this ex\\xADam\\xADple Vert.x is part of the fron\\xADtend stack in de\\xADliv\\xADer\\xADing the prod\\xADuct cat\\xADa\\xADlogue web\\xADsite. But it might also be of in\\xADter\\xADest to you that Vert.x is also used at the very heart of Gen\\xADtics Mesh it\\xADself. The Gen\\xADtics Mesh \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/raml/\"\n  }), \"REST API end\\xADpoints\"), \" are built on top of Vert.x as a core com\\xADpo\\xADnent.\"), mdx(\"p\", null, \"The great thing about Vert.x is that there are a lot of de\\xADfault im\\xADple\\xADmen\\xADta\\xADtions for var\\xADi\\xADous tasks such as au\\xADthen\\xADti\\xADca\\xADtion, data\\xADbase in\\xADte\\xADgra\\xADtion, mon\\xADi\\xADtor\\xADing and clus\\xADter\\xADing. It is pos\\xADsi\\xADble to use one or more fea\\xADtures and omit the rest and thus your ap\\xADpli\\xADca\\xADtion re\\xADmains light\\xADweight.\"), mdx(\"h2\", {\n    \"id\": \"curious-about-the-code\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#curious-about-the-code\"\n  })), \"Curious about the code?\"), mdx(\"p\", null, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example\"\n  }), \"https://github.com/gen\\xADtics/mesh-\\u200Bvertx-example\")), mdx(\"p\", null, \"Now that every\\xADthing is up and run\\xADning let\\u2019s have a de\\xADtailed look at the code.\"), mdx(\"p\", null, \"A typ\\xADi\\xADcal de\\xADploy\\xADment unit for Vert.x is a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_verticles\"\n  }), \"ver\\xADti\\xADcle\"), \". In our case we use the ver\\xADti\\xADcle to bun\\xADdle our code and run the web server within it. Once de\\xADployed, Vert.x will run the ver\\xADti\\xADcle and start the HTTP server code.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"main.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/#_java_rest_client\"\n  }), \"Gen\\xADtics Mesh REST client\"), \" is used to com\\xADmu\\xADni\\xADcate with the Gen\\xADtics Mesh server. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/\"\n  }), \"Vert.x web li\\xADbrary\"), \" is used to set up our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/#_basic_vert_x_web_concepts\"\n  }), \"HTTP Router\"), \". As with other rout\\xADing frame\\xADworks like \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Silex\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ex\\xADpress\"), \", the router can be used to cre\\xADate routes for in\\xADbound HTTP re\\xADquests. In our case we only need two routes. The main route which ac\\xADcepts the re\\xADquest will uti\\xADlize the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/#_webroot\"\n  }), \"Gen\\xADtics Mesh We\\xADb\\xADroot API End\\xADpoint\"), \" which is able to re\\xADsolve con\\xADtent by a pro\\xADvided path. It will ex\\xADam\\xADine the re\\xADsponse and add fields to the rout\\xADing con\\xADtext.\"), mdx(\"p\", null, \"The other route is chained and will take the pre\\xADvi\\xADously pre\\xADpared rout\\xADing con\\xADtext and ren\\xADder the de\\xADsired tem\\xADplate using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/#_templates\"\n  }), \"han\\xADdle\\xADbars tem\\xADplate han\\xADdler\"), \".\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"start.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"First we can han\\xADdle var\\xADi\\xADous spe\\xADcial re\\xADquests path such as \\u201D/\\u201D for the wel\\xADcome page. Or the typ\\xADi\\xADcal fav\\xADi\\xADcon.ico re\\xADquest. Other re\\xADquests are passed to the We\\xADb\\xADroot API han\\xADdler method.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"pathHandler.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"Once the path has been re\\xADsolved to a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"We\\xADb\\xADRootRe\\xADsponse\"), \" we can ex\\xADam\\xADine that data and de\\xADter\\xADmine whether it is a bi\\xADnary re\\xADsponse or a JSON re\\xADsponse. Bi\\xADnary re\\xADsponses may occur if the re\\xADquested re\\xADsource rep\\xADre\\xADsents an image or any other bi\\xADnary data. Re\\xADsolved bi\\xADnary con\\xADtents are di\\xADrectly passed through to the client and the han\\xADdle\\xADbars route is not in\\xADvoked.\"), mdx(\"p\", null, \"Ex\\xADam\\xADples\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/\"\n  }), \"http://lo\\xADcal\\xADhost:3000/\"), \" \\u2192 wel\\xADcome.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Automobiles\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Au\\xADto\\xADmo\\xADbiles\"), \" \\u2192 cat\\xADe\\xADgory \\u2192 pro\\xADductList.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Automobiles/Tesla%20Roadster\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Au\\xADto\\xADmo\\xADbiles/Tesla Road\\xADster\"), \" \\u2192 ve\\xADhi\\xADcle \\u2192 pro\\xADduct\\xADDe\\xADtail.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Ve\\xADhi\\xADcle Im\\xADages/tesla-\\u200Broadster.jpg\"), \" \\u2192 bi\\xADnary passthru\")), mdx(\"p\", null, \"JSON re\\xADsponses on the other hand are ex\\xADam\\xADined to de\\xADter\\xADmine the type of node which was lo\\xADcated. A typ\\xADi\\xADcal node re\\xADsponse con\\xADtains in\\xADfor\\xADma\\xADtion about the schema used by the node. This will ef\\xADfec\\xADtively de\\xADter\\xADmine the type of the lo\\xADcated con\\xADtent (e.g.: cat\\xADe\\xADgory, ve\\xADhi\\xADcle).\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"routeHandler.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-schemas.jpg\",\n    \"alt\": \"Mesh Schemas\"\n  }))), mdx(\"p\", null, \"The demo ap\\xADpli\\xADca\\xADtion serves dif\\xADfer\\xADent pages which cor\\xADre\\xADspond to the iden\\xADti\\xADfied type.\\nTake a look at the tem\\xADplate sources within \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"src/main/re\\xADsources/tem\\xADplates/\"), \" if you are in\\xADter\\xADested in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://handlebarsjs.com/\"\n  }), \"han\\xADdle\\xADbars syn\\xADtax\"), \".\\nThe tem\\xADplates in the ex\\xADam\\xADple should cover most com\\xADmon cases.   \"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\",\n    \"alt\": \"Handlebars Template Overview\"\n  }))), mdx(\"p\", null, \"The Mesh REST Client li\\xADbrary in\\xADter\\xADnally makes use of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_creating_an_http_client\"\n  }), \"Vert.x core HTTP client\"), \".\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ReactiveX/RxJava\"\n  }), \"Rx\\xADJava\"), \" is being used to han\\xADdle these async re\\xADquests. This way we can com\\xADbine all asyn\\xADchro\\xADnously re\\xADquested Gen\\xADtics Mesh re\\xADsources (bread\\xADcrumb, list of prod\\xADucts) and add the loaded data into the rout\\xADing con\\xADtext.\"), mdx(\"p\", null, \"The Vert.x ex\\xADam\\xADple server loads JSON con\\xADtent from the Gen\\xADtics Mesh server. The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"JsonOb\\xADject\"), \" is placed in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jknack/handlebars.java\"\n  }), \"han\\xADdle\\xADbars\"), \" ren\\xADder con\\xADtext and the tem\\xADplate can ac\\xADcess all nested fields within.\"), mdx(\"p\", null, \"This way it is pos\\xADsi\\xADble to re\\xADsolve any field within the han\\xADdle\\xADbars tem\\xADplate.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"template.example\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"That\\u2019s it! Fi\\xADnally, we can in\\xADvoke mvn clean pack\\xADage in order to pack\\xADage our web\\xADserver. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://maven.apache.org/plugins/maven-shade-plugin/\"\n  }), \"maven-\\u200Bshade-plugin\"), \" will bun\\xADdle every\\xADthing and cre\\xADate an ex\\xADe\\xADcutable jar.\"), mdx(\"h2\", {\n    \"id\": \"whats-next\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#whats-next\"\n  })), \"What\\u2019s next?\"), mdx(\"p\", null, \"Fu\\xADture re\\xADleases of Gen\\xADtics Mesh will re\\xADfine the Mesh REST Client API and pro\\xADvide a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://graphql.org/\"\n  }), \"GraphQL\"), \" which will re\\xADduce the JSON over\\xADhead. Using GraphQL will also re\\xADduce the amount of re\\xADquests which need to be is\\xADsued.\"), mdx(\"p\", null, \"Thanks for read\\xADing. If you have any futher ques\\xADtions or feed\\xADback don\\u2019t hes\\xADi\\xADtate to send me a tweet to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/Jotschi/\"\n  }), \"@Jotschi\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/genticsmesh/\"\n  }), \"@gen\\xADtic\\xADsmesh\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>In this ar­ti­cle, I would like to share why Vert.x is not only a ro­bust foun­da­tion for the <a href=\"http://getmesh.io/\">head­less Con­tent Man­age­ment Sys­tem Gen­tics Mesh</a> but also how the re­cent re­lease 3.4.0 can be used to build a template-​based web server with Gen­tics Mesh and han­dle­bars.</p><p>A head­less CMS fo­cuses on de­liv­er­ing your con­tent through an API and al­lows ed­i­tors cre­at­ing and man­ag­ing that data through a web-​based in­ter­face. Un­like a tra­di­tional CMS, it does not pro­vide a specif­i­cally ren­dered out­put. The fron­tend part (the head) is lit­er­ally cut off, al­low­ing de­vel­op­ers cre­ate web­sites, apps, or any other data-​driven projects with their favourite tech­nolo­gies.</p><p><a href=\"http://vertx.io/blog/vert-x-3-4-0-is-released/\">Vert.x 3.4.0</a> has just been re­leased and it comes with a bunch of new fea­tures and bug fixes. I am es­pe­cially ex­cited about a small en­hance­ment that changes the way in which the han­dle­bars tem­plate en­gine han­dle their con­text data. Pre­vi­ously it was not pos­si­ble to re­solve Vert.x ‘s JsonOb­jects within the ren­der con­text. With my en­hance­ment <a href=\"https://github.com/vert-x3/vertx-web/pull/509\">#509</a> - re­leased in Vert.x 3.4.0 - it is now pos­si­ble to ac­cess nested data from these ob­jects within your tem­plates. Pre­vi­ously this would have re­quired flat­ten­ing out each ob­ject and re­solv­ing it in­di­vid­u­ally, which would have been very cum­ber­some.</p><p>I’m going to demon­strate this en­hance­ment by show­ing how to build a prod­uct cat­a­logue using Vert.x to­gether with han­dle­bars tem­plates to ren­der and serve the web pages. The prod­uct data is man­aged, stored and de­liv­ered by the CMS server as source for JSON data.</p><h2 id=\"clone-import-download-start---set-up-your-product-catalogue-website-quickly\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"></a>Clone, Import, Download, Start - Set up your product catalogue website quickly</h2><p>Let’s quickly set up every­thing you need to run the web­site be­fore I walk you through the code.</p><h3 id=\"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"></a>1.  Clone - <a href=\"https://github.com/gentics/mesh-vertx-example\">Get the full Vert.x with Gentics Mesh example from Github</a></h3><p>Fire up your ter­mi­nal and clone the ex­am­ple ap­pli­ca­tion to the di­rec­tory of your choice.</p><pre><code class=\"hljs language-bash\">git <span class=\"hljs-built_in\">clone</span> git@github.com:gentics/mesh-vertx-example.git\n</code></pre><h3 id=\"2-import---the-maven-project-in-your-favourite-ide\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#2-import---the-maven-project-in-your-favourite-ide\"></a>2. Import - The maven project in your favourite IDE</h3><p>The ap­pli­ca­tion is set up as a maven project and can be im­ported in Eclipse IDE via File → Im­port → Ex­ist­ing Maven Project</p><h3 id=\"3-download-----get-the-headless-cms-gentics-mesh\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#3-download-----get-the-headless-cms-gentics-mesh\"></a>3. Download  -  Get the headless CMS Gentics Mesh</h3><p><a href=\"http://getmesh.io/Download\">Down­load the lat­est ver­sion of Gen­tics Mesh</a> and start the CMS with this one-​liner</p><pre><code class=\"hljs language-bash\">java -jar mesh-demo-0.6.xx.jar\n</code></pre><p>For the cur­rent ex­am­ple we are going to use the read-​only user cre­den­tials (<em>we­b­client:we­b­client</em>).\nIf you want to play around with the demo data you can point your browser to <a href=\"http://localhost:8080/mesh-ui/\">http://lo­cal­host:8080/mesh-​ui/</a> to reach the Gen­tics Mesh user in­ter­face and use one of the <a href=\"http://getmesh.io/docs/beta/getting-started.html#_startup\">avail­able demo cre­den­tials</a> to login.</p><p><img src=\"/images/blog/vertx-mesh/mesh-ui.jpg\" alt=\"Gentics Mesh User Interface\"/></p><h3 id=\"4-start---the-application-and-browse-the-product-catalogue\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#4-start---the-application-and-browse-the-product-catalogue\"></a>4. Start - The application and browse the product catalogue</h3><p>You can start the Vert.x web server by run­ning Server.java.</p><p>That’s it - now you can ac­cess the prod­uct cat­a­logue web­site in your browser: <a href=\"http://localhost:3000\">http://lo­cal­host:3000</a></p><h2 id=\"why-vertx-is-a-good-fit-for-gentics-mesh\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#why-vertx-is-a-good-fit-for-gentics-mesh\"></a>Why Vert.x is a good fit for Gentics Mesh</h2><p>Be­fore dig­ging into the ex­am­ple, let me share a few thoughts on Vert.x and Gen­tics Mesh in com­bi­na­tion. In this ex­am­ple Vert.x is part of the fron­tend stack in de­liv­er­ing the prod­uct cat­a­logue web­site. But it might also be of in­ter­est to you that Vert.x is also used at the very heart of Gen­tics Mesh it­self. The Gen­tics Mesh <a href=\"http://getmesh.io/docs/beta/raml/\">REST API end­points</a> are built on top of Vert.x as a core com­po­nent.</p><p>The great thing about Vert.x is that there are a lot of de­fault im­ple­men­ta­tions for var­i­ous tasks such as au­then­ti­ca­tion, data­base in­te­gra­tion, mon­i­tor­ing and clus­ter­ing. It is pos­si­ble to use one or more fea­tures and omit the rest and thus your ap­pli­ca­tion re­mains light­weight.</p><h2 id=\"curious-about-the-code\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#curious-about-the-code\"></a>Curious about the code?</h2><p>Source: <a href=\"https://github.com/gentics/mesh-vertx-example\">https://github.com/gen­tics/mesh-​vertx-example</a></p><p>Now that every­thing is up and run­ning let’s have a de­tailed look at the code.</p><p>A typ­i­cal de­ploy­ment unit for Vert.x is a <a href=\"http://vertx.io/docs/vertx-core/java/#_verticles\">ver­ti­cle</a>. In our case we use the ver­ti­cle to bun­dle our code and run the web server within it. Once de­ployed, Vert.x will run the ver­ti­cle and start the HTTP server code.</p><div>...waiting for Gist...</div><p>The <a href=\"http://getmesh.io/docs/beta/#_java_rest_client\">Gen­tics Mesh REST client</a> is used to com­mu­ni­cate with the Gen­tics Mesh server. The <a href=\"http://vertx.io/docs/vertx-web/java/\">Vert.x web li­brary</a> is used to set up our <a href=\"http://vertx.io/docs/vertx-web/java/#_basic_vert_x_web_concepts\">HTTP Router</a>. As with other rout­ing frame­works like <em>Silex</em> and <em>Ex­press</em>, the router can be used to cre­ate routes for in­bound HTTP re­quests. In our case we only need two routes. The main route which ac­cepts the re­quest will uti­lize the <a href=\"http://getmesh.io/docs/beta/#_webroot\">Gen­tics Mesh We­b­root API End­point</a> which is able to re­solve con­tent by a pro­vided path. It will ex­am­ine the re­sponse and add fields to the rout­ing con­text.</p><p>The other route is chained and will take the pre­vi­ously pre­pared rout­ing con­text and ren­der the de­sired tem­plate using the <a href=\"http://vertx.io/docs/vertx-web/java/#_templates\">han­dle­bars tem­plate han­dler</a>.</p><div>...waiting for Gist...</div><p>First we can han­dle var­i­ous spe­cial re­quests path such as ”/” for the wel­come page. Or the typ­i­cal fav­i­con.ico re­quest. Other re­quests are passed to the We­b­root API han­dler method.</p><div>...waiting for Gist...</div><p>Once the path has been re­solved to a <em>We­b­RootRe­sponse</em> we can ex­am­ine that data and de­ter­mine whether it is a bi­nary re­sponse or a JSON re­sponse. Bi­nary re­sponses may occur if the re­quested re­source rep­re­sents an image or any other bi­nary data. Re­solved bi­nary con­tents are di­rectly passed through to the client and the han­dle­bars route is not in­voked.</p><p>Ex­am­ples</p><ul><li><a href=\"http://localhost:3000/\">http://lo­cal­host:3000/</a> → wel­come.hbs</li><li><a href=\"http://localhost:3000/Automobiles\">http://lo­cal­host:3000/Au­to­mo­biles</a> → cat­e­gory → pro­ductList.hbs</li><li><a href=\"http://localhost:3000/Automobiles/Tesla%20Roadster\">http://lo­cal­host:3000/Au­to­mo­biles/Tesla Road­ster</a> → ve­hi­cle → pro­duct­De­tail.hbs</li><li><a href=\"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\">http://lo­cal­host:3000/Ve­hi­cle Im­ages/tesla-​roadster.jpg</a> → bi­nary passthru</li></ul><p>JSON re­sponses on the other hand are ex­am­ined to de­ter­mine the type of node which was lo­cated. A typ­i­cal node re­sponse con­tains in­for­ma­tion about the schema used by the node. This will ef­fec­tively de­ter­mine the type of the lo­cated con­tent (e.g.: cat­e­gory, ve­hi­cle).</p><div>...waiting for Gist...</div><p><img src=\"/images/blog/vertx-mesh/mesh-schemas.jpg\" alt=\"Mesh Schemas\"/></p><p>The demo ap­pli­ca­tion serves dif­fer­ent pages which cor­re­spond to the iden­ti­fied type.\nTake a look at the tem­plate sources within <em>src/main/re­sources/tem­plates/</em> if you are in­ter­ested in the <a href=\"http://handlebarsjs.com/\">han­dle­bars syn­tax</a>.\nThe tem­plates in the ex­am­ple should cover most com­mon cases.   </p><p><img src=\"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\" alt=\"Handlebars Template Overview\"/></p><p>The Mesh REST Client li­brary in­ter­nally makes use of the <a href=\"http://vertx.io/docs/vertx-core/java/#_creating_an_http_client\">Vert.x core HTTP client</a>.</p><p><a href=\"https://github.com/ReactiveX/RxJava\">Rx­Java</a> is being used to han­dle these async re­quests. This way we can com­bine all asyn­chro­nously re­quested Gen­tics Mesh re­sources (bread­crumb, list of prod­ucts) and add the loaded data into the rout­ing con­text.</p><p>The Vert.x ex­am­ple server loads JSON con­tent from the Gen­tics Mesh server. The <em>JsonOb­ject</em> is placed in the <a href=\"https://github.com/jknack/handlebars.java\">han­dle­bars</a> ren­der con­text and the tem­plate can ac­cess all nested fields within.</p><p>This way it is pos­si­ble to re­solve any field within the han­dle­bars tem­plate.</p><div>...waiting for Gist...</div><p>That’s it! Fi­nally, we can in­voke mvn clean pack­age in order to pack­age our web­server. The <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\">maven-​shade-plugin</a> will bun­dle every­thing and cre­ate an ex­e­cutable jar.</p><h2 id=\"whats-next\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#whats-next\"></a>What’s next?</h2><p>Fu­ture re­leases of Gen­tics Mesh will re­fine the Mesh REST Client API and pro­vide a <a href=\"http://graphql.org/\">GraphQL</a> which will re­duce the JSON over­head. Using GraphQL will also re­duce the amount of re­quests which need to be is­sued.</p><p>Thanks for read­ing. If you have any futher ques­tions or feed­back don’t hes­i­tate to send me a tweet to <a href=\"https://twitter.com/Jotschi/\">@Jotschi</a> or <a href=\"https://twitter.com/genticsmesh/\">@gen­tic­smesh</a>.</p>","scope":{}},"tfIdfTerms":[{"term":"mesh","tf":20},{"term":"gentic","tf":17},{"term":"us","tf":15},{"term":"templat","tf":11},{"term":"http","tf":11},{"term":"data","tf":10},{"term":"server","tf":9},{"term":"exampl","tf":9},{"term":"will","tf":9},{"term":"rout","tf":9},{"term":"request","tf":9},{"term":"handlebar","tf":8},{"term":"product","tf":7},{"term":"content","tf":6},{"term":"web","tf":6},{"term":"context","tf":6},{"term":"resolv","tf":6},{"term":"within","tf":6},{"term":"localhost","tf":6},{"term":"respons","tf":6},{"term":"3000","tf":5},{"term":"cm","tf":5},{"term":"api","tf":5},{"term":"render","tf":5},{"term":"websit","tf":5}]}],"numPages":16},"__N_SSG":true}