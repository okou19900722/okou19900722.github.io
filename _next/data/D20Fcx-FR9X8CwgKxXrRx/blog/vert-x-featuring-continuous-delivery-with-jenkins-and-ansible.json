{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Vert.x featuring Continuous Delivery with Jenkins and Ansible","category":"guides","authors":[{"name":"Ricardo Hernandez","github_id":"ricardohmon"}],"summary":"This blog entry describes an approach to adopt Continuous Delivery for Vert.x applications using Jenkins and Ansible by taking advantage of the Jenkins Job DSL and Ansible plugins."},"date":"2016-09-28","slug":"vert-x-featuring-continuous-delivery-with-jenkins-and-ansible","readingTime":{"text":"9 min read","minutes":8.965,"time":537900,"words":1793},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This blog entry de\\xADscribes an ap\\xADproach to adopt \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery\"), \" for Vert.x ap\\xADpli\\xADca\\xADtions using Jenk\\xADins and An\\xADsi\\xADble by tak\\xADing ad\\xADvan\\xADtage of the Jenk\\xADins Job DSL and An\\xADsi\\xADble plu\\xADg\\xADins.\"), mdx(\"h2\", {\n    \"id\": \"preamble\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#preamble\"\n  })), \"Preamble\"), mdx(\"p\", null, \"This post was writ\\xADten in con\\xADtext of the project ti\\xADtled \\u201C\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://summerofcode.withgoogle.com/projects/#4858492141699072\"\n  }), \"De\\xADvOps tool\\xADing for Vert.x ap\\xADpli\\xADca\\xADtions\"), \"\\u201D, one of the projects at Vert.x tak\\xADing place dur\\xADing the 2016 edi\\xADtion of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://summerofcode.withgoogle.com/about/\"\n  }), \"Google Sum\\xADmer of Code\"), \", a pro\\xADgram that aims to bring stu\\xADdents to\\xADgether with open source or\\xADga\\xADni\\xADza\\xADtions in order to help them to gain ex\\xADpo\\xADsure to soft\\xADware de\\xADvel\\xADop\\xADment prac\\xADtices and real-\\u200Bworld chal\\xADlenges.\"), mdx(\"h2\", {\n    \"id\": \"introduction\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#introduction\"\n  })), \"Introduction\"), mdx(\"p\", null, \"Sys\\xADtem con\\xADfig\\xADu\\xADra\\xADtion man\\xADage\\xADment (e.g., An\\xADsi\\xADble) has been re\\xADally hype in the re\\xADcent years and there is a strong rea\\xADson for that.\\nCon\\xADfig\\xADu\\xADra\\xADtion man\\xADage\\xADment fa\\xADcil\\xADi\\xADtates con\\xADfig\\xADur\\xADing a new en\\xADvi\\xADron\\xADment fol\\xADlow\\xADing a fixed \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"recipe\"), \" or slightly vary\\xADing it with the help of pa\\xADra\\xADme\\xADters. This has not only the ad\\xADvan\\xADtage of being able to do it more fre\\xADquently but re\\xADduces the chance of er\\xADrors than doing it man\\xADu\\xADally.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Be\\xADyond that, com\\xADbin\\xADing it with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADtin\\xADu\\xADous In\\xADte\\xADgra\\xADtion\"), \" tools (e.g., Jenk\\xADins) al\\xADlows mak\\xADing a de\\xADploy\\xADment as soon as a new code\\xADbase ver\\xADsion is avail\\xADable, which rep\\xADre\\xADsents the main build\\xADing block of a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery\"), \" pipeline, one of the ob\\xADjec\\xADtives of em\\xADbrac\\xADing a De\\xADvOps cul\\xADture.\"), mdx(\"p\", null, \"Given that Vert.x is a frame\\xADwork that con\\xADsists in a few li\\xADbraries which can be shipped within a sin\\xADgle \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fat jar\"), \", adopt\\xADing a De\\xADvOps cul\\xADture while de\\xADvel\\xADop\\xADing a Vert.x-\\u200Bbased ap\\xADpli\\xADca\\xADtion is straight\\xADfor\\xADward.\"), mdx(\"h2\", {\n    \"id\": \"overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#overview\"\n  })), \"Overview\"), mdx(\"p\", null, \"As seen in the di\\xADa\\xADgram below, this post de\\xADscribes a method to de\\xADfine a Jenk\\xADins build job which will react to changes in a code repos\\xADi\\xADtory. After suc\\xADces\\xADfully build\\xADing the project, the job will ex\\xADe\\xADcute an An\\xADsi\\xADble \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"play\\xADbook\"), \" to de\\xADploy the new ap\\xADpli\\xADca\\xADtion ver\\xADsion to the hosts spec\\xADi\\xADfied within the An\\xADsi\\xADble con\\xADfig\\xADu\\xADra\\xADtion.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/continuous-delivery-jenkins-ansible/ansible-jenkins-overview.svg\",\n    \"alt\": \"Overview of the continous delivery process\"\n  }))), mdx(\"h2\", {\n    \"id\": \"creating-a-jenkins-build-job-using-job-dsl\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#creating-a-jenkins-build-job-using-job-dsl\"\n  })), \"Creating a Jenkins build job using Job DSL\"), mdx(\"p\", null, \"Jenk\\xADins has cre\\xADated a con\\xADve\\xADnient way to de\\xADfine build jobs using a DSL. While this op\\xADtion avoids the has\\xADsle of con\\xADfig\\xADur\\xADing build jobs man\\xADu\\xADally, it sup\\xADports all fea\\xADtures of the reg\\xADu\\xADlar in\\xADter\\xADface through its \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://jenkinsci.github.io/job-dsl-plugin/\"\n  }), \"API\"), \". It is pos\\xADsi\\xADble to use An\\xADsi\\xADble to\\xADgether with Jenk\\xADins with the help of the An\\xADsi\\xADble \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://wiki.jenkins-ci.org/display/JENKINS/Ansible+Plugin/\"\n  }), \"plugin\"), \", whose in\\xADstruc\\xADtions are also in\\xADcluded in the Job DSL \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jenkinsci/ansible-plugin/blob/master/README.md\"\n  }), \"API\"), \". Al\\xADter\\xADna\\xADtively to the Job DSL Plu\\xADgin, An\\xADsi\\xADble can be used in\\xADside the de\\xADf\\xADi\\xADn\\xADi\\xADtion of Jenk\\xADins Pipeline, one of tool\\u2019s most re\\xADcent fea\\xADtures.\"), mdx(\"p\", null, \"Below is a sam\\xADple job de\\xADf\\xADi\\xADn\\xADi\\xADtion which can be used after cre\\xADat\\xADing a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"freestyle\"), \" job (seed job) and adding a new build step with the DSL script. In the script, there are a few things to no\\xADtice:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A name for the job cre\\xADated by the seed job is given.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Spe\\xADcific ver\\xADsions of JDK, Maven, and An\\xADsi\\xADble (avail\\xADable in the en\\xADvi\\xADron\\xADment) are used.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Git is se\\xADlected as the SCM plat\\xADform and the tar\\xADget repos\\xADi\\xADtory is de\\xADfined. Also, the build job is trig\\xADgered ac\\xADcord\\xADing to a spe\\xADcific in\\xADter\\xADval.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The Maven \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"pack\\xADage\"), \" goal is in\\xADvoked, which is in\\xADstructed to pack\\xADage the ap\\xADpli\\xADca\\xADtion into a fat jar.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Lastly, An\\xADsi\\xADble is used to call a play\\xADbook avail\\xADable in the filesys\\xADtem. The app will be de\\xADployed to the de\\xADfined tar\\xADget hosts and the cre\\xADden\\xADtials (con\\xADfig\\xADured in Jenk\\xADins) will be used to log into the tar\\xADget hosts. Ad\\xADdi\\xADtion\\xADally, en\\xADabling the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"colorizedOutput\"), \" op\\xADtion will re\\xADsult in a friend\\xADlier for\\xADmat\\xADting of the re\\xADsults in the con\\xADsole out\\xADput. The con\\xADtents of this play\\xADbook will be ad\\xADdressed in the next sec\\xADtion.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-groovy\"\n  }), \"job(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'vertx-microservices-workshop-job'\"), \") {\\n    jdk(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'JDK8'\"), \")\\n    scm {\\n        git(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'git://github.com/ricardohmon/vertx-microservices-workshop.git'\"), \")\\n    }\\n    triggers {\\n        scm(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'*/15 * * * *'\"), \")\\n    }\\n    steps {\\n\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"def\"), \" mvnInst = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'M3.3.9'\"), \"  \\n      maven {  \\n        goals(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'package'\"), \")  \\n        mavenInstallation(mvnInst)  \\n      }  \\n      ansiblePlaybook(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'/ansible/playbook.yml'\"), \") {  \\n        inventoryPath(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'/ansible/hosts'\"), \")  \\n        ansibleName(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'Ansible2.0'\"), \")  \\n        credentialsId(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'vagrant-key'\"), \")  \\n        colorizedOutput(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \")  \\n      }  \\n\\n    }  \\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"deploying-vertx-app-using-ansible\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#deploying-vertx-app-using-ansible\"\n  })), \"Deploying Vert.x app using Ansible\"), mdx(\"p\", null, \"An An\\xADsi\\xADble Play\\xADbook re\\xADsults quite con\\xADve\\xADnient to de\\xADploy a Vert.x ap\\xADpli\\xADca\\xADtion to a num\\xADber of hosts while still tak\\xADing con\\xADsid\\xADer\\xADa\\xADtions for each of them. Below is a sam\\xADple play\\xADbook that de\\xADploys the re\\xADspec\\xADtive ap\\xADpli\\xADca\\xADtion to each of the hosts de\\xADscribed in an \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"in\\xADven\\xADtory\"), \" file. The play\\xADbook com\\xADprises the fol\\xADlow\\xADing tasks and takes the listed con\\xADsid\\xADer\\xADa\\xADtions:\"), mdx(\"p\", null, \"1) A task that tar\\xADgets only hosts with a data\\xADbase.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The tar\\xADget hosts is spec\\xADi\\xADfied with the name of the host (or hosts group) de\\xADfined in the in\\xADven\\xADtory file.\")), mdx(\"p\", null, \"2) Ac\\xADtual ap\\xADpli\\xADca\\xADtion de\\xADploy\\xADment task. Here, sev\\xADeral con\\xADsid\\xADer\\xADa\\xADtions are done:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The ap\\xADpli\\xADca\\xADtion may re\\xADquire that only one host is up\\xADdated at the time.\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"This can be achieved with the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"serial\"), \" op\\xADtion, while the order of the de\\xADploy\\xADment to hosts can be en\\xADforced in the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"hosts\"), \" op\\xADtion.\")), mdx(Alert, {\n    info: true,\n    title: \"Host processing order\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Even though we could have de\\xADclared \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"all\"), \" hosts, An\\xADsi\\xADble does not pro\\xADvide an ex\\xADplicit way to spec\\xADify the order.\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Java is a sys\\xADtem re\\xADquire\\xADment for our Vert.x ap\\xADpli\\xADca\\xADtions.\", mdx(\"br\", {\n    parentName: \"li\"\n  }), \"Be\\xADsides in\\xADstalling it (keep read\\xADing), we need to de\\xADclare the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JAVA_HOME\"), \" en\\xADvi\\xADron\\xADment vari\\xADable.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A de\\xADploy\\xADment may just rep\\xADre\\xADsent an up\\xADdate to an al\\xADready run\\xADning ap\\xADpli\\xADca\\xADtion (\", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Con\\xADtin\\xADu\\xADous De\\xADploy\\xADment\"), \"), hence it is con\\xADve\\xADnient to stop the pre\\xADvi\\xADous ap\\xADpli\\xADca\\xADtion in\\xADside the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pre_tasks\"), \" and take post-\\u200Bdeployment ac\\xADtions in the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"post_tasks\"), \".\\nVert.x ships with the con\\xADve\\xADnient \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"start\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"stop\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"list\"), \" com\\xADmands that re\\xADsult very help\\xADful here. We can use the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"list\"), \" com\\xADmand and ex\\xADtract (using regex) the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"id\"), \" of the run\\xADning ap\\xADpli\\xADca\\xADtion of its out\\xADput to stop it be\\xADfore de\\xADploy\\xADing a new ver\\xADsion.\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"If our so\\xADlu\\xADtion in\\xADcludes a load bal\\xADancer or proxy, we could deal with them at this step as de\\xADscribed in An\\xADsi\\xADble\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://docs.ansible.com/ansible/playbooks_delegation.html\"\n  }), \"best prac\\xADtices\"), \" for rolling up\\xADdates\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Call to a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"role\"), \" that makes the ac\\xADtual ap\\xADpli\\xADca\\xADtion de\\xADploy\\xADment. The Jenk\\xADins An\\xADsi\\xADble Plu\\xADgin in\\xADcludes, be\\xADtween oth\\xADers, a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"WORKSPACE\"), \" en\\xADvi\\xADron\\xADment vari\\xADable, which may re\\xADsult very help\\xADful in the fol\\xADlow\\xADing tasks, as shown later.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), \"  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# 1) Special task for the service with a db\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"hosts:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"audit-service\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"remote_user:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vagrant\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"become:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"yes\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"roles:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"db-setup\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# 2) Common tasks for all hosts\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"hosts:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"quote-generator:portfolio-service:compulsive-traders:audit-service:trader-dashboard\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"remote_user:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vagrant\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"become:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"yes\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"serial:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"environment:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"JAVA_HOME:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/lib/jvm/jre-1.8.0-openjdk/\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"pre_tasks:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Check\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exists\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"in\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"target\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"already\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"stat:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path=/usr/share/vertx_app/app-fatjar.jar\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"register:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"st\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"List\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"applications\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"command:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"list\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"register:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running_app_list\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"when:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"st.stat.exists\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"==\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"True\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Stop\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"it\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"is\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"already\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"(avoid\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"multiple\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"instances)\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"command:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"stop\"), \" {\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}{{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"item\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"regex_replace('^(?P<V_id>.\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-.\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-.\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \".\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \".\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"12\"), \"]\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \")\\\\t.*'\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'\\\\\\\\g<V_id>'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \")\"), \" }}{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"with_items:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"{% raw %}\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-template-variable\"\n  }), \"{{ running_app_list.stdout_lines|default([]) }}\"), \"{% endraw %}\\\"\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"when:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"st.stat.exists\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"==\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"True\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"and\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"(item\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"regex_replace('.*\\\\t(.*)$',\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'\\\\\\\\1'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"match('.*/app-fatjar.jar$'))\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# Main role\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"roles:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"role:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vertx-app-deployment\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"jenkins_job_workspace:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-template-variable\"\n  }), \"{{ lookup('env', 'WORKSPACE') }}\"), \"\\\"\"), \" }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"post_tasks:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"List\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"again\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"running\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"applications\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"command:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"list\"), \"\\n\")), mdx(\"p\", null, \"Once we took care of the ac\\xADtions shown be\\xADfore, the re\\xADmain\\xADing tasks (in\\xADcluded in the main de\\xADploy\\xADment role) re\\xADduce to the fol\\xADlow\\xADing:\"), mdx(\"p\", null, \"1) Pre\\xADpare the tar\\xADget ma\\xADchine with the proper en\\xADvi\\xADron\\xADment to run our ap\\xADpli\\xADca\\xADtion. This in\\xADcludes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Set up Java (pretty con\\xADve\\xADnient to do it through a pack\\xADage man\\xADager).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Copy the Vert.x ap\\xADpli\\xADca\\xADtion pack\\xADage to the ap\\xADpro\\xADpri\\xADate folder (quite sim\\xADple using a fat jar). The ac\\xADtual name and lo\\xADca\\xADtion of the jar pack\\xADage in the Jenk\\xADins en\\xADvi\\xADron\\xADment can be de\\xADfined using host-\\u200Bspecific \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://docs.ansible.com/ansible/playbooks_delegation.html\"\n  }), \"vari\\xADables\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In case nec\\xADes\\xADsary, copy the re\\xADquired con\\xADfig files.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Install\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Java\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1.8\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"and\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"some\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"basic\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dependencies\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"yum:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"name={%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}{{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"item\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"}}{%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"state=present\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"with_items:\"), \"\\n   \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java-1.8.0-openjdk\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Ensure\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dir\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exists\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"file:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path=/usr/share/vertx_app/\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"recurse=yes\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"state=directory\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0744\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Copy\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"application\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"package\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"copy:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"src={%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}{{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app_jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"}}{%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dest=/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0755\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Ensure\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dir\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exists\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"file:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path=/etc/vertx_app/\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"recurse=yes\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"state=directory\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0744\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Copy\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"application\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"file\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"needed\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"copy:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"src={%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}{{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app_config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"}}{%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"dest=/etc/vertx_app/config.json\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"mode=0755\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"when:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"app_config\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"is\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"defined\"), \"\\n\")), mdx(\"p\", null, \"2) Run the ap\\xADpli\\xADca\\xADtion as a ser\\xADvice in the host\\xADing ma\\xADchine.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Make sure to ig\\xADnore the hang up sig\\xADnal with the help of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"nohup\"), \" com\\xADmand. Oth\\xADer\\xADwise, An\\xADsi\\xADble will be stuck at this step.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Run\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Vert.x\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"application\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"as\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"a\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"service,\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"ignore\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"SIGHUP\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"signal\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"shell:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"nohup\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"java\"), \" {\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}{{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"vertx_opts\"), \" }}{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"} \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"-jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/usr/share/vertx_app/app-fatjar.jar\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"start\"), \" {\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"raw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}{{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"launch_params\"), \" }}{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"endraw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"%\"), \"}\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"register:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"svc_run_out\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Print\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"run\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"output\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"debug:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"var=svc_run_out.stdout_lines\"), \"\\n\")), mdx(Alert, {\n    info: true,\n    title: \"Launching the Vert.x app\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This ex\\xADam\\xADple uses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start\"), \" com\\xADmand to launch the ap\\xADpli\\xADca\\xADtion as a ser\\xADvice. This method may re\\xADsult more com\\xADfort\\xADable than cre\\xADat\\xADing an \", mdx(Link, {\n    href: \"/blog/vert-x-3-init-d-script/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"init.d script\")), \" or call\\xADing Vert.x from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/#running-at-the-command-line\"\n  }), \"com\\xADmand line\"), \", which would have re\\xADquired to in\\xADstall the Vert.x li\\xADbraries in an in\\xADde\\xADpen\\xADdent An\\xADsi\\xADble task.\")), mdx(\"p\", null, \"This de\\xADscribes all the con\\xADfig\\xADu\\xADra\\xADtion needed to be able to build from a repos\\xADi\\xADtory using Jenk\\xADins and de\\xADploy the re\\xADsults to our hosts with An\\xADsi\\xADble.\"), mdx(\"h2\", {\n    \"id\": \"sample-sources-and-demo\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sample-sources-and-demo\"\n  })), \"Sample sources and demo\"), mdx(\"p\", null, \"The sam\\xADple con\\xADfig\\xADu\\xADra\\xADtions pre\\xADsented be\\xADfore are part of a com\\xADplete demo fo\\xADcused on the Vert.x mi\\xADcroser\\xADvices \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx-lab.dynamis-technologies.com/\"\n  }), \"work\\xADshop\"), \" to ex\\xADem\\xADplify a basic Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery sce\\xADnario. This set up is avail\\xADable in a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ricardohmon/vertx-ansible\"\n  }), \"repos\\xADi\\xADtory\"), \" and con\\xADtains, in ad\\xADdi\\xADtion, a pre-\\u200Bconfigured Jenkins-\\u200Bbased demo ready to host the build job de\\xADscribed the pre\\xADvi\\xADous sec\\xADtions. The demo sce\\xADnario re\\xADquires Va\\xADgrant and Vir\\xADtu\\xADal\\xADbox to be launched.\"), mdx(\"h3\", {\n    \"id\": \"launch-instructions\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#launch-instructions\"\n  })), \"Launch instructions\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Clone or down\\xADload this repos\\xADi\\xADtory, and launch the demo using \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vagrant up\"))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-awk\"\n  }), \"git clone https:\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"//gi\"), \"thub.com\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/ricardohmon/\"), \"vertx-ansible.git\\ncd demo\\nvagrant up\\n\")), mdx(\"p\", null, \"This com\\xADmand will launch a vir\\xADtual ma\\xADchine host\\xADing Jenk\\xADins with the re\\xADquired plu\\xADg\\xADins in\\xADstalled (tools names needed) and also launch five ad\\xADdi\\xADtional VMs that will host the mi\\xADcroser\\xADvices de\\xADployed by Jenk\\xADins.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cre\\xADate a Jenk\\xADins freestyle build job using the DSL job script (seed job) found in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"deployment-jobs/microservices_workshop_dsl.groovy\"), \" and build it.\")), mdx(Alert, {\n    info: true,\n    title: \"Tool configuration assumption\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The DSL Job as\\xADsumes the fol\\xADlow\\xADing tools (with names) have been con\\xADfig\\xADured in Jenk\\xADins: Java 8 (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JDK8\"), \"), Maven (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"M3.3.9\"), \"), An\\xADsi\\xADble (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Ansible2.0\"), \")\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"After build\\xADing the seed job, a new job (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vertx-microservices-workshop-job\"), \") will be cre\\xADated, which will be in charge of pulling re\\xADcent changes of the project, build\\xADing it, and de\\xADploy\\xADing it.\")), mdx(\"h3\", {\n    \"id\": \"demo\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#demo\"\n  })), \"Demo\"), mdx(\"p\", null, \"Watch the pre\\xADvi\\xADous demo in ac\\xADtion in the fol\\xADlow\\xADing screen\\xADcast:\"), mdx(\"div\", {\n    className: \"youtube-embed\"\n  }, mdx(\"iframe\", {\n    src: \"https://www.youtube.com/embed/GQd_Rfeu6Yo\",\n    frameBorder: \"0\",\n    allowFullScreen: true\n  })), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"Con\\xADtin\\xADu\\xADous De\\xADliv\\xADery ap\\xADproach is a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"must\"), \" in mod\\xADern soft\\xADware de\\xADvel\\xADop\\xADment life\\xADcy\\xADcles (in\\xADclud\\xADing Vert.x-\\u200Bbased ap\\xADpli\\xADca\\xADtions) and a step fur\\xADther to\\xADwards adopt\\xADing a De\\xADvOps cul\\xADture. There are a num\\xADber of tools that en\\xADable it and one ex\\xADam\\xADple is the com\\xADbi\\xADna\\xADtion of Jenk\\xADins + An\\xADsi\\xADble de\\xADscribed in this post.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"While Jenk\\xADins of\\xADfers the pos\\xADsi\\xADbil\\xADity to in\\xADte\\xADgrate re\\xADcent changes per\\xADceived in a code\\xADbase and build runnable ar\\xADti\\xADfacts, An\\xADsi\\xADble can help to de\\xADploy them to host\\xADing en\\xADvi\\xADron\\xADments. The usage of both tools can be cou\\xADpled eas\\xADily with the help of the Job DSL plug\\xADin, a fea\\xADture of Jenk\\xADins that al\\xADlows de\\xADscrib\\xADing a build job using a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"domain-\\u200Bspecific lan\\xADguage\"), \", which can help to in\\xADte\\xADgrate ad\\xADdi\\xADtional steps and tools to a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"CD\"), \" pipeline.\"), mdx(\"p\", null, \"Fur\\xADther en\\xADhance\\xADments can be done to this basic pipeline, such as, in\\xADte\\xADgrat\\xADing the re\\xADcent \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin\"\n  }), \"Pipeline plugin\"), \", a fea\\xADture that al\\xADlows a bet\\xADter or\\xADches\\xADtra\\xADtion of CD stages; in\\xADclu\\xADsion of no\\xADti\\xADfi\\xADca\\xADtion and alert\\xADing ser\\xADvices; and, ul\\xADti\\xADmately a zero-\\u200Bdowntime de\\xADploy\\xADment ap\\xADproach, which could be achieved with the help of a proxy; plus, tons of op\\xADtions avail\\xADable trough Jenk\\xADins plu\\xADg\\xADins.\"), mdx(\"p\", null, \"Thanks for read\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>This blog entry describes an approach to adopt <em>Continuous Delivery</em> for Vert.x applications using Jenkins and Ansible by taking advantage of the Jenkins Job DSL and Ansible plugins.</p><h2 id=\"preamble\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#preamble\"></a>Preamble</h2><p>This post was written in context of the project titled <a href=\"https://summerofcode.withgoogle.com/projects/#4858492141699072\">DevOps tooling for Vert.x applications</a>, one of the projects at Vert.x taking place during the 2016 edition of <a href=\"https://summerofcode.withgoogle.com/about/\">Google Summer of Code</a>, a program that aims to bring students together with open source organizations in order to help them to gain exposure to software development practices and real-world challenges.</p><h2 id=\"introduction\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#introduction\"></a>Introduction</h2><p>System configuration management (e.g., Ansible) has been really hype in the recent years and there is a strong reason for that.\nConfiguration management facilitates configuring a new environment following a fixed <em>recipe</em> or slightly varying it with the help of parameters. This has not only the advantage of being able to do it more frequently but reduces the chance of errors than doing it manually.<br/>\n<!-- -->Beyond that, combining it with <em>Continuous Integration</em> tools (e.g., Jenkins) allows making a deployment as soon as a new codebase version is available, which represents the main building block of a <em>Continuous Delivery</em> pipeline, one of the objectives of embracing a DevOps culture.</p><p>Given that Vert.x is a framework that consists in a few libraries which can be shipped within a single <em>fat jar</em>, adopting a DevOps culture while developing a Vert.x-based application is straightforward.</p><h2 id=\"overview\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#overview\"></a>Overview</h2><p>As seen in the diagram below, this post describes a method to define a Jenkins build job which will react to changes in a code repository. After succesfully building the project, the job will execute an Ansible <em>playbook</em> to deploy the new application version to the hosts specified within the Ansible configuration.</p><p><img src=\"/images/blog/continuous-delivery-jenkins-ansible/ansible-jenkins-overview.svg\" alt=\"Overview of the continous delivery process\"/></p><h2 id=\"creating-a-jenkins-build-job-using-job-dsl\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#creating-a-jenkins-build-job-using-job-dsl\"></a>Creating a Jenkins build job using Job DSL</h2><p>Jenkins has created a convenient way to define build jobs using a DSL. While this option avoids the hassle of configuring build jobs manually, it supports all features of the regular interface through its <a href=\"https://jenkinsci.github.io/job-dsl-plugin/\">API</a>. It is possible to use Ansible together with Jenkins with the help of the Ansible <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Ansible+Plugin/\">plugin</a>, whose instructions are also included in the Job DSL <a href=\"https://github.com/jenkinsci/ansible-plugin/blob/master/README.md\">API</a>. Alternatively to the Job DSL Plugin, Ansible can be used inside the definition of Jenkins Pipeline, one of tools most recent features.</p><p>Below is a sample job definition which can be used after creating a <em>freestyle</em> job (seed job) and adding a new build step with the DSL script. In the script, there are a few things to notice:</p><ul><li>A name for the job created by the seed job is given.</li><li>Specific versions of JDK, Maven, and Ansible (available in the environment) are used.</li><li>Git is selected as the SCM platform and the target repository is defined. Also, the build job is triggered according to a specific interval.</li><li>The Maven <em>package</em> goal is invoked, which is instructed to package the application into a fat jar.</li><li>Lastly, Ansible is used to call a playbook available in the filesystem. The app will be deployed to the defined target hosts and the credentials (configured in Jenkins) will be used to log into the target hosts. Additionally, enabling the <code>colorizedOutput</code> option will result in a friendlier formatting of the results in the console output. The contents of this playbook will be addressed in the next section.</li></ul><pre><code class=\"hljs language-groovy\">job(<span class=\"hljs-string\">&#x27;vertx-microservices-workshop-job&#x27;</span>) {\n    jdk(<span class=\"hljs-string\">&#x27;JDK8&#x27;</span>)\n    scm {\n        git(<span class=\"hljs-string\">&#x27;git://github.com/ricardohmon/vertx-microservices-workshop.git&#x27;</span>)\n    }\n    triggers {\n        scm(<span class=\"hljs-string\">&#x27;*/15 * * * *&#x27;</span>)\n    }\n    steps {\n\n      <span class=\"hljs-keyword\">def</span> mvnInst = <span class=\"hljs-string\">&#x27;M3.3.9&#x27;</span>  \n      maven {  \n        goals(<span class=\"hljs-string\">&#x27;package&#x27;</span>)  \n        mavenInstallation(mvnInst)  \n      }  \n      ansiblePlaybook(<span class=\"hljs-string\">&#x27;/ansible/playbook.yml&#x27;</span>) {  \n        inventoryPath(<span class=\"hljs-string\">&#x27;/ansible/hosts&#x27;</span>)  \n        ansibleName(<span class=\"hljs-string\">&#x27;Ansible2.0&#x27;</span>)  \n        credentialsId(<span class=\"hljs-string\">&#x27;vagrant-key&#x27;</span>)  \n        colorizedOutput(<span class=\"hljs-literal\">true</span>)  \n      }  \n\n    }  \n}\n</code></pre><h2 id=\"deploying-vertx-app-using-ansible\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#deploying-vertx-app-using-ansible\"></a>Deploying Vert.x app using Ansible</h2><p>An Ansible Playbook results quite convenient to deploy a Vert.x application to a number of hosts while still taking considerations for each of them. Below is a sample playbook that deploys the respective application to each of the hosts described in an <em>inventory</em> file. The playbook comprises the following tasks and takes the listed considerations:</p><p>1) A task that targets only hosts with a database.</p><ul><li>The target hosts is specified with the name of the host (or hosts group) defined in the inventory file.</li></ul><p>2) Actual application deployment task. Here, several considerations are done:</p><ul><li>The application may require that only one host is updated at the time.<br/>This can be achieved with the <code>serial</code> option, while the order of the deployment to hosts can be enforced in the <code>hosts</code> option.</li></ul><div class=\"alert info\"><div class=\"alert-title\">Host processing order</div><p>Even though we could have declared <code>all</code> hosts, Ansible does not provide an explicit way to specify the order.</p></div><ul><li>Java is a system requirement for our Vert.x applications.<br/>Besides installing it (keep reading), we need to declare the <code>JAVA_HOME</code> environment variable.</li><li>A deployment may just represent an update to an already running application (<em>Continuous Deployment</em>), hence it is convenient to stop the previous application inside the <code>pre_tasks</code> and take post-deployment actions in the <code>post_tasks</code>.\nVert.x ships with the convenient <code>start</code>/<code>stop</code>/<code>list</code> commands that result very helpful here. We can use the <code>list</code> command and extract (using regex) the <code>id</code> of the running application of its output to stop it before deploying a new version.</li></ul><div class=\"alert info\"><p>If our solution includes a load balancer or proxy, we could deal with them at this step as described in Ansibles <a href=\"http://docs.ansible.com/ansible/playbooks_delegation.html\">best practices</a> for rolling updates</p></div><ul><li>Call to a <code>role</code> that makes the actual application deployment. The Jenkins Ansible Plugin includes, between others, a <code>WORKSPACE</code> environment variable, which may result very helpful in the following tasks, as shown later.</li></ul><pre><code class=\"hljs language-yaml\">  <span class=\"hljs-comment\"># 1) Special task for the service with a db</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">audit-service</span>\n  <span class=\"hljs-attr\">remote_user:</span> <span class=\"hljs-string\">vagrant</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db-setup</span>\n\n  <span class=\"hljs-comment\"># 2) Common tasks for all hosts</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">quote-generator:portfolio-service:compulsive-traders:audit-service:trader-dashboard</span>\n  <span class=\"hljs-attr\">remote_user:</span> <span class=\"hljs-string\">vagrant</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">serial:</span> <span class=\"hljs-number\">1</span>\n  <span class=\"hljs-attr\">environment:</span>\n    <span class=\"hljs-attr\">JAVA_HOME:</span> <span class=\"hljs-string\">/usr/lib/jvm/jre-1.8.0-openjdk/</span>\n\n  <span class=\"hljs-attr\">pre_tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Check</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">jar</span> <span class=\"hljs-string\">exists</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">target</span> <span class=\"hljs-string\">already</span>\n    <span class=\"hljs-attr\">stat:</span> <span class=\"hljs-string\">path=/usr/share/vertx_app/app-fatjar.jar</span>\n    <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">st</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">List</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">applications</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">java</span> <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">list</span>\n    <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">running_app_list</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">st.stat.exists</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-literal\">True</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Stop</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">it</span> <span class=\"hljs-string\">is</span> <span class=\"hljs-string\">already</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">(avoid</span> <span class=\"hljs-string\">multiple</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">instances)</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">java</span> <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">stop</span> {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%</span>}{{ <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">regex_replace(&#x27;^(?P&lt;V_id&gt;.</span>[<span class=\"hljs-number\">8</span>]<span class=\"hljs-string\">-.</span>[<span class=\"hljs-number\">4</span>]<span class=\"hljs-string\">-.</span>[<span class=\"hljs-number\">4</span>]<span class=\"hljs-string\">.</span>[<span class=\"hljs-number\">4</span>]<span class=\"hljs-string\">.</span>[<span class=\"hljs-number\">12</span>]<span class=\"hljs-string\">)\\t.*&#x27;</span>, <span class=\"hljs-string\">&#x27;\\\\g&lt;V_id&gt;&#x27;</span><span class=\"hljs-string\">)</span> }}{<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%</span>}\n    <span class=\"hljs-attr\">with_items:</span> <span class=\"hljs-string\">&quot;{% raw %}<span class=\"hljs-template-variable\">{{ running_app_list.stdout_lines|default([]) }}</span>{% endraw %}&quot;</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">st.stat.exists</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-literal\">True</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">(item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">regex_replace(&#x27;.*\\t(.*)$&#x27;,</span> <span class=\"hljs-string\">&#x27;\\\\1&#x27;</span><span class=\"hljs-string\">)</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">match(&#x27;.*/app-fatjar.jar$&#x27;))</span>\n\n  <span class=\"hljs-comment\"># Main role</span>\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> { <span class=\"hljs-attr\">role:</span> <span class=\"hljs-string\">vertx-app-deployment</span>, <span class=\"hljs-attr\">jenkins_job_workspace:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ lookup(&#x27;env&#x27;, &#x27;WORKSPACE&#x27;) }}</span>&quot;</span> }\n\n  <span class=\"hljs-attr\">post_tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">List</span> <span class=\"hljs-string\">again</span> <span class=\"hljs-string\">running</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">applications</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">java</span> <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">list</span>\n</code></pre><p>Once we took care of the actions shown before, the remaining tasks (included in the main deployment role) reduce to the following:</p><p>1) Prepare the target machine with the proper environment to run our application. This includes:</p><ul><li>Set up Java (pretty convenient to do it through a package manager).</li><li>Copy the Vert.x application package to the appropriate folder (quite simple using a fat jar). The actual name and location of the jar package in the Jenkins environment can be defined using host-specific <a href=\"http://docs.ansible.com/ansible/playbooks_delegation.html\">variables</a>.</li><li>In case necessary, copy the required config files.</li></ul><pre><code class=\"hljs language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">Java</span> <span class=\"hljs-number\">1.8</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">some</span> <span class=\"hljs-string\">basic</span> <span class=\"hljs-string\">dependencies</span>\n  <span class=\"hljs-attr\">yum:</span> <span class=\"hljs-string\">name={%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%}{{</span> <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">}}{%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%}</span> <span class=\"hljs-string\">state=present</span>\n  <span class=\"hljs-attr\">with_items:</span>\n   <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">java-1.8.0-openjdk</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Ensure</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">dir</span> <span class=\"hljs-string\">exists</span>\n  <span class=\"hljs-attr\">file:</span> <span class=\"hljs-string\">path=/usr/share/vertx_app/</span> <span class=\"hljs-string\">recurse=yes</span> <span class=\"hljs-string\">state=directory</span> <span class=\"hljs-string\">mode=0744</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copy</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">application</span> <span class=\"hljs-string\">jar</span> <span class=\"hljs-string\">package</span>\n  <span class=\"hljs-attr\">copy:</span> <span class=\"hljs-string\">src={%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%}{{</span> <span class=\"hljs-string\">app_jar</span> <span class=\"hljs-string\">}}{%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%}</span> <span class=\"hljs-string\">dest=/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">mode=0755</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Ensure</span> <span class=\"hljs-string\">config</span> <span class=\"hljs-string\">dir</span> <span class=\"hljs-string\">exists</span>\n  <span class=\"hljs-attr\">file:</span> <span class=\"hljs-string\">path=/etc/vertx_app/</span> <span class=\"hljs-string\">recurse=yes</span> <span class=\"hljs-string\">state=directory</span> <span class=\"hljs-string\">mode=0744</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copy</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">application</span> <span class=\"hljs-string\">config</span> <span class=\"hljs-string\">file</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">needed</span>\n  <span class=\"hljs-attr\">copy:</span> <span class=\"hljs-string\">src={%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%}{{</span> <span class=\"hljs-string\">app_config</span> <span class=\"hljs-string\">}}{%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%}</span> <span class=\"hljs-string\">dest=/etc/vertx_app/config.json</span> <span class=\"hljs-string\">mode=0755</span>\n  <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">app_config</span> <span class=\"hljs-string\">is</span> <span class=\"hljs-string\">defined</span>\n</code></pre><p>2) Run the application as a service in the hosting machine.</p><ul><li>Make sure to ignore the hang up signal with the help of <code>nohup</code> command. Otherwise, Ansible will be stuck at this step.</li></ul><pre><code class=\"hljs language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Run</span> <span class=\"hljs-string\">Vert.x</span> <span class=\"hljs-string\">application</span> <span class=\"hljs-string\">as</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-string\">service,</span> <span class=\"hljs-string\">ignore</span> <span class=\"hljs-string\">the</span> <span class=\"hljs-string\">SIGHUP</span> <span class=\"hljs-string\">signal</span>\n  <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">nohup</span> <span class=\"hljs-string\">java</span> {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%</span>}{{ <span class=\"hljs-string\">vertx_opts</span> }}{<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%</span>} <span class=\"hljs-string\">-jar</span> <span class=\"hljs-string\">/usr/share/vertx_app/app-fatjar.jar</span> <span class=\"hljs-string\">start</span> {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">raw</span> <span class=\"hljs-string\">%</span>}{{ <span class=\"hljs-string\">launch_params</span> }}{<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endraw</span> <span class=\"hljs-string\">%</span>}\n  <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">svc_run_out</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Print</span> <span class=\"hljs-string\">run</span> <span class=\"hljs-string\">output</span>\n  <span class=\"hljs-attr\">debug:</span> <span class=\"hljs-string\">var=svc_run_out.stdout_lines</span>\n</code></pre><div class=\"alert info\"><div class=\"alert-title\">Launching the Vert.x app</div><p>This example uses the <code>start</code> command to launch the application as a service. This method may result more comfortable than creating an <a href=\"/blog/vert-x-3-init-d-script/\">init.d script</a> or calling Vert.x from <a href=\"https://github.com/vert-x3/vertx-examples/#running-at-the-command-line\">command line</a>, which would have required to install the Vert.x libraries in an independent Ansible task.</p></div><p>This describes all the configuration needed to be able to build from a repository using Jenkins and deploy the results to our hosts with Ansible.</p><h2 id=\"sample-sources-and-demo\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sample-sources-and-demo\"></a>Sample sources and demo</h2><p>The sample configurations presented before are part of a complete demo focused on the Vert.x microservices <a href=\"http://vertx-lab.dynamis-technologies.com/\">workshop</a> to exemplify a basic Continuous Delivery scenario. This set up is available in a <a href=\"https://github.com/ricardohmon/vertx-ansible\">repository</a> and contains, in addition, a pre-configured Jenkins-based demo ready to host the build job described the previous sections. The demo scenario requires Vagrant and Virtualbox to be launched.</p><h3 id=\"launch-instructions\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#launch-instructions\"></a>Launch instructions</h3><ul><li>Clone or download this repository, and launch the demo using <code>vagrant up</code></li></ul><pre><code class=\"hljs language-awk\">git clone https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/ricardohmon/</span>vertx-ansible.git\ncd demo\nvagrant up\n</code></pre><p>This command will launch a virtual machine hosting Jenkins with the required plugins installed (tools names needed) and also launch five additional VMs that will host the microservices deployed by Jenkins.</p><ul><li>Create a Jenkins freestyle build job using the DSL job script (seed job) found in <code>deployment-jobs/microservices_workshop_dsl.groovy</code> and build it.</li></ul><div class=\"alert info\"><div class=\"alert-title\">Tool configuration assumption</div><p>The DSL Job assumes the following tools (with names) have been configured in Jenkins: Java 8 (<code>JDK8</code>), Maven (<code>M3.3.9</code>), Ansible (<code>Ansible2.0</code>)</p></div><ul><li>After building the seed job, a new job (<code>vertx-microservices-workshop-job</code>) will be created, which will be in charge of pulling recent changes of the project, building it, and deploying it.</li></ul><h3 id=\"demo\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#demo\"></a>Demo</h3><p>Watch the previous demo in action in the following screencast:</p><div class=\"youtube-embed\"><iframe src=\"https://www.youtube.com/embed/GQd_Rfeu6Yo\" frameBorder=\"0\" allowfullscreen=\"\"></iframe></div><h2 id=\"conclusion\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"></a>Conclusion</h2><p>Continuous Delivery approach is a <em>must</em> in modern software development lifecycles (including Vert.x-based applications) and a step further towards adopting a DevOps culture. There are a number of tools that enable it and one example is the combination of Jenkins + Ansible described in this post.<br/>\n<!-- -->While Jenkins offers the possibility to integrate recent changes perceived in a codebase and build runnable artifacts, Ansible can help to deploy them to hosting environments. The usage of both tools can be coupled easily with the help of the Job DSL plugin, a feature of Jenkins that allows describing a build job using a <em>domain-specific language</em>, which can help to integrate additional steps and tools to a <em>CD</em> pipeline.</p><p>Further enhancements can be done to this basic pipeline, such as, integrating the recent <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Plugin\">Pipeline plugin</a>, a feature that allows a better orchestration of CD stages; inclusion of notification and alerting services; and, ultimately a zero-downtime deployment approach, which could be achieved with the help of a proxy; plus, tons of options available trough Jenkins plugins.</p><p>Thanks for reading!</p>","scope":{}}},"prevPost":{"meta":{"title":"OAuth2 got easy","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"Oauth2 support exists in Eclipse Vert.x since version 3.2.0. The implementation follows the principles that rule the whole vert.x ecosystem."},"date":"2016-12-02","slug":"oauth2-got-easy"},"nextPost":{"meta":{"title":"Vert.x 3.3.3 is released!","category":"releases","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"We have just released Vert.x 3.3.3, a bug fix release of Vert.x 3.3.x."},"date":"2016-09-12","slug":"vert-x-3-3-3-is-released"},"relatedPosts":[{"meta":{"title":"Centralized logging for Vert.x applications using the ELK stack","category":"guides","authors":[{"name":"Ricardo Hernandez","github_id":"ricardohmon"}],"summary":"This post entry describes a solution to achieve centralized logging of Vert.x applications using the ELK stack (Logstash, Elasticsearch, and Kibana)."},"date":"2016-09-08","slug":"centralized-logging-for-vert-x-applications-using-the-elk-stack"},{"meta":{"title":"Getting started with new fabric8 Vert.x Maven Plugin","category":"guides","authors":[{"name":"Kamesh Sampath","github_id":"kameshsampath"}],"summary":"The all new fabric8 Vert.x Maven Plugin allows you to setup, package, run, start, stop and redeploy easily with a very little configuration resulting in a less verbose pom.xml."},"date":"2016-12-07","slug":"getting-started-with-new-fabric8-vert-x-maven-plugin"},{"meta":{"title":"Unit and Integration Tests","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Lets refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didnt test the API."},"date":"2015-08-03","slug":"unit-and-integration-tests"}]},"__N_SSG":true}