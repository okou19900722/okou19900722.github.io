{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Data-driven Apps made easy with Vert.x 3.4.0 and headless CMS Gentics Mesh","category":"guides","authors":[{"name":"Johannes Schüth","github_id":"jotschi"}],"summary":"I would like to share why Vert.x is not only a robust foundation for the headless Content Management System Gentics Mesh but also how it can be used to build a template-based web server."},"date":"2017-03-13","slug":"data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh","readingTime":{"text":"6 min read","minutes":5.8,"time":348000,"words":1160},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In this ar\\xADti\\xADcle, I would like to share why Vert.x is not only a ro\\xADbust foun\\xADda\\xADtion for the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/\"\n  }), \"head\\xADless Con\\xADtent Man\\xADage\\xADment Sys\\xADtem Gen\\xADtics Mesh\"), \" but also how the re\\xADcent re\\xADlease 3.4.0 can be used to build a template-\\u200Bbased web server with Gen\\xADtics Mesh and han\\xADdle\\xADbars.\"), mdx(\"p\", null, \"A head\\xADless CMS fo\\xADcuses on de\\xADliv\\xADer\\xADing your con\\xADtent through an API and al\\xADlows ed\\xADi\\xADtors cre\\xADat\\xADing and man\\xADag\\xADing that data through a web-\\u200Bbased in\\xADter\\xADface. Un\\xADlike a tra\\xADdi\\xADtional CMS, it does not pro\\xADvide a specif\\xADi\\xADcally ren\\xADdered out\\xADput. The fron\\xADtend part (the head) is lit\\xADer\\xADally cut off, al\\xADlow\\xADing de\\xADvel\\xADop\\xADers cre\\xADate web\\xADsites, apps, or any other data-\\u200Bdriven projects with their favourite tech\\xADnolo\\xADgies.\"), mdx(\"p\", null, mdx(Link, {\n    href: \"/blog/vert-x-3-4-0-is-released/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x 3.4.0\")), \" has just been re\\xADleased and it comes with a bunch of new fea\\xADtures and bug fixes. I am es\\xADpe\\xADcially ex\\xADcited about a small en\\xADhance\\xADment that changes the way in which the han\\xADdle\\xADbars tem\\xADplate en\\xADgine han\\xADdle their con\\xADtext data. Pre\\xADvi\\xADously it was not pos\\xADsi\\xADble to re\\xADsolve Vert.x \\u2018s JsonOb\\xADjects within the ren\\xADder con\\xADtext. With my en\\xADhance\\xADment \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/pull/509\"\n  }), \"#509\"), \" - re\\xADleased in Vert.x 3.4.0 - it is now pos\\xADsi\\xADble to ac\\xADcess nested data from these ob\\xADjects within your tem\\xADplates. Pre\\xADvi\\xADously this would have re\\xADquired flat\\xADten\\xADing out each ob\\xADject and re\\xADsolv\\xADing it in\\xADdi\\xADvid\\xADu\\xADally, which would have been very cum\\xADber\\xADsome.\"), mdx(\"p\", null, \"I\\u2019m going to demon\\xADstrate this en\\xADhance\\xADment by show\\xADing how to build a prod\\xADuct cat\\xADa\\xADlogue using Vert.x to\\xADgether with han\\xADdle\\xADbars tem\\xADplates to ren\\xADder and serve the web pages. The prod\\xADuct data is man\\xADaged, stored and de\\xADliv\\xADered by the CMS server as source for JSON data.\"), mdx(\"h2\", {\n    \"id\": \"clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n  })), \"Clone, Import, Download, Start - Set up your product catalogue website quickly\"), mdx(\"p\", null, \"Let\\u2019s quickly set up every\\xADthing you need to run the web\\xADsite be\\xADfore I walk you through the code.\"), mdx(\"h3\", {\n    \"id\": \"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n  })), \"1.  Clone - \", mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example\"\n  }), \"Get the full Vert.x with Gentics Mesh example from Github\")), mdx(\"p\", null, \"Fire up your ter\\xADmi\\xADnal and clone the ex\\xADam\\xADple ap\\xADpli\\xADca\\xADtion to the di\\xADrec\\xADtory of your choice.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"git \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" git@github.com:gentics/mesh-vertx-example.git\\n\")), mdx(\"h3\", {\n    \"id\": \"2-import---the-maven-project-in-your-favourite-ide\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#2-import---the-maven-project-in-your-favourite-ide\"\n  })), \"2. Import - The maven project in your favourite IDE\"), mdx(\"p\", null, \"The ap\\xADpli\\xADca\\xADtion is set up as a maven project and can be im\\xADported in Eclipse IDE via File \\u2192 Im\\xADport \\u2192 Ex\\xADist\\xADing Maven Project\"), mdx(\"h3\", {\n    \"id\": \"3-download-----get-the-headless-cms-gentics-mesh\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#3-download-----get-the-headless-cms-gentics-mesh\"\n  })), \"3. Download \\xA0- \\xA0Get the headless CMS Gentics Mesh\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/Download\"\n  }), \"Down\\xADload the lat\\xADest ver\\xADsion of Gen\\xADtics Mesh\"), \" and start the CMS with this one-\\u200Bliner\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -jar mesh-demo-0.6.xx.jar\\n\")), mdx(\"p\", null, \"For the cur\\xADrent ex\\xADam\\xADple we are going to use the read-\\u200Bonly user cre\\xADden\\xADtials (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"we\\xADb\\xADclient:we\\xADb\\xADclient\"), \").\\nIf you want to play around with the demo data you can point your browser to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080/mesh-ui/\"\n  }), \"http://lo\\xADcal\\xADhost:8080/mesh-\\u200Bui/\"), \" to reach the Gen\\xADtics Mesh user in\\xADter\\xADface and use one of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/getting-started.html#_startup\"\n  }), \"avail\\xADable demo cre\\xADden\\xADtials\"), \" to login.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-ui.jpg\",\n    \"alt\": \"Gentics Mesh User Interface\"\n  }))), mdx(\"h3\", {\n    \"id\": \"4-start---the-application-and-browse-the-product-catalogue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#4-start---the-application-and-browse-the-product-catalogue\"\n  })), \"4. Start - The application and browse the product catalogue\"), mdx(\"p\", null, \"You can start the Vert.x web server by run\\xADning Server.java.\"), mdx(\"p\", null, \"That\\u2019s it - now you can ac\\xADcess the prod\\xADuct cat\\xADa\\xADlogue web\\xADsite in your browser: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:3000\"\n  }), \"http://lo\\xADcal\\xADhost:3000\")), mdx(\"h2\", {\n    \"id\": \"why-vertx-is-a-good-fit-for-gentics-mesh\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#why-vertx-is-a-good-fit-for-gentics-mesh\"\n  })), \"Why Vert.x is a good fit for Gentics Mesh\"), mdx(\"p\", null, \"Be\\xADfore dig\\xADging into the ex\\xADam\\xADple, let me share a few thoughts on Vert.x and Gen\\xADtics Mesh in com\\xADbi\\xADna\\xADtion. In this ex\\xADam\\xADple Vert.x is part of the fron\\xADtend stack in de\\xADliv\\xADer\\xADing the prod\\xADuct cat\\xADa\\xADlogue web\\xADsite. But it might also be of in\\xADter\\xADest to you that Vert.x is also used at the very heart of Gen\\xADtics Mesh it\\xADself. The Gen\\xADtics Mesh \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/raml/\"\n  }), \"REST API end\\xADpoints\"), \" are built on top of Vert.x as a core com\\xADpo\\xADnent.\"), mdx(\"p\", null, \"The great thing about Vert.x is that there are a lot of de\\xADfault im\\xADple\\xADmen\\xADta\\xADtions for var\\xADi\\xADous tasks such as au\\xADthen\\xADti\\xADca\\xADtion, data\\xADbase in\\xADte\\xADgra\\xADtion, mon\\xADi\\xADtor\\xADing and clus\\xADter\\xADing. It is pos\\xADsi\\xADble to use one or more fea\\xADtures and omit the rest and thus your ap\\xADpli\\xADca\\xADtion re\\xADmains light\\xADweight.\"), mdx(\"h2\", {\n    \"id\": \"curious-about-the-code\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#curious-about-the-code\"\n  })), \"Curious about the code?\"), mdx(\"p\", null, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example\"\n  }), \"https://github.com/gen\\xADtics/mesh-\\u200Bvertx-example\")), mdx(\"p\", null, \"Now that every\\xADthing is up and run\\xADning let\\u2019s have a de\\xADtailed look at the code.\"), mdx(\"p\", null, \"A typ\\xADi\\xADcal de\\xADploy\\xADment unit for Vert.x is a \", mdx(Link, {\n    href: \"/docs/vertx-core/java/#_verticles\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"ver\\xADti\\xADcle\")), \". In our case we use the ver\\xADti\\xADcle to bun\\xADdle our code and run the web server within it. Once de\\xADployed, Vert.x will run the ver\\xADti\\xADcle and start the HTTP server code.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"main.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/#_java_rest_client\"\n  }), \"Gen\\xADtics Mesh REST client\"), \" is used to com\\xADmu\\xADni\\xADcate with the Gen\\xADtics Mesh server. The \", mdx(Link, {\n    href: \"/docs/vertx-web/java/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x web li\\xADbrary\")), \" is used to set up our \", mdx(Link, {\n    href: \"/docs/vertx-web/java/#_basic_vert_x_web_concepts\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"HTTP Router\")), \". As with other rout\\xADing frame\\xADworks like \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Silex\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ex\\xADpress\"), \", the router can be used to cre\\xADate routes for in\\xADbound HTTP re\\xADquests. In our case we only need two routes. The main route which ac\\xADcepts the re\\xADquest will uti\\xADlize the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/#_webroot\"\n  }), \"Gen\\xADtics Mesh We\\xADb\\xADroot API End\\xADpoint\"), \" which is able to re\\xADsolve con\\xADtent by a pro\\xADvided path. It will ex\\xADam\\xADine the re\\xADsponse and add fields to the rout\\xADing con\\xADtext.\"), mdx(\"p\", null, \"The other route is chained and will take the pre\\xADvi\\xADously pre\\xADpared rout\\xADing con\\xADtext and ren\\xADder the de\\xADsired tem\\xADplate using the \", mdx(Link, {\n    href: \"/docs/vertx-web/java/#_templates\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"han\\xADdle\\xADbars tem\\xADplate han\\xADdler\")), \".\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"start.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"First we can han\\xADdle var\\xADi\\xADous spe\\xADcial re\\xADquests path such as \\u201D/\\u201D for the wel\\xADcome page. Or the typ\\xADi\\xADcal fav\\xADi\\xADcon.ico re\\xADquest. Other re\\xADquests are passed to the We\\xADb\\xADroot API han\\xADdler method.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"pathHandler.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"Once the path has been re\\xADsolved to a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"We\\xADb\\xADRootRe\\xADsponse\"), \" we can ex\\xADam\\xADine that data and de\\xADter\\xADmine whether it is a bi\\xADnary re\\xADsponse or a JSON re\\xADsponse. Bi\\xADnary re\\xADsponses may occur if the re\\xADquested re\\xADsource rep\\xADre\\xADsents an image or any other bi\\xADnary data. Re\\xADsolved bi\\xADnary con\\xADtents are di\\xADrectly passed through to the client and the han\\xADdle\\xADbars route is not in\\xADvoked.\"), mdx(\"p\", null, \"Ex\\xADam\\xADples\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/\"\n  }), \"http://lo\\xADcal\\xADhost:3000/\"), \" \\u2192 wel\\xADcome.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Automobiles\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Au\\xADto\\xADmo\\xADbiles\"), \" \\u2192 cat\\xADe\\xADgory \\u2192 pro\\xADductList.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Automobiles/Tesla%20Roadster\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Au\\xADto\\xADmo\\xADbiles/Tesla Road\\xADster\"), \" \\u2192 ve\\xADhi\\xADcle \\u2192 pro\\xADduct\\xADDe\\xADtail.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Ve\\xADhi\\xADcle Im\\xADages/tesla-\\u200Broadster.jpg\"), \" \\u2192 bi\\xADnary passthru\")), mdx(\"p\", null, \"JSON re\\xADsponses on the other hand are ex\\xADam\\xADined to de\\xADter\\xADmine the type of node which was lo\\xADcated. A typ\\xADi\\xADcal node re\\xADsponse con\\xADtains in\\xADfor\\xADma\\xADtion about the schema used by the node. This will ef\\xADfec\\xADtively de\\xADter\\xADmine the type of the lo\\xADcated con\\xADtent (e.g.: cat\\xADe\\xADgory, ve\\xADhi\\xADcle).\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"routeHandler.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-schemas.jpg\",\n    \"alt\": \"Mesh Schemas\"\n  }))), mdx(\"p\", null, \"The demo ap\\xADpli\\xADca\\xADtion serves dif\\xADfer\\xADent pages which cor\\xADre\\xADspond to the iden\\xADti\\xADfied type.\\nTake a look at the tem\\xADplate sources within \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"src/main/re\\xADsources/tem\\xADplates/\"), \" if you are in\\xADter\\xADested in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://handlebarsjs.com/\"\n  }), \"han\\xADdle\\xADbars syn\\xADtax\"), \".\\nThe tem\\xADplates in the ex\\xADam\\xADple should cover most com\\xADmon cases.   \"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\",\n    \"alt\": \"Handlebars Template Overview\"\n  }))), mdx(\"p\", null, \"The Mesh REST Client li\\xADbrary in\\xADter\\xADnally makes use of the \", mdx(Link, {\n    href: \"/docs/vertx-core/java/#_creating_an_http_client\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x core HTTP client\")), \".\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ReactiveX/RxJava\"\n  }), \"Rx\\xADJava\"), \" is being used to han\\xADdle these async re\\xADquests. This way we can com\\xADbine all asyn\\xADchro\\xADnously re\\xADquested Gen\\xADtics Mesh re\\xADsources (bread\\xADcrumb, list of prod\\xADucts) and add the loaded data into the rout\\xADing con\\xADtext.\"), mdx(\"p\", null, \"The Vert.x ex\\xADam\\xADple server loads JSON con\\xADtent from the Gen\\xADtics Mesh server. The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"JsonOb\\xADject\"), \" is placed in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jknack/handlebars.java\"\n  }), \"han\\xADdle\\xADbars\"), \" ren\\xADder con\\xADtext and the tem\\xADplate can ac\\xADcess all nested fields within.\"), mdx(\"p\", null, \"This way it is pos\\xADsi\\xADble to re\\xADsolve any field within the han\\xADdle\\xADbars tem\\xADplate.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"template.example\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"That\\u2019s it! Fi\\xADnally, we can in\\xADvoke mvn clean pack\\xADage in order to pack\\xADage our web\\xADserver. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://maven.apache.org/plugins/maven-shade-plugin/\"\n  }), \"maven-\\u200Bshade-plugin\"), \" will bun\\xADdle every\\xADthing and cre\\xADate an ex\\xADe\\xADcutable jar.\"), mdx(\"h2\", {\n    \"id\": \"whats-next\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#whats-next\"\n  })), \"What\\u2019s next?\"), mdx(\"p\", null, \"Fu\\xADture re\\xADleases of Gen\\xADtics Mesh will re\\xADfine the Mesh REST Client API and pro\\xADvide a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://graphql.org/\"\n  }), \"GraphQL\"), \" which will re\\xADduce the JSON over\\xADhead. Using GraphQL will also re\\xADduce the amount of re\\xADquests which need to be is\\xADsued.\"), mdx(\"p\", null, \"Thanks for read\\xADing. If you have any futher ques\\xADtions or feed\\xADback don\\u2019t hes\\xADi\\xADtate to send me a tweet to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/Jotschi/\"\n  }), \"@Jotschi\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/genticsmesh/\"\n  }), \"@gen\\xADtic\\xADsmesh\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>In this ar­ti­cle, I would like to share why Vert.x is not only a ro­bust foun­da­tion for the <a href=\"http://getmesh.io/\">head­less Con­tent Man­age­ment Sys­tem Gen­tics Mesh</a> but also how the re­cent re­lease 3.4.0 can be used to build a template-​based web server with Gen­tics Mesh and han­dle­bars.</p><p>A head­less CMS fo­cuses on de­liv­er­ing your con­tent through an API and al­lows ed­i­tors cre­at­ing and man­ag­ing that data through a web-​based in­ter­face. Un­like a tra­di­tional CMS, it does not pro­vide a specif­i­cally ren­dered out­put. The fron­tend part (the head) is lit­er­ally cut off, al­low­ing de­vel­op­ers cre­ate web­sites, apps, or any other data-​driven projects with their favourite tech­nolo­gies.</p><p><a href=\"/blog/vert-x-3-4-0-is-released/\">Vert.x 3.4.0</a> has just been re­leased and it comes with a bunch of new fea­tures and bug fixes. I am es­pe­cially ex­cited about a small en­hance­ment that changes the way in which the han­dle­bars tem­plate en­gine han­dle their con­text data. Pre­vi­ously it was not pos­si­ble to re­solve Vert.x ‘s JsonOb­jects within the ren­der con­text. With my en­hance­ment <a href=\"https://github.com/vert-x3/vertx-web/pull/509\">#509</a> - re­leased in Vert.x 3.4.0 - it is now pos­si­ble to ac­cess nested data from these ob­jects within your tem­plates. Pre­vi­ously this would have re­quired flat­ten­ing out each ob­ject and re­solv­ing it in­di­vid­u­ally, which would have been very cum­ber­some.</p><p>I’m going to demon­strate this en­hance­ment by show­ing how to build a prod­uct cat­a­logue using Vert.x to­gether with han­dle­bars tem­plates to ren­der and serve the web pages. The prod­uct data is man­aged, stored and de­liv­ered by the CMS server as source for JSON data.</p><h2 id=\"clone-import-download-start---set-up-your-product-catalogue-website-quickly\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"></a>Clone, Import, Download, Start - Set up your product catalogue website quickly</h2><p>Let’s quickly set up every­thing you need to run the web­site be­fore I walk you through the code.</p><h3 id=\"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"></a>1.  Clone - <a href=\"https://github.com/gentics/mesh-vertx-example\">Get the full Vert.x with Gentics Mesh example from Github</a></h3><p>Fire up your ter­mi­nal and clone the ex­am­ple ap­pli­ca­tion to the di­rec­tory of your choice.</p><pre><code class=\"hljs language-bash\">git <span class=\"hljs-built_in\">clone</span> git@github.com:gentics/mesh-vertx-example.git\n</code></pre><h3 id=\"2-import---the-maven-project-in-your-favourite-ide\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#2-import---the-maven-project-in-your-favourite-ide\"></a>2. Import - The maven project in your favourite IDE</h3><p>The ap­pli­ca­tion is set up as a maven project and can be im­ported in Eclipse IDE via File → Im­port → Ex­ist­ing Maven Project</p><h3 id=\"3-download-----get-the-headless-cms-gentics-mesh\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#3-download-----get-the-headless-cms-gentics-mesh\"></a>3. Download  -  Get the headless CMS Gentics Mesh</h3><p><a href=\"http://getmesh.io/Download\">Down­load the lat­est ver­sion of Gen­tics Mesh</a> and start the CMS with this one-​liner</p><pre><code class=\"hljs language-bash\">java -jar mesh-demo-0.6.xx.jar\n</code></pre><p>For the cur­rent ex­am­ple we are going to use the read-​only user cre­den­tials (<em>we­b­client:we­b­client</em>).\nIf you want to play around with the demo data you can point your browser to <a href=\"http://localhost:8080/mesh-ui/\">http://lo­cal­host:8080/mesh-​ui/</a> to reach the Gen­tics Mesh user in­ter­face and use one of the <a href=\"http://getmesh.io/docs/beta/getting-started.html#_startup\">avail­able demo cre­den­tials</a> to login.</p><p><img src=\"/images/blog/vertx-mesh/mesh-ui.jpg\" alt=\"Gentics Mesh User Interface\"/></p><h3 id=\"4-start---the-application-and-browse-the-product-catalogue\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#4-start---the-application-and-browse-the-product-catalogue\"></a>4. Start - The application and browse the product catalogue</h3><p>You can start the Vert.x web server by run­ning Server.java.</p><p>That’s it - now you can ac­cess the prod­uct cat­a­logue web­site in your browser: <a href=\"http://localhost:3000\">http://lo­cal­host:3000</a></p><h2 id=\"why-vertx-is-a-good-fit-for-gentics-mesh\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#why-vertx-is-a-good-fit-for-gentics-mesh\"></a>Why Vert.x is a good fit for Gentics Mesh</h2><p>Be­fore dig­ging into the ex­am­ple, let me share a few thoughts on Vert.x and Gen­tics Mesh in com­bi­na­tion. In this ex­am­ple Vert.x is part of the fron­tend stack in de­liv­er­ing the prod­uct cat­a­logue web­site. But it might also be of in­ter­est to you that Vert.x is also used at the very heart of Gen­tics Mesh it­self. The Gen­tics Mesh <a href=\"http://getmesh.io/docs/beta/raml/\">REST API end­points</a> are built on top of Vert.x as a core com­po­nent.</p><p>The great thing about Vert.x is that there are a lot of de­fault im­ple­men­ta­tions for var­i­ous tasks such as au­then­ti­ca­tion, data­base in­te­gra­tion, mon­i­tor­ing and clus­ter­ing. It is pos­si­ble to use one or more fea­tures and omit the rest and thus your ap­pli­ca­tion re­mains light­weight.</p><h2 id=\"curious-about-the-code\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#curious-about-the-code\"></a>Curious about the code?</h2><p>Source: <a href=\"https://github.com/gentics/mesh-vertx-example\">https://github.com/gen­tics/mesh-​vertx-example</a></p><p>Now that every­thing is up and run­ning let’s have a de­tailed look at the code.</p><p>A typ­i­cal de­ploy­ment unit for Vert.x is a <a href=\"/docs/vertx-core/java/#_verticles\">ver­ti­cle</a>. In our case we use the ver­ti­cle to bun­dle our code and run the web server within it. Once de­ployed, Vert.x will run the ver­ti­cle and start the HTTP server code.</p><div>...waiting for Gist...</div><p>The <a href=\"http://getmesh.io/docs/beta/#_java_rest_client\">Gen­tics Mesh REST client</a> is used to com­mu­ni­cate with the Gen­tics Mesh server. The <a href=\"/docs/vertx-web/java/\">Vert.x web li­brary</a> is used to set up our <a href=\"/docs/vertx-web/java/#_basic_vert_x_web_concepts\">HTTP Router</a>. As with other rout­ing frame­works like <em>Silex</em> and <em>Ex­press</em>, the router can be used to cre­ate routes for in­bound HTTP re­quests. In our case we only need two routes. The main route which ac­cepts the re­quest will uti­lize the <a href=\"http://getmesh.io/docs/beta/#_webroot\">Gen­tics Mesh We­b­root API End­point</a> which is able to re­solve con­tent by a pro­vided path. It will ex­am­ine the re­sponse and add fields to the rout­ing con­text.</p><p>The other route is chained and will take the pre­vi­ously pre­pared rout­ing con­text and ren­der the de­sired tem­plate using the <a href=\"/docs/vertx-web/java/#_templates\">han­dle­bars tem­plate han­dler</a>.</p><div>...waiting for Gist...</div><p>First we can han­dle var­i­ous spe­cial re­quests path such as ”/” for the wel­come page. Or the typ­i­cal fav­i­con.ico re­quest. Other re­quests are passed to the We­b­root API han­dler method.</p><div>...waiting for Gist...</div><p>Once the path has been re­solved to a <em>We­b­RootRe­sponse</em> we can ex­am­ine that data and de­ter­mine whether it is a bi­nary re­sponse or a JSON re­sponse. Bi­nary re­sponses may occur if the re­quested re­source rep­re­sents an image or any other bi­nary data. Re­solved bi­nary con­tents are di­rectly passed through to the client and the han­dle­bars route is not in­voked.</p><p>Ex­am­ples</p><ul><li><a href=\"http://localhost:3000/\">http://lo­cal­host:3000/</a> → wel­come.hbs</li><li><a href=\"http://localhost:3000/Automobiles\">http://lo­cal­host:3000/Au­to­mo­biles</a> → cat­e­gory → pro­ductList.hbs</li><li><a href=\"http://localhost:3000/Automobiles/Tesla%20Roadster\">http://lo­cal­host:3000/Au­to­mo­biles/Tesla Road­ster</a> → ve­hi­cle → pro­duct­De­tail.hbs</li><li><a href=\"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\">http://lo­cal­host:3000/Ve­hi­cle Im­ages/tesla-​roadster.jpg</a> → bi­nary passthru</li></ul><p>JSON re­sponses on the other hand are ex­am­ined to de­ter­mine the type of node which was lo­cated. A typ­i­cal node re­sponse con­tains in­for­ma­tion about the schema used by the node. This will ef­fec­tively de­ter­mine the type of the lo­cated con­tent (e.g.: cat­e­gory, ve­hi­cle).</p><div>...waiting for Gist...</div><p><img src=\"/images/blog/vertx-mesh/mesh-schemas.jpg\" alt=\"Mesh Schemas\"/></p><p>The demo ap­pli­ca­tion serves dif­fer­ent pages which cor­re­spond to the iden­ti­fied type.\nTake a look at the tem­plate sources within <em>src/main/re­sources/tem­plates/</em> if you are in­ter­ested in the <a href=\"http://handlebarsjs.com/\">han­dle­bars syn­tax</a>.\nThe tem­plates in the ex­am­ple should cover most com­mon cases.   </p><p><img src=\"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\" alt=\"Handlebars Template Overview\"/></p><p>The Mesh REST Client li­brary in­ter­nally makes use of the <a href=\"/docs/vertx-core/java/#_creating_an_http_client\">Vert.x core HTTP client</a>.</p><p><a href=\"https://github.com/ReactiveX/RxJava\">Rx­Java</a> is being used to han­dle these async re­quests. This way we can com­bine all asyn­chro­nously re­quested Gen­tics Mesh re­sources (bread­crumb, list of prod­ucts) and add the loaded data into the rout­ing con­text.</p><p>The Vert.x ex­am­ple server loads JSON con­tent from the Gen­tics Mesh server. The <em>JsonOb­ject</em> is placed in the <a href=\"https://github.com/jknack/handlebars.java\">han­dle­bars</a> ren­der con­text and the tem­plate can ac­cess all nested fields within.</p><p>This way it is pos­si­ble to re­solve any field within the han­dle­bars tem­plate.</p><div>...waiting for Gist...</div><p>That’s it! Fi­nally, we can in­voke mvn clean pack­age in order to pack­age our web­server. The <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\">maven-​shade-plugin</a> will bun­dle every­thing and cre­ate an ex­e­cutable jar.</p><h2 id=\"whats-next\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#whats-next\"></a>What’s next?</h2><p>Fu­ture re­leases of Gen­tics Mesh will re­fine the Mesh REST Client API and pro­vide a <a href=\"http://graphql.org/\">GraphQL</a> which will re­duce the JSON over­head. Using GraphQL will also re­duce the amount of re­quests which need to be is­sued.</p><p>Thanks for read­ing. If you have any futher ques­tions or feed­back don’t hes­i­tate to send me a tweet to <a href=\"https://twitter.com/Jotschi/\">@Jotschi</a> or <a href=\"https://twitter.com/genticsmesh/\">@gen­tic­smesh</a>.</p>","scope":{}}},"prevPost":{"meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"date":"2017-03-20","slug":"scala-is-here"},"nextPost":{"meta":{"title":"Vert.x 3.4.0 is released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"Vert.x 3.4.0 has just been released with many new exciting features!"},"date":"2017-03-07","slug":"vert-x-3-4-0-is-released"},"relatedPosts":[{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"An Introduction to the Vert.x Context Object","category":"guides","authors":[{"name":"Jez Prime","github_id":"millross"}],"summary":"Under the hood, the vert.x Context class plays a critical part in maintaining the thread-safety guarantees of verticles. Most of the time, vert.x coders don't need to make use of Context objects directly."},"date":"2017-01-31","slug":"an-introduction-to-the-vert-x-context-object"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"}]},"__N_SSG":true}