<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Guides | Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.176b8cb6.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.176b8cb6.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.8577696c4e17514af975.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-entries"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">16 March 2020</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/easy-sso-for-vert-x-with-keycloak/">Easy SSO for Vert.x with Keycloak</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/thomasdarimont.png?size=50"/><a href="https://github.com/thomasdarimont" target="_blank" rel="noopener noreferrer">Thomas Darimont</a></li></ul></span><p class="blog-entry-summary">In this blog post, you&#x27;ll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x.</p><span class="read-more-link"><a href="/blog/easy-sso-for-vert-x-with-keycloak/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">22 October 2019</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/send-web-requests-and-assert-results-with-vertx-junit5-web-client/">Send web requests and assert results with vertx-junit5-web-client</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/slinkydeveloper.png?size=50"/><a href="https://github.com/slinkydeveloper" target="_blank" rel="noopener noreferrer">Francesco Guardiani</a></li></ul></span><p class="blog-entry-summary">In this blog post, you&#x27;ll learn how to use the new vertx-junit5-web-client module to send web requests in your unit tests and to make assertions.</p><span class="read-more-link"><a href="/blog/send-web-requests-and-assert-results-with-vertx-junit5-web-client/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">13 December 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/vert-x-web-api-service-introduction/">Vert.x Web API Service Introduction</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/slinkydeveloper.png?size=50"/><a href="https://github.com/slinkydeveloper" target="_blank" rel="noopener noreferrer">Francesco Guardiani</a></li></ul></span><p class="blog-entry-summary">This blog post teaches you how to use the new module vertx-web-api-service to combine the Web Router and the OpenAPI Router Factory with service proxies.</p><span class="read-more-link"><a href="/blog/vert-x-web-api-service-introduction/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">10 December 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/http-response-validation-with-the-vert-x-web-client/">HTTP response validation with the Vert.x Web Client</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/tsegismont.png?size=50"/><a href="https://github.com/tsegismont" target="_blank" rel="noopener noreferrer">Thomas Segismont</a></li></ul></span><p class="blog-entry-summary">Learn how to use response predicates from the Vert.x Web module to validate HTTP responses and to automatically generate error messages.</p><span class="read-more-link"><a href="/blog/http-response-validation-with-the-vert-x-web-client/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">6 December 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/the-rss-reader-tutorial-step-3/">The RSS reader tutorial (Step 3)</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/Sammers21.png?size=50"/><a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></li></ul></span><p class="blog-entry-summary">This is the third installment of our Vert.x Cassandra Client tutorial. We will implement the last RSS endpoint serving a list of articles related to a specific channel.</p><span class="read-more-link"><a href="/blog/the-rss-reader-tutorial-step-3/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">5 September 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/the-rss-reader-tutorial-step-2/">The RSS reader tutorial (Step 2)</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/Sammers21.png?size=50"/><a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></li></ul></span><p class="blog-entry-summary">In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID.</p><span class="read-more-link"><a href="/blog/the-rss-reader-tutorial-step-2/">Read more</a></span></div></div><div class="pagination"><div class="pagination-page disabled">«</div><div class="pagination-page active"><a href="/blog/category/guides/">1</a></div><div class="pagination-page"><a href="/blog/category/guides/page/2/">2</a></div><div class="pagination-page"><a href="/blog/category/guides/page/3/">3</a></div><div class="pagination-page"><a href="/blog/category/guides/page/4/">4</a></div><div class="pagination-page"><a href="/blog/category/guides/page/5/">5</a></div><div class="pagination-page disabled">…</div><div class="pagination-page"><a href="/blog/category/guides/page/9/">9</a></div><div class="pagination-page"><a href="/blog/category/guides/page/2/">»</a></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"category":"guides","page":1,"posts":[{"filename":"blog/2020-03-16-easy-sso-for-vert-x-with-keycloak.mdx","date":"2020-03-16","slug":"easy-sso-for-vert-x-with-keycloak","meta":{"title":"Easy SSO for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x."},"readingTime":{"text":"11 min read","minutes":10.11,"time":606599.9999999999,"words":2022},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TL;DR:\")), mdx(\"p\", null, \"In this blog post you\\u2019ll learn:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to im\\xADple\\xADment Sin\\xADgle Sign-\\u200Bon with OpenID Con\\xADnect\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to use Key\\xADcloak\\u2019s OpenID Dis\\xADcov\\xADery to infer OpenID provider con\\xADfig\\xADu\\xADra\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to ob\\xADtain user in\\xADfor\\xADma\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to check for au\\xADtho\\xADriza\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to call a Bearer pro\\xADtected ser\\xADvice with an Ac\\xADcess Token\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to im\\xADple\\xADment a form based lo\\xADgout\")), mdx(\"h2\", {\n    \"id\": \"hello-blog\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#hello-blog\"\n  })), \"Hello Blog\"), mdx(\"p\", null, \"This is my first post in the Vert.x Blog and I must admit that up until now I have never used Vert.x in a real project.\\n\\u201CWhy are you here?\\u201D, you might ask\\u2026 Well I cur\\xADrently have two main hob\\xADbies, learn\\xADing new things and se\\xADcur\\xADing apps with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/\"\n  }), \"Key\\xADcloak\"), \".\\nSo a few days ago, I stum\\xADbled upon the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=LsaXy7SRXMY\u0026list=PLkeCJDaCC2ZsnySdg04Aq9D9FpAZY6K5D\"\n  }), \"In\\xADtro\\xADduc\\xADtion to Vert.x video se\\xADries on youtube\"), \" by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/infosec812\"\n  }), \"Deven Phillips\"), \" and I was im\\xADme\\xADdi\\xADately hooked. Vert.x was a new thing for me, so the next log\\xADi\\xADcal step was to fig\\xADure out how to se\\xADcure a Vert.x app with Key\\xADcloak.\"), mdx(\"p\", null, \"For this ex\\xADam\\xADple I build a small web app with Vert.x that shows how to im\\xADple\\xADment Sin\\xADgle Sign-\\u200Bon (SSO) with Key\\xADcloak\\nand OpenID Con\\xADnect, ob\\xADtain in\\xADfor\\xADma\\xADtion about the cur\\xADrent user, check for roles, call bearer pro\\xADtected ser\\xADvices and prop\\xADerly han\\xADdling lo\\xADgout.\"), mdx(\"h2\", {\n    \"id\": \"keycloak\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#keycloak\"\n  })), \"Keycloak\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/\"\n  }), \"Key\\xADcloak\"), \" is a Open Source Iden\\xADtity and Ac\\xADcess Man\\xADage\\xADment so\\xADlu\\xADtion which pro\\xADvides sup\\xADport for OpenID Con\\xADnect\\nbased Singe-\\u200BSign on, among many other things. I briefly looked for ways to se\\xADcur\\xADing a Vert.x app with Key\\xADcloak\\nand quickly found an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/blog/vertx-3-and-keycloak-tutorial/\"\n  }), \"older Vert.x Key\\xADcloak in\\xADte\\xADgra\\xADtion ex\\xADam\\xADple\"), \" in this very blog.\\nWhilst this is a good start for be\\xADgin\\xADners, the ex\\xADam\\xADple con\\xADtains a few is\\xADsues, e.g.:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It uses hard\\xADcoded OpenID provider con\\xADfig\\xADu\\xADra\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fea\\xADtures a very sim\\xADplis\\xADtic in\\xADte\\xADgra\\xADtion (for the sake of sim\\xADplic\\xADity)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No user in\\xADfor\\xADma\\xADtion used\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No lo\\xADgout func\\xADtion\\xADal\\xADity is shown\")), mdx(\"p\", null, \"That some\\xADhow nerd\\xADsniped me a bit and so it came that, after a long day of con\\xADsult\\xADing work, I sat down to cre\\xADate an ex\\xADam\\xADple for a com\\xADplete Key\\xADcloak in\\xADte\\xADgra\\xADtion based on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-auth-oauth2/java/\"\n  }), \"Vert.x OpenID Con\\xADnect / OAuth2 Sup\\xADport\"), \".\"), mdx(\"p\", null, \"So let\\u2019s get started!\"), mdx(\"h3\", {\n    \"id\": \"keycloak-setup\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#keycloak-setup\"\n  })), \"Keycloak Setup\"), mdx(\"p\", null, \"To se\\xADcure a Vert.x app with Key\\xADcloak we of course need a Key\\xADcloak in\\xADstance. Al\\xADthough \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/docs/latest/getting_started/\"\n  }), \"Key\\xADcloak has a great get\\xADting started guide\"), \" I wanted to make it a bit eas\\xADier to put every\\xADthing to\\xADgether, there\\xADfore I pre\\xADpared a local Key\\xADcloak docker con\\xADtainer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx#start-keycloak-with-the-vertx-realm\"\n  }), \"as de\\xADscribed here\"), \" that you can start eas\\xADily, which comes with all the re\\xADquired con\\xADfig\\xADu\\xADra\\xADtion in place.\"), mdx(\"p\", null, \"The pre\\xADcon\\xADfig\\xADured Key\\xADcloak realm named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx\"), \" con\\xADtains a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"demo-client\"), \" for our Vert.x web app and a set\\nof users for test\\xADing.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-haml\"\n  }), \"docker run \\\\\\n  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"it \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"-name vertx-keycloak \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"-rm \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"e KEYCLOAK_USER=admin \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"e KEYCLOAK_PASSWORD=admin \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"e KEYCLOAK_IMPORT=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/tmp/vertx\"), \"-realm.json \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"v $PWD/vertx-realm.\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \"json:\"), \"/tmp/vertx-realm.json \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"p \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \" \\\\\\n\"), \"  quay.io/keycloak/keycloak:9.0.0\\n\")), mdx(\"h2\", {\n    \"id\": \"vertx-web-app\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-web-app\"\n  })), \"Vert.x Web App\"), mdx(\"p\", null, \"The sim\\xADple web app con\\xADsists of a sin\\xADgle \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Verticle\"), \", runs on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8090\"), \" and pro\\xADvides a few routes with pro\\xADtected re\\xADsources. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/thomasdarimont/vertx-playground/blob/master/keycloak-vertx/src/main/java/demo/MainVerticle.java\"\n  }), \"You can find the com\\xADplete ex\\xADam\\xADple here\"), \".\"), mdx(\"p\", null, \"The web app con\\xADtains the fol\\xADlow\\xADing routes with han\\xADdlers:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/\"), \" - The un\\xADpro\\xADtected index page\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected\"), \" - The pro\\xADtected page, which shows a greet\\xADing mes\\xADsage, users need to login to ac\\xADcess pages be\\xADneath this path.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected/user\"), \" - The pro\\xADtected user page, which shows some in\\xADfor\\xADma\\xADtion about the user.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected/admin\"), \" - The pro\\xADtected admin page, which shows some in\\xADfor\\xADma\\xADtion about the admin, only users with role \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"admin\"), \" can ac\\xADcess this page.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected/userinfo\"), \" - The pro\\xADtected user\\xADinfo page, ob\\xADtains user in\\xADfor\\xADma\\xADtion from the bearer token pro\\xADtected user\\xADinfo end\\xADpoint in Key\\xADcloak.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/logout\"), \" - The pro\\xADtected lo\\xADgout re\\xADsource, which trig\\xADgers the user lo\\xADgout.\")), mdx(\"h3\", {\n    \"id\": \"running-the-app\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#running-the-app\"\n  })), \"Running the app\"), mdx(\"p\", null, \"To run the app, we need to build our app via:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" keycloak-vertx\\nmvn clean package\\n\")), mdx(\"p\", null, \"This cre\\xADates a runnable jar, which we can run via:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -jar target/*.jar\\n\")), mdx(\"p\", null, \"Note, that you need to start Key\\xADcloak, since our app will try to fetch con\\xADfig\\xADu\\xADra\\xADtion from Key\\xADcloak.\"), mdx(\"p\", null, \"If the ap\\xADpli\\xADca\\xADtion is run\\xADning, just browse to: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8090/\"), \".\"), mdx(\"p\", null, \"An ex\\xADam\\xADple in\\xADter\\xADac\\xADtion with the app can be seen in the fol\\xADlow\\xADing gif:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-keycloak-integration/2020-03-07-vertx-keycloak-integration.gif\",\n    \"alt\": \"Vert.x Keycloak Integration Demo\"\n  }))), mdx(\"h3\", {\n    \"id\": \"router-sessionstore-and-csrf-protection\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#router-sessionstore-and-csrf-protection\"\n  })), \"Router, SessionStore and CSRF Protection\"), mdx(\"p\", null, \"We start the con\\xADfig\\xADu\\xADra\\xADtion of our web app by cre\\xADat\\xADing a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \" where we can add cus\\xADtom han\\xADdler func\\xADtions for our routes.\\nTo prop\\xADerly han\\xADdle the au\\xADthen\\xADti\\xADca\\xADtion state we need to cre\\xADate a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" and at\\xADtach it to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \".\\nThe \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" is used by our OAuth2/OpenID Con\\xADnect in\\xADfra\\xADstruc\\xADture to as\\xADso\\xADciate au\\xADthen\\xADti\\xADca\\xADtion in\\xADfor\\xADma\\xADtion with a ses\\xADsion.\\nBy the way, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" can also be clus\\xADtered if you need to dis\\xADtrib\\xADute the server-\\u200Bside state.\"), mdx(\"p\", null, \"Note that if you want to keep your server state\\xADless but still want to sup\\xADport clus\\xADter\\xADing,\\nthen you could pro\\xADvide your own im\\xADple\\xADmen\\xADta\\xADtion of a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" which stores the ses\\xADsion in\\xADfor\\xADma\\xADtion\\nas an en\\xADcrypted cookie on the Client.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Router router = Router.router(vertx);\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Store session information on the server side\"), \"\\nSessionStore sessionStore = LocalSessionStore.create(vertx);\\nSessionHandler sessionHandler = SessionHandler.create(sessionStore);\\nrouter.route().handler(sessionHandler);\\n\")), mdx(\"p\", null, \"In order to pro\\xADtected against CSRF at\\xADtacks it is good prac\\xADtice to pro\\xADtect HTML forms with a CSRF token.\\nWe need this for our lo\\xADgout form that we\\u2019ll see later.\"), mdx(\"p\", null, \"To do this we con\\xADfig\\xADure a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CSRFHandler\"), \" and add it to our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// CSRF handler setup required for logout form\"), \"\\nString csrfSecret = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"zwiebelfische\\\"\"), \";\\nCSRFHandler csrfHandler = CSRFHandler.create(csrfSecret);\\nrouter.route().handler(ctx -\u003e {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Ensures that the csrf token request parameter is available for the CsrfHandler\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// after the logout form was submitted.\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// See \\\"Handling HTML forms\\\" https://vertx.io/docs/vertx-core/java/#_handling_requests\"), \"\\n            ctx.request().setExpectMultipart(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\n            ctx.request().endHandler(v -\u003e csrfHandler.handle(ctx));\\n        }\\n);\\n\")), mdx(\"h3\", {\n    \"id\": \"keycloak-setup-via-openid-connect-discovery\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#keycloak-setup-via-openid-connect-discovery\"\n  })), \"Keycloak Setup via OpenID Connect Discovery\"), mdx(\"p\", null, \"Our app is reg\\xADis\\xADtered as a con\\xADfi\\xADden\\xADtial OpenID Con\\xADnect client with Au\\xADtho\\xADriza\\xADtion Code Flow in Key\\xADcloak,\\nthus we need to con\\xADfig\\xADure \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client_id\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client_secret\"), \". Con\\xADfi\\xADden\\xADtial clients are typ\\xADi\\xADcally used\\nfor server-\\u200Bside web ap\\xADpli\\xADca\\xADtions, where one can se\\xADcurely store the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client_secret\"), \". You can find out more\\nabout\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/docs/latest/server_admin/index.html#_access-type\"\n  }), \"The dif\\xADfer\\xADent Client Ac\\xADcess Types\"), \" in the Key\\xADcloak doc\\xADu\\xADmen\\xADta\\xADtion.\"), mdx(\"p\", null, \"Since we don\\u2019t want to con\\xADfig\\xADure things like OAuth2 / OpenID Con\\xADnect End\\xADpoints our\\xADselves, we use Key\\xADcloak\\u2019s OpenID Con\\xADnect dis\\xADcov\\xADery end\\xADpoint to infer the nec\\xADes\\xADsary Oauth2 / OpenID Con\\xADnect end\\xADpoint URLs.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"String hostname = System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.host\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" port = Integer.getInteger(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8090\"), \");\\nString baseUrl = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://%s:%d\\\"\"), \", hostname, port);\\nString oauthCallbackPath = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/callback\\\"\"), \";\\n\\nOAuth2ClientOptions clientOptions = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" OAuth2ClientOptions()\\n    .setFlow(OAuth2FlowType.AUTH_CODE)\\n    .setSite(System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"oauth2.issuer\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost:8080/auth/realms/vertx\\\"\"), \"))\\n    .setClientID(System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"oauth2.client_id\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"demo-client\\\"\"), \"))\\n    .setClientSecret(System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"oauth2.client_secret\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1f88bd14-7e7f-45e7-be27-d680da6e48d8\\\"\"), \"));\\n\\nKeycloakAuth.discover(vertx, clientOptions, asyncResult -\u003e {\\n\\n    OAuth2Auth oauth2Auth = asyncResult.result();\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (oauth2Auth == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"throw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RuntimeException(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Could not configure Keycloak integration via OpenID Connect Discovery Endpoint. Is Keycloak running?\\\"\"), \");\\n    }\\n\\n    AuthHandler oauth2 = OAuth2AuthHandler.create(oauth2Auth, baseUrl + oauthCallbackPath)\\n        .setupCallback(router.get(oauthCallbackPath))\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Additional scopes: openid for OpenID Connect\"), \"\\n        .addAuthority(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"openid\\\"\"), \");\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// session handler needs access to the authenticated user, otherwise we get an infinite redirect loop\"), \"\\n    sessionHandler.setAuthProvider(oauth2Auth);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// protect resources beneath /protected/* with oauth2 handler\"), \"\\n    router.route(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/*\\\"\"), \").handler(oauth2);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// configure route handlers\"), \"\\n    configureRoutes(router, webClient, oauth2Auth);\\n});\\n\\ngetVertx().createHttpServer().requestHandler(router).listen(port);\\n\")), mdx(\"h3\", {\n    \"id\": \"route-handlers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#route-handlers\"\n  })), \"Route handlers\"), mdx(\"p\", null, \"We con\\xADfig\\xADure our route han\\xADdlers via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"configureRoutes\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"configureRoutes\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Router router, WebClient webClient, OAuth2Auth oauth2Auth)\"), \" \"), \"{\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleIndex);\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleGreet);\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/user\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleUserPage);\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/admin\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleAdminPage);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// extract discovered userinfo endpoint url\"), \"\\n    String userInfoUrl =  ((OAuth2AuthProviderImpl)oauth2Auth).getConfig().getUserInfoPath();\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/userinfo\\\"\"), \").handler(createUserInfoHandler(webClient, userInfoUrl));\\n\\n    router.post(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/logout\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleLogout);\\n}\\n\")), mdx(\"p\", null, \"The index han\\xADdler ex\\xADposes an un\\xADpro\\xADtected re\\xADsource:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleIndex\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eWelcome to Vert.x Keycloak Example\u003c/h1\u003e\u003cbr\u003e\u003ca href=\\\\\\\"/protected\\\\\\\"\u003eProtected\u003c/a\u003e\\\"\"), \");\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"extract-user-information-from-the-openid-connect-id-token\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#extract-user-information-from-the-openid-connect-id-token\"\n  })), \"Extract User Information from the OpenID Connect ID Token\"), mdx(\"p\", null, \"Our app ex\\xADposes a sim\\xADple greet\\xADing page which shows some in\\xADfor\\xADma\\xADtion about the user and pro\\xADvides links to other pages.\"), mdx(\"p\", null, \"The user greet\\xADing han\\xADdler is pro\\xADtected by the Key\\xADcloak OAuth2 / OpenID Con\\xADnect in\\xADte\\xADgra\\xADtion. To show in\\xADfor\\xADma\\xADtion about\\nthe cur\\xADrent user, we first need to call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ctx.user()\"), \" method to get an user ob\\xADject we can work with.\\nTo ac\\xADcess the OAuth2 token in\\xADfor\\xADma\\xADtion, we need to cast it to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth2TokenImpl\"), \".\"), mdx(\"p\", null, \"We can ex\\xADtract the user in\\xADfor\\xADma\\xADtion like the user\\xADname from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IDToken\"), \" ex\\xADposed by the user ob\\xADject via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user.idToken().getString(\\\"preferred_username\\\")\"), \".\\nNote, there are many more claims like (name, email, give\\xADnanme, fam\\xADi\\xADly\\xADname etc.) avail\\xADable. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://openid.net/specs/openid-connect-core-1_0.html#Claims\"\n  }), \"OpenID Con\\xADnect Core Spec\\xADi\\xADfi\\xADca\\xADtion\"), \" con\\xADtains a list of avail\\xADable claims.\"), mdx(\"p\", null, \"We also gen\\xADer\\xADate a list with links to the other pages which are sup\\xADported:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleGreet\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\\n\\n    String username = oAuth2Token.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"preferred_username\\\"\"), \");\\n\\n    String greeting = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eHi %s @%s\u003c/h1\u003e\u003cul\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cli\u003e\u003ca href=\\\\\\\"/protected/user\\\\\\\"\u003eUser Area\u003c/a\u003e\u003c/li\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cli\u003e\u003ca href=\\\\\\\"/protected/admin\\\\\\\"\u003eAdmin Area\u003c/a\u003e\u003c/li\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cli\u003e\u003ca href=\\\\\\\"/protected/userinfo\\\\\\\"\u003eUser Info (Remote Call)\u003c/a\u003e\u003c/li\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003c/ul\u003e\\\"\"), \", username, Instant.now());\\n\\n    String logoutForm = createLogoutForm(ctx);\\n\\n    respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", greeting + logoutForm);\\n}\\n\")), mdx(\"p\", null, \"The user page han\\xADdler shows in\\xADfor\\xADma\\xADtion about the cur\\xADrent user:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleUserPage\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\\n\\n    String username = user.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"preferred_username\\\"\"), \");\\n    String displayName = oAuth2Token.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \");\\n\\n    String content = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eUser Page: %s (%s) @%s\u003c/h1\u003e\u003ca href=\\\\\\\"/protected\\\\\\\"\u003eProtected Area\u003c/a\u003e\\\"\"), \",\\n                                   username, displayName, Instant.now());\\n    respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", content);\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"authorization-checking-for-required-roles\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#authorization-checking-for-required-roles\"\n  })), \"Authorization: Checking for Required Roles\"), mdx(\"p\", null, \"Our app ex\\xADposes a sim\\xADple admin page which shows some in\\xADfor\\xADma\\xADtion for ad\\xADmins, which should only be vis\\xADi\\xADble for ad\\xADmins. Thus we re\\xADquire that users must have the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" realm role in Key\\xADcloak to be able to ac\\xADcess the admin page.\"), mdx(\"p\", null, \"This is done via a call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user.isAuthorized(\\\"realm:admin\\\", cb)\"), \". The han\\xADdler func\\xADtion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cb\"), \" ex\\xADposes\\nthe re\\xADsult of the au\\xADtho\\xADriza\\xADtion check via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\u003cBoolean\u003e res\"), \". If the cur\\xADrent user has the\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" role then the re\\xADsult is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \" oth\\xADer\\xADwise \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"false\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleAdminPage\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// check for realm-role \\\"admin\\\"\"), \"\\n    user.isAuthorized(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"realm:admin\\\"\"), \", res -\u003e {\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!res.succeeded() || !res.result()) {\\n            respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"403\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eForbidden\u003c/h1\u003e\\\"\"), \");\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n\\n        String username = user.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"preferred_username\\\"\"), \");\\n\\n        String content = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eAdmin Page: %s @%s\u003c/h1\u003e\u003ca href=\\\\\\\"/protected\\\\\\\"\u003eProtected Area\u003c/a\u003e\\\"\"), \",\\n                                        username, Instant.now());\\n        respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", content);\\n    });\\n}\\n\")), mdx(\"h4\", {\n    \"id\": \"call-services-protected-with-bearer-token\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#call-services-protected-with-bearer-token\"\n  })), \"Call Services protected with Bearer Token\"), mdx(\"p\", null, \"Often we need to call other ser\\xADvices from our web app that are pro\\xADtected via Bearer Au\\xADthen\\xADti\\xADca\\xADtion. This means\\nthat we need a valid \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"access token\"), \" to ac\\xADcess a re\\xADsource pro\\xADvided on an\\xADother server.\"), mdx(\"p\", null, \"To demon\\xADstrate this we use Key\\xADcloak\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/userinfo\"), \" end\\xADpoint as a straw man to demon\\xADstrate back\\xADend calls with a bearer token.\"), mdx(\"p\", null, \"We can ob\\xADtain the cur\\xADrent valid \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"access token\"), \" via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user.opaqueAccessToken()\"), \".\\nSince we use a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WebClient\"), \" to call the pro\\xADtected end\\xADpoint, we need to pass the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"access token\"), \"\\nvia the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \" header by call\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bearerTokenAuthentication(user.opaqueAccessToken())\"), \"\\nin the cur\\xADrent \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HttpRequest\"), \" ob\\xADject:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Handler\u003cRoutingContext\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createUserInfoHandler\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(WebClient webClient, String userInfoUrl)\"), \" \"), \"{\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" (RoutingContext ctx) -\u003e {\\n\\n        OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\\n\\n        URI userInfoEndpointUri = URI.create(userInfoUrl);\\n        webClient\\n            .get(userInfoEndpointUri.getPort(), userInfoEndpointUri.getHost(), userInfoEndpointUri.getPath())\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// use the access token for calls to other services protected via JWT Bearer authentication\"), \"\\n            .bearerTokenAuthentication(user.opaqueAccessToken())\\n            .as(BodyCodec.jsonObject())\\n            .send(ar -\u003e {\\n\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!ar.succeeded()) {\\n                    respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"{}\\\"\"), \");\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n                }\\n\\n                JsonObject body = ar.result().body();\\n                respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \", body.encode());\\n            });\\n    };\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"handle-logout\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#handle-logout\"\n  })), \"Handle logout\"), mdx(\"p\", null, \"Now that we got a work\\xADing SSO login with au\\xADtho\\xADriza\\xADtion, it would be great if we would allow users to lo\\xADgout again.\\nTo do this we can lever\\xADage the built-\\u200Bin OpenID Con\\xADnect lo\\xADgout func\\xADtion\\xADal\\xADity which can be called via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"oAuth2Token.logout(cb)\"), \".\"), mdx(\"p\", null, \"The han\\xADdler func\\xADtion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cb\"), \" ex\\xADposes the re\\xADsult of the lo\\xADgout ac\\xADtion via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\u003cVoid\u003e res\"), \".\\nIf the lo\\xADgout was suc\\xADcess\\xADfull we destory our ses\\xADsion via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ctx.session().destroy()\"), \" and redi\\xADrect the user to the index page.\"), mdx(\"p\", null, \"The lo\\xADgout form is gen\\xADer\\xADated via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"createLogoutForm\"), \" method.\"), mdx(\"p\", null, \"As men\\xADtioned ear\\xADlier, we need to pro\\xADtect our lo\\xADgout form with a CSRF token to pre\\xADvent \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://owasp.org/www-community/attacks/csrf\"\n  }), \"CSRF at\\xADtacks\"), \".\"), mdx(\"p\", null, \"Note: If we had end\\xADpoints that would ac\\xADcept data sent to the server, then we\\u2019d need to guard those end\\xADpoints with an CSRF token as well.\"), mdx(\"p\", null, \"We need to ob\\xADtain the gen\\xADer\\xADated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CSRFToken\"), \" and ren\\xADder it into a hid\\xADden form input field that\\u2019s trans\\xADfered via HTTP POST when the lo\\xADgout form is sub\\xADmit\\xADted:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleLogout\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\\n    oAuth2Token.logout(res -\u003e {\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!res.succeeded()) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// the user might not have been logged out, to know why:\"), \"\\n            respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eLogout failed %s\u003c/h1\u003e\\\"\"), \", res.cause()));\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n\\n        ctx.session().destroy();\\n        ctx.response().putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"location\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/?logout=true\\\"\"), \").setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"302\"), \").end();\\n    });\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" String \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createLogoutForm\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    String csrfToken = ctx.get(CSRFHandler.DEFAULT_HEADER_NAME);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cform action=\\\\\\\"/logout\\\\\\\" method=\\\\\\\"post\\\\\\\"\u003e\\\"\"), \"\\n            + String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cinput type=\\\\\\\"hidden\\\\\\\" name=\\\\\\\"%s\\\\\\\" value=\\\\\\\"%s\\\\\\\"\u003e\\\"\"), \", CSRFHandler.DEFAULT_HEADER_NAME, csrfToken)\\n            + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cbutton\u003eLogout\u003c/button\u003e\u003c/form\u003e\\\"\"), \";\\n}\\n\")), mdx(\"p\", null, \"Some ad\\xADdi\\xADtional plumb\\xADing:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"respondWithOk\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx, String contentType, String content)\"), \" \"), \"{\\n    respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \", contentType, content);\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"respondWith\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx, \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" statusCode, String contentType, String content)\"), \" \"), \"{\\n    ctx.request().response() \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\"), \"\\n            .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", contentType) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\"), \"\\n            .setStatusCode(statusCode)\\n            .end(content);\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"more-examples\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#more-examples\"\n  })), \"More examples\"), mdx(\"p\", null, \"This con\\xADcludes the Key\\xADcloak in\\xADte\\xADgra\\xADtion ex\\xADam\\xADple.\"), mdx(\"p\", null, \"Check out the com\\xADplete ex\\xADam\\xADple in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx\"\n  }), \"keycloak-\\u200Bvertx Ex\\xADam\\xADples Repo\"), \".\"), mdx(\"p\", null, \"Thank you for your time, stay tuned for more up\\xADdates! If you want to learn more about Key\\xADcloak, feel free to reach out to me. You can find me via \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/thomasdarimont\"\n  }), \"thomas\\xADda\\xADri\\xADmont on twit\\xADter\"), \".\"), mdx(\"p\", null, \"Happy Hack\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003e\u003cstrong\u003eTL;DR:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIn this blog post you’ll learn:\u003c/p\u003e\u003cul\u003e\u003cli\u003eHow to im­ple­ment Sin­gle Sign-​on with OpenID Con­nect\u003c/li\u003e\u003cli\u003eHow to use Key­cloak’s OpenID Dis­cov­ery to infer OpenID provider con­fig­u­ra­tion\u003c/li\u003e\u003cli\u003eHow to ob­tain user in­for­ma­tion\u003c/li\u003e\u003cli\u003eHow to check for au­tho­riza­tion\u003c/li\u003e\u003cli\u003eHow to call a Bearer pro­tected ser­vice with an Ac­cess Token\u003c/li\u003e\u003cli\u003eHow to im­ple­ment a form based lo­gout\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"hello-blog\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#hello-blog\"\u003e\u003c/a\u003eHello Blog\u003c/h2\u003e\u003cp\u003eThis is my first post in the Vert.x Blog and I must admit that up until now I have never used Vert.x in a real project.\n“Why are you here?”, you might ask… Well I cur­rently have two main hob­bies, learn­ing new things and se­cur­ing apps with \u003ca href=\"https://www.keycloak.org/\"\u003eKey­cloak\u003c/a\u003e.\nSo a few days ago, I stum­bled upon the \u003ca href=\"https://www.youtube.com/watch?v=LsaXy7SRXMY\u0026amp;list=PLkeCJDaCC2ZsnySdg04Aq9D9FpAZY6K5D\"\u003eIn­tro­duc­tion to Vert.x video se­ries on youtube\u003c/a\u003e by \u003ca href=\"https://twitter.com/infosec812\"\u003eDeven Phillips\u003c/a\u003e and I was im­me­di­ately hooked. Vert.x was a new thing for me, so the next log­i­cal step was to fig­ure out how to se­cure a Vert.x app with Key­cloak.\u003c/p\u003e\u003cp\u003eFor this ex­am­ple I build a small web app with Vert.x that shows how to im­ple­ment Sin­gle Sign-​on (SSO) with Key­cloak\nand OpenID Con­nect, ob­tain in­for­ma­tion about the cur­rent user, check for roles, call bearer pro­tected ser­vices and prop­erly han­dling lo­gout.\u003c/p\u003e\u003ch2 id=\"keycloak\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#keycloak\"\u003e\u003c/a\u003eKeycloak\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://www.keycloak.org/\"\u003eKey­cloak\u003c/a\u003e is a Open Source Iden­tity and Ac­cess Man­age­ment so­lu­tion which pro­vides sup­port for OpenID Con­nect\nbased Singe-​Sign on, among many other things. I briefly looked for ways to se­cur­ing a Vert.x app with Key­cloak\nand quickly found an \u003ca href=\"https://vertx.io/blog/vertx-3-and-keycloak-tutorial/\"\u003eolder Vert.x Key­cloak in­te­gra­tion ex­am­ple\u003c/a\u003e in this very blog.\nWhilst this is a good start for be­gin­ners, the ex­am­ple con­tains a few is­sues, e.g.:\u003c/p\u003e\u003cul\u003e\u003cli\u003eIt uses hard­coded OpenID provider con­fig­u­ra­tion\u003c/li\u003e\u003cli\u003eFea­tures a very sim­plis­tic in­te­gra­tion (for the sake of sim­plic­ity)\u003c/li\u003e\u003cli\u003eNo user in­for­ma­tion used\u003c/li\u003e\u003cli\u003eNo lo­gout func­tion­al­ity is shown\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThat some­how nerd­sniped me a bit and so it came that, after a long day of con­sult­ing work, I sat down to cre­ate an ex­am­ple for a com­plete Key­cloak in­te­gra­tion based on \u003ca href=\"https://vertx.io/docs/vertx-auth-oauth2/java/\"\u003eVert.x OpenID Con­nect / OAuth2 Sup­port\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eSo let’s get started!\u003c/p\u003e\u003ch3 id=\"keycloak-setup\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#keycloak-setup\"\u003e\u003c/a\u003eKeycloak Setup\u003c/h3\u003e\u003cp\u003eTo se­cure a Vert.x app with Key­cloak we of course need a Key­cloak in­stance. Al­though \u003ca href=\"https://www.keycloak.org/docs/latest/getting_started/\"\u003eKey­cloak has a great get­ting started guide\u003c/a\u003e I wanted to make it a bit eas­ier to put every­thing to­gether, there­fore I pre­pared a local Key­cloak docker con­tainer \u003ca href=\"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx#start-keycloak-with-the-vertx-realm\"\u003eas de­scribed here\u003c/a\u003e that you can start eas­ily, which comes with all the re­quired con­fig­u­ra­tion in place.\u003c/p\u003e\u003cp\u003eThe pre­con­fig­ured Key­cloak realm named \u003ccode\u003evertx\u003c/code\u003e con­tains a \u003ccode\u003edemo-client\u003c/code\u003e for our Vert.x web app and a set\nof users for test­ing.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-haml\"\u003edocker run \\\n  -\u003cspan class=\"ruby\"\u003eit \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003e-name vertx-keycloak \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003e-rm \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ee KEYCLOAK_USER=admin \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ee KEYCLOAK_PASSWORD=admin \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ee KEYCLOAK_IMPORT=\u003cspan class=\"hljs-regexp\"\u003e/tmp/vertx\u003c/span\u003e-realm.json \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ev $PWD/vertx-realm.\u003cspan class=\"hljs-symbol\"\u003ejson:\u003c/span\u003e/tmp/vertx-realm.json \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ep \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e\u003cspan class=\"hljs-symbol\"\u003e:\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e \\\n\u003c/span\u003e  quay.io/keycloak/keycloak:9.0.0\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"vertx-web-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-web-app\"\u003e\u003c/a\u003eVert.x Web App\u003c/h2\u003e\u003cp\u003eThe sim­ple web app con­sists of a sin­gle \u003ccode\u003eVerticle\u003c/code\u003e, runs on \u003ccode\u003ehttp://localhost:8090\u003c/code\u003e and pro­vides a few routes with pro­tected re­sources. \u003ca href=\"https://github.com/thomasdarimont/vertx-playground/blob/master/keycloak-vertx/src/main/java/demo/MainVerticle.java\"\u003eYou can find the com­plete ex­am­ple here\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe web app con­tains the fol­low­ing routes with han­dlers:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e/\u003c/code\u003e - The un­pro­tected index page\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected\u003c/code\u003e - The pro­tected page, which shows a greet­ing mes­sage, users need to login to ac­cess pages be­neath this path.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected/user\u003c/code\u003e - The pro­tected user page, which shows some in­for­ma­tion about the user.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected/admin\u003c/code\u003e - The pro­tected admin page, which shows some in­for­ma­tion about the admin, only users with role \u003ccode\u003eadmin\u003c/code\u003e can ac­cess this page.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected/userinfo\u003c/code\u003e - The pro­tected user­info page, ob­tains user in­for­ma­tion from the bearer token pro­tected user­info end­point in Key­cloak.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/logout\u003c/code\u003e - The pro­tected lo­gout re­source, which trig­gers the user lo­gout.\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"running-the-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#running-the-app\"\u003e\u003c/a\u003eRunning the app\u003c/h3\u003e\u003cp\u003eTo run the app, we need to build our app via:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e keycloak-vertx\nmvn clean package\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis cre­ates a runnable jar, which we can run via:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ejava -jar target/*.jar\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNote, that you need to start Key­cloak, since our app will try to fetch con­fig­u­ra­tion from Key­cloak.\u003c/p\u003e\u003cp\u003eIf the ap­pli­ca­tion is run­ning, just browse to: \u003ccode\u003ehttp://localhost:8090/\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eAn ex­am­ple in­ter­ac­tion with the app can be seen in the fol­low­ing gif:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-keycloak-integration/2020-03-07-vertx-keycloak-integration.gif\" alt=\"Vert.x Keycloak Integration Demo\"/\u003e\u003c/p\u003e\u003ch3 id=\"router-sessionstore-and-csrf-protection\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#router-sessionstore-and-csrf-protection\"\u003e\u003c/a\u003eRouter, SessionStore and CSRF Protection\u003c/h3\u003e\u003cp\u003eWe start the con­fig­u­ra­tion of our web app by cre­at­ing a \u003ccode\u003eRouter\u003c/code\u003e where we can add cus­tom han­dler func­tions for our routes.\nTo prop­erly han­dle the au­then­ti­ca­tion state we need to cre­ate a \u003ccode\u003eSessionStore\u003c/code\u003e and at­tach it to the \u003ccode\u003eRouter\u003c/code\u003e.\nThe \u003ccode\u003eSessionStore\u003c/code\u003e is used by our OAuth2/OpenID Con­nect in­fra­struc­ture to as­so­ciate au­then­ti­ca­tion in­for­ma­tion with a ses­sion.\nBy the way, the \u003ccode\u003eSessionStore\u003c/code\u003e can also be clus­tered if you need to dis­trib­ute the server-​side state.\u003c/p\u003e\u003cp\u003eNote that if you want to keep your server state­less but still want to sup­port clus­ter­ing,\nthen you could pro­vide your own im­ple­men­ta­tion of a \u003ccode\u003eSessionStore\u003c/code\u003e which stores the ses­sion in­for­ma­tion\nas an en­crypted cookie on the Client.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRouter router = Router.router(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Store session information on the server side\u003c/span\u003e\nSessionStore sessionStore = LocalSessionStore.create(vertx);\nSessionHandler sessionHandler = SessionHandler.create(sessionStore);\nrouter.route().handler(sessionHandler);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn order to pro­tected against CSRF at­tacks it is good prac­tice to pro­tect HTML forms with a CSRF token.\nWe need this for our lo­gout form that we’ll see later.\u003c/p\u003e\u003cp\u003eTo do this we con­fig­ure a \u003ccode\u003eCSRFHandler\u003c/code\u003e and add it to our \u003ccode\u003eRouter\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// CSRF handler setup required for logout form\u003c/span\u003e\nString csrfSecret = \u003cspan class=\"hljs-string\"\u003e\u0026quot;zwiebelfische\u0026quot;\u003c/span\u003e;\nCSRFHandler csrfHandler = CSRFHandler.create(csrfSecret);\nrouter.route().handler(ctx -\u0026gt; {\n            \u003cspan class=\"hljs-comment\"\u003e// Ensures that the csrf token request parameter is available for the CsrfHandler\u003c/span\u003e\n            \u003cspan class=\"hljs-comment\"\u003e// after the logout form was submitted.\u003c/span\u003e\n            \u003cspan class=\"hljs-comment\"\u003e// See \u0026quot;Handling HTML forms\u0026quot; https://vertx.io/docs/vertx-core/java/#_handling_requests\u003c/span\u003e\n            ctx.request().setExpectMultipart(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n            ctx.request().endHandler(v -\u0026gt; csrfHandler.handle(ctx));\n        }\n);\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"keycloak-setup-via-openid-connect-discovery\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#keycloak-setup-via-openid-connect-discovery\"\u003e\u003c/a\u003eKeycloak Setup via OpenID Connect Discovery\u003c/h3\u003e\u003cp\u003eOur app is reg­is­tered as a con­fi­den­tial OpenID Con­nect client with Au­tho­riza­tion Code Flow in Key­cloak,\nthus we need to con­fig­ure \u003ccode\u003eclient_id\u003c/code\u003e and \u003ccode\u003eclient_secret\u003c/code\u003e. Con­fi­den­tial clients are typ­i­cally used\nfor server-​side web ap­pli­ca­tions, where one can se­curely store the \u003ccode\u003eclient_secret\u003c/code\u003e. You can find out more\nabout\u003ca href=\"https://www.keycloak.org/docs/latest/server_admin/index.html#_access-type\"\u003eThe dif­fer­ent Client Ac­cess Types\u003c/a\u003e in the Key­cloak doc­u­men­ta­tion.\u003c/p\u003e\u003cp\u003eSince we don’t want to con­fig­ure things like OAuth2 / OpenID Con­nect End­points our­selves, we use Key­cloak’s OpenID Con­nect dis­cov­ery end­point to infer the nec­es­sary Oauth2 / OpenID Con­nect end­point URLs.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eString hostname = System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e port = Integer.getInteger(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8090\u003c/span\u003e);\nString baseUrl = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://%s:%d\u0026quot;\u003c/span\u003e, hostname, port);\nString oauthCallbackPath = \u003cspan class=\"hljs-string\"\u003e\u0026quot;/callback\u0026quot;\u003c/span\u003e;\n\nOAuth2ClientOptions clientOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OAuth2ClientOptions()\n    .setFlow(OAuth2FlowType.AUTH_CODE)\n    .setSite(System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;oauth2.issuer\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:8080/auth/realms/vertx\u0026quot;\u003c/span\u003e))\n    .setClientID(System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;oauth2.client_id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;demo-client\u0026quot;\u003c/span\u003e))\n    .setClientSecret(System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;oauth2.client_secret\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1f88bd14-7e7f-45e7-be27-d680da6e48d8\u0026quot;\u003c/span\u003e));\n\nKeycloakAuth.discover(vertx, clientOptions, asyncResult -\u0026gt; {\n\n    OAuth2Auth oauth2Auth = asyncResult.result();\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (oauth2Auth == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RuntimeException(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Could not configure Keycloak integration via OpenID Connect Discovery Endpoint. Is Keycloak running?\u0026quot;\u003c/span\u003e);\n    }\n\n    AuthHandler oauth2 = OAuth2AuthHandler.create(oauth2Auth, baseUrl + oauthCallbackPath)\n        .setupCallback(router.get(oauthCallbackPath))\n        \u003cspan class=\"hljs-comment\"\u003e// Additional scopes: openid for OpenID Connect\u003c/span\u003e\n        .addAuthority(\u003cspan class=\"hljs-string\"\u003e\u0026quot;openid\u0026quot;\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-comment\"\u003e// session handler needs access to the authenticated user, otherwise we get an infinite redirect loop\u003c/span\u003e\n    sessionHandler.setAuthProvider(oauth2Auth);\n\n    \u003cspan class=\"hljs-comment\"\u003e// protect resources beneath /protected/* with oauth2 handler\u003c/span\u003e\n    router.route(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/*\u0026quot;\u003c/span\u003e).handler(oauth2);\n\n    \u003cspan class=\"hljs-comment\"\u003e// configure route handlers\u003c/span\u003e\n    configureRoutes(router, webClient, oauth2Auth);\n});\n\ngetVertx().createHttpServer().requestHandler(router).listen(port);\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"route-handlers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#route-handlers\"\u003e\u003c/a\u003eRoute handlers\u003c/h3\u003e\u003cp\u003eWe con­fig­ure our route han­dlers via \u003ccode\u003econfigureRoutes\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003econfigureRoutes\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Router router, WebClient webClient, OAuth2Auth oauth2Auth)\u003c/span\u003e \u003c/span\u003e{\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleIndex);\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleGreet);\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/user\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleUserPage);\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/admin\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleAdminPage);\n\n    \u003cspan class=\"hljs-comment\"\u003e// extract discovered userinfo endpoint url\u003c/span\u003e\n    String userInfoUrl =  ((OAuth2AuthProviderImpl)oauth2Auth).getConfig().getUserInfoPath();\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/userinfo\u0026quot;\u003c/span\u003e).handler(createUserInfoHandler(webClient, userInfoUrl));\n\n    router.post(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/logout\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleLogout);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe index han­dler ex­poses an un­pro­tected re­source:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleIndex\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Welcome to Vert.x Keycloak Example\u0026lt;/h1\u0026gt;\u0026lt;br\u0026gt;\u0026lt;a href=\\\u0026quot;/protected\\\u0026quot;\u0026gt;Protected\u0026lt;/a\u0026gt;\u0026quot;\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"extract-user-information-from-the-openid-connect-id-token\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#extract-user-information-from-the-openid-connect-id-token\"\u003e\u003c/a\u003eExtract User Information from the OpenID Connect ID Token\u003c/h3\u003e\u003cp\u003eOur app ex­poses a sim­ple greet­ing page which shows some in­for­ma­tion about the user and pro­vides links to other pages.\u003c/p\u003e\u003cp\u003eThe user greet­ing han­dler is pro­tected by the Key­cloak OAuth2 / OpenID Con­nect in­te­gra­tion. To show in­for­ma­tion about\nthe cur­rent user, we first need to call the \u003ccode\u003ectx.user()\u003c/code\u003e method to get an user ob­ject we can work with.\nTo ac­cess the OAuth2 token in­for­ma­tion, we need to cast it to \u003ccode\u003eOAuth2TokenImpl\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eWe can ex­tract the user in­for­ma­tion like the user­name from the \u003ccode\u003eIDToken\u003c/code\u003e ex­posed by the user ob­ject via \u003ccode\u003euser.idToken().getString(\u0026quot;preferred_username\u0026quot;)\u003c/code\u003e.\nNote, there are many more claims like (name, email, give­nanme, fam­i­ly­name etc.) avail­able. The \u003ca href=\"https://openid.net/specs/openid-connect-core-1_0.html#Claims\"\u003eOpenID Con­nect Core Spec­i­fi­ca­tion\u003c/a\u003e con­tains a list of avail­able claims.\u003c/p\u003e\u003cp\u003eWe also gen­er­ate a list with links to the other pages which are sup­ported:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleGreet\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\n\n    String username = oAuth2Token.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;preferred_username\u0026quot;\u003c/span\u003e);\n\n    String greeting = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Hi %s @%s\u0026lt;/h1\u0026gt;\u0026lt;ul\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;li\u0026gt;\u0026lt;a href=\\\u0026quot;/protected/user\\\u0026quot;\u0026gt;User Area\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;li\u0026gt;\u0026lt;a href=\\\u0026quot;/protected/admin\\\u0026quot;\u0026gt;Admin Area\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;li\u0026gt;\u0026lt;a href=\\\u0026quot;/protected/userinfo\\\u0026quot;\u0026gt;User Info (Remote Call)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;/ul\u0026gt;\u0026quot;\u003c/span\u003e, username, Instant.now());\n\n    String logoutForm = createLogoutForm(ctx);\n\n    respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, greeting + logoutForm);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe user page han­dler shows in­for­ma­tion about the cur­rent user:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleUserPage\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\n\n    String username = user.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;preferred_username\u0026quot;\u003c/span\u003e);\n    String displayName = oAuth2Token.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e);\n\n    String content = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;User Page: %s (%s) @%s\u0026lt;/h1\u0026gt;\u0026lt;a href=\\\u0026quot;/protected\\\u0026quot;\u0026gt;Protected Area\u0026lt;/a\u0026gt;\u0026quot;\u003c/span\u003e,\n                                   username, displayName, Instant.now());\n    respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, content);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"authorization-checking-for-required-roles\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#authorization-checking-for-required-roles\"\u003e\u003c/a\u003eAuthorization: Checking for Required Roles\u003c/h3\u003e\u003cp\u003eOur app ex­poses a sim­ple admin page which shows some in­for­ma­tion for ad­mins, which should only be vis­i­ble for ad­mins. Thus we re­quire that users must have the \u003ccode\u003eadmin\u003c/code\u003e realm role in Key­cloak to be able to ac­cess the admin page.\u003c/p\u003e\u003cp\u003eThis is done via a call to \u003ccode\u003euser.isAuthorized(\u0026quot;realm:admin\u0026quot;, cb)\u003c/code\u003e. The han­dler func­tion \u003ccode\u003ecb\u003c/code\u003e ex­poses\nthe re­sult of the au­tho­riza­tion check via the \u003ccode\u003eAsyncResult\u0026lt;Boolean\u0026gt; res\u003c/code\u003e. If the cur­rent user has the\n\u003ccode\u003eadmin\u003c/code\u003e role then the re­sult is \u003ccode\u003etrue\u003c/code\u003e oth­er­wise \u003ccode\u003efalse\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleAdminPage\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\n\n    \u003cspan class=\"hljs-comment\"\u003e// check for realm-role \u0026quot;admin\u0026quot;\u003c/span\u003e\n    user.isAuthorized(\u003cspan class=\"hljs-string\"\u003e\u0026quot;realm:admin\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!res.succeeded() || !res.result()) {\n            respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Forbidden\u0026lt;/h1\u0026gt;\u0026quot;\u003c/span\u003e);\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n        }\n\n        String username = user.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;preferred_username\u0026quot;\u003c/span\u003e);\n\n        String content = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Admin Page: %s @%s\u0026lt;/h1\u0026gt;\u0026lt;a href=\\\u0026quot;/protected\\\u0026quot;\u0026gt;Protected Area\u0026lt;/a\u0026gt;\u0026quot;\u003c/span\u003e,\n                                        username, Instant.now());\n        respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, content);\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"call-services-protected-with-bearer-token\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#call-services-protected-with-bearer-token\"\u003e\u003c/a\u003eCall Services protected with Bearer Token\u003c/h4\u003e\u003cp\u003eOften we need to call other ser­vices from our web app that are pro­tected via Bearer Au­then­ti­ca­tion. This means\nthat we need a valid \u003ccode\u003eaccess token\u003c/code\u003e to ac­cess a re­source pro­vided on an­other server.\u003c/p\u003e\u003cp\u003eTo demon­strate this we use Key­cloak’s \u003ccode\u003e/userinfo\u003c/code\u003e end­point as a straw man to demon­strate back­end calls with a bearer token.\u003c/p\u003e\u003cp\u003eWe can ob­tain the cur­rent valid \u003ccode\u003eaccess token\u003c/code\u003e via \u003ccode\u003euser.opaqueAccessToken()\u003c/code\u003e.\nSince we use a \u003ccode\u003eWebClient\u003c/code\u003e to call the pro­tected end­point, we need to pass the \u003ccode\u003eaccess token\u003c/code\u003e\nvia the \u003ccode\u003eAuthorization\u003c/code\u003e header by call­ing \u003ccode\u003ebearerTokenAuthentication(user.opaqueAccessToken())\u003c/code\u003e\nin the cur­rent \u003ccode\u003eHttpRequest\u003c/code\u003e ob­ject:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Handler\u0026lt;RoutingContext\u0026gt; \u003cspan class=\"hljs-title\"\u003ecreateUserInfoHandler\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(WebClient webClient, String userInfoUrl)\u003c/span\u003e \u003c/span\u003e{\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (RoutingContext ctx) -\u0026gt; {\n\n        OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\n\n        URI userInfoEndpointUri = URI.create(userInfoUrl);\n        webClient\n            .get(userInfoEndpointUri.getPort(), userInfoEndpointUri.getHost(), userInfoEndpointUri.getPath())\n            \u003cspan class=\"hljs-comment\"\u003e// use the access token for calls to other services protected via JWT Bearer authentication\u003c/span\u003e\n            .bearerTokenAuthentication(user.opaqueAccessToken())\n            .as(BodyCodec.jsonObject())\n            .send(ar -\u0026gt; {\n\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!ar.succeeded()) {\n                    respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;{}\u0026quot;\u003c/span\u003e);\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n                }\n\n                JsonObject body = ar.result().body();\n                respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e, body.encode());\n            });\n    };\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"handle-logout\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#handle-logout\"\u003e\u003c/a\u003eHandle logout\u003c/h3\u003e\u003cp\u003eNow that we got a work­ing SSO login with au­tho­riza­tion, it would be great if we would allow users to lo­gout again.\nTo do this we can lever­age the built-​in OpenID Con­nect lo­gout func­tion­al­ity which can be called via \u003ccode\u003eoAuth2Token.logout(cb)\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThe han­dler func­tion \u003ccode\u003ecb\u003c/code\u003e ex­poses the re­sult of the lo­gout ac­tion via the \u003ccode\u003eAsyncResult\u0026lt;Void\u0026gt; res\u003c/code\u003e.\nIf the lo­gout was suc­cess­full we destory our ses­sion via \u003ccode\u003ectx.session().destroy()\u003c/code\u003e and redi­rect the user to the index page.\u003c/p\u003e\u003cp\u003eThe lo­gout form is gen­er­ated via the \u003ccode\u003ecreateLogoutForm\u003c/code\u003e method.\u003c/p\u003e\u003cp\u003eAs men­tioned ear­lier, we need to pro­tect our lo­gout form with a CSRF token to pre­vent \u003ca href=\"https://owasp.org/www-community/attacks/csrf\"\u003eCSRF at­tacks\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eNote: If we had end­points that would ac­cept data sent to the server, then we’d need to guard those end­points with an CSRF token as well.\u003c/p\u003e\u003cp\u003eWe need to ob­tain the gen­er­ated \u003ccode\u003eCSRFToken\u003c/code\u003e and ren­der it into a hid­den form input field that’s trans­fered via HTTP POST when the lo­gout form is sub­mit­ted:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleLogout\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\n    oAuth2Token.logout(res -\u0026gt; {\n\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!res.succeeded()) {\n            \u003cspan class=\"hljs-comment\"\u003e// the user might not have been logged out, to know why:\u003c/span\u003e\n            respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Logout failed %s\u0026lt;/h1\u0026gt;\u0026quot;\u003c/span\u003e, res.cause()));\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n        }\n\n        ctx.session().destroy();\n        ctx.response().putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;location\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/?logout=true\u0026quot;\u003c/span\u003e).setStatusCode(\u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e).end();\n    });\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e String \u003cspan class=\"hljs-title\"\u003ecreateLogoutForm\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    String csrfToken = ctx.get(CSRFHandler.DEFAULT_HEADER_NAME);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;form action=\\\u0026quot;/logout\\\u0026quot; method=\\\u0026quot;post\\\u0026quot;\u0026gt;\u0026quot;\u003c/span\u003e\n            + String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;input type=\\\u0026quot;hidden\\\u0026quot; name=\\\u0026quot;%s\\\u0026quot; value=\\\u0026quot;%s\\\u0026quot;\u0026gt;\u0026quot;\u003c/span\u003e, CSRFHandler.DEFAULT_HEADER_NAME, csrfToken)\n            + \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;button\u0026gt;Logout\u0026lt;/button\u0026gt;\u0026lt;/form\u0026gt;\u0026quot;\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSome ad­di­tional plumb­ing:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erespondWithOk\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx, String contentType, String content)\u003c/span\u003e \u003c/span\u003e{\n    respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, contentType, content);\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erespondWith\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx, \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e statusCode, String contentType, String content)\u003c/span\u003e \u003c/span\u003e{\n    ctx.request().response() \u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n            .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, contentType) \u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n            .setStatusCode(statusCode)\n            .end(content);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"more-examples\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#more-examples\"\u003e\u003c/a\u003eMore examples\u003c/h2\u003e\u003cp\u003eThis con­cludes the Key­cloak in­te­gra­tion ex­am­ple.\u003c/p\u003e\u003cp\u003eCheck out the com­plete ex­am­ple in \u003ca href=\"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx\"\u003ekeycloak-​vertx Ex­am­ples Repo\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThank you for your time, stay tuned for more up­dates! If you want to learn more about Key­cloak, feel free to reach out to me. You can find me via \u003ca href=\"https://twitter.com/thomasdarimont\"\u003ethomas­da­ri­mont on twit­ter\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eHappy Hack­ing!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"keycloak","tf":28},{"term":"user","tf":23},{"term":"app","tf":19},{"term":"openid","tf":17},{"term":"protect","tf":17},{"term":"need","tf":16},{"term":"via","tf":16},{"term":"inform","tf":15},{"term":"connect","tf":14},{"term":"logout","tf":14},{"term":"page","tf":14},{"term":"call","tf":10},{"term":"exampl","tf":10},{"term":"us","tf":9},{"term":"configur","tf":9},{"term":"token","tf":9},{"term":"handler","tf":9},{"term":"access","tf":8},{"term":"web","tf":8},{"term":"show","tf":8},{"term":"endpoint","tf":8},{"term":"provid","tf":7},{"term":"form","tf":7},{"term":"current","tf":7},{"term":"bearer","tf":6}]},{"filename":"blog/2019-10-22-send-web-requests-and-assert-results-with-vertx-junit5-web-client.mdx","date":"2019-10-22","slug":"send-web-requests-and-assert-results-with-vertx-junit5-web-client","meta":{"title":"Send web requests and assert results with vertx-junit5-web-client","category":"guides","authors":[{"name":"Francesco Guardiani","github_id":"slinkydeveloper"}],"summary":"In this blog post, you'll learn how to use the new vertx-junit5-web-client module to send web requests in your unit tests and to make assertions."},"readingTime":{"text":"2 min read","minutes":1.3,"time":78000,"words":260},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In the last Vert.x 3.8 re\\xADlease, we added a new mod\\xADule called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-junit5-web-client\"), \", that brings \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-web-client/java/\"\n  }), \"Vert.x Web Client\"), \" in\\xADjec\\xADtion\\ninto tests and pro\\xADvides an API called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestRequest\"), \" to sim\\xADplify the cre\\xADation and as\\xADser\\xADtions on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WebClient\"), \" re\\xADquests:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" io.vertx.junit5.web.TestRequest.*;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@ExtendWith({\\n  VertxExtension.class, // VertxExtension MUST be configured before VertxWebClientExtension\\n  VertxWebClientExtension.class\\n})\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"TestRequestExample\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"test1\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(WebClient client, VertxTestContext testContext)\"), \" \"), \"{\\n    testRequest(client, HttpMethod.GET, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Build the request\"), \"\\n      .with(\\n        queryParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"francesco\\\"\"), \"), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Add query param\"), \"\\n        requestHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"x-my\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"foo\\\"\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Add request header\"), \"\\n      )\\n      .expect(\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Assert that response is a JSON with a specific body\"), \"\\n        jsonBodyResponse(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"value\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello Francesco!\\\"\"), \")),\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Assert that response contains a particular header\"), \"\\n        responseHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"x-my\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bar\\\"\"), \")\\n      )\\n      .send(testContext); \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Complete (or fail) the VertxTestContext\"), \"\\n  }\\n\\n}\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"testRequest()\"), \" will use Vert.x Web Client to send the re\\xADquest. When the re\\xADsponse is re\\xADceived, It suc\\xADceds the test or it cor\\xADrectly prop\\xADa\\xADgates as\\xADser\\xADtion fail\\xADures, if any.\"), mdx(\"p\", null, \"You can also send mul\\xADti\\xADple re\\xADquests using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/apidocs/io/vertx/junit5/Checkpoint.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"Checkpoint\")), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" io.vertx.junit5.web.TestRequest.*;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@ExtendWith({\\n  VertxExtension.class, // VertxExtension MUST be configured before VertxWebClientExtension\\n  VertxWebClientExtension.class\\n})\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"MultiTestRequestExample\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"test2\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(WebClient client, VertxTestContext testContext)\"), \" \"), \"{\\n    Checkpoint checkpoint = testContext.checkpoint(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"2\"), \"); \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Create the Checkpoint to flag when request succeds\"), \"\\n\\n    testRequest(\\n        client    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Create the test request using WebClient APIs\"), \"\\n          .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \")\\n          .addQueryParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"francesco\\\"\"), \")\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"x-my\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"foo\\\"\"), \")\\n      )\\n      .expect(\\n        jsonBodyResponse(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"value\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello Francesco!\\\"\"), \")),\\n        responseHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"x-my\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bar\\\"\"), \")\\n      )\\n      .send(testContext, checkpoint); \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Pass the checkpoint to flag\"), \"\\n\\n    testRequest(\\n        client\\n          .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \")\\n          .addQueryParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"julien\\\"\"), \")\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"x-my\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"foo\\\"\"), \")\\n      )\\n      .expect(\\n        jsonBodyResponse(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"value\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello Julien!\\\"\"), \")),\\n        responseHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"x-my\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bar\\\"\"), \")\\n      )\\n      .send(testContext, checkpoint);\\n  }\\n\\n}\\n\")), mdx(\"p\", null, \"Look at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-junit5-web-client/java/\"\n  }), \"Vert.x JUnit 5 Web Client doc\\xADu\\xADmen\\xADta\\xADtion\"), \" for more de\\xADtails\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eIn the last Vert.x 3.8 re­lease, we added a new mod­ule called \u003ccode\u003evertx-junit5-web-client\u003c/code\u003e, that brings \u003ca href=\"https://vertx.io/docs/vertx-web-client/java/\"\u003eVert.x Web Client\u003c/a\u003e in­jec­tion\ninto tests and pro­vides an API called \u003ccode\u003eTestRequest\u003c/code\u003e to sim­plify the cre­ation and as­ser­tions on \u003ccode\u003eWebClient\u003c/code\u003e re­quests:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e io.vertx.junit5.web.TestRequest.*;\n\n\u003cspan class=\"hljs-meta\"\u003e@ExtendWith({\n  VertxExtension.class, // VertxExtension MUST be configured before VertxWebClientExtension\n  VertxWebClientExtension.class\n})\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestRequestExample\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etest1\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(WebClient client, VertxTestContext testContext)\u003c/span\u003e \u003c/span\u003e{\n    testRequest(client, HttpMethod.GET, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// Build the request\u003c/span\u003e\n      .with(\n        queryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;francesco\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// Add query param\u003c/span\u003e\n        requestHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-my\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// Add request header\u003c/span\u003e\n      )\n      .expect(\n        \u003cspan class=\"hljs-comment\"\u003e// Assert that response is a JSON with a specific body\u003c/span\u003e\n        jsonBodyResponse(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello Francesco!\u0026quot;\u003c/span\u003e)),\n        \u003cspan class=\"hljs-comment\"\u003e// Assert that response contains a particular header\u003c/span\u003e\n        responseHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-my\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;bar\u0026quot;\u003c/span\u003e)\n      )\n      .send(testContext); \u003cspan class=\"hljs-comment\"\u003e// Complete (or fail) the VertxTestContext\u003c/span\u003e\n  }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ccode\u003etestRequest()\u003c/code\u003e will use Vert.x Web Client to send the re­quest. When the re­sponse is re­ceived, It suc­ceds the test or it cor­rectly prop­a­gates as­ser­tion fail­ures, if any.\u003c/p\u003e\u003cp\u003eYou can also send mul­ti­ple re­quests using \u003ca href=\"https://vertx.io/docs/apidocs/io/vertx/junit5/Checkpoint.html\"\u003e\u003ccode\u003eCheckpoint\u003c/code\u003e\u003c/a\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e io.vertx.junit5.web.TestRequest.*;\n\n\u003cspan class=\"hljs-meta\"\u003e@ExtendWith({\n  VertxExtension.class, // VertxExtension MUST be configured before VertxWebClientExtension\n  VertxWebClientExtension.class\n})\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMultiTestRequestExample\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etest2\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(WebClient client, VertxTestContext testContext)\u003c/span\u003e \u003c/span\u003e{\n    Checkpoint checkpoint = testContext.checkpoint(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// Create the Checkpoint to flag when request succeds\u003c/span\u003e\n\n    testRequest(\n        client    \u003cspan class=\"hljs-comment\"\u003e// Create the test request using WebClient APIs\u003c/span\u003e\n          .get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e)\n          .addQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;francesco\u0026quot;\u003c/span\u003e)\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-my\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e)\n      )\n      .expect(\n        jsonBodyResponse(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello Francesco!\u0026quot;\u003c/span\u003e)),\n        responseHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-my\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;bar\u0026quot;\u003c/span\u003e)\n      )\n      .send(testContext, checkpoint); \u003cspan class=\"hljs-comment\"\u003e// Pass the checkpoint to flag\u003c/span\u003e\n\n    testRequest(\n        client\n          .get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e)\n          .addQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;julien\u0026quot;\u003c/span\u003e)\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-my\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e)\n      )\n      .expect(\n        jsonBodyResponse(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello Julien!\u0026quot;\u003c/span\u003e)),\n        responseHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-my\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;bar\u0026quot;\u003c/span\u003e)\n      )\n      .send(testContext, checkpoint);\n  }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLook at \u003ca href=\"https://vertx.io/docs/vertx-junit5-web-client/java/\"\u003eVert.x JUnit 5 Web Client doc­u­men­ta­tion\u003c/a\u003e for more de­tails\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"web","tf":3},{"term":"client","tf":3},{"term":"request","tf":3},{"term":"call","tf":2},{"term":"test","tf":2},{"term":"assert","tf":2},{"term":"us","tf":2},{"term":"send","tf":2},{"term":"last","tf":1},{"term":"releas","tf":1},{"term":"ad","tf":1},{"term":"new","tf":1},{"term":"modul","tf":1},{"term":"bring","tf":1},{"term":"inject","tf":1},{"term":"provid","tf":1},{"term":"api","tf":1},{"term":"simplifi","tf":1},{"term":"creation","tf":1},{"term":"will","tf":1},{"term":"respons","tf":1},{"term":"receiv","tf":1},{"term":"suc","tf":1},{"term":"correctli","tf":1},{"term":"propag","tf":1}]},{"filename":"blog/2018-12-13-vert-x-web-api-service-introduction.mdx","date":"2018-12-13","slug":"vert-x-web-api-service-introduction","meta":{"title":"Vert.x Web API Service Introduction","category":"guides","authors":[{"name":"Francesco Guardiani","github_id":"slinkydeveloper"}],"summary":"This blog post teaches you how to use the new module vertx-web-api-service to combine the Web Router and the OpenAPI Router Factory with service proxies."},"readingTime":{"text":"6 min read","minutes":5.555,"time":333299.99999999994,"words":1111},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Vert.x 3.6 in\\xADtro\\xADduces a new mod\\xADule called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-web-api-service\"), \". With the new Web API Ser\\xADvices you can eas\\xADily com\\xADbine the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-web/java/\"\n  }), \"Vert.x Web Router\"), \" and the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-web-api-contract/java/\"\n  }), \"Vert.x Ope\\xADnAPI Router Fac\\xADtory\"), \" fea\\xADtures with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-service-proxy/java/\"\n  }), \"Vert.x Ser\\xADvices on Event Bus\"), \".\"), mdx(\"h2\", {\n    \"id\": \"small-recap-on-openapi-and-vertx-web-api-contract\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#small-recap-on-openapi-and-vertx-web-api-contract\"\n  })), \"Small recap on OpenAPI and Vert.x Web API Contract\"), mdx(\"p\", null, \"Let\\u2019s start from this Ope\\xADnAPI de\\xADf\\xADi\\xADn\\xADi\\xADtion:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"openapi:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"3.0\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \".0\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"paths:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/api/transactions:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"get:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"operationId:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"getTransactionsList\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"description:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Get\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"transactions\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"list\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"filtered\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"by\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"sender\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"x-vertx-event-bus:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"transactions_manager.myapp\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"parameters:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"from\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"in:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"query\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"description:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Matches\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"exactly\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"email\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"from\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"style:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"form\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"explode:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"schema:\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"type:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"array\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"items:\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"type:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"string\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"responses:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"...\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"post:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"operationId:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"addTransaction\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"x-vertx-event-bus:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"transactions_manager.myapp\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"requestBody:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"required:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"content:\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"application/json:\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"schema:\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"$ref:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"#/components/schemas/Transaction\\\"\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"responses:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"...\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/api/transactions/{transactionId}:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"parameters:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"transactionId\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"in:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"path\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"required:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"schema:\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"type:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"string\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"put:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"operationId:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"updateTransaction\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"x-vertx-event-bus:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"transactions_manager.myapp\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"requestBody:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"required:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"content:\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"application/json:\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"schema:\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"$ref:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"#/components/schemas/Transaction\\\"\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"responses:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"...\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"delete:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"operationId:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"removeTransaction\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"x-vertx-event-bus:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"transactions_manager.myapp\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"responses:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"...\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"components:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"schemas:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"Transaction:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"...\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"Error:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"...\"), \"\\n\")), mdx(\"p\", null, \"We de\\xADfined \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getTransactionsList\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"addTransaction\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"updateTransaction\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"removeTransaction\"), \" op\\xADer\\xADa\\xADtions. Now with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OpenAPI3RouterFactory\"), \" we cre\\xADate a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \" that ac\\xADcepts this var\\xADi\\xADous op\\xADer\\xADa\\xADtion re\\xADquests:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"OpenAPI3RouterFactory.create(vertx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"src/main/resources/petstore.yaml\\\"\"), \", ar -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Spec loaded with success\"), \"\\n    OpenAPI3RouterFactory routerFactory = ar.result();\\n    routerFactory.addHandlerByOperationId(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"getTransactionsList\\\"\"), \", routingContext -\u003e {\\n      RequestParameters params = routingContext.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"parsedParameters\\\"\"), \");\\n      RequestParameter from = params.queryParameter(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"from\\\"\"), \");\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// getTransactionsList business logic\"), \"\\n    });\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// add handlers for addTransaction, updateTransaction and removeTransaction\"), \"\\n    Router router = routerFactory.getRouter();\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Something went wrong during router factory initialization\"), \"\\n    Throwable exception = ar.cause();\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Log exception, fail verticle deployment ... etc\"), \"\\n  }\\n});\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OpenAPI3RouterFactory\"), \" pro\\xADvides an easy way to cre\\xADate a spec\\xADi\\xADfi\\xADca\\xADtion com\\xADpli\\xADant \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \", but it doesn\\u2019t pro\\xADvide a mech\\xADa\\xADnism to de\\xADcou\\xADple the busi\\xADness logic from your op\\xADer\\xADa\\xADtion han\\xADdlers.\"), mdx(\"p\", null, \"In a typ\\xADi\\xADcal Vert.x ap\\xADpli\\xADca\\xADtion, when you re\\xADceive a re\\xADquest to your router, you would for\\xADward it to an event bus end\\xADpoint that per\\xADforms some ac\\xADtions and sends the re\\xADsult back to the op\\xADer\\xADa\\xADtion han\\xADdler.\"), mdx(\"p\", null, \"Vert.x Web API Ser\\xADvice sim\\xADpli\\xADfies that in\\xADte\\xADgra\\xADtion be\\xADtween \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RouterFactory\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"EventBus\"), \" with a new code gen\\xADer\\xADa\\xADtor. The final re\\xADsult is a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"loose cou\\xADpling\"), \" be\\xADtween the Web Router logic and your busi\\xADness logic.\"), mdx(\"h2\", {\n    \"id\": \"lets-get-started-with-vertx-web-api-services\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#lets-get-started-with-vertx-web-api-services\"\n  })), \"Let\\u2019s get started with Vert.x Web Api Services!\"), mdx(\"p\", null, \"To use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-web-api-service\"), \" you need to add a cou\\xADple of de\\xADpen\\xADden\\xADcies to your project. In a Maven POM file that would be:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-codegen\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.6.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"classifier\"), \"\u003e\"), \"processor\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"classifier\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-web-api-service\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.6.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"We will pro\\xADceed in this order:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Model the ser\\xADvice in\\xADter\\xADface\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Rewrite it to work with Web Api Ser\\xADvices\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Im\\xADple\\xADment the ser\\xADvice\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Mount the ser\\xADvice on the event bus\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use the router fac\\xADtory to build a router with han\\xADdlers that con\\xADnects to our event bus ser\\xADvices\")), mdx(\"h2\", {\n    \"id\": \"model-your-service\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#model-your-service\"\n  })), \"Model your service\"), mdx(\"p\", null, \"Let\\u2019s say that we want to model a ser\\xADvice that man\\xADages all op\\xADer\\xADa\\xADtions re\\xADgard\\xADing CRUD trans\\xADac\\xADtions. An ex\\xADam\\xADple in\\xADter\\xADface for this asyn\\xADchro\\xADnous ser\\xADvice could be:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"interface\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"TransactionsManagerService\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getTransactionsList\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(List\u003cString\u003e from, Handler\u003cAsyncResult\u003cList\u003cTransaction\u003e\u003e\u003e resultHandler)\")), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"addTransaction\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Transaction transaction, Handler\u003cAsyncResult\u003cTransaction\u003e\u003e resultHandler)\")), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"updateTransaction\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String transactionId, Transaction transaction, Handler\u003cAsyncResult\u003cTransaction\u003e\u003e resultHandler)\")), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"removeTransaction\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String transactionId, Handler\u003cAsyncResult\u003cInteger\u003e\u003e resultHandler)\")), \";\\n}\\n\")), mdx(\"p\", null, \"For each op\\xADer\\xADa\\xADtion, we have some pa\\xADra\\xADme\\xADters, de\\xADpend\\xADing on the op\\xADer\\xADa\\xADtion, and a call\\xADback (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"resultHandler\"), \") that should be called when the op\\xADer\\xADa\\xADtion suc\\xADceeds or fails.\"), mdx(\"p\", null, \"With \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-service-proxy/java/\"\n  }), \"Vert.x Ser\\xADvice Proxy\"), \", you can de\\xADfine an event bus ser\\xADvice with a Java in\\xADter\\xADface sim\\xADi\\xADlar to the one we just saw and then an\\xADno\\xADtate it with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@ProxyGen\"), \". This an\\xADno\\xADta\\xADtion will gen\\xADer\\xADate a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ser\\xADvice han\\xADdler\"), \" for the de\\xADfined ser\\xADvice that can be plugged to the event bus with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ServiceBinder\"), \". \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-web-api-service\"), \" works in a very sim\\xADi\\xADlar way: you need to an\\xADno\\xADtate the Java in\\xADter\\xADface with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@WebApiServiceGen\"), \" and it will gen\\xADer\\xADate the ser\\xADvice han\\xADdler for the event bus.\"), mdx(\"p\", null, \"Let\\u2019s rewrite the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TransactionsManagerService\"), \" to work with Web API Ser\\xADvice:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.ext.web.api.*;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.ext.web.api.generator.WebApiServiceGen;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@WebApiServiceGen\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"interface\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"TransactionsManagerService\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getTransactionsList\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(List\u003cString\u003e from, OperationRequest context, Handler\u003cAsyncResult\u003cOperationResponse\u003e\u003e resultHandler)\")), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"addTransaction\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Transaction body, OperationRequest context, Handler\u003cAsyncResult\u003cOperationResponse\u003e\u003e resultHandler)\")), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"updateTransaction\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String transactionId, Transaction body, OperationRequest context, Handler\u003cAsyncResult\u003cOperationResponse\u003e\u003e resultHandler)\")), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"removeTransaction\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String transactionId, OperationRequest context, Handler\u003cAsyncResult\u003cOperationResponse\u003e\u003e resultHandler)\")), \";\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Factory method to instantiate the implementation\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" TransactionsManagerService \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"create\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Vertx vertx)\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" TransactionsManagerServiceImpl(vertx);\\n  }\\n}\\n\\n\")), mdx(\"p\", null, \"First of all, look at the an\\xADno\\xADta\\xADtion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@WebApiServiceGen\"), \". This an\\xADno\\xADta\\xADtion will trig\\xADger the code gen\\xADer\\xADa\\xADtor that gen\\xADer\\xADates the event bus han\\xADdler for this ser\\xADvice. Each method has the same two last pa\\xADra\\xADme\\xADters:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"OperationRequest context\"), \": this data ob\\xADject con\\xADtains the head\\xADers and the pa\\xADra\\xADme\\xADters of the HTTP re\\xADquest\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Handler\u003cAsyncResult\u003cOperationResponse\u003e\u003e resultHandler\"), \": this call\\xADback ac\\xADcepts an \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"OperationResponse\"), \" data ob\\xADject that will en\\xADcap\\xADsu\\xADlate the body of the re\\xADsult, the sta\\xADtus code, the sta\\xADtus mes\\xADsage and the head\\xADers\")), mdx(\"p\", null, \"The gen\\xADer\\xADated han\\xADdler re\\xADceives only the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OperationRequest\"), \" data ob\\xADject and ex\\xADtracts from it all op\\xADer\\xADa\\xADtion pa\\xADra\\xADme\\xADters. For ex\\xADam\\xADple, when the router re\\xADceives a re\\xADquest at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getTransactionsList\"), \", it sends to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TransactionsManagerService\"), \" the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OperationRequest\"), \" con\\xADtain\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RequestParameters\"), \" map. From this map, the ser\\xADvice gen\\xADer\\xADated han\\xADdler ex\\xADtracts the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"from\"), \" pa\\xADra\\xADme\\xADter. \"), mdx(\"p\", null, \"There\\xADfore \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"op\\xADer\\xADa\\xADtion pa\\xADra\\xADme\\xADters names should match method pa\\xADra\\xADme\\xADter names\"), \".\"), mdx(\"p\", null, \"When you want to ex\\xADtract the body you must use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"body\"), \" key\\xADword. For more de\\xADtails, please refer to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-web-api-service/java/\"\n  }), \"doc\\xADu\\xADmen\\xADta\\xADtion\"), \".\"), mdx(\"h2\", {\n    \"id\": \"implement-the-service\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implement-the-service\"\n  })), \"Implement the service\"), mdx(\"p\", null, \"Now that you have your in\\xADter\\xADface, you can im\\xADple\\xADment the ser\\xADvice:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"TransactionsManagerServiceImpl\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"implements\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"TransactionsManagerService\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Vertx vertx;\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"TransactionsManagerServiceImpl\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Vertx vertx)\"), \" \"), \"{  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \".vertx = vertx;  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getTransactionsList\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(List\u003cString\u003e from, OperationRequest context, Handler\u003cAsyncResult\u003cOperationResponse\u003e\u003e resultHandler)\")), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Write your business logic here\"), \"\\n    resultHandler.handle(Future.succeededFuture(OperationResult.completedWithJson(resultJson)));\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Implement other operations\"), \"\\n\\n}\\n\")), mdx(\"p\", null, \"Check the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OperationResult\"), \" doc\\xADu\\xADmen\\xADta\\xADtion to look at var\\xADi\\xADous handy meth\\xADods to cre\\xADate a com\\xADplete re\\xADsponse.\"), mdx(\"h2\", {\n    \"id\": \"mount-the-service\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#mount-the-service\"\n  })), \"Mount the Service\"), mdx(\"p\", null, \"Now that you have your ser\\xADvice in\\xADter\\xADface and im\\xADple\\xADmen\\xADta\\xADtion, you can mount your ser\\xADvice with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ServiceBinder\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"ServiceBinder serviceBinder = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ServiceBinder(vertx);\\n\\nTransactionsManagerService transactionsManagerService = TransactionsManagerService.create(vertx);\\nregisteredConsumers.add(\\n  serviceBinder\\n    .setAddress(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"transactions_manager.myapp\\\"\"), \")\\n    .register(TransactionsManagerService.class, transactionsManagerService)\\n);\\n\")), mdx(\"h2\", {\n    \"id\": \"and-the-router-factory\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#and-the-router-factory\"\n  })), \"And the Router Factory?\"), mdx(\"p\", null, \"The ser\\xADvice is up and run\\xADning, but we need to con\\xADnect it to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \" built by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OpenAPI3RouterFactory\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"OpenAPI3RouterFactory.create(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \".vertx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my_spec.yaml\\\"\"), \", openAPI3RouterFactoryAsyncResult -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (openAPI3RouterFactoryAsyncResult.succeeded()) {\\n    OpenAPI3RouterFactory routerFactory = openAPI3RouterFactoryAsyncResult.result();\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Mount services on event bus based on extensions\"), \"\\n    routerFactory.mountServicesFromExtensions(); \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c- Pure magic happens!\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Generate the router\"), \"\\n    Router router = routerFactory.getRouter();\\n    server = vertx.createHttpServer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" HttpServerOptions().setPort(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \"));\\n    server.requestHandler(router).listen();\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Initialization completed\"), \"\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Something went wrong during router factory initialization\"), \"\\n  }\\n});\\n\")), mdx(\"p\", null, \"In our spec ex\\xADam\\xADple we added an ex\\xADten\\xADsion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x-vertx-event-bus\"), \" to each op\\xADer\\xADa\\xADtion that spec\\xADi\\xADfies the ad\\xADdress of the ser\\xADvice. Using this ex\\xADten\\xADsion, you only need to call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OpenAPI3RouterFactory.mountServicesFromExtensions()\"), \" to trig\\xADger a scan of all op\\xADer\\xADa\\xADtions and mount all found ser\\xADvice ad\\xADdresses. For each op\\xADer\\xADa\\xADtion that con\\xADtains \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x-vertx-event-bus\"), \", the Router Fac\\xADtory in\\xADstan\\xADti\\xADates an han\\xADdler that routes the in\\xADcom\\xADing re\\xADquests to the ad\\xADdress you spec\\xADi\\xADfied.\"), mdx(\"p\", null, \"This is one of the meth\\xADods you can use to match ser\\xADvices with router op\\xADer\\xADa\\xADtion han\\xADdlers. Check the doc\\xADu\\xADmen\\xADta\\xADtion for all de\\xADtails.\"), mdx(\"h2\", {\n    \"id\": \"more-examples\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#more-examples\"\n  })), \"More examples\"), mdx(\"p\", null, \"Check out the com\\xADplete ex\\xADam\\xADple in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/tree/master/web-api-service-example\"\n  }), \"vertx-\\u200Bexamples repo\"), \".\"), mdx(\"p\", null, \"Thanks you for your time, stay tuned for more up\\xADdates! And please pro\\xADvide feed\\xADback about this new pack\\xADage!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eVert.x 3.6 in­tro­duces a new mod­ule called \u003ccode\u003evertx-web-api-service\u003c/code\u003e. With the new Web API Ser­vices you can eas­ily com­bine the \u003ca href=\"https://vertx.io/docs/vertx-web/java/\"\u003eVert.x Web Router\u003c/a\u003e and the \u003ca href=\"https://vertx.io/docs/vertx-web-api-contract/java/\"\u003eVert.x Ope­nAPI Router Fac­tory\u003c/a\u003e fea­tures with \u003ca href=\"https://vertx.io/docs/vertx-service-proxy/java/\"\u003eVert.x Ser­vices on Event Bus\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"small-recap-on-openapi-and-vertx-web-api-contract\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#small-recap-on-openapi-and-vertx-web-api-contract\"\u003e\u003c/a\u003eSmall recap on OpenAPI and Vert.x Web API Contract\u003c/h2\u003e\u003cp\u003eLet’s start from this Ope­nAPI de­f­i­n­i­tion:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eopenapi:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003epaths:\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e/api/transactions:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eget:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eoperationId:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003egetTransactionsList\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003edescription:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eGet\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etransactions\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003elist\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003efiltered\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eby\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esender\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ex-vertx-event-bus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etransactions_manager.myapp\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eparameters:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003efrom\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003ein:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003equery\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003edescription:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMatches\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eexactly\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ethe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eemail\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003efrom\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003estyle:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eform\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eexplode:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eschema:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003earray\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eitems:\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003estring\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eresponses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003epost:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eoperationId:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eaddTransaction\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ex-vertx-event-bus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etransactions_manager.myapp\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erequestBody:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003erequired:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003econtent:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eapplication/json:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eschema:\u003c/span\u003e\n              \u003cspan class=\"hljs-string\"\u003e$ref:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;#/components/schemas/Transaction\u0026quot;\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eresponses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e...\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e/api/transactions/{transactionId}:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eparameters:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etransactionId\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ein:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epath\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003erequired:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eschema:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003estring\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eput:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eoperationId:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eupdateTransaction\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ex-vertx-event-bus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etransactions_manager.myapp\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erequestBody:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003erequired:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003econtent:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eapplication/json:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eschema:\u003c/span\u003e\n              \u003cspan class=\"hljs-string\"\u003e$ref:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;#/components/schemas/Transaction\u0026quot;\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eresponses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003edelete:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eoperationId:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eremoveTransaction\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ex-vertx-event-bus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etransactions_manager.myapp\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eresponses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e...\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ecomponents:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eschemas:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eTransaction:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eError:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e...\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe de­fined \u003ccode\u003egetTransactionsList\u003c/code\u003e, \u003ccode\u003eaddTransaction\u003c/code\u003e, \u003ccode\u003eupdateTransaction\u003c/code\u003e and \u003ccode\u003eremoveTransaction\u003c/code\u003e op­er­a­tions. Now with \u003ccode\u003eOpenAPI3RouterFactory\u003c/code\u003e we cre­ate a \u003ccode\u003eRouter\u003c/code\u003e that ac­cepts this var­i­ous op­er­a­tion re­quests:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eOpenAPI3RouterFactory.create(vertx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;src/main/resources/petstore.yaml\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Spec loaded with success\u003c/span\u003e\n    OpenAPI3RouterFactory routerFactory = ar.result();\n    routerFactory.addHandlerByOperationId(\u003cspan class=\"hljs-string\"\u003e\u0026quot;getTransactionsList\u0026quot;\u003c/span\u003e, routingContext -\u0026gt; {\n      RequestParameters params = routingContext.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;parsedParameters\u0026quot;\u003c/span\u003e);\n      RequestParameter from = params.queryParameter(\u003cspan class=\"hljs-string\"\u003e\u0026quot;from\u0026quot;\u003c/span\u003e);\n      \u003cspan class=\"hljs-comment\"\u003e// getTransactionsList business logic\u003c/span\u003e\n    });\n    \u003cspan class=\"hljs-comment\"\u003e// add handlers for addTransaction, updateTransaction and removeTransaction\u003c/span\u003e\n    Router router = routerFactory.getRouter();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Something went wrong during router factory initialization\u003c/span\u003e\n    Throwable exception = ar.cause();\n    \u003cspan class=\"hljs-comment\"\u003e// Log exception, fail verticle deployment ... etc\u003c/span\u003e\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ccode\u003eOpenAPI3RouterFactory\u003c/code\u003e pro­vides an easy way to cre­ate a spec­i­fi­ca­tion com­pli­ant \u003ccode\u003eRouter\u003c/code\u003e, but it doesn’t pro­vide a mech­a­nism to de­cou­ple the busi­ness logic from your op­er­a­tion han­dlers.\u003c/p\u003e\u003cp\u003eIn a typ­i­cal Vert.x ap­pli­ca­tion, when you re­ceive a re­quest to your router, you would for­ward it to an event bus end­point that per­forms some ac­tions and sends the re­sult back to the op­er­a­tion han­dler.\u003c/p\u003e\u003cp\u003eVert.x Web API Ser­vice sim­pli­fies that in­te­gra­tion be­tween \u003ccode\u003eRouterFactory\u003c/code\u003e and \u003ccode\u003eEventBus\u003c/code\u003e with a new code gen­er­a­tor. The final re­sult is a \u003cem\u003eloose cou­pling\u003c/em\u003e be­tween the Web Router logic and your busi­ness logic.\u003c/p\u003e\u003ch2 id=\"lets-get-started-with-vertx-web-api-services\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#lets-get-started-with-vertx-web-api-services\"\u003e\u003c/a\u003eLet’s get started with Vert.x Web Api Services!\u003c/h2\u003e\u003cp\u003eTo use \u003ccode\u003evertx-web-api-service\u003c/code\u003e you need to add a cou­ple of de­pen­den­cies to your project. In a Maven POM file that would be:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-codegen\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.6.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eclassifier\u003c/span\u003e\u0026gt;\u003c/span\u003eprocessor\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eclassifier\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-web-api-service\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.6.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe will pro­ceed in this order:\u003c/p\u003e\u003col\u003e\u003cli\u003eModel the ser­vice in­ter­face\u003c/li\u003e\u003cli\u003eRewrite it to work with Web Api Ser­vices\u003c/li\u003e\u003cli\u003eIm­ple­ment the ser­vice\u003c/li\u003e\u003cli\u003eMount the ser­vice on the event bus\u003c/li\u003e\u003cli\u003eUse the router fac­tory to build a router with han­dlers that con­nects to our event bus ser­vices\u003c/li\u003e\u003c/ol\u003e\u003ch2 id=\"model-your-service\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#model-your-service\"\u003e\u003c/a\u003eModel your service\u003c/h2\u003e\u003cp\u003eLet’s say that we want to model a ser­vice that man­ages all op­er­a­tions re­gard­ing CRUD trans­ac­tions. An ex­am­ple in­ter­face for this asyn­chro­nous ser­vice could be:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTransactionsManagerService\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetTransactionsList\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(List\u0026lt;String\u0026gt; from, Handler\u0026lt;AsyncResult\u0026lt;List\u0026lt;Transaction\u0026gt;\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eaddTransaction\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Transaction transaction, Handler\u0026lt;AsyncResult\u0026lt;Transaction\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eupdateTransaction\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String transactionId, Transaction transaction, Handler\u0026lt;AsyncResult\u0026lt;Transaction\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eremoveTransaction\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String transactionId, Handler\u0026lt;AsyncResult\u0026lt;Integer\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFor each op­er­a­tion, we have some pa­ra­me­ters, de­pend­ing on the op­er­a­tion, and a call­back (\u003ccode\u003eresultHandler\u003c/code\u003e) that should be called when the op­er­a­tion suc­ceeds or fails.\u003c/p\u003e\u003cp\u003eWith \u003ca href=\"https://vertx.io/docs/vertx-service-proxy/java/\"\u003eVert.x Ser­vice Proxy\u003c/a\u003e, you can de­fine an event bus ser­vice with a Java in­ter­face sim­i­lar to the one we just saw and then an­no­tate it with \u003ccode\u003e@ProxyGen\u003c/code\u003e. This an­no­ta­tion will gen­er­ate a \u003cem\u003eser­vice han­dler\u003c/em\u003e for the de­fined ser­vice that can be plugged to the event bus with \u003ccode\u003eServiceBinder\u003c/code\u003e. \u003ccode\u003evertx-web-api-service\u003c/code\u003e works in a very sim­i­lar way: you need to an­no­tate the Java in­ter­face with \u003ccode\u003e@WebApiServiceGen\u003c/code\u003e and it will gen­er­ate the ser­vice han­dler for the event bus.\u003c/p\u003e\u003cp\u003eLet’s rewrite the \u003ccode\u003eTransactionsManagerService\u003c/code\u003e to work with Web API Ser­vice:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.ext.web.api.*;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.ext.web.api.generator.WebApiServiceGen;\n\n\u003cspan class=\"hljs-meta\"\u003e@WebApiServiceGen\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTransactionsManagerService\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetTransactionsList\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(List\u0026lt;String\u0026gt; from, OperationRequest context, Handler\u0026lt;AsyncResult\u0026lt;OperationResponse\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eaddTransaction\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Transaction body, OperationRequest context, Handler\u0026lt;AsyncResult\u0026lt;OperationResponse\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eupdateTransaction\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String transactionId, Transaction body, OperationRequest context, Handler\u0026lt;AsyncResult\u0026lt;OperationResponse\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eremoveTransaction\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String transactionId, OperationRequest context, Handler\u0026lt;AsyncResult\u0026lt;OperationResponse\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-comment\"\u003e// Factory method to instantiate the implementation\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e TransactionsManagerService \u003cspan class=\"hljs-title\"\u003ecreate\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Vertx vertx)\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TransactionsManagerServiceImpl(vertx);\n  }\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFirst of all, look at the an­no­ta­tion \u003ccode\u003e@WebApiServiceGen\u003c/code\u003e. This an­no­ta­tion will trig­ger the code gen­er­a­tor that gen­er­ates the event bus han­dler for this ser­vice. Each method has the same two last pa­ra­me­ters:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003eOperationRequest context\u003c/code\u003e: this data ob­ject con­tains the head­ers and the pa­ra­me­ters of the HTTP re­quest\u003c/li\u003e\u003cli\u003e\u003ccode\u003eHandler\u0026lt;AsyncResult\u0026lt;OperationResponse\u0026gt;\u0026gt; resultHandler\u003c/code\u003e: this call­back ac­cepts an \u003ccode\u003eOperationResponse\u003c/code\u003e data ob­ject that will en­cap­su­late the body of the re­sult, the sta­tus code, the sta­tus mes­sage and the head­ers\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe gen­er­ated han­dler re­ceives only the \u003ccode\u003eOperationRequest\u003c/code\u003e data ob­ject and ex­tracts from it all op­er­a­tion pa­ra­me­ters. For ex­am­ple, when the router re­ceives a re­quest at \u003ccode\u003egetTransactionsList\u003c/code\u003e, it sends to \u003ccode\u003eTransactionsManagerService\u003c/code\u003e the \u003ccode\u003eOperationRequest\u003c/code\u003e con­tain­ing the \u003ccode\u003eRequestParameters\u003c/code\u003e map. From this map, the ser­vice gen­er­ated han­dler ex­tracts the \u003ccode\u003efrom\u003c/code\u003e pa­ra­me­ter. \u003c/p\u003e\u003cp\u003eThere­fore \u003cstrong\u003eop­er­a­tion pa­ra­me­ters names should match method pa­ra­me­ter names\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eWhen you want to ex­tract the body you must use \u003ccode\u003ebody\u003c/code\u003e key­word. For more de­tails, please refer to the \u003ca href=\"https://vertx.io/docs/vertx-web-api-service/java/\"\u003edoc­u­men­ta­tion\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"implement-the-service\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implement-the-service\"\u003e\u003c/a\u003eImplement the service\u003c/h2\u003e\u003cp\u003eNow that you have your in­ter­face, you can im­ple­ment the ser­vice:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTransactionsManagerServiceImpl\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTransactionsManagerService\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Vertx vertx;\n\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTransactionsManagerServiceImpl\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Vertx vertx)\u003c/span\u003e \u003c/span\u003e{  \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.vertx = vertx;  }\n\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetTransactionsList\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(List\u0026lt;String\u0026gt; from, OperationRequest context, Handler\u0026lt;AsyncResult\u0026lt;OperationResponse\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Write your business logic here\u003c/span\u003e\n    resultHandler.handle(Future.succeededFuture(OperationResult.completedWithJson(resultJson)));\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Implement other operations\u003c/span\u003e\n\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCheck the \u003ccode\u003eOperationResult\u003c/code\u003e doc­u­men­ta­tion to look at var­i­ous handy meth­ods to cre­ate a com­plete re­sponse.\u003c/p\u003e\u003ch2 id=\"mount-the-service\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#mount-the-service\"\u003e\u003c/a\u003eMount the Service\u003c/h2\u003e\u003cp\u003eNow that you have your ser­vice in­ter­face and im­ple­men­ta­tion, you can mount your ser­vice with \u003ccode\u003eServiceBinder\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eServiceBinder serviceBinder = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ServiceBinder(vertx);\n\nTransactionsManagerService transactionsManagerService = TransactionsManagerService.create(vertx);\nregisteredConsumers.add(\n  serviceBinder\n    .setAddress(\u003cspan class=\"hljs-string\"\u003e\u0026quot;transactions_manager.myapp\u0026quot;\u003c/span\u003e)\n    .register(TransactionsManagerService.class, transactionsManagerService)\n);\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"and-the-router-factory\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#and-the-router-factory\"\u003e\u003c/a\u003eAnd the Router Factory?\u003c/h2\u003e\u003cp\u003eThe ser­vice is up and run­ning, but we need to con­nect it to the \u003ccode\u003eRouter\u003c/code\u003e built by \u003ccode\u003eOpenAPI3RouterFactory\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eOpenAPI3RouterFactory.create(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.vertx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my_spec.yaml\u0026quot;\u003c/span\u003e, openAPI3RouterFactoryAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (openAPI3RouterFactoryAsyncResult.succeeded()) {\n    OpenAPI3RouterFactory routerFactory = openAPI3RouterFactoryAsyncResult.result();\n    \u003cspan class=\"hljs-comment\"\u003e// Mount services on event bus based on extensions\u003c/span\u003e\n    routerFactory.mountServicesFromExtensions(); \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;- Pure magic happens!\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Generate the router\u003c/span\u003e\n    Router router = routerFactory.getRouter();\n    server = vertx.createHttpServer(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HttpServerOptions().setPort(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e));\n    server.requestHandler(router).listen();\n    \u003cspan class=\"hljs-comment\"\u003e// Initialization completed\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Something went wrong during router factory initialization\u003c/span\u003e\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn our spec ex­am­ple we added an ex­ten­sion \u003ccode\u003ex-vertx-event-bus\u003c/code\u003e to each op­er­a­tion that spec­i­fies the ad­dress of the ser­vice. Using this ex­ten­sion, you only need to call \u003ccode\u003eOpenAPI3RouterFactory.mountServicesFromExtensions()\u003c/code\u003e to trig­ger a scan of all op­er­a­tions and mount all found ser­vice ad­dresses. For each op­er­a­tion that con­tains \u003ccode\u003ex-vertx-event-bus\u003c/code\u003e, the Router Fac­tory in­stan­ti­ates an han­dler that routes the in­com­ing re­quests to the ad­dress you spec­i­fied.\u003c/p\u003e\u003cp\u003eThis is one of the meth­ods you can use to match ser­vices with router op­er­a­tion han­dlers. Check the doc­u­men­ta­tion for all de­tails.\u003c/p\u003e\u003ch2 id=\"more-examples\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#more-examples\"\u003e\u003c/a\u003eMore examples\u003c/h2\u003e\u003cp\u003eCheck out the com­plete ex­am­ple in \u003ca href=\"https://github.com/vert-x3/vertx-examples/tree/master/web-api-service-example\"\u003evertx-​examples repo\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThanks you for your time, stay tuned for more up­dates! And please pro­vide feed­back about this new pack­age!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"servic","tf":29},{"term":"oper","tf":14},{"term":"router","tf":10},{"term":"handler","tf":10},{"term":"web","tf":8},{"term":"event","tf":8},{"term":"bu","tf":8},{"term":"gener","tf":7},{"term":"paramet","tf":7},{"term":"api","tf":6},{"term":"interfac","tf":6},{"term":"exampl","tf":6},{"term":"request","tf":5},{"term":"us","tf":5},{"term":"will","tf":5},{"term":"annot","tf":5},{"term":"new","tf":4},{"term":"factori","tf":4},{"term":"let","tf":4},{"term":"need","tf":4},{"term":"implement","tf":4},{"term":"mount","tf":4},{"term":"method","tf":4},{"term":"call","tf":3},{"term":"openapi","tf":3}]},{"filename":"blog/2018-12-10-http-response-validation-with-the-vert-x-web-client.mdx","date":"2018-12-10","slug":"http-response-validation-with-the-vert-x-web-client","meta":{"title":"HTTP response validation with the Vert.x Web Client","category":"guides","authors":[{"name":"Thomas Segismont","github_id":"tsegismont"}],"summary":"Learn how to use response predicates from the Vert.x Web module to validate HTTP responses and to automatically generate error messages."},"readingTime":{"text":"4 min read","minutes":3.09,"time":185399.99999999997,"words":618},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"By de\\xADfault, a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/vertx-web-client/java/\"\n  }), \"Vert.x Web Client\"), \" re\\xADquest ends with an error only if some\\xADthing wrong hap\\xADpens at the net\\xADwork level.\\nIn other words, a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"404 Not Found\"), \" re\\xADsponse, or a re\\xADsponse with the wrong con\\xADtent type, are \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not\"), \" con\\xADsid\\xADered as fail\\xADures.\"), mdx(\"p\", null, \"Hence, you would usu\\xADally per\\xADform san\\xADity checks man\\xADu\\xADally after the re\\xADsponse is re\\xADceived:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"client\\n  .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar\"), \" -\u003e {\\n    if (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar.succeeded\"), \"()) {\\n      HttpResponse\u003cBuffer\u003e response = ar.result()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n      if (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"response.statusCode\"), \"() == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \" \u0026\u0026 response.getHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \").equals(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \")) {\\n        // Decode the body as a json object\\n        JsonObject body = response.bodyAsJsonObject()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n      } else {\\n        System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Something went wrong \\\"\"), \" + response.statusCode())\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n      }\\n    } else {\\n      System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Something went wrong \\\"\"), \" + ar.cause().getMessage())\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n    }\\n  })\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\")), mdx(\"p\", null, \"Start\\xADing with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/blog/eclipse-vert-x-3-6-0-released/\"\n  }), \"Vert.x 3.6\"), \", you can can trade flex\\xADi\\xADbil\\xADity for clar\\xADity and con\\xADcise\\xADness using \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADsponse pred\\xADi\\xADcates\"), \".\"), mdx(\"h2\", {\n    \"id\": \"response-predicates\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#response-predicates\"\n  })), \"Response predicates\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html\"\n  }), \"Re\\xADsponse pred\\xADi\\xADcates\"), \" can fail a re\\xADquest when the re\\xADsponse does not match cri\\xADte\\xADrion.\"), mdx(\"p\", null, \"The Web Client mod\\xADule comes with a set of ready-\\u200Bto-use pred\\xADi\\xADcates:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"client\\n  .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .expect(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ResponsePredicate.SC_SUCCESS\"), \")\\n  .expect(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ResponsePredicate.JSON\"), \")\\n  .send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar\"), \" -\u003e {\\n    if (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar.succeeded\"), \"()) {\\n      HttpResponse\u003cBuffer\u003e response = ar.result()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n      // Safely decode the body as a json object\\n      JsonObject body = response.bodyAsJsonObject()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n    } else {\\n      System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Something went wrong \\\"\"), \" + ar.cause().getMessage())\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n    }\\n  })\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\\n\")), mdx(\"p\", null, \"The web is full of HTTP/JSON end\\xADpoints, so there is no doubt the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ResponsePredicate.SC_SUCCESS\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ResponsePredicate.JSON\"), \" can be handy.\"), mdx(\"p\", null, \"Nev\\xADer\\xADthe\\xADless, you might also need to check that the sta\\xADtus code is whithin a spe\\xADcific range:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scheme\"\n  }), \"client\\n  .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .expect(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ResponsePredicate.status\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"200\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"202\"), \"))\\n  .send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar\"), \" -\u003e {\\n    // ....\\n  })\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\")), mdx(\"p\", null, \"Or that the con\\xADtent is of a spe\\xADcific type: \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"client\\n  .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .expect(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ResponsePredicate.contentType\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"some/content-type\\\"\"), \"))\\n  .send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar\"), \" -\u003e {\\n    // ....\\n  })\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\")), mdx(\"p\", null, \"Please refer to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"ResponsePredicate\"), \" doc\\xADu\\xADmen\\xADta\\xADtion\"), \" for a full list of pre\\xADde\\xADfined pred\\xADi\\xADcates.\"), mdx(\"h3\", {\n    \"id\": \"custom-predicates\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#custom-predicates\"\n  })), \"Custom predicates\"), mdx(\"p\", null, \"Even\\xADtu\\xADally, pred\\xADi\\xADcates were not de\\xADsigned for sta\\xADtus code and con\\xADtent type check\\xADing only, so feel free to cre\\xADate your own val\\xADi\\xADda\\xADtion code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"// Check CORS header allowing to do POST\\nFunction\u003cHttpResponse\u003cVoid\u003e, ResponsePredicateResult\u003e methodsPredicate = resp -\u003e {\\n  String methods = resp.getHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Access-Control-Allow-Methods\\\"\"), \")\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n  if (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"methods\"), \" != null) {\\n    if (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"methods.contains\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"POST\\\"\"), \")) {\\n      return ResponsePredicateResult.success()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n    }\\n  }\\n  return ResponsePredicateResult.failure(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Does not work\\\"\"), \")\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n}\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\\n// Send pre-flight CORS request\\nclient\\n  .request(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"HttpMethod.OPTIONS\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Origin\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Server-b.com\\\"\"), \")\\n  .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Access-Control-Request-Method\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"POST\\\"\"), \")\\n  .expect(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"methodsPredicate\"), \")\\n  .send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar\"), \" -\u003e {\\n    if (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ar.succeeded\"), \"()) {\\n      // Process the POST request now\\n    } else {\\n      System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Something went wrong \\\"\"), \" + ar.cause().getMessage())\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n    }\\n  })\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\")), mdx(\"p\", null, \"Note that re\\xADsponse pred\\xADi\\xADcates are eval\\xADu\\xADated \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"be\\xADfore\"), \" the re\\xADsponse body is re\\xADceived.\\nThere\\xADfore \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"you can\\u2019t in\\xADspect the re\\xADsponse body\"), \" in a pred\\xADi\\xADcate test func\\xADtion, only sta\\xADtus code, sta\\xADtus mes\\xADsage and re\\xADsponse head\\xADers.\"), mdx(\"h2\", {\n    \"id\": \"dealing-with-failures\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#dealing-with-failures\"\n  })), \"Dealing with failures\"), mdx(\"p\", null, \"By de\\xADfault, re\\xADsponse pred\\xADi\\xADcates (in\\xADclud\\xADing the pre\\xADde\\xADfined ones) use a generic error con\\xADverter which dis\\xADcards the re\\xADsponse body and con\\xADveys a sim\\xADple mes\\xADsage.\\nYou can cus\\xADtomize the ex\\xADcep\\xADtion class by chang\\xADing the error con\\xADverter:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"ResponsePredicate predicate = ResponsePredicate.create(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"ResponsePredicate.SC_SUCCESS\"), \", result -\u003e {\\n  return new MyCustomException(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"result.message\"), \"())\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n})\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\")), mdx(\"p\", null, \"Be\\xADware that cre\\xADat\\xADing ex\\xADcep\\xADtions in Java comes with the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"per\\xADfor\\xADmance cost\"), \" of cap\\xADtur\\xADing the call stack.\\nThe generic error con\\xADverter gen\\xADer\\xADates ex\\xADcep\\xADtions that do not cap\\xADture it.\"), mdx(\"h3\", {\n    \"id\": \"reading-details-in-error-responses\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#reading-details-in-error-responses\"\n  })), \"Reading details in error responses\"), mdx(\"p\", null, \"Many web APIs pro\\xADvide de\\xADtails in error re\\xADsponses.\\nFor ex\\xADam\\xADple, the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.marvel.com/docs\"\n  }), \"Mar\\xADvel API\"), \" uses this JSON ob\\xADject for\\xADmat:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"code\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"InvalidCredentials\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"message\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"The passed API key is invalid.\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"To avoid los\\xADing this in\\xADfor\\xADma\\xADtion, it is pos\\xADsi\\xADble to wait for the re\\xADsponse body to be fully re\\xADceived be\\xADfore the error con\\xADverter is called:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-reasonml\"\n  }), \"ErrorConverter converter = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-module-access\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-module\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-identifier\"\n  }), \"ErrorConverter\"), \".\")), \"create\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"FullBody(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"result\"), \" -\u003e {\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-operator\"\n  }), \"/\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-operator\"\n  }), \"/\"), \" Invoked \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"after\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"response\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"body\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"is\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"fully\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"received\"), \"\\n  HttpResponse\u003cBuffer\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"response\"), \" = \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"result\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"response\"), \"()\"), \";\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (response.get\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"Header(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \")\"), \".equals(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \")) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Error body is JSON data\"), \"\\n    JsonObject body = response.body\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"AsJsonObject()\"), \";\\n    return \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"MyCustomException(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"body\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"getString\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"code\\\"\"), \")\"), \", body.get\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"String(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"message\\\"\"), \")\"), \");\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Fallback to defaut message\"), \"\\n  return \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"MyCustomException(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"result\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"message\"), \"()\"), \");\\n});\\n\\nResponsePredicate predicate = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-module-access\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-module\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-identifier\"\n  }), \"ResponsePredicate\"), \".\")), \"create(ResponsePredicate.SC_SUCCESS, converter);\\n\")), mdx(\"p\", null, \"That\\u2019s it! Feel free to com\\xADment here or ask ques\\xADtions on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/community\"\n  }), \"com\\xADmu\\xADnity chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eBy de­fault, a \u003ca href=\"/docs/vertx-web-client/java/\"\u003eVert.x Web Client\u003c/a\u003e re­quest ends with an error only if some­thing wrong hap­pens at the net­work level.\nIn other words, a \u003ccode\u003e404 Not Found\u003c/code\u003e re­sponse, or a re­sponse with the wrong con­tent type, are \u003cstrong\u003enot\u003c/strong\u003e con­sid­ered as fail­ures.\u003c/p\u003e\u003cp\u003eHence, you would usu­ally per­form san­ity checks man­u­ally after the re­sponse is re­ceived:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-clojure\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .send(\u003cspan class=\"hljs-name\"\u003ear\u003c/span\u003e -\u0026gt; {\n    if (\u003cspan class=\"hljs-name\"\u003ear.succeeded\u003c/span\u003e()) {\n      HttpResponse\u0026lt;Buffer\u0026gt; response = ar.result()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n      if (\u003cspan class=\"hljs-name\"\u003eresponse.statusCode\u003c/span\u003e() == \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e \u0026amp;\u0026amp; response.getHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e).equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)) {\n        // Decode the body as a json object\n        JsonObject body = response.bodyAsJsonObject()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n      } else {\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + response.statusCode())\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n      }\n    } else {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + ar.cause().getMessage())\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n    }\n  })\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eStart­ing with \u003ca href=\"/blog/eclipse-vert-x-3-6-0-released/\"\u003eVert.x 3.6\u003c/a\u003e, you can can trade flex­i­bil­ity for clar­ity and con­cise­ness using \u003cem\u003ere­sponse pred­i­cates\u003c/em\u003e.\u003c/p\u003e\u003ch2 id=\"response-predicates\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#response-predicates\"\u003e\u003c/a\u003eResponse predicates\u003c/h2\u003e\u003cp\u003e\u003ca href=\"/docs/apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html\"\u003eRe­sponse pred­i­cates\u003c/a\u003e can fail a re­quest when the re­sponse does not match cri­te­rion.\u003c/p\u003e\u003cp\u003eThe Web Client mod­ule comes with a set of ready-​to-use pred­i­cates:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-clojure\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .expect(\u003cspan class=\"hljs-name\"\u003eResponsePredicate.SC_SUCCESS\u003c/span\u003e)\n  .expect(\u003cspan class=\"hljs-name\"\u003eResponsePredicate.JSON\u003c/span\u003e)\n  .send(\u003cspan class=\"hljs-name\"\u003ear\u003c/span\u003e -\u0026gt; {\n    if (\u003cspan class=\"hljs-name\"\u003ear.succeeded\u003c/span\u003e()) {\n      HttpResponse\u0026lt;Buffer\u0026gt; response = ar.result()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n      // Safely decode the body as a json object\n      JsonObject body = response.bodyAsJsonObject()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n    } else {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + ar.cause().getMessage())\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n    }\n  })\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe web is full of HTTP/JSON end­points, so there is no doubt the \u003ccode\u003eResponsePredicate.SC_SUCCESS\u003c/code\u003e and \u003ccode\u003eResponsePredicate.JSON\u003c/code\u003e can be handy.\u003c/p\u003e\u003cp\u003eNev­er­the­less, you might also need to check that the sta­tus code is whithin a spe­cific range:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-scheme\"\u003eclient\n  .get(\u003cspan class=\"hljs-name\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .expect(\u003cspan class=\"hljs-name\"\u003eResponsePredicate.status\u003c/span\u003e(\u003cspan class=\"hljs-name\"\u003e200\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e202\u003c/span\u003e))\n  .send(\u003cspan class=\"hljs-name\"\u003ear\u003c/span\u003e -\u0026gt; {\n    // ....\n  })\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOr that the con­tent is of a spe­cific type: \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-clojure\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .expect(\u003cspan class=\"hljs-name\"\u003eResponsePredicate.contentType\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some/content-type\u0026quot;\u003c/span\u003e))\n  .send(\u003cspan class=\"hljs-name\"\u003ear\u003c/span\u003e -\u0026gt; {\n    // ....\n  })\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ePlease refer to the \u003ca href=\"/docs/apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html\"\u003e\u003ccode\u003eResponsePredicate\u003c/code\u003e doc­u­men­ta­tion\u003c/a\u003e for a full list of pre­de­fined pred­i­cates.\u003c/p\u003e\u003ch3 id=\"custom-predicates\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#custom-predicates\"\u003e\u003c/a\u003eCustom predicates\u003c/h3\u003e\u003cp\u003eEven­tu­ally, pred­i­cates were not de­signed for sta­tus code and con­tent type check­ing only, so feel free to cre­ate your own val­i­da­tion code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-clojure\"\u003e// Check CORS header allowing to do POST\nFunction\u0026lt;HttpResponse\u0026lt;Void\u0026gt;, ResponsePredicateResult\u0026gt; methodsPredicate = resp -\u0026gt; {\n  String methods = resp.getHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Allow-Methods\u0026quot;\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n  if (\u003cspan class=\"hljs-name\"\u003emethods\u003c/span\u003e != null) {\n    if (\u003cspan class=\"hljs-name\"\u003emethods.contains\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e)) {\n      return ResponsePredicateResult.success()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n    }\n  }\n  return ResponsePredicateResult.failure(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Does not work\u0026quot;\u003c/span\u003e)\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n}\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\n// Send pre-flight CORS request\nclient\n  .request(\u003cspan class=\"hljs-name\"\u003eHttpMethod.OPTIONS\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Origin\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Server-b.com\u0026quot;\u003c/span\u003e)\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Request-Method\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e)\n  .expect(\u003cspan class=\"hljs-name\"\u003emethodsPredicate\u003c/span\u003e)\n  .send(\u003cspan class=\"hljs-name\"\u003ear\u003c/span\u003e -\u0026gt; {\n    if (\u003cspan class=\"hljs-name\"\u003ear.succeeded\u003c/span\u003e()) {\n      // Process the POST request now\n    } else {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + ar.cause().getMessage())\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n    }\n  })\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNote that re­sponse pred­i­cates are eval­u­ated \u003cem\u003ebe­fore\u003c/em\u003e the re­sponse body is re­ceived.\nThere­fore \u003cstrong\u003eyou can’t in­spect the re­sponse body\u003c/strong\u003e in a pred­i­cate test func­tion, only sta­tus code, sta­tus mes­sage and re­sponse head­ers.\u003c/p\u003e\u003ch2 id=\"dealing-with-failures\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#dealing-with-failures\"\u003e\u003c/a\u003eDealing with failures\u003c/h2\u003e\u003cp\u003eBy de­fault, re­sponse pred­i­cates (in­clud­ing the pre­de­fined ones) use a generic error con­verter which dis­cards the re­sponse body and con­veys a sim­ple mes­sage.\nYou can cus­tomize the ex­cep­tion class by chang­ing the error con­verter:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-clojure\"\u003eResponsePredicate predicate = ResponsePredicate.create(\u003cspan class=\"hljs-name\"\u003eResponsePredicate.SC_SUCCESS\u003c/span\u003e, result -\u0026gt; {\n  return new MyCustomException(\u003cspan class=\"hljs-name\"\u003eresult.message\u003c/span\u003e())\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n})\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBe­ware that cre­at­ing ex­cep­tions in Java comes with the \u003cstrong\u003eper­for­mance cost\u003c/strong\u003e of cap­tur­ing the call stack.\nThe generic error con­verter gen­er­ates ex­cep­tions that do not cap­ture it.\u003c/p\u003e\u003ch3 id=\"reading-details-in-error-responses\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#reading-details-in-error-responses\"\u003e\u003c/a\u003eReading details in error responses\u003c/h3\u003e\u003cp\u003eMany web APIs pro­vide de­tails in error re­sponses.\nFor ex­am­ple, the \u003ca href=\"https://developer.marvel.com/docs\"\u003eMar­vel API\u003c/a\u003e uses this JSON ob­ject for­mat:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;code\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;InvalidCredentials\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;The passed API key is invalid.\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo avoid los­ing this in­for­ma­tion, it is pos­si­ble to wait for the re­sponse body to be fully re­ceived be­fore the error con­verter is called:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-reasonml\"\u003eErrorConverter converter = \u003cspan class=\"hljs-module-access\"\u003e\u003cspan class=\"hljs-module\"\u003e\u003cspan class=\"hljs-identifier\"\u003eErrorConverter\u003c/span\u003e.\u003c/span\u003e\u003c/span\u003ecreate\u003cspan class=\"hljs-constructor\"\u003eFullBody(\u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e -\u0026gt; {\n\n  \u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003e Invoked \u003cspan class=\"hljs-params\"\u003eafter\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003ethe\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003ebody\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003efully\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003ereceived\u003c/span\u003e\n  HttpResponse\u0026lt;Buffer\u0026gt; \u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e = \u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e()\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (response.get\u003cspan class=\"hljs-constructor\"\u003eHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e)\u003c/span\u003e.equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)) {\n    \u003cspan class=\"hljs-comment\"\u003e// Error body is JSON data\u003c/span\u003e\n    JsonObject body = response.body\u003cspan class=\"hljs-constructor\"\u003eAsJsonObject()\u003c/span\u003e;\n    return \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-constructor\"\u003eMyCustomException(\u003cspan class=\"hljs-params\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003egetString\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;code\u0026quot;\u003c/span\u003e)\u003c/span\u003e, body.get\u003cspan class=\"hljs-constructor\"\u003eString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e)\u003c/span\u003e);\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Fallback to defaut message\u003c/span\u003e\n  return \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-constructor\"\u003eMyCustomException(\u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003emessage\u003c/span\u003e()\u003c/span\u003e);\n});\n\nResponsePredicate predicate = \u003cspan class=\"hljs-module-access\"\u003e\u003cspan class=\"hljs-module\"\u003e\u003cspan class=\"hljs-identifier\"\u003eResponsePredicate\u003c/span\u003e.\u003c/span\u003e\u003c/span\u003ecreate(ResponsePredicate.SC_SUCCESS, converter);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThat’s it! Feel free to com­ment here or ask ques­tions on our \u003ca href=\"/community\"\u003ecom­mu­nity chan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"respons","tf":16},{"term":"predic","tf":10},{"term":"error","tf":7},{"term":"web","tf":4},{"term":"not","tf":4},{"term":"us","tf":4},{"term":"statu","tf":4},{"term":"code","tf":4},{"term":"bodi","tf":4},{"term":"convert","tf":4},{"term":"content","tf":3},{"term":"type","tf":3},{"term":"check","tf":3},{"term":"receiv","tf":3},{"term":"gener","tf":3},{"term":"except","tf":3},{"term":"default","tf":2},{"term":"client","tf":2},{"term":"request","tf":2},{"term":"wrong","tf":2},{"term":"failur","tf":2},{"term":"perform","tf":2},{"term":"come","tf":2},{"term":"full","tf":2},{"term":"json","tf":2}]},{"filename":"blog/2018-12-06-the-rss-reader-tutorial-step-3.mdx","date":"2018-12-06","slug":"the-rss-reader-tutorial-step-3","meta":{"title":"The RSS reader tutorial (Step 3)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"This is the third installment of our Vert.x Cassandra Client tutorial. We will implement the last RSS endpoint serving a list of articles related to a specific channel."},"readingTime":{"text":"2 min read","minutes":1.585,"time":95100,"words":317},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Now that \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-3-6-0-released/\"\n  }), \"Vert.x 3.6.0 has been re\\xADleased\"), \", it\\u2019s the per\\xADfect time to con\\xADclude our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-cassandra-client/java/\"\n  }), \"Vert.x Cas\\xADsan\\xADdra Client\"), \" tu\\xADto\\xADr\\xADial!\"), mdx(\"p\", null, \"In \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/blog/the-rss-reader-tutorial-step-2/\"\n  }), \"the pre\\xADvi\\xADous step\"), \", we have suc\\xADcess\\xADfully im\\xADple\\xADmented the sec\\xADond end\\xADpoint\\nof the RSS reader app.\"), mdx(\"p\", null, \"The RSS reader ex\\xADam\\xADple as\\xADsumes im\\xADple\\xADment\\xADing three end\\xADpoints. This ar\\xADti\\xADcle is ded\\xADi\\xADcated to im\\xADple\\xADment\\xADing the last \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET /articles/by_rss_link?link={rss_link}\"), \" end\\xADpoint.\"), mdx(\"p\", null, \"Be\\xADfore com\\xADplet\\xADing this step, make sure your are in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_3\"), \" git branch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_3\"), \"\\n\")), mdx(\"h2\", {\n    \"id\": \"implementing-the-3rd-endpoint\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementing-the-3rd-endpoint\"\n  })), \"Implementing the 3rd endpoint\"), mdx(\"p\", null, \"The 3rd end\\xADpoint serves a list of ar\\xADti\\xADcles re\\xADlated to a spe\\xADcific RSS chan\\xADnel. In a re\\xADquest, we spec\\xADify RSS chan\\xADnel by pro\\xADvid\\xADing a link. On the ap\\xADpli\\xADca\\xADtion side, after re\\xADceiv\\xADing a re\\xADquest we ex\\xADe\\xADcute the fol\\xADlow\\xADing query:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" title, article_link, description, pubDate \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" articles_by_rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"WHERE\"), \" rss_link = RSS_LINK_FROM_REQUEST ;\\n\")), mdx(\"h2\", {\n    \"id\": \"implementation\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementation\"\n  })), \"Implementation\"), mdx(\"p\", null, \"For ob\\xADtain\\xADing ar\\xADti\\xADcles by RSS link we need to pre\\xADpare a re\\xADlated state\\xADment first. Change \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#prepareSelectArticlesByRssLink\"), \" in this way:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future\u003cVoid\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareSelectArticlesByRssLink\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Util.prepareQueryAndSetReference(client,\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT title, article_link, description, pubDate FROM articles_by_rss_link WHERE rss_link = ? ;\\\"\"), \",\\n            selectArticlesByRssLink\\n    );\\n}\\n\")), mdx(\"p\", null, \"And now, we can im\\xADple\\xADment the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#getArticles\"), \" method. Ba\\xADsi\\xADcally, it will use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"selectArticlesByRssLink\"), \" state\\xADment for find\\xADing ar\\xADti\\xADcles by the given link. Here\\u2019s the im\\xADple\\xADmen\\xADta\\xADtion:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getArticles\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    String link = ctx.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"link\\\"\"), \");\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (link == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n        responseWithInvalidRequest(ctx);\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n        client.executeWithFullFetch(selectArticlesByRssLink.bind(link), handler -\u003e {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (handler.succeeded()) {\\n                List\u003cRow\u003e rows = handler.result();\\n\\n                JsonObject responseJson = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject();\\n                JsonArray articles = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonArray();\\n\\n                rows.forEach(eachRow -\u003e articles.add(\\n                        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"title\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"link\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"2\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"pub_date\\\"\"), \", eachRow.getTimestamp(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"3\"), \").getTime())\\n                ));\\n\\n                responseJson.put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"articles\\\"\"), \", articles);\\n                ctx.response().end(responseJson.toString());\\n            } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"failed to get articles for \\\"\"), \" + link, handler.cause());\\n                ctx.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \").end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to retrieve the info from C*\\\"\"), \");\\n            }\\n        });\\n    }\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"Dur\\xADing the se\\xADries, we have shown how the RSS reader app can be im\\xADple\\xADmented with the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-cassandra-client\"\n  }), \"Vert.x Cas\\xADsan\\xADdra client\"), \".\"), mdx(\"p\", null, \"Thanks for read\\xADing this. I hope you en\\xADjoyed this se\\xADries. See you soon on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitter.im/eclipse-vertx/vertx-users\"\n  }), \"Git\\xADter chan\\xADnel\"), \"!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eNow that \u003ca href=\"https://vertx.io/blog/eclipse-vert-x-3-6-0-released/\"\u003eVert.x 3.6.0 has been re­leased\u003c/a\u003e, it’s the per­fect time to con­clude our \u003ca href=\"https://vertx.io/docs/vertx-cassandra-client/java/\"\u003eVert.x Cas­san­dra Client\u003c/a\u003e tu­to­r­ial!\u003c/p\u003e\u003cp\u003eIn \u003ca href=\"https://vertx.io/blog/the-rss-reader-tutorial-step-2/\"\u003ethe pre­vi­ous step\u003c/a\u003e, we have suc­cess­fully im­ple­mented the sec­ond end­point\nof the RSS reader app.\u003c/p\u003e\u003cp\u003eThe RSS reader ex­am­ple as­sumes im­ple­ment­ing three end­points. This ar­ti­cle is ded­i­cated to im­ple­ment­ing the last \u003ccode\u003eGET /articles/by_rss_link?link={rss_link}\u003c/code\u003e end­point.\u003c/p\u003e\u003cp\u003eBe­fore com­plet­ing this step, make sure your are in the \u003ccode\u003estep_3\u003c/code\u003e git branch:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"implementing-the-3rd-endpoint\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementing-the-3rd-endpoint\"\u003e\u003c/a\u003eImplementing the 3rd endpoint\u003c/h2\u003e\u003cp\u003eThe 3rd end­point serves a list of ar­ti­cles re­lated to a spe­cific RSS chan­nel. In a re­quest, we spec­ify RSS chan­nel by pro­vid­ing a link. On the ap­pli­ca­tion side, after re­ceiv­ing a re­quest we ex­e­cute the fol­low­ing query:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e title, article_link, description, pubDate \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e articles_by_rss_link \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e rss_link = RSS_LINK_FROM_REQUEST ;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"implementation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementation\"\u003e\u003c/a\u003eImplementation\u003c/h2\u003e\u003cp\u003eFor ob­tain­ing ar­ti­cles by RSS link we need to pre­pare a re­lated state­ment first. Change \u003ccode\u003eAppVerticle#prepareSelectArticlesByRssLink\u003c/code\u003e in this way:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Future\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003eprepareSelectArticlesByRssLink\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Util.prepareQueryAndSetReference(client,\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT title, article_link, description, pubDate FROM articles_by_rss_link WHERE rss_link = ? ;\u0026quot;\u003c/span\u003e,\n            selectArticlesByRssLink\n    );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd now, we can im­ple­ment the \u003ccode\u003eAppVerticle#getArticles\u003c/code\u003e method. Ba­si­cally, it will use the \u003ccode\u003eselectArticlesByRssLink\u003c/code\u003e state­ment for find­ing ar­ti­cles by the given link. Here’s the im­ple­men­ta­tion:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetArticles\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    String link = ctx.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;link\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (link == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n        responseWithInvalidRequest(ctx);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        client.executeWithFullFetch(selectArticlesByRssLink.bind(link), handler -\u0026gt; {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (handler.succeeded()) {\n                List\u0026lt;Row\u0026gt; rows = handler.result();\n\n                JsonObject responseJson = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject();\n                JsonArray articles = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray();\n\n                rows.forEach(eachRow -\u0026gt; articles.add(\n                        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;link\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;description\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;pub_date\u0026quot;\u003c/span\u003e, eachRow.getTimestamp(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).getTime())\n                ));\n\n                responseJson.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;articles\u0026quot;\u003c/span\u003e, articles);\n                ctx.response().end(responseJson.toString());\n            } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                log.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;failed to get articles for \u0026quot;\u003c/span\u003e + link, handler.cause());\n                ctx.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e).end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Unable to retrieve the info from C*\u0026quot;\u003c/span\u003e);\n            }\n        });\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eDur­ing the se­ries, we have shown how the RSS reader app can be im­ple­mented with the \u003ca href=\"https://github.com/vert-x3/vertx-cassandra-client\"\u003eVert.x Cas­san­dra client\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThanks for read­ing this. I hope you en­joyed this se­ries. See you soon on our \u003ca href=\"https://gitter.im/eclipse-vertx/vertx-users\"\u003eGit­ter chan­nel\u003c/a\u003e!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"implement","tf":8},{"term":"rss","tf":6},{"term":"endpoint","tf":5},{"term":"articl","tf":4},{"term":"reader","tf":3},{"term":"channel","tf":3},{"term":"link","tf":3},{"term":"cassandra","tf":2},{"term":"client","tf":2},{"term":"step","tf":2},{"term":"app","tf":2},{"term":"3rd","tf":2},{"term":"relat","tf":2},{"term":"request","tf":2},{"term":"statement","tf":2},{"term":"seri","tf":2},{"term":"releas","tf":1},{"term":"perfect","tf":1},{"term":"time","tf":1},{"term":"conclud","tf":1},{"term":"tutori","tf":1},{"term":"previou","tf":1},{"term":"successfulli","tf":1},{"term":"second","tf":1},{"term":"exampl","tf":1}]},{"filename":"blog/2018-09-05-the-rss-reader-tutorial-step-2.mdx","date":"2018-09-05","slug":"the-rss-reader-tutorial-step-2","meta":{"title":"The RSS reader tutorial (Step 2)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID."},"readingTime":{"text":"3 min read","minutes":2.39,"time":143400,"words":478},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/the-rss-reader-tutorial/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"the pre\\xADvi\\xADous step\")), \", we have suc\\xADcess\\xADfully im\\xADple\\xADmented the first end\\xADpoint\\nof the RSS reader app.\"), mdx(\"p\", null, \"The RSS reader ex\\xADam\\xADple as\\xADsumes im\\xADple\\xADment\\xADing 3 end\\xADpoints. This ar\\xADti\\xADcle is ded\\xADi\\xADcated to im\\xADple\\xADment\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET /user/{user_id}/rss_channels\"), \" end\\xADpoint.\"), mdx(\"p\", null, \"Be\\xADfore com\\xADplet\\xADing this step, make sure your are in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_2\"), \" git branch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_2\"), \"\\n\")), mdx(\"h2\", {\n    \"id\": \"implementing-the-second-endpoint\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementing-the-second-endpoint\"\n  })), \"Implementing the second endpoint\"), mdx(\"p\", null, \"The sec\\xADond end\\xADpoint pro\\xADduces an array of RSS chan\\xADnels by given \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user_id\"), \".\"), mdx(\"p\", null, \"We need to ex\\xADe\\xADcute the two fol\\xADlow\\xADing queries to:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Fetch RSS links for a given user:\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" rss_by_user \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"WHERE\"), \" login = GIVEN_USER_ID ;\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Fetch RSS chan\\xADnel de\\xADtails for a given link:\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" description, title, site_link, rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" channel_info_by_rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"WHERE\"), \" rss_link = GIVEN_LINK ;\\n\")))), mdx(\"h2\", {\n    \"id\": \"implementation\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementation\"\n  })), \"Implementation\"), mdx(\"p\", null, \"The end\\xADpoint al\\xADlows the the front-\\u200Bend app to dis\\xADplay the list of RSS feeds a user sub\\xADscribed on. When the end\\xADpoint is ac\\xADcessed, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#getRssChannels\"), \" method is called. We can im\\xADple\\xADment this method in this way:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getRssChannels\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    String userId = ctx.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"user_id\\\"\"), \");\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (userId == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n        responseWithInvalidRequest(ctx);\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n        Future\u003cList\u003cRow\u003e\u003e future = Future.future();\\n        client.executeWithFullFetch(selectRssLinksByLogin.bind(userId), future);\\n        future.compose(rows -\u003e {\\n            List\u003cString\u003e links = rows.stream()\\n                    .map(row -\u003e row.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"))\\n                    .collect(Collectors.toList());\\n\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" CompositeFuture.all(\\n                    links.stream().map(selectChannelInfo::bind).map(statement -\u003e {\\n                        Future\u003cList\u003cRow\u003e\u003e channelInfoRow = Future.future();\\n                        client.executeWithFullFetch(statement, channelInfoRow);\\n                        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" channelInfoRow;\\n                    }).collect(Collectors.toList())\\n            );\\n        }).setHandler(h -\u003e {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (h.succeeded()) {\\n                CompositeFuture result = h.result();\\n                List\u003cList\u003cRow\u003e\u003e results = result.list();\\n                List\u003cRow\u003e list = results.stream()\\n                        .flatMap(List::stream)\\n                        .collect(Collectors.toList());\\n                JsonObject responseJson = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject();\\n                JsonArray channels = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonArray();\\n\\n                list.forEach(eachRow -\u003e channels.add(\\n                        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"title\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"link\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"2\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"rss_link\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"3\"), \"))\\n                ));\\n\\n                responseJson.put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"channels\\\"\"), \", channels);\\n                ctx.response().end(responseJson.toString());\\n            } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"failed to get rss channels\\\"\"), \", h.cause());\\n                ctx.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \").end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to retrieve the info from C*\\\"\"), \");\\n            }\\n        });\\n    }\\n}\\n\")), mdx(\"p\", null, \"Also, this method uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"selectChannelInfo\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"selectRssLinksByLogin\"), \" fields, they should be ini\\xADtial\\xADized in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#prepareNecessaryQueries\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future\u003cVoid\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareNecessaryQueries\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Future\u003cPreparedStatement\u003e selectChannelInfoPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT description, title, site_link, rss_link FROM channel_info_by_rss_link WHERE rss_link = ? ;\\\"\"), \", selectChannelInfoPrepFuture);\\n\\n    Future\u003cPreparedStatement\u003e selectRssLinkByLoginPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT rss_link FROM rss_by_user WHERE login = ? ;\\\"\"), \", selectRssLinkByLoginPrepFuture);\\n\\n    Future\u003cPreparedStatement\u003e insertNewLinkForUserPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\\\"\"), \", insertNewLinkForUserPrepFuture);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" CompositeFuture.all(\\n            selectChannelInfoPrepFuture.compose(preparedStatement -\u003e {\\n                selectChannelInfo = preparedStatement;\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n            }),\\n            selectRssLinkByLoginPrepFuture.compose(preparedStatement -\u003e {\\n                selectRssLinksByLogin = preparedStatement;\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n            }),\\n            insertNewLinkForUserPrepFuture.compose(preparedStatement -\u003e {\\n                insertNewLinkForUser = preparedStatement;\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n            })\\n    ).mapEmpty();\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"In this part, we have suc\\xADcess\\xADfully im\\xADple\\xADmented the sec\\xADond end\\xADpoint, which al\\xADlows the browser app to ob\\xADtain chan\\xADnels in\\xADfor\\xADma\\xADtion for a spe\\xADcific user. To en\\xADsure that it is work\\xADing fine, point your browser to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost:8080\"), \" and click to the re\\xADfresh but\\xADton. Chan\\xADnel list should ap\\xADpear im\\xADme\\xADdi\\xADately.\"), mdx(\"p\", null, \"If you have any prob\\xADlems with com\\xADplet\\xADing this step you can check\\xADout to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_3\"), \", where you can find all changes made for com\\xADplet\\xADing this step:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_3\"), \"\\n\")), mdx(\"p\", null, \"Thanks for read\\xADing this. I hope you en\\xADjoyed read\\xADing this ar\\xADti\\xADcle. See you soon on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitter.im/eclipse-vertx/vertx-users\"\n  }), \"Git\\xADter chan\\xADnel\"), \"!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eIn \u003ca href=\"/blog/the-rss-reader-tutorial/\"\u003ethe pre­vi­ous step\u003c/a\u003e, we have suc­cess­fully im­ple­mented the first end­point\nof the RSS reader app.\u003c/p\u003e\u003cp\u003eThe RSS reader ex­am­ple as­sumes im­ple­ment­ing 3 end­points. This ar­ti­cle is ded­i­cated to im­ple­ment­ing the \u003ccode\u003eGET /user/{user_id}/rss_channels\u003c/code\u003e end­point.\u003c/p\u003e\u003cp\u003eBe­fore com­plet­ing this step, make sure your are in the \u003ccode\u003estep_2\u003c/code\u003e git branch:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"implementing-the-second-endpoint\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementing-the-second-endpoint\"\u003e\u003c/a\u003eImplementing the second endpoint\u003c/h2\u003e\u003cp\u003eThe sec­ond end­point pro­duces an array of RSS chan­nels by given \u003ccode\u003euser_id\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eWe need to ex­e­cute the two fol­low­ing queries to:\u003c/p\u003e\u003col\u003e\u003cli\u003eFetch RSS links for a given user:\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e rss_link \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e rss_by_user \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e login = GIVEN_USER_ID ;\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\u003cli\u003eFetch RSS chan­nel de­tails for a given link:\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e description, title, site_link, rss_link \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e channel_info_by_rss_link \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e rss_link = GIVEN_LINK ;\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\u003c/ol\u003e\u003ch2 id=\"implementation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementation\"\u003e\u003c/a\u003eImplementation\u003c/h2\u003e\u003cp\u003eThe end­point al­lows the the front-​end app to dis­play the list of RSS feeds a user sub­scribed on. When the end­point is ac­cessed, the \u003ccode\u003eAppVerticle#getRssChannels\u003c/code\u003e method is called. We can im­ple­ment this method in this way:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetRssChannels\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    String userId = ctx.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user_id\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (userId == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n        responseWithInvalidRequest(ctx);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        Future\u0026lt;List\u0026lt;Row\u0026gt;\u0026gt; future = Future.future();\n        client.executeWithFullFetch(selectRssLinksByLogin.bind(userId), future);\n        future.compose(rows -\u0026gt; {\n            List\u0026lt;String\u0026gt; links = rows.stream()\n                    .map(row -\u0026gt; row.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\n                    .collect(Collectors.toList());\n\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e CompositeFuture.all(\n                    links.stream().map(selectChannelInfo::bind).map(statement -\u0026gt; {\n                        Future\u0026lt;List\u0026lt;Row\u0026gt;\u0026gt; channelInfoRow = Future.future();\n                        client.executeWithFullFetch(statement, channelInfoRow);\n                        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e channelInfoRow;\n                    }).collect(Collectors.toList())\n            );\n        }).setHandler(h -\u0026gt; {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (h.succeeded()) {\n                CompositeFuture result = h.result();\n                List\u0026lt;List\u0026lt;Row\u0026gt;\u0026gt; results = result.list();\n                List\u0026lt;Row\u0026gt; list = results.stream()\n                        .flatMap(List::stream)\n                        .collect(Collectors.toList());\n                JsonObject responseJson = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject();\n                JsonArray channels = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray();\n\n                list.forEach(eachRow -\u0026gt; channels.add(\n                        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;description\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e))\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;link\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e))\n                                .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;rss_link\u0026quot;\u003c/span\u003e, eachRow.getString(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e))\n                ));\n\n                responseJson.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;channels\u0026quot;\u003c/span\u003e, channels);\n                ctx.response().end(responseJson.toString());\n            } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                log.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;failed to get rss channels\u0026quot;\u003c/span\u003e, h.cause());\n                ctx.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e).end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Unable to retrieve the info from C*\u0026quot;\u003c/span\u003e);\n            }\n        });\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAlso, this method uses \u003ccode\u003eselectChannelInfo\u003c/code\u003e and \u003ccode\u003eselectRssLinksByLogin\u003c/code\u003e fields, they should be ini­tial­ized in the \u003ccode\u003eAppVerticle#prepareNecessaryQueries\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Future\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003eprepareNecessaryQueries\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Future\u0026lt;PreparedStatement\u0026gt; selectChannelInfoPrepFuture = Future.future();\n    client.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT description, title, site_link, rss_link FROM channel_info_by_rss_link WHERE rss_link = ? ;\u0026quot;\u003c/span\u003e, selectChannelInfoPrepFuture);\n\n    Future\u0026lt;PreparedStatement\u0026gt; selectRssLinkByLoginPrepFuture = Future.future();\n    client.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT rss_link FROM rss_by_user WHERE login = ? ;\u0026quot;\u003c/span\u003e, selectRssLinkByLoginPrepFuture);\n\n    Future\u0026lt;PreparedStatement\u0026gt; insertNewLinkForUserPrepFuture = Future.future();\n    client.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\u0026quot;\u003c/span\u003e, insertNewLinkForUserPrepFuture);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e CompositeFuture.all(\n            selectChannelInfoPrepFuture.compose(preparedStatement -\u0026gt; {\n                selectChannelInfo = preparedStatement;\n                \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n            }),\n            selectRssLinkByLoginPrepFuture.compose(preparedStatement -\u0026gt; {\n                selectRssLinksByLogin = preparedStatement;\n                \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n            }),\n            insertNewLinkForUserPrepFuture.compose(preparedStatement -\u0026gt; {\n                insertNewLinkForUser = preparedStatement;\n                \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n            })\n    ).mapEmpty();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eIn this part, we have suc­cess­fully im­ple­mented the sec­ond end­point, which al­lows the browser app to ob­tain chan­nels in­for­ma­tion for a spe­cific user. To en­sure that it is work­ing fine, point your browser to \u003ccode\u003elocalhost:8080\u003c/code\u003e and click to the re­fresh but­ton. Chan­nel list should ap­pear im­me­di­ately.\u003c/p\u003e\u003cp\u003eIf you have any prob­lems with com­plet­ing this step you can check­out to \u003ccode\u003estep_3\u003c/code\u003e, where you can find all changes made for com­plet­ing this step:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_3\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThanks for read­ing this. I hope you en­joyed read­ing this ar­ti­cle. See you soon on our \u003ca href=\"https://gitter.im/eclipse-vertx/vertx-users\"\u003eGit­ter chan­nel\u003c/a\u003e!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"endpoint","tf":8},{"term":"implement","tf":7},{"term":"rss","tf":6},{"term":"channel","tf":5},{"term":"step","tf":4},{"term":"method","tf":4},{"term":"app","tf":3},{"term":"complet","tf":3},{"term":"second","tf":3},{"term":"given","tf":3},{"term":"user","tf":3},{"term":"successfulli","tf":2},{"term":"reader","tf":2},{"term":"articl","tf":2},{"term":"fetch","tf":2},{"term":"link","tf":2},{"term":"allow","tf":2},{"term":"list","tf":2},{"term":"browser","tf":2},{"term":"read","tf":2},{"term":"previou","tf":1},{"term":"first","tf":1},{"term":"exampl","tf":1},{"term":"assum","tf":1},{"term":"dedic","tf":1}]}],"numPages":9},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["category","guides"]},"buildId":"C_I4gGOFTI-4fY_eV8SrD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.8577696c4e17514af975.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_buildManifest.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_ssgManifest.js" async=""></script></body></html>