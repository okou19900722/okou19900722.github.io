<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Page 2 | Guides | Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.176b8cb6.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.176b8cb6.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.8577696c4e17514af975.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-entries"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">20 August 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/the-rss-reader-tutorial/">The RSS reader tutorial</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/Sammers21.png?size=50"/><a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></li></ul></span><p class="blog-entry-summary">In this tutorial, you will learn how to use the Eclipse Vert.x Cassandra client in practice. We will develop an RSS reader with three HTTP endpoints.</p><span class="read-more-link"><a href="/blog/the-rss-reader-tutorial/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">2 July 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/simplified-database-transaction-management-with-the-vert-x-rxjava-api/">Simplified database transaction management with the Vert.x RxJava API</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/tsegismont.png?size=50"/><a href="https://github.com/tsegismont" target="_blank" rel="noopener noreferrer">Thomas Segismont</a></li></ul></span><p class="blog-entry-summary">As of Vert.x 3.5, managing database transactions requires a lot of boilerplate code. Vert.x 3.6 provides helpers to easily make a reactive flow transactional.</p><span class="read-more-link"><a href="/blog/simplified-database-transaction-management-with-the-vert-x-rxjava-api/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">4 June 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/eclipse-vert-x-goes-native/">Eclipse Vert.x goes Native</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/jotschi.png?size=50"/><a href="https://github.com/jotschi" target="_blank" rel="noopener noreferrer">Johannes Sch√ºth</a></li></ul></span><p class="blog-entry-summary">This blog post introduces native image generation of Vert.x applications with GraalVM. Generated executables can be run without a JVM.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-goes-native/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">23 April 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/eclipse-vert-x-rabbitmq-client-gets-a-new-consumer-api/">Eclipse Vert.x RabbitMQ client gets a new consumer API!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/Sammers21.png?size=50"/><a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></li></ul></span><p class="blog-entry-summary">In this blog post, we present the new consumer API of the RabbitMQ client that will be released with Eclipse Vert.x 3.6.0.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-rabbitmq-client-gets-a-new-consumer-api/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">9 April 2018</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/eclipse-vert-x-metrics-now-with-micrometer-io/">Eclipse Vert.x metrics now with Micrometer.io</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/jotak.png?size=50"/><a href="https://github.com/jotak" target="_blank" rel="noopener noreferrer">Joel Takvorian</a></li></ul></span><p class="blog-entry-summary">The new vertx-micrometer-metrics module provides support for collecting metrics with Micrometer.io and storing them in backends such as Graphite or InfluxDB.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-metrics-now-with-micrometer-io/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">21 December 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/eclipse-vert-x-based-framework-url-shortener-backend/">Eclipse Vert.x based Framework URL Shortener Backend</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/pendula95.png?size=50"/><a href="https://github.com/pendula95" target="_blank" rel="noopener noreferrer">Lazar Buliƒá</a></li></ul></span><p class="blog-entry-summary">We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-based-framework-url-shortener-backend/">Read more</a></span></div></div><div class="pagination"><div class="pagination-page"><a href="/blog/category/guides/">¬´</a></div><div class="pagination-page"><a href="/blog/category/guides/">1</a></div><div class="pagination-page active"><a href="/blog/category/guides/page/2/">2</a></div><div class="pagination-page"><a href="/blog/category/guides/page/3/">3</a></div><div class="pagination-page"><a href="/blog/category/guides/page/4/">4</a></div><div class="pagination-page"><a href="/blog/category/guides/page/5/">5</a></div><div class="pagination-page disabled">‚Ä¶</div><div class="pagination-page"><a href="/blog/category/guides/page/9/">9</a></div><div class="pagination-page"><a href="/blog/category/guides/page/3/">¬ª</a></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">¬© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Kr√§mer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"category":"guides","page":2,"posts":[{"filename":"blog/2018-08-20-the-rss-reader-tutorial.mdx","date":"2018-08-20","slug":"the-rss-reader-tutorial","meta":{"title":"The RSS reader tutorial","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this tutorial, you will learn how to use the Eclipse Vert.x Cassandra client in practice. We will develop an RSS reader with three HTTP endpoints."},"readingTime":{"text":"7 min read","minutes":6.2,"time":372000,"words":1240},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This tu\\xADto\\xADr\\xADial is ded\\xADi\\xADcated for users who\\u2019d like to know how to use the Eclipse Vert.x Cas\\xADsan\\xADdra client in prac\\xADtice.\"), mdx(\"h2\", {\n    \"id\": \"before-you-start-this-tutorial\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#before-you-start-this-tutorial\"\n  })), \"Before you start this tutorial\"), mdx(\"p\", null, \"Be\\xADfore start\\xADing, you should\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"be fa\\xADmil\\xADiar with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/\"\n  }), \"Eclipse Vert.x\"), \". If you are not, here is the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/guide-for-java-devs/\"\n  }), \"guide for Java de\\xADvel\\xADop\\xADers\"), \".\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"have some basic un\\xADder\\xADstand\\xADing of data\\xADbases. Ex\\xADtended knowl\\xADedge of Cas\\xADsan\\xADdra is not re\\xADquired.\"))), mdx(\"p\", null, \"You also may find it use\\xADful to read \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://validator.w3.org/feed/docs/rss2.html\"\n  }), \"the RSS 2.0\"), \" spec\\xADi\\xADfi\\xADca\\xADtion, be\\xADcause the re\\xADsulted app is, ba\\xADsi\\xADcally, a stor\\xADage of RSS 2.0 feeds.\"), mdx(\"p\", null, \"To give you an idea of what the App is about, here is how it looks like from the fronted side:\"), mdx(\"img\", {\n    src: \"https://i.imgur.com/2V954zx.png\",\n    alt: \"see how it looks\",\n    className: \"img-fluid\"\n  }), mdx(\"p\", null, \"In the image, we see that browser space is split into 2 parts:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Saved feed names\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"List of ar\\xADti\\xADcles for the se\\xADlected feed\")), mdx(\"p\", null, \"Here you also can enter a link to a new feed, so the App will fetch and parse the feed.\\nAfter that, it will ap\\xADpear in the left col\\xADumn along with other saved feeds.\"), mdx(\"h2\", {\n    \"id\": \"requirements\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#requirements\"\n  })), \"Requirements\"), mdx(\"p\", null, \"For com\\xADplet\\xADing this tu\\xADto\\xADr\\xADial you need:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Java 8 or higher\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Git\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"1 hour of your time\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You fa\\xADvorite code ed\\xADi\\xADtor\")), mdx(\"p\", null, \"For run\\xADning the ex\\xADam\\xADple you should en\\xADsure that Cas\\xADsan\\xADdra ser\\xADvice is run\\xADning lo\\xADcally on port 9042.\\nAs an op\\xADtion, you can run Cas\\xADsan\\xADdra with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/riptano/ccm#installation\"\n  }), \"ccm\"), \"(Cas\\xADsan\\xADdra Clus\\xADter Man\\xADager).\\nFol\\xADlow \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/riptano/ccm#installation\"\n  }), \"this\"), \" in\\xADstruc\\xADtions for in\\xADstalling ccm.\\nAfter in\\xADstalling you will be able to run a sin\\xADgle node clus\\xADter:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" ccm create rss_reader -v 3.11.2 -n 1 -s\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" ccm start\"), \"\\n\")), mdx(\"p\", null, \"Be\\xADfore com\\xADplet\\xADing this step make sure that you have suc\\xADcess\\xADfully cloned the RSS reader repos\\xADi\\xADtory and checked out the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_1\"), \" branch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" https://github.com/Sammers21/rss-reader\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" rss-reader\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_1\"), \"\\n\")), mdx(\"p\", null, \"Now you can try to tun this ex\\xADam\\xADple and see if it works:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" ./gradlew vertxRun\"), \"\\n\")), mdx(\"h2\", {\n    \"id\": \"schema\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#schema\"\n  })), \"Schema\"), mdx(\"p\", null, \"If you are fa\\xADmil\\xADiar with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://cassandra.apache.org/\"\n  }), \"Apache Cas\\xADsan\\xADdra\"), \", you\\nshould know that the way your data is stored in Cas\\xADsan\\xADdra is de\\xADpen\\xADdent on queries\\nyou are run\\xADning. It means that you need first to fig\\xADure out what kind of queries\\nyou will be run\\xADning, and then you can pro\\xADduce a stor\\xADage scheme.\"), mdx(\"p\", null, \"In our case, we\\u2019d like our ap\\xADpli\\xADca\\xADtion to have 3 end\\xADpoints:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"POST /user/{user_id}/rss_link\"), \" - for adding links to a user\\u2019s feed\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /user/{user_id}/rss_channels\"), \" - for re\\xADtriev\\xADing in\\xADfor\\xADma\\xADtion about RSS chan\\xADnels a user sub\\xADscribed on\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /articles/by_rss_link?link={rss_link}\"), \" - for re\\xADtriev\\xADing in\\xADfor\\xADma\\xADtion about ar\\xADti\\xADcles on a spe\\xADcific RSS chan\\xADnel\")), mdx(\"p\", null, \"For im\\xADple\\xADment\\xADing this end\\xADpoints, the schema should look as fol\\xADlows:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"CREATE\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"TABLE\"), \" rss_by_user (login \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \" , rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", PRIMARY \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"KEY\"), \" (login, rss_link));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"CREATE\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"TABLE\"), \" articles_by_rss_link(rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", pubDate \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"timestamp\"), \", title \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", article_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", description \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", PRIMARY \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"KEY\"), \" ( rss_link , pubDate , article_link));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"CREATE\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"TABLE\"), \" channel_info_by_rss_link(rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", last_fetch_time \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"timestamp\"), \",title \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", site_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", description \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", PRIMARY \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"KEY\"), \"(rss_link));\\n\")), mdx(\"h2\", {\n    \"id\": \"what-to-do-in-this-step\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#what-to-do-in-this-step\"\n  })), \"What to do in this step\"), mdx(\"p\", null, \"In this step, we will im\\xADple\\xADment only the first end\\xADpoint\"), mdx(\"h2\", {\n    \"id\": \"project-overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#project-overview\"\n  })), \"Project overview\"), mdx(\"p\", null, \"There are two no\\xADtable classes in the project: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle\"), \". The first one is a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-core/java/#_verticles\"\n  }), \"Ver\\xADti\\xADcle\"), \" re\\xADspon\\xADsi\\xADble for HTTP re\\xADquest han\\xADdling and stor\\xADage schema ini\\xADtial\\xADiza\\xADtion. The sec\\xADond one is a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-core/java/#_verticles\"\n  }), \"Ver\\xADti\\xADcle\"), \" as well, but re\\xADspon\\xADsi\\xADble for RSS feeds fetch\\xADing.\"), mdx(\"p\", null, \"The idea is sim\\xADple. When the ap\\xADpli\\xADca\\xADtion is start\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" is de\\xADployed, then it tries to ini\\xADtial\\xADize stor\\xADage schema, de\\xADscribed in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/resources/schema.cql\"), \" file by read\\xADing it and ex\\xADe\\xADcut\\xADing listed queries line by line. After the schema ini\\xADtial\\xADiza\\xADtion the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" de\\xADploys \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle\"), \" and starts a HTTP server.\"), mdx(\"h2\", {\n    \"id\": \"implementing-the-endpoint\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementing-the-endpoint\"\n  })), \"Implementing the endpoint\"), mdx(\"p\", null, \"Now, it is time to im\\xADple\\xADment the first end\\xADpoint. Pay at\\xADten\\xADtion to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TODO\"), \"s, they are for point\\xADing you out about where changes should be made.\"), mdx(\"p\", null, \"Now, let\\u2019s have a look at the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#postRssLink\"), \" method. This method is called each time the first end\\xADpoint is called, so we can fig\\xADure out what is the posted body and id of the user, who per\\xADformed the re\\xADquest, di\\xADrectly there. There are 2 main things we want to do in this method:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"No\\xADti\\xADfy\\xADing via the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-core/java/#event_bus\"\n  }), \"Event Bus\"), \" the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"FetchVerticle\"), \" to fetch given by user link link to an RSS feed.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In\\xADsert\\xADing an entry to the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rss_by_user\"), \" table.\")), mdx(\"p\", null, \"This is how the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#postRssLink\"), \" method should be im\\xADple\\xADmented:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"postRssLink\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    ctx.request().bodyHandler(body -\u003e {\\n        JsonObject bodyAsJson = body.toJsonObject();\\n        String link = bodyAsJson.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"link\\\"\"), \");\\n        String userId = ctx.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"user_id\\\"\"), \");\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (link == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \" || userId == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n            responseWithInvalidRequest(ctx);\\n        } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            vertx.eventBus().send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fetch.rss.link\\\"\"), \", link);\\n            Future\u003cResultSet\u003e future = Future.future();\\n            BoundStatement query = insertNewLinkForUser.bind(userId, link);\\n            client.execute(query, future);\\n            future.setHandler(result -\u003e {\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (result.succeeded()) {\\n                    ctx.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"message\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"The feed just added\\\"\"), \").toString());\\n                } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                    ctx.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \").end(result.cause().getMessage());\\n                }\\n            });\\n        }\\n    });\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"responseWithInvalidRequest\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    ctx.response()\\n            .setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \")\\n            .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json; charset=utf-8\\\"\"), \")\\n            .end(invalidRequest().toString());\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" JsonObject \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"invalidRequest\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"message\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Invalid request\\\"\"), \");\\n}\\n\")), mdx(\"p\", null, \"You may no\\xADtice that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insertNewLinkForUser\"), \" is a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PreparedStatement\"), \", and should be ini\\xADtial\\xADized be\\xADfore the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" start. Let\\u2019s do it in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#prepareNecessaryQueries\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future\u003cVoid\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareNecessaryQueries\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Future\u003cPreparedStatement\u003e insertNewLinkForUserPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\\\"\"), \", insertNewLinkForUserPrepFuture);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" insertNewLinkForUserPrepFuture.compose(preparedStatement -\u003e {\\n        insertNewLinkForUser = preparedStatement;\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n    });\\n}\\n\")), mdx(\"p\", null, \"Also, we should not for\\xADget to fetch a RSS by the link sent to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle\"), \" via the Event Bus. We can do it in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle#startFetchEventBusConsumer\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"vertx.eventBus().localConsumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fetch.rss.link\\\"\"), \", message -\u003e {\\n    String rssLink = (String) message.body();\\n    log.info(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fetching \\\"\"), \" + rssLink);\\n    webClient.getAbs(rssLink).send(response -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (response.succeeded()) {\\n            String bodyAsString = response.result().bodyAsString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"UTF-8\\\"\"), \");\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"try\"), \" {\\n                RssChannel rssChannel = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RssChannel(bodyAsString);\\n\\n                BatchStatement batchStatement = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" BatchStatement();\\n                BoundStatement channelInfoInsertQuery = insertChannelInfo.bind(\\n                        rssLink, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Date(System.currentTimeMillis()), rssChannel.description, rssChannel.link, rssChannel.title\\n                );\\n                batchStatement.add(channelInfoInsertQuery);\\n\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"for\"), \" (Article article : rssChannel.articles) {\\n                    batchStatement.add(insertArticleInfo.bind(rssLink, article.pubDate, article.link, article.description, article.title));\\n                }\\n                Future\u003cResultSet\u003e insertArticlesFuture = Future.future();\\n                cassandraClient.execute(batchStatement, insertArticlesFuture);\\n\\n                insertArticlesFuture.compose(insertDone -\u003e Future.succeededFuture());\\n            } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"catch\"), \" (Exception e) {\\n                log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to fetch: \\\"\"), \" + rssLink, e);\\n            }\\n        } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to fetch: \\\"\"), \" + rssLink);\\n        }\\n    });\\n});\\n\")), mdx(\"p\", null, \"And, fi\\xADnally, this code would not work if \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insertChannelInfo\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insertArticleInfo\"), \" state\\xADments will not be ini\\xADtial\\xADized at ver\\xADti\\xADcle start. Let\\u2019s to this in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle#prepareNecessaryQueries\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future\u003cVoid\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareNecessaryQueries\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n        Future\u003cPreparedStatement\u003e insertChannelInfoPrepFuture = Future.future();\\n        cassandraClient.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO channel_info_by_rss_link ( rss_link , last_fetch_time, description , site_link , title ) VALUES (?, ?, ?, ?, ?);\\\"\"), \", insertChannelInfoPrepFuture);\\n\\n        Future\u003cPreparedStatement\u003e insertArticleInfoPrepFuture = Future.future();\\n        cassandraClient.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO articles_by_rss_link ( rss_link , pubdate , article_link , description , title ) VALUES ( ?, ?, ?, ?, ?);\\\"\"), \", insertArticleInfoPrepFuture);\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" CompositeFuture.all(\\n                insertChannelInfoPrepFuture.compose(preparedStatement -\u003e {\\n                    insertChannelInfo = preparedStatement;\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n                }), insertArticleInfoPrepFuture.compose(preparedStatement -\u003e {\\n                    insertArticleInfo = preparedStatement;\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n                })\\n        ).mapEmpty();\\n    }\\n\")), mdx(\"h2\", {\n    \"id\": \"observing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#observing\"\n  })), \"Observing\"), mdx(\"p\", null, \"After all these changes, you should en\\xADsure that the first end\\xADpoint is work\\xADing cor\\xADrectly. You need to run the ap\\xADpli\\xADca\\xADtion, go to lo\\xADcal\\xADhost:8080 in\\xADsert a link to a rss feed there(\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://feeds.bbci.co.uk/news/uk/rss.xml\"\n  }), \"BBC UK feed news\"), \" for ex\\xADam\\xADple) and then click the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ENTER\"), \" but\\xADton. Now you can con\\xADnect to your local Cas\\xADsan\\xADdra in\\xADstance, for in\\xADstance with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlsh.html\"\n  }), \"cqlsh\"), \", and find out how RSS feed data had been saved in the rss_reader key\\xADspace:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), \"cqlsh\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" * \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" rss_reader.rss_by_user \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"limit\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"  ;\\n\\n login | rss_link\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"-------+-----------------------------------------\"), \"\\n Pavel | http://feeds.bbci.co.uk/news/uk/rss.xml\\n\\n(1 rows)\\ncqlsh\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" description \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" rss_reader.articles_by_rss_link  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"limit\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \";\\n\\n description\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"-------------------------------------\"), \"\\n BBC coverage of latest developments\\n\\n(1 rows)\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"In this ar\\xADti\\xADcle we fig\\xADured out how to im\\xADple\\xADment the first end\\xADpoint of RSS-\\u200Breader app. If you have any prob\\xADlems with com\\xADplet\\xADing this step you can check\\xADout to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_2\"), \", where you can find all changes made for com\\xADplet\\xADing this step:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_2\"), \"\\n\")), mdx(\"p\", null, \"Thanks for read\\xADing this. I hope you en\\xADjoyed read\\xADing this ar\\xADti\\xADcle. See you soon on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitter.im/eclipse-vertx/vertx-users\"\n  }), \"Git\\xADter chan\\xADnel\"), \"!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eThis tu¬≠to¬≠r¬≠ial is ded¬≠i¬≠cated for users who‚Äôd like to know how to use the Eclipse Vert.x Cas¬≠san¬≠dra client in prac¬≠tice.\u003c/p\u003e\u003ch2 id=\"before-you-start-this-tutorial\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#before-you-start-this-tutorial\"\u003e\u003c/a\u003eBefore you start this tutorial\u003c/h2\u003e\u003cp\u003eBe¬≠fore start¬≠ing, you should\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cp\u003ebe fa¬≠mil¬≠iar with \u003ca href=\"https://vertx.io/\"\u003eEclipse Vert.x\u003c/a\u003e. If you are not, here is the \u003ca href=\"https://vertx.io/docs/guide-for-java-devs/\"\u003eguide for Java de¬≠vel¬≠op¬≠ers\u003c/a\u003e.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003ehave some basic un¬≠der¬≠stand¬≠ing of data¬≠bases. Ex¬≠tended knowl¬≠edge of Cas¬≠san¬≠dra is not re¬≠quired.\u003c/p\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eYou also may find it use¬≠ful to read \u003ca href=\"https://validator.w3.org/feed/docs/rss2.html\"\u003ethe RSS 2.0\u003c/a\u003e spec¬≠i¬≠fi¬≠ca¬≠tion, be¬≠cause the re¬≠sulted app is, ba¬≠si¬≠cally, a stor¬≠age of RSS 2.0 feeds.\u003c/p\u003e\u003cp\u003eTo give you an idea of what the App is about, here is how it looks like from the fronted side:\u003c/p\u003e\u003cimg src=\"https://i.imgur.com/2V954zx.png\" alt=\"see how it looks\" class=\"img-fluid\"/\u003e\u003cp\u003eIn the image, we see that browser space is split into 2 parts:\u003c/p\u003e\u003col\u003e\u003cli\u003eSaved feed names\u003c/li\u003e\u003cli\u003eList of ar¬≠ti¬≠cles for the se¬≠lected feed\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eHere you also can enter a link to a new feed, so the App will fetch and parse the feed.\nAfter that, it will ap¬≠pear in the left col¬≠umn along with other saved feeds.\u003c/p\u003e\u003ch2 id=\"requirements\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#requirements\"\u003e\u003c/a\u003eRequirements\u003c/h2\u003e\u003cp\u003eFor com¬≠plet¬≠ing this tu¬≠to¬≠r¬≠ial you need:\u003c/p\u003e\u003cul\u003e\u003cli\u003eJava 8 or higher\u003c/li\u003e\u003cli\u003eGit\u003c/li\u003e\u003cli\u003e1 hour of your time\u003c/li\u003e\u003cli\u003eYou fa¬≠vorite code ed¬≠i¬≠tor\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eFor run¬≠ning the ex¬≠am¬≠ple you should en¬≠sure that Cas¬≠san¬≠dra ser¬≠vice is run¬≠ning lo¬≠cally on port 9042.\nAs an op¬≠tion, you can run Cas¬≠san¬≠dra with \u003ca href=\"https://github.com/riptano/ccm#installation\"\u003eccm\u003c/a\u003e(Cas¬≠san¬≠dra Clus¬≠ter Man¬≠ager).\nFol¬≠low \u003ca href=\"https://github.com/riptano/ccm#installation\"\u003ethis\u003c/a\u003e in¬≠struc¬≠tions for in¬≠stalling ccm.\nAfter in¬≠stalling you will be able to run a sin¬≠gle node clus¬≠ter:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ccm create rss_reader -v 3.11.2 -n 1 -s\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ccm start\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBe¬≠fore com¬≠plet¬≠ing this step make sure that you have suc¬≠cess¬≠fully cloned the RSS reader repos¬≠i¬≠tory and checked out the \u003ccode\u003estep_1\u003c/code\u003e branch:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git \u003cspan class=\"hljs-built_in\"\u003eclone\u003c/span\u003e https://github.com/Sammers21/rss-reader\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e rss-reader\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow you can try to tun this ex¬≠am¬≠ple and see if it works:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ./gradlew vertxRun\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"schema\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#schema\"\u003e\u003c/a\u003eSchema\u003c/h2\u003e\u003cp\u003eIf you are fa¬≠mil¬≠iar with \u003ca href=\"http://cassandra.apache.org/\"\u003eApache Cas¬≠san¬≠dra\u003c/a\u003e, you\nshould know that the way your data is stored in Cas¬≠san¬≠dra is de¬≠pen¬≠dent on queries\nyou are run¬≠ning. It means that you need first to fig¬≠ure out what kind of queries\nyou will be run¬≠ning, and then you can pro¬≠duce a stor¬≠age scheme.\u003c/p\u003e\u003cp\u003eIn our case, we‚Äôd like our ap¬≠pli¬≠ca¬≠tion to have 3 end¬≠points:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003ccode\u003ePOST /user/{user_id}/rss_link\u003c/code\u003e - for adding links to a user‚Äôs feed\u003c/li\u003e\u003cli\u003e\u003ccode\u003eGET /user/{user_id}/rss_channels\u003c/code\u003e - for re¬≠triev¬≠ing in¬≠for¬≠ma¬≠tion about RSS chan¬≠nels a user sub¬≠scribed on\u003c/li\u003e\u003cli\u003e\u003ccode\u003eGET /articles/by_rss_link?link={rss_link}\u003c/code\u003e - for re¬≠triev¬≠ing in¬≠for¬≠ma¬≠tion about ar¬≠ti¬≠cles on a spe¬≠cific RSS chan¬≠nel\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eFor im¬≠ple¬≠ment¬≠ing this end¬≠points, the schema should look as fol¬≠lows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e rss_by_user (login \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e , rss_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, PRIMARY \u003cspan class=\"hljs-keyword\"\u003eKEY\u003c/span\u003e (login, rss_link));\n\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e articles_by_rss_link(rss_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, pubDate \u003cspan class=\"hljs-built_in\"\u003etimestamp\u003c/span\u003e, title \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, article_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, description \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, PRIMARY \u003cspan class=\"hljs-keyword\"\u003eKEY\u003c/span\u003e ( rss_link , pubDate , article_link));\n\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e channel_info_by_rss_link(rss_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, last_fetch_time \u003cspan class=\"hljs-built_in\"\u003etimestamp\u003c/span\u003e,title \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, site_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, description \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, PRIMARY \u003cspan class=\"hljs-keyword\"\u003eKEY\u003c/span\u003e(rss_link));\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"what-to-do-in-this-step\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#what-to-do-in-this-step\"\u003e\u003c/a\u003eWhat to do in this step\u003c/h2\u003e\u003cp\u003eIn this step, we will im¬≠ple¬≠ment only the first end¬≠point\u003c/p\u003e\u003ch2 id=\"project-overview\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#project-overview\"\u003e\u003c/a\u003eProject overview\u003c/h2\u003e\u003cp\u003eThere are two no¬≠table classes in the project: \u003ccode\u003eAppVerticle\u003c/code\u003e and \u003ccode\u003eFetchVerticle\u003c/code\u003e. The first one is a \u003ca href=\"https://vertx.io/docs/vertx-core/java/#_verticles\"\u003eVer¬≠ti¬≠cle\u003c/a\u003e re¬≠spon¬≠si¬≠ble for HTTP re¬≠quest han¬≠dling and stor¬≠age schema ini¬≠tial¬≠iza¬≠tion. The sec¬≠ond one is a \u003ca href=\"https://vertx.io/docs/vertx-core/java/#_verticles\"\u003eVer¬≠ti¬≠cle\u003c/a\u003e as well, but re¬≠spon¬≠si¬≠ble for RSS feeds fetch¬≠ing.\u003c/p\u003e\u003cp\u003eThe idea is sim¬≠ple. When the ap¬≠pli¬≠ca¬≠tion is start¬≠ing the \u003ccode\u003eAppVerticle\u003c/code\u003e is de¬≠ployed, then it tries to ini¬≠tial¬≠ize stor¬≠age schema, de¬≠scribed in \u003ccode\u003esrc/main/resources/schema.cql\u003c/code\u003e file by read¬≠ing it and ex¬≠e¬≠cut¬≠ing listed queries line by line. After the schema ini¬≠tial¬≠iza¬≠tion the \u003ccode\u003eAppVerticle\u003c/code\u003e de¬≠ploys \u003ccode\u003eFetchVerticle\u003c/code\u003e and starts a HTTP server.\u003c/p\u003e\u003ch2 id=\"implementing-the-endpoint\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementing-the-endpoint\"\u003e\u003c/a\u003eImplementing the endpoint\u003c/h2\u003e\u003cp\u003eNow, it is time to im¬≠ple¬≠ment the first end¬≠point. Pay at¬≠ten¬≠tion to \u003ccode\u003eTODO\u003c/code\u003es, they are for point¬≠ing you out about where changes should be made.\u003c/p\u003e\u003cp\u003eNow, let‚Äôs have a look at the \u003ccode\u003eAppVerticle#postRssLink\u003c/code\u003e method. This method is called each time the first end¬≠point is called, so we can fig¬≠ure out what is the posted body and id of the user, who per¬≠formed the re¬≠quest, di¬≠rectly there. There are 2 main things we want to do in this method:\u003c/p\u003e\u003col\u003e\u003cli\u003eNo¬≠ti¬≠fy¬≠ing via the \u003ca href=\"https://vertx.io/docs/vertx-core/java/#event_bus\"\u003eEvent Bus\u003c/a\u003e the \u003ccode\u003eFetchVerticle\u003c/code\u003e to fetch given by user link link to an RSS feed.\u003c/li\u003e\u003cli\u003eIn¬≠sert¬≠ing an entry to the \u003ccode\u003erss_by_user\u003c/code\u003e table.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eThis is how the \u003ccode\u003eAppVerticle#postRssLink\u003c/code\u003e method should be im¬≠ple¬≠mented:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003epostRssLink\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    ctx.request().bodyHandler(body -\u0026gt; {\n        JsonObject bodyAsJson = body.toJsonObject();\n        String link = bodyAsJson.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;link\u0026quot;\u003c/span\u003e);\n        String userId = ctx.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user_id\u0026quot;\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (link == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e || userId == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n            responseWithInvalidRequest(ctx);\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\u0026quot;fetch.rss.link\u0026quot;\u003c/span\u003e, link);\n            Future\u0026lt;ResultSet\u0026gt; future = Future.future();\n            BoundStatement query = insertNewLinkForUser.bind(userId, link);\n            client.execute(query, future);\n            future.setHandler(result -\u0026gt; {\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (result.succeeded()) {\n                    ctx.response().end(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The feed just added\u0026quot;\u003c/span\u003e).toString());\n                } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                    ctx.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e).end(result.cause().getMessage());\n                }\n            });\n        }\n    });\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eresponseWithInvalidRequest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    ctx.response()\n            .setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e)\n            .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json; charset=utf-8\u0026quot;\u003c/span\u003e)\n            .end(invalidRequest().toString());\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e JsonObject \u003cspan class=\"hljs-title\"\u003einvalidRequest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Invalid request\u0026quot;\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou may no¬≠tice that \u003ccode\u003einsertNewLinkForUser\u003c/code\u003e is a \u003ccode\u003ePreparedStatement\u003c/code\u003e, and should be ini¬≠tial¬≠ized be¬≠fore the \u003ccode\u003eAppVerticle\u003c/code\u003e start. Let‚Äôs do it in the \u003ccode\u003eAppVerticle#prepareNecessaryQueries\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Future\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003eprepareNecessaryQueries\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Future\u0026lt;PreparedStatement\u0026gt; insertNewLinkForUserPrepFuture = Future.future();\n    client.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\u0026quot;\u003c/span\u003e, insertNewLinkForUserPrepFuture);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e insertNewLinkForUserPrepFuture.compose(preparedStatement -\u0026gt; {\n        insertNewLinkForUser = preparedStatement;\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAlso, we should not for¬≠get to fetch a RSS by the link sent to \u003ccode\u003eFetchVerticle\u003c/code\u003e via the Event Bus. We can do it in the \u003ccode\u003eFetchVerticle#startFetchEventBusConsumer\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003evertx.eventBus().localConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;fetch.rss.link\u0026quot;\u003c/span\u003e, message -\u0026gt; {\n    String rssLink = (String) message.body();\n    log.info(\u003cspan class=\"hljs-string\"\u003e\u0026quot;fetching \u0026quot;\u003c/span\u003e + rssLink);\n    webClient.getAbs(rssLink).send(response -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (response.succeeded()) {\n            String bodyAsString = response.result().bodyAsString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;UTF-8\u0026quot;\u003c/span\u003e);\n            \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n                RssChannel rssChannel = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RssChannel(bodyAsString);\n\n                BatchStatement batchStatement = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e BatchStatement();\n                BoundStatement channelInfoInsertQuery = insertChannelInfo.bind(\n                        rssLink, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Date(System.currentTimeMillis()), rssChannel.description, rssChannel.link, rssChannel.title\n                );\n                batchStatement.add(channelInfoInsertQuery);\n\n                \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Article article : rssChannel.articles) {\n                    batchStatement.add(insertArticleInfo.bind(rssLink, article.pubDate, article.link, article.description, article.title));\n                }\n                Future\u0026lt;ResultSet\u0026gt; insertArticlesFuture = Future.future();\n                cassandraClient.execute(batchStatement, insertArticlesFuture);\n\n                insertArticlesFuture.compose(insertDone -\u0026gt; Future.succeededFuture());\n            } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (Exception e) {\n                log.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Unable to fetch: \u0026quot;\u003c/span\u003e + rssLink, e);\n            }\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            log.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Unable to fetch: \u0026quot;\u003c/span\u003e + rssLink);\n        }\n    });\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd, fi¬≠nally, this code would not work if \u003ccode\u003einsertChannelInfo\u003c/code\u003e and \u003ccode\u003einsertArticleInfo\u003c/code\u003e state¬≠ments will not be ini¬≠tial¬≠ized at ver¬≠ti¬≠cle start. Let‚Äôs to this in the \u003ccode\u003eFetchVerticle#prepareNecessaryQueries\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Future\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003eprepareNecessaryQueries\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n        Future\u0026lt;PreparedStatement\u0026gt; insertChannelInfoPrepFuture = Future.future();\n        cassandraClient.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO channel_info_by_rss_link ( rss_link , last_fetch_time, description , site_link , title ) VALUES (?, ?, ?, ?, ?);\u0026quot;\u003c/span\u003e, insertChannelInfoPrepFuture);\n\n        Future\u0026lt;PreparedStatement\u0026gt; insertArticleInfoPrepFuture = Future.future();\n        cassandraClient.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO articles_by_rss_link ( rss_link , pubdate , article_link , description , title ) VALUES ( ?, ?, ?, ?, ?);\u0026quot;\u003c/span\u003e, insertArticleInfoPrepFuture);\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e CompositeFuture.all(\n                insertChannelInfoPrepFuture.compose(preparedStatement -\u0026gt; {\n                    insertChannelInfo = preparedStatement;\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n                }), insertArticleInfoPrepFuture.compose(preparedStatement -\u0026gt; {\n                    insertArticleInfo = preparedStatement;\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n                })\n        ).mapEmpty();\n    }\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"observing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#observing\"\u003e\u003c/a\u003eObserving\u003c/h2\u003e\u003cp\u003eAfter all these changes, you should en¬≠sure that the first end¬≠point is work¬≠ing cor¬≠rectly. You need to run the ap¬≠pli¬≠ca¬≠tion, go to lo¬≠cal¬≠host:8080 in¬≠sert a link to a rss feed there(\u003ca href=\"http://feeds.bbci.co.uk/news/uk/rss.xml\"\u003eBBC UK feed news\u003c/a\u003e for ex¬≠am¬≠ple) and then click the \u003cem\u003eENTER\u003c/em\u003e but¬≠ton. Now you can con¬≠nect to your local Cas¬≠san¬≠dra in¬≠stance, for in¬≠stance with \u003ca href=\"https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlsh.html\"\u003ecqlsh\u003c/a\u003e, and find out how RSS feed data had been saved in the rss_reader key¬≠space:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003ecqlsh\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e rss_reader.rss_by_user \u003cspan class=\"hljs-keyword\"\u003elimit\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  ;\n\n login | rss_link\n\u003cspan class=\"hljs-comment\"\u003e-------+-----------------------------------------\u003c/span\u003e\n Pavel | http://feeds.bbci.co.uk/news/uk/rss.xml\n\n(1 rows)\ncqlsh\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e description \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e rss_reader.articles_by_rss_link  \u003cspan class=\"hljs-keyword\"\u003elimit\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n\n description\n\u003cspan class=\"hljs-comment\"\u003e-------------------------------------\u003c/span\u003e\n BBC coverage of latest developments\n\n(1 rows)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eIn this ar¬≠ti¬≠cle we fig¬≠ured out how to im¬≠ple¬≠ment the first end¬≠point of RSS-‚Äãreader app. If you have any prob¬≠lems with com¬≠plet¬≠ing this step you can check¬≠out to \u003ccode\u003estep_2\u003c/code\u003e, where you can find all changes made for com¬≠plet¬≠ing this step:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThanks for read¬≠ing this. I hope you en¬≠joyed read¬≠ing this ar¬≠ti¬≠cle. See you soon on our \u003ca href=\"https://gitter.im/eclipse-vertx/vertx-users\"\u003eGit¬≠ter chan¬≠nel\u003c/a\u003e!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"feed","tf":12},{"term":"rss","tf":11},{"term":"cassandra","tf":8},{"term":"endpoint","tf":8},{"term":"run","tf":7},{"term":"first","tf":7},{"term":"method","tf":7},{"term":"start","tf":6},{"term":"link","tf":6},{"term":"will","tf":6},{"term":"implement","tf":6},{"term":"user","tf":5},{"term":"not","tf":5},{"term":"step","tf":5},{"term":"schema","tf":5},{"term":"initi","tf":5},{"term":"read","tf":4},{"term":"app","tf":4},{"term":"storag","tf":4},{"term":"articl","tf":4},{"term":"fetch","tf":4},{"term":"complet","tf":4},{"term":"tutori","tf":3},{"term":"find","tf":3},{"term":"look","tf":3}]},{"filename":"blog/2018-07-02-simplified-database-transaction-management-with-the-vert-x-rxjava-api.mdx","date":"2018-07-02","slug":"simplified-database-transaction-management-with-the-vert-x-rxjava-api","meta":{"title":"Simplified database transaction management with the Vert.x RxJava API","category":"guides","authors":[{"name":"Thomas Segismont","github_id":"tsegismont"}],"summary":"As of Vert.x 3.5, managing database transactions requires a lot of boilerplate code. Vert.x 3.6 provides helpers to easily make a reactive flow transactional."},"readingTime":{"text":"4 min read","minutes":3.235,"time":194100,"words":647},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"TL;DR As of 3.5, man\\xADag\\xADing data\\xADbase trans\\xADac\\xADtions with Vert.x re\\xADquires a lot of boil\\xADer\\xADplate code.\"), \"\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vert.x 3.6 will pro\\xADvide helpers and \", mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"Observable\"), \" trans\\xADform\\xADers to eas\\xADily make a re\\xADac\\xADtive flow trans\\xADac\\xADtional.\")), mdx(\"h2\", {\n    \"id\": \"simple-queries-with-the-rxified-api\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#simple-queries-with-the-rxified-api\"\n  })), \"Simple queries with the \", mdx(\"em\", {\n    parentName: \"h2\"\n  }, \"\\u201CRxified\\u201D\"), \" API\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-rx/java2/\"\n  }), \"Vert.x API for Rx\\xADJava\"), \" is one of the most pop\\xADu\\xADlar mod\\xADules in the Vert.x stack.\"), mdx(\"p\", null, \"So we make sure the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201CRx\\xADi\\xADfied\\u201D\"), \" API is easy to use for com\\xADmon pro\\xADgram\\xADming tasks, such as read\\xADing rows from a re\\xADla\\xADtional data\\xADbase and send\\xADing the re\\xADsult to the client:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"dbClient.rxQuery(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT name, duration FROM tracks WHERE album = 'The Israelites'\\\"\"), \")\\n  .map(ResultSet::getResults)\\n  .map(rows -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Transform DB rows into a client-friendly JSON object\"), \"\\n  })\\n  .subscribe(json -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send JSON to the client\"), \"\\n  }, t -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send error to the client\"), \"\\n  });\\n\")), mdx(\"h2\", {\n    \"id\": \"managing-transactions-with-vertx-35\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#managing-transactions-with-vertx-35\"\n  })), \"Managing transactions with Vert.x 3.5\"), mdx(\"p\", null, \"But very often, de\\xADvel\\xADop\\xADers have to im\\xADple\\xADment com\\xADplex in\\xADter\\xADac\\xADtions with the data\\xADbase, run\\xADning in\\xADside a sin\\xADgle trans\\xADac\\xADtion.\\nTo do so, the im\\xADple\\xADmen\\xADta\\xADtion must fol\\xADlow this process:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"get a con\\xADnec\\xADtion from the pool,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"start a trans\\xADac\\xADtion,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ex\\xADe\\xADcute queries,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"if all queries suc\\xADceed, com\\xADmit the trans\\xADac\\xADtion,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"oth\\xADer\\xADwise, roll\\xADback the changes.\")), mdx(\"p\", null, \"How does that trans\\xADlate to code?\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Get a connection from the pool\"), \"\\ndbClient.rxGetConnection().flatMap(sqlConnection -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Setting auto-commit mode to false implicitely starts a transaction\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" sqlConnection.rxSetAutoCommit(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"false\"), \")\\n    .andThen(\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Database queries\"), \"\\n      sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO albums (name) VALUES ('The Israelites')\\\"\"), \")\\n        .andThen(sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO tracks (album, name) VALUES ('The Israelites', 'Israelites')\\\"\"), \"))\\n        .andThen(sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO tracks (album, name) VALUES ('The Israelites', 'Too Much Too Soon')\\\"\"), \"))\\n        .andThen(sqlConnection.rxQuery(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT name FROM tracks WHERE album = 'The Israelites'\\\"\"), \").map(ResultSet::getResults))\\n    )\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Commit if all queries succeed\"), \"\\n    .flatMap(rows -\u003e sqlConnection.rxCommit().andThen(Single.just(rows)))\\n    .onErrorResumeNext(throwable -\u003e {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// On error, rollback the changes\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" sqlConnection.rxRollback().onErrorComplete()\\n        .andThen(sqlConnection.rxSetAutoCommit(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \").onErrorComplete())\\n        .andThen(Single.error(throwable));\\n    }).flatMap(rows -\u003e sqlConnection.rxSetAutoCommit(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \").andThen(Single.just(rows)))\\n    .doFinally(sqlConnection::close);\\n}).map(rows -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Transform DB rows into a client-friendly JSON object\"), \"\\n}).subscribe(json -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send JSON to the client\"), \"\\n}, t -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send error to the client\"), \"\\n});\\n\")), mdx(\"p\", null, \"That is a lot of boil\\xADer\\xADplate around the spe\\xADcific data\\xADbase queries\\u2026\\nIt would be bet\\xADter to re\\xADlieve the de\\xADvel\\xADoper from main\\xADtain\\xADing it.\"), mdx(\"h2\", {\n    \"id\": \"vertx-36-tools-for-transaction-management\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-36-tools-for-transaction-management\"\n  })), \"Vert.x 3.6 tools for transaction management\"), mdx(\"p\", null, \"That is why Vert.x 3.6 will pro\\xADvide \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"Observable\"), \" trans\\xADform\\xADers\"), \" that can be ap\\xADplied to re\\xADac\\xADtive flows with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://reactivex.io/RxJava/javadoc/io/reactivex/Flowable.html#compose-io.reactivex.FlowableTransformer-\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"compose\")), \" to make them trans\\xADac\\xADtional:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"SQLClientHelper#txFlowableTransformer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"SQLClientHelper#txObservableTransformer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"SQLClientHelper#txSingleTransformer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"SQLClientHelper#txMaybeTransformer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"SQLClientHelper#txCompletableTransformer\"))), mdx(\"p\", null, \"These \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"trans\\xADform\\xADers\"), \" wrap the cor\\xADre\\xADspond\\xADing source of events with SQL trans\\xADac\\xADtion man\\xADage\\xADment.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"dbClient.rxGetConnection().flatMap(sqlConnection -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO albums (name) VALUES ('The Israelites')\\\"\"), \")\\n    .andThen(sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO tracks (album, name) VALUES ('The Israelites', 'Israelites')\\\"\"), \"))\\n    .andThen(sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO tracks (album, name) VALUES ('The Israelites', 'Too Much Too Soon')\\\"\"), \"))\\n    .andThen(sqlConnection.rxQuery(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT name FROM tracks WHERE album = 'The Israelites'\\\"\"), \").map(ResultSet::getResults))\\n    .compose(SQLClientHelper.txSingleTransformer(sqlConnection))\\n    .doFinally(sqlConnection::close);\\n}).map(rows -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Transform DB rows into a client-friendly JSON object\"), \"\\n}).subscribe(json -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send JSON to the client\"), \"\\n}, t -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send error to the client\"), \"\\n});\\n\")), mdx(\"p\", null, \"Source \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"trans\\xADform\\xADers\"), \" pro\\xADvide max\\xADi\\xADmum flex\\xADi\\xADbil\\xADity: you are still able to ex\\xADe\\xADcute op\\xADer\\xADa\\xADtions with the con\\xADnec\\xADtion after the trans\\xADac\\xADtion com\\xADpletes.\"), mdx(\"p\", null, \"How\\xADever, you usu\\xADally do not need the con\\xADnec\\xADtion after the changes are \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"com\\xADmited\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"roll\\xADbacked\"), \".\\nIn this case, you may sim\\xADply cre\\xADate you source ob\\xADserv\\xADable with one of the trans\\xADac\\xADtional helper meth\\xADods in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"io.vertx.reactivex.ext.sql.SQLClientHelper\"), \".\"), mdx(\"p\", null, \"Let\\u2019s rewrite the pre\\xADvi\\xADous ex\\xADam\\xADple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"SQLClientHelper.inTransactionSingle(client, sqlConnection -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO albums (name) VALUES ('The Israelites')\\\"\"), \")\\n    .andThen(sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO tracks (album, name) VALUES ('The Israelites', 'Israelites')\\\"\"), \"))\\n    .andThen(sqlConnection.rxExecute(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO tracks (album, name) VALUES ('The Israelites', 'Too Much Too Soon')\\\"\"), \"))\\n    .andThen(sqlConnection.rxQuery(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT name FROM tracks WHERE album = 'The Israelites'\\\"\"), \").map(ResultSet::getResults))\\n}).map(rows -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Transform DB rows into a client-friendly JSON object\"), \"\\n}).subscribe(json -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send JSON to the client\"), \"\\n}, t -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send error to the client\"), \"\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"give-it-a-try\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#give-it-a-try\"\n  })), \"Give it a try\"), mdx(\"p\", null, \"Vert.x 3.6 is ex\\xADpected around fall, but the code is al\\xADready in mas\\xADter and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"snap\\xADshots\"), \" are reg\\xADu\\xADlarly pub\\xADlished to Sonatype\\u2019s OSS repos.\"), mdx(\"p\", null, \"So give it a try and feel free to pro\\xADvide your fee\\xADback on our user or dev \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/community\"\n  }), \"chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003e\u003cem\u003eTL;DR As of 3.5, man¬≠ag¬≠ing data¬≠base trans¬≠ac¬≠tions with Vert.x re¬≠quires a lot of boil¬≠er¬≠plate code.\u003c/em\u003e\n\u003cem\u003eVert.x 3.6 will pro¬≠vide helpers and \u003ccode\u003eObservable\u003c/code\u003e trans¬≠form¬≠ers to eas¬≠ily make a re¬≠ac¬≠tive flow trans¬≠ac¬≠tional.\u003c/em\u003e\u003c/p\u003e\u003ch2 id=\"simple-queries-with-the-rxified-api\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#simple-queries-with-the-rxified-api\"\u003e\u003c/a\u003eSimple queries with the \u003cem\u003e‚ÄúRxified‚Äù\u003c/em\u003e API\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://vertx.io/docs/vertx-rx/java2/\"\u003eVert.x API for Rx¬≠Java\u003c/a\u003e is one of the most pop¬≠u¬≠lar mod¬≠ules in the Vert.x stack.\u003c/p\u003e\u003cp\u003eSo we make sure the \u003cem\u003e‚ÄúRx¬≠i¬≠fied‚Äù\u003c/em\u003e API is easy to use for com¬≠mon pro¬≠gram¬≠ming tasks, such as read¬≠ing rows from a re¬≠la¬≠tional data¬≠base and send¬≠ing the re¬≠sult to the client:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003edbClient.rxQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT name, duration FROM tracks WHERE album = \u0026#x27;The Israelites\u0026#x27;\u0026quot;\u003c/span\u003e)\n  .map(ResultSet::getResults)\n  .map(rows -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// Transform DB rows into a client-friendly JSON object\u003c/span\u003e\n  })\n  .subscribe(json -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// Send JSON to the client\u003c/span\u003e\n  }, t -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// Send error to the client\u003c/span\u003e\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"managing-transactions-with-vertx-35\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#managing-transactions-with-vertx-35\"\u003e\u003c/a\u003eManaging transactions with Vert.x 3.5\u003c/h2\u003e\u003cp\u003eBut very often, de¬≠vel¬≠op¬≠ers have to im¬≠ple¬≠ment com¬≠plex in¬≠ter¬≠ac¬≠tions with the data¬≠base, run¬≠ning in¬≠side a sin¬≠gle trans¬≠ac¬≠tion.\nTo do so, the im¬≠ple¬≠men¬≠ta¬≠tion must fol¬≠low this process:\u003c/p\u003e\u003cul\u003e\u003cli\u003eget a con¬≠nec¬≠tion from the pool,\u003c/li\u003e\u003cli\u003estart a trans¬≠ac¬≠tion,\u003c/li\u003e\u003cli\u003eex¬≠e¬≠cute queries,\u003c/li\u003e\u003cli\u003eif all queries suc¬≠ceed, com¬≠mit the trans¬≠ac¬≠tion,\u003c/li\u003e\u003cli\u003eoth¬≠er¬≠wise, roll¬≠back the changes.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eHow does that trans¬≠late to code?\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Get a connection from the pool\u003c/span\u003e\ndbClient.rxGetConnection().flatMap(sqlConnection -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Setting auto-commit mode to false implicitely starts a transaction\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e sqlConnection.rxSetAutoCommit(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e)\n    .andThen(\n      \u003cspan class=\"hljs-comment\"\u003e// Database queries\u003c/span\u003e\n      sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO albums (name) VALUES (\u0026#x27;The Israelites\u0026#x27;)\u0026quot;\u003c/span\u003e)\n        .andThen(sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO tracks (album, name) VALUES (\u0026#x27;The Israelites\u0026#x27;, \u0026#x27;Israelites\u0026#x27;)\u0026quot;\u003c/span\u003e))\n        .andThen(sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO tracks (album, name) VALUES (\u0026#x27;The Israelites\u0026#x27;, \u0026#x27;Too Much Too Soon\u0026#x27;)\u0026quot;\u003c/span\u003e))\n        .andThen(sqlConnection.rxQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT name FROM tracks WHERE album = \u0026#x27;The Israelites\u0026#x27;\u0026quot;\u003c/span\u003e).map(ResultSet::getResults))\n    )\n    \u003cspan class=\"hljs-comment\"\u003e// Commit if all queries succeed\u003c/span\u003e\n    .flatMap(rows -\u0026gt; sqlConnection.rxCommit().andThen(Single.just(rows)))\n    .onErrorResumeNext(throwable -\u0026gt; {\n      \u003cspan class=\"hljs-comment\"\u003e// On error, rollback the changes\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e sqlConnection.rxRollback().onErrorComplete()\n        .andThen(sqlConnection.rxSetAutoCommit(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e).onErrorComplete())\n        .andThen(Single.error(throwable));\n    }).flatMap(rows -\u0026gt; sqlConnection.rxSetAutoCommit(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e).andThen(Single.just(rows)))\n    .doFinally(sqlConnection::close);\n}).map(rows -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Transform DB rows into a client-friendly JSON object\u003c/span\u003e\n}).subscribe(json -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Send JSON to the client\u003c/span\u003e\n}, t -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Send error to the client\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThat is a lot of boil¬≠er¬≠plate around the spe¬≠cific data¬≠base queries‚Ä¶\nIt would be bet¬≠ter to re¬≠lieve the de¬≠vel¬≠oper from main¬≠tain¬≠ing it.\u003c/p\u003e\u003ch2 id=\"vertx-36-tools-for-transaction-management\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-36-tools-for-transaction-management\"\u003e\u003c/a\u003eVert.x 3.6 tools for transaction management\u003c/h2\u003e\u003cp\u003eThat is why Vert.x 3.6 will pro¬≠vide \u003cem\u003e\u003ccode\u003eObservable\u003c/code\u003e trans¬≠form¬≠ers\u003c/em\u003e that can be ap¬≠plied to re¬≠ac¬≠tive flows with \u003ca href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Flowable.html#compose-io.reactivex.FlowableTransformer-\"\u003e\u003ccode\u003ecompose\u003c/code\u003e\u003c/a\u003e to make them trans¬≠ac¬≠tional:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003eSQLClientHelper#txFlowableTransformer\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003eSQLClientHelper#txObservableTransformer\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003eSQLClientHelper#txSingleTransformer\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003eSQLClientHelper#txMaybeTransformer\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003eSQLClientHelper#txCompletableTransformer\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThese \u003cem\u003etrans¬≠form¬≠ers\u003c/em\u003e wrap the cor¬≠re¬≠spond¬≠ing source of events with SQL trans¬≠ac¬≠tion man¬≠age¬≠ment.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003edbClient.rxGetConnection().flatMap(sqlConnection -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO albums (name) VALUES (\u0026#x27;The Israelites\u0026#x27;)\u0026quot;\u003c/span\u003e)\n    .andThen(sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO tracks (album, name) VALUES (\u0026#x27;The Israelites\u0026#x27;, \u0026#x27;Israelites\u0026#x27;)\u0026quot;\u003c/span\u003e))\n    .andThen(sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO tracks (album, name) VALUES (\u0026#x27;The Israelites\u0026#x27;, \u0026#x27;Too Much Too Soon\u0026#x27;)\u0026quot;\u003c/span\u003e))\n    .andThen(sqlConnection.rxQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT name FROM tracks WHERE album = \u0026#x27;The Israelites\u0026#x27;\u0026quot;\u003c/span\u003e).map(ResultSet::getResults))\n    .compose(SQLClientHelper.txSingleTransformer(sqlConnection))\n    .doFinally(sqlConnection::close);\n}).map(rows -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Transform DB rows into a client-friendly JSON object\u003c/span\u003e\n}).subscribe(json -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Send JSON to the client\u003c/span\u003e\n}, t -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Send error to the client\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSource \u003cem\u003etrans¬≠form¬≠ers\u003c/em\u003e pro¬≠vide max¬≠i¬≠mum flex¬≠i¬≠bil¬≠ity: you are still able to ex¬≠e¬≠cute op¬≠er¬≠a¬≠tions with the con¬≠nec¬≠tion after the trans¬≠ac¬≠tion com¬≠pletes.\u003c/p\u003e\u003cp\u003eHow¬≠ever, you usu¬≠ally do not need the con¬≠nec¬≠tion after the changes are \u003cem\u003ecom¬≠mited\u003c/em\u003e or \u003cem\u003eroll¬≠backed\u003c/em\u003e.\nIn this case, you may sim¬≠ply cre¬≠ate you source ob¬≠serv¬≠able with one of the trans¬≠ac¬≠tional helper meth¬≠ods in \u003ccode\u003eio.vertx.reactivex.ext.sql.SQLClientHelper\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eLet‚Äôs rewrite the pre¬≠vi¬≠ous ex¬≠am¬≠ple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eSQLClientHelper.inTransactionSingle(client, sqlConnection -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO albums (name) VALUES (\u0026#x27;The Israelites\u0026#x27;)\u0026quot;\u003c/span\u003e)\n    .andThen(sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO tracks (album, name) VALUES (\u0026#x27;The Israelites\u0026#x27;, \u0026#x27;Israelites\u0026#x27;)\u0026quot;\u003c/span\u003e))\n    .andThen(sqlConnection.rxExecute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO tracks (album, name) VALUES (\u0026#x27;The Israelites\u0026#x27;, \u0026#x27;Too Much Too Soon\u0026#x27;)\u0026quot;\u003c/span\u003e))\n    .andThen(sqlConnection.rxQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT name FROM tracks WHERE album = \u0026#x27;The Israelites\u0026#x27;\u0026quot;\u003c/span\u003e).map(ResultSet::getResults))\n}).map(rows -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Transform DB rows into a client-friendly JSON object\u003c/span\u003e\n}).subscribe(json -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Send JSON to the client\u003c/span\u003e\n}, t -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Send error to the client\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"give-it-a-try\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#give-it-a-try\"\u003e\u003c/a\u003eGive it a try\u003c/h2\u003e\u003cp\u003eVert.x 3.6 is ex¬≠pected around fall, but the code is al¬≠ready in mas¬≠ter and \u003cem\u003esnap¬≠shots\u003c/em\u003e are reg¬≠u¬≠larly pub¬≠lished to Sonatype‚Äôs OSS repos.\u003c/p\u003e\u003cp\u003eSo give it a try and feel free to pro¬≠vide your fee¬≠back on our user or dev \u003ca href=\"https://vertx.io/community\"\u003echan¬≠nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"transact","tf":11},{"term":"manag","tf":4},{"term":"databas","tf":4},{"term":"provid","tf":4},{"term":"transform","tf":4},{"term":"queri","tf":4},{"term":"code","tf":3},{"term":"api","tf":3},{"term":"connect","tf":3},{"term":"sourc","tf":3},{"term":"lot","tf":2},{"term":"boilerpl","tf":2},{"term":"will","tf":2},{"term":"helper","tf":2},{"term":"reactiv","tf":2},{"term":"flow","tf":2},{"term":"rxifi","tf":2},{"term":"on","tf":2},{"term":"develop","tf":2},{"term":"implement","tf":2},{"term":"execut","tf":2},{"term":"commit","tf":2},{"term":"rollback","tf":2},{"term":"chang","tf":2},{"term":"around","tf":2}]},{"filename":"blog/2018-06-04-eclipse-vert-x-goes-native.mdx","date":"2018-06-04","slug":"eclipse-vert-x-goes-native","meta":{"title":"Eclipse Vert.x goes Native","category":"guides","authors":[{"name":"Johannes Sch√ºth","github_id":"jotschi"}],"summary":"This blog post introduces native image generation of Vert.x applications with GraalVM. Generated executables can be run without a JVM."},"readingTime":{"text":"5 min read","minutes":4.235,"time":254100.00000000003,"words":847},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I this blog post, I would like to give you a pre\\xADview on na\\xADtive image gen\\xADer\\xADa\\xADtion of Vert.x ap\\xADpli\\xADca\\xADtions using GraalVM.\"), mdx(\"p\", null, \"With \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.graalvm.org/\"\n  }), \"GraalVM\"), \" it is pos\\xADsi\\xADble to gen\\xADer\\xADate na\\xADtive ex\\xADe\\xADcuta\\xADbles.\\nThese ex\\xADe\\xADcuta\\xADbles can be di\\xADrectly run with\\xADout the need of an in\\xADstalled JVM.\"), mdx(\"h2\", {\n    \"id\": \"benefits\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#benefits\"\n  })), \"Benefits\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"The start up time is way faster. It is no longer re\\xADquired to wait for the start up of the JVM. The ap\\xADpli\\xADca\\xADtion is usu\\xADally up and run\\xADning in a mat\\xADter of mil\\xADlisec\\xADonds.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Re\\xADduced mem\\xADory foot\\xADprint. I mea\\xADsured 40 MB mem\\xADory usage (RSS) for the Vert.x Web ap\\xADpli\\xADca\\xADtion which I\\u2019m going to show\\xADcase.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Smaller Con\\xADtain\\xADers. No JVM means no over\\xADhead. All the needed parts are al\\xADready con\\xADtained within the ex\\xADe\\xADcutable. This can be very ben\\xADe\\xADfi\\xADcial when build\\xADing de\\xADploy\\xADable con\\xADtainer im\\xADages.\"))), mdx(\"h2\", {\n    \"id\": \"demo-project\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#demo-project\"\n  })), \"Demo Project\"), mdx(\"p\", null, \"For the demo ap\\xADpli\\xADca\\xADtion I choose a very basic hello world \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-web/java/\"\n  }), \"Vert.x Web\"), \" server.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" de.jotschi.examples;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" java.io.File;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.core.Vertx;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.core.logging.Logger;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.core.logging.LoggerFactory;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.core.logging.SLF4JLogDelegateFactory;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.ext.web.Router;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Runner\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"main\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String[] args)\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Use logback for logging\"), \"\\n    File logbackFile = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" File(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"config\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"logback.xml\\\"\"), \");\\n    System.setProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"logback.configurationFile\\\"\"), \", logbackFile.getAbsolutePath());\\n    System.setProperty(LoggerFactory.LOGGER_DELEGATE_FACTORY_CLASS_NAME, SLF4JLogDelegateFactory.class.getName());\\n    Logger log = LoggerFactory.getLogger(Runner.class);\\n\\n    // Setup the http server\\n    log.info(\\\"Starting server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"for\"), \": http://localhost:\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \"/hello\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\");\\n    Vertx vertx = Vertx.vertx();\\n    Router router = Router.router(vertx);\\n\\n    router.route(\\\"\"), \"/hello\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\").handler(rc -\u003e {\\n      log.info(\\\"\"), \"Got hello request\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\");\\n      rc.response().end(\\\"\"), \"World\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\");\\n    });\\n\\n    vertx.createHttpServer()\\n      .requestHandler(router::accept)\\n      .listen(8080);\\n\\n  }\\n\\n}\\n\"))), mdx(\"h2\", {\n    \"id\": \"graalvm\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#graalvm\"\n  })), \"GraalVM\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.graalvm.org/\"\n  }), \"GraalVM\"), \" runs a sta\\xADtic analy\\xADsis on the gen\\xADer\\xADated ap\\xADpli\\xADca\\xADtion in order to find the reach\\xADable code.\\nThis process which is run within the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/oracle/graal/tree/master/substratevm\"\n  }), \"Sub\\xADstrate VM\"), \" will lead to the gen\\xADer\\xADa\\xADtion of the na\\xADtive image.\"), mdx(\"h3\", {\n    \"id\": \"limitations\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#limitations\"\n  })), \"Limitations\"), mdx(\"p\", null, \"Due to the na\\xADture of the sta\\xADtic analy\\xADsis Sub\\xADstrate VM also has some \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md\"\n  }), \"lim\\xADi\\xADta\\xADtions\"), \".\"), mdx(\"p\", null, \"Dy\\xADnamic class load\\xADing and un\\xADload\\xADing for ex\\xADam\\xADple is not sup\\xADported be\\xADcause this would in essence alter the avail\\xADable code dur\\xADing run\\xADtime. \"), mdx(\"p\", null, \"Re\\xADflec\\xADtion is only par\\xADtially sup\\xADported and re\\xADquires some man\\xADual steps which we will cover later on.\"), mdx(\"h3\", {\n    \"id\": \"patches--workarounds\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#patches--workarounds\"\n  })), \"Patches / Workarounds\"), mdx(Alert, {\n    info: true,\n    title: \"Work in progress\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Next we need to apply some patches / workarounds. Keep in mind that na\\xADtive image gen\\xADer\\xADa\\xADtion is a fairly new topic and the these workarounds will hope\\xADfully no longer be re\\xADquired once the Sub\\xADstrate VM and Netty have bet\\xADter sup\\xADport for each other.\")), mdx(\"p\", null, \"I did not man\\xADage to get na\\xADtive epoll, kqueue and SSL in\\xADte\\xADgra\\xADtion to work with na\\xADtive im\\xADages.\\nThese parts are heav\\xADily op\\xADti\\xADmized within Netty and use JNI to di\\xADrectly ac\\xADcess the OS fea\\xADtures.\\nSub\\xADstrate VM sup\\xADports JNI and could in the\\xADory in\\xADte\\xADgrate these na\\xADtive li\\xADbraries. \"), mdx(\"p\", null, \"I cre\\xADated a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graalvm-native-image-test/tree/netty-native-epoll\"\n  }), \"re\\xADpro\\xADducer\"), \"\\nand an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/oracle/graal/issues/442\"\n  }), \"issue\"), \" so hope\\xADfully these prob\\xADlems can be ad\\xADdressed soon.\"), mdx(\"h3\", {\n    \"id\": \"vertx-transport\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-transport\"\n  })), \"Vert.x Transport\"), mdx(\"p\", null, \"First I needed to patch the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"io.vertx.core.net.impl.transport.Transport\"), \" class in order to pre\\xADvent the load\\xADing of EPoll and KQueue na\\xADtive sup\\xADport. Oth\\xADer\\xADwise Sub\\xADstrate VM will try to load these classes and fail.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Transport\"), \" \"), \"{\\n\\u2026\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"/**\\n   * The native transport, it may be {\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-doctag\"\n  }), \"@code\"), \" null} or failed.\\n   */\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" Transport \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"nativeTransport\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Patched: I remove the native transport discovery. \"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// The imports would be picked up by substrate \"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// and cause further issues. \"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \";\\n  }\\n\\u2026\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"netty-ssl\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#netty-ssl\"\n  })), \"Netty SSL\"), mdx(\"p\", null, \"Na\\xADtive SSL sup\\xADport is an\\xADother prob\\xADlem\\xADatic area. I cre\\xADated a patched dummy \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"io.netty.handler.ssl.ReferenceCountedOpenSslEngine\"), \" class in order to pre\\xADvent Sub\\xADstrate VM from dig\\xADging deeper into the SSL code of Netty.\"), mdx(\"p\", null, \"Next we need to set up the re\\xADflec\\xADtion con\\xADfig\\xADu\\xADra\\xADtion within \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"reflectconfigs/netty.json\"), \".\"), mdx(\"p\", null, \"Netty uses re\\xADflec\\xADtion to in\\xADstan\\xADti\\xADate the socket chan\\xADnels. This is done in the Re\\xADflec\\xADtiveChan\\xADnelFac\\xADtory. We need to tell Sub\\xADstrate VM how classes of type NioServer\\xADSock\\xADetChan\\xADnel  and NioSock\\xADetChan\\xADnel can be in\\xADstan\\xADti\\xADated. \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"[\\n  {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"io.netty.channel.socket.nio.NioSocketChannel\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"methods\\\"\"), \" : [\\n      { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cinit\u003e\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"parameterTypes\\\"\"), \" : [] }\\n    ]\\n  },\\n  {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"io.netty.channel.socket.nio.NioServerSocketChannel\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"methods\\\"\"), \" : [\\n      { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cinit\u003e\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"parameterTypes\\\"\"), \" : [] }\\n    ]\\n  }\\n]\\n\")), mdx(\"p\", null, \"If you want to learn more about the state of Netty and GraalVM I can rec\\xADom\\xADmend this \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/graalvm/instant-netty-startup-using-graalvm-native-image-generation-ed6f14ff7692\"\n  }), \"GraalVM Blog\\xADpost\"), \" by Co\\xADdrut Stancu.\"), mdx(\"h2\", {\n    \"id\": \"building\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#building\"\n  })), \"Building\"), mdx(\"p\", null, \"Fi\\xADnally we can build our maven project to gen\\xADer\\xADate a shaded jar.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"mvn clean package\\n\")), mdx(\"p\", null, \"Next we need the GraalVM pack\\xADage. You can down\\xADload it from the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.graalvm.org/\"\n  }), \"GraalVM web\\xADsite\"), \".\"), mdx(\"p\", null, \"We use the shaded jar as the input source for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"native-image\"), \" com\\xADmand which will gen\\xADer\\xADate the ex\\xADe\\xADcutable.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-variable\"\n  }), \"$GRAALVMDIR\"), \"/bin/native-image \\\\\\n --verbose \\\\\\n --no-server \\\\\\n -Dio.netty.noUnsafe=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"  \\\\\\n -H:ReflectionConfigurationFiles=./reflectconfigs/netty.json \\\\\\n -H:+ReportUnsupportedElementsAtRuntime \\\\\\n -Dfile.encoding=UTF-8 \\\\\\n -jar target/vertx-graalvm-native-image-test-0.0.1-SNAPSHOT.jar\\n\")), mdx(\"h2\", {\n    \"id\": \"result\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#result\"\n  })), \"Result\"), mdx(\"p\", null, \"Fi\\xADnally we end up with an 27 MB \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-graalvm-native-image-test-0.0.1-SNAPSHOT\"), \" ex\\xADe\\xADcutable which we can run.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"$ ldd vertx-graalvm-native-image-test-0.0.1-SNAPSHOT \\n  linux-vdso.so.1 (0x00007ffc65be8000)\\n  libdl.so.2 =\u003e /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f8e892f0000)\\n  libpthread.so.0 =\u003e /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f8e890d3000)\\n  libz.so.1 =\u003e /lib/x86_64-linux-gnu/libz.so.1 (0x00007f8e88eb9000)\\n  librt.so.1 =\u003e /lib/x86_64-linux-gnu/librt.so.1 (0x00007f8e88cb1000)\\n  libcrypt.so.1 =\u003e /lib/x86_64-linux-gnu/libcrypt.so.1 (0x00007f8e88a79000)\\n  libc.so.6 =\u003e /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8e886da000)\\n  /lib64/ld-linux-x86-64.so.2 (0x00007f8e8afb7000)\\n\")), mdx(\"h3\", {\n    \"id\": \"memory\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#memory\"\n  })), \"Memory\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"/usr/bin/time -f \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\\nmaxRSS\\\\t%MkB\\\"\"), \" java -jar target/vertx-graalvm-native-image-test-0.0.1-SNAPSHOT.jar \\n/usr/bin/time -f \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\\nmaxRSS\\\\t%MkB\\\"\"), \" ./vertx-graalvm-native-image-test-0.0.1-SNAPSHOT \\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Na\\xADtive Image: 40 MB\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Java 10: 125 MB\")), mdx(\"p\", null, \"The full project can be found on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graalvm-native-image-test\"\n  }), \"GitHub\"), \".\"), mdx(\"p\", null, \"If you want to read more on the topic I can also rec\\xADom\\xADmend \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://sites.google.com/a/athaydes.com/renato-athaydes/posts/a7mbnative-imagejavaappthatrunsin30msandusesonly4mbofram\"\n  }), \"this ar\\xADti\\xADcle\"), \" by Re\\xADnato Athay\\xADdes in which he demon\\xADstrates how to cre\\xADate a very small light weight low mem\\xADory ap\\xADpli\\xADca\\xADtion using GraalVM.\"), mdx(\"p\", null, \"Thanks for read\\xADing. If you have any fur\\xADther ques\\xADtions or feed\\xADback don\\u2019t hes\\xADi\\xADtate to send me a tweet to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/Jotschi/\"\n  }), \"@Jotschi\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eI this blog post, I would like to give you a pre¬≠view on na¬≠tive image gen¬≠er¬≠a¬≠tion of Vert.x ap¬≠pli¬≠ca¬≠tions using GraalVM.\u003c/p\u003e\u003cp\u003eWith \u003ca href=\"https://www.graalvm.org/\"\u003eGraalVM\u003c/a\u003e it is pos¬≠si¬≠ble to gen¬≠er¬≠ate na¬≠tive ex¬≠e¬≠cuta¬≠bles.\nThese ex¬≠e¬≠cuta¬≠bles can be di¬≠rectly run with¬≠out the need of an in¬≠stalled JVM.\u003c/p\u003e\u003ch2 id=\"benefits\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#benefits\"\u003e\u003c/a\u003eBenefits\u003c/h2\u003e\u003cul\u003e\u003cli\u003e\u003cp\u003eThe start up time is way faster. It is no longer re¬≠quired to wait for the start up of the JVM. The ap¬≠pli¬≠ca¬≠tion is usu¬≠ally up and run¬≠ning in a mat¬≠ter of mil¬≠lisec¬≠onds.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003eRe¬≠duced mem¬≠ory foot¬≠print. I mea¬≠sured 40 MB mem¬≠ory usage (RSS) for the Vert.x Web ap¬≠pli¬≠ca¬≠tion which I‚Äôm going to show¬≠case.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003eSmaller Con¬≠tain¬≠ers. No JVM means no over¬≠head. All the needed parts are al¬≠ready con¬≠tained within the ex¬≠e¬≠cutable. This can be very ben¬≠e¬≠fi¬≠cial when build¬≠ing de¬≠ploy¬≠able con¬≠tainer im¬≠ages.\u003c/p\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"demo-project\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#demo-project\"\u003e\u003c/a\u003eDemo Project\u003c/h2\u003e\u003cp\u003eFor the demo ap¬≠pli¬≠ca¬≠tion I choose a very basic hello world \u003ca href=\"https://vertx.io/docs/vertx-web/java/\"\u003eVert.x Web\u003c/a\u003e server.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e de.jotschi.examples;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e java.io.File;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.core.Vertx;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.core.logging.Logger;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.core.logging.LoggerFactory;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.core.logging.SLF4JLogDelegateFactory;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.ext.web.Router;\n\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eRunner\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String[] args)\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Use logback for logging\u003c/span\u003e\n    File logbackFile = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e File(\u003cspan class=\"hljs-string\"\u003e\u0026quot;config\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;logback.xml\u0026quot;\u003c/span\u003e);\n    System.setProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;logback.configurationFile\u0026quot;\u003c/span\u003e, logbackFile.getAbsolutePath());\n    System.setProperty(LoggerFactory.LOGGER_DELEGATE_FACTORY_CLASS_NAME, SLF4JLogDelegateFactory.class.getName());\n    Logger log = LoggerFactory.getLogger(Runner.class);\n\n    // Setup the http server\n    log.info(\u0026quot;Starting server \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e: http://localhost:\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e/hello\u003cspan class=\"hljs-string\"\u003e\u0026quot;);\n    Vertx vertx = Vertx.vertx();\n    Router router = Router.router(vertx);\n\n    router.route(\u0026quot;\u003c/span\u003e/hello\u003cspan class=\"hljs-string\"\u003e\u0026quot;).handler(rc -\u0026gt; {\n      log.info(\u0026quot;\u003c/span\u003eGot hello request\u003cspan class=\"hljs-string\"\u003e\u0026quot;);\n      rc.response().end(\u0026quot;\u003c/span\u003eWorld\u003cspan class=\"hljs-string\"\u003e\u0026quot;);\n    });\n\n    vertx.createHttpServer()\n      .requestHandler(router::accept)\n      .listen(8080);\n\n  }\n\n}\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"graalvm\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#graalvm\"\u003e\u003c/a\u003eGraalVM\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://www.graalvm.org/\"\u003eGraalVM\u003c/a\u003e runs a sta¬≠tic analy¬≠sis on the gen¬≠er¬≠ated ap¬≠pli¬≠ca¬≠tion in order to find the reach¬≠able code.\nThis process which is run within the \u003ca href=\"https://github.com/oracle/graal/tree/master/substratevm\"\u003eSub¬≠strate VM\u003c/a\u003e will lead to the gen¬≠er¬≠a¬≠tion of the na¬≠tive image.\u003c/p\u003e\u003ch3 id=\"limitations\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#limitations\"\u003e\u003c/a\u003eLimitations\u003c/h3\u003e\u003cp\u003eDue to the na¬≠ture of the sta¬≠tic analy¬≠sis Sub¬≠strate VM also has some \u003ca href=\"https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md\"\u003elim¬≠i¬≠ta¬≠tions\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eDy¬≠namic class load¬≠ing and un¬≠load¬≠ing for ex¬≠am¬≠ple is not sup¬≠ported be¬≠cause this would in essence alter the avail¬≠able code dur¬≠ing run¬≠time. \u003c/p\u003e\u003cp\u003eRe¬≠flec¬≠tion is only par¬≠tially sup¬≠ported and re¬≠quires some man¬≠ual steps which we will cover later on.\u003c/p\u003e\u003ch3 id=\"patches--workarounds\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#patches--workarounds\"\u003e\u003c/a\u003ePatches / Workarounds\u003c/h3\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eWork in progress\u003c/div\u003e\u003cp\u003eNext we need to apply some patches / workarounds. Keep in mind that na¬≠tive image gen¬≠er¬≠a¬≠tion is a fairly new topic and the these workarounds will hope¬≠fully no longer be re¬≠quired once the Sub¬≠strate VM and Netty have bet¬≠ter sup¬≠port for each other.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eI did not man¬≠age to get na¬≠tive epoll, kqueue and SSL in¬≠te¬≠gra¬≠tion to work with na¬≠tive im¬≠ages.\nThese parts are heav¬≠ily op¬≠ti¬≠mized within Netty and use JNI to di¬≠rectly ac¬≠cess the OS fea¬≠tures.\nSub¬≠strate VM sup¬≠ports JNI and could in the¬≠ory in¬≠te¬≠grate these na¬≠tive li¬≠braries. \u003c/p\u003e\u003cp\u003eI cre¬≠ated a \u003ca href=\"https://github.com/Jotschi/vertx-graalvm-native-image-test/tree/netty-native-epoll\"\u003ere¬≠pro¬≠ducer\u003c/a\u003e\nand an \u003ca href=\"https://github.com/oracle/graal/issues/442\"\u003eissue\u003c/a\u003e so hope¬≠fully these prob¬≠lems can be ad¬≠dressed soon.\u003c/p\u003e\u003ch3 id=\"vertx-transport\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-transport\"\u003e\u003c/a\u003eVert.x Transport\u003c/h3\u003e\u003cp\u003eFirst I needed to patch the \u003ccode\u003eio.vertx.core.net.impl.transport.Transport\u003c/code\u003e class in order to pre¬≠vent the load¬≠ing of EPoll and KQueue na¬≠tive sup¬≠port. Oth¬≠er¬≠wise Sub¬≠strate VM will try to load these classes and fail.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTransport\u003c/span\u003e \u003c/span\u003e{\n‚Ä¶\n  \u003cspan class=\"hljs-comment\"\u003e/**\n   * The native transport, it may be {\u003cspan class=\"hljs-doctag\"\u003e@code\u003c/span\u003e null} or failed.\n   */\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e Transport \u003cspan class=\"hljs-title\"\u003enativeTransport\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// Patched: I remove the native transport discovery. \u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// The imports would be picked up by substrate \u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// and cause further issues. \u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e;\n  }\n‚Ä¶\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"netty-ssl\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#netty-ssl\"\u003e\u003c/a\u003eNetty SSL\u003c/h3\u003e\u003cp\u003eNa¬≠tive SSL sup¬≠port is an¬≠other prob¬≠lem¬≠atic area. I cre¬≠ated a patched dummy \u003ccode\u003eio.netty.handler.ssl.ReferenceCountedOpenSslEngine\u003c/code\u003e class in order to pre¬≠vent Sub¬≠strate VM from dig¬≠ging deeper into the SSL code of Netty.\u003c/p\u003e\u003cp\u003eNext we need to set up the re¬≠flec¬≠tion con¬≠fig¬≠u¬≠ra¬≠tion within \u003ccode\u003ereflectconfigs/netty.json\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eNetty uses re¬≠flec¬≠tion to in¬≠stan¬≠ti¬≠ate the socket chan¬≠nels. This is done in the Re¬≠flec¬≠tiveChan¬≠nelFac¬≠tory. We need to tell Sub¬≠strate VM how classes of type NioServer¬≠Sock¬≠etChan¬≠nel  and NioSock¬≠etChan¬≠nel can be in¬≠stan¬≠ti¬≠ated. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e[\n  {\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;io.netty.channel.socket.nio.NioSocketChannel\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;methods\u0026quot;\u003c/span\u003e : [\n      { \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;init\u0026gt;\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003e\u0026quot;parameterTypes\u0026quot;\u003c/span\u003e : [] }\n    ]\n  },\n  {\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;io.netty.channel.socket.nio.NioServerSocketChannel\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;methods\u0026quot;\u003c/span\u003e : [\n      { \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;init\u0026gt;\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003e\u0026quot;parameterTypes\u0026quot;\u003c/span\u003e : [] }\n    ]\n  }\n]\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you want to learn more about the state of Netty and GraalVM I can rec¬≠om¬≠mend this \u003ca href=\"https://medium.com/graalvm/instant-netty-startup-using-graalvm-native-image-generation-ed6f14ff7692\"\u003eGraalVM Blog¬≠post\u003c/a\u003e by Co¬≠drut Stancu.\u003c/p\u003e\u003ch2 id=\"building\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#building\"\u003e\u003c/a\u003eBuilding\u003c/h2\u003e\u003cp\u003eFi¬≠nally we can build our maven project to gen¬≠er¬≠ate a shaded jar.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003emvn clean package\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNext we need the GraalVM pack¬≠age. You can down¬≠load it from the \u003ca href=\"https://www.graalvm.org/\"\u003eGraalVM web¬≠site\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eWe use the shaded jar as the input source for the \u003ccode\u003enative-image\u003c/code\u003e com¬≠mand which will gen¬≠er¬≠ate the ex¬≠e¬≠cutable.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-variable\"\u003e$GRAALVMDIR\u003c/span\u003e/bin/native-image \\\n --verbose \\\n --no-server \\\n -Dio.netty.noUnsafe=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e  \\\n -H:ReflectionConfigurationFiles=./reflectconfigs/netty.json \\\n -H:+ReportUnsupportedElementsAtRuntime \\\n -Dfile.encoding=UTF-8 \\\n -jar target/vertx-graalvm-native-image-test-0.0.1-SNAPSHOT.jar\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"result\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#result\"\u003e\u003c/a\u003eResult\u003c/h2\u003e\u003cp\u003eFi¬≠nally we end up with an 27 MB \u003ccode\u003evertx-graalvm-native-image-test-0.0.1-SNAPSHOT\u003c/code\u003e ex¬≠e¬≠cutable which we can run.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ ldd vertx-graalvm-native-image-test-0.0.1-SNAPSHOT \n  linux-vdso.so.1 (0x00007ffc65be8000)\n  libdl.so.2 =\u0026gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f8e892f0000)\n  libpthread.so.0 =\u0026gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f8e890d3000)\n  libz.so.1 =\u0026gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007f8e88eb9000)\n  librt.so.1 =\u0026gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f8e88cb1000)\n  libcrypt.so.1 =\u0026gt; /lib/x86_64-linux-gnu/libcrypt.so.1 (0x00007f8e88a79000)\n  libc.so.6 =\u0026gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8e886da000)\n  /lib64/ld-linux-x86-64.so.2 (0x00007f8e8afb7000)\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"memory\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#memory\"\u003e\u003c/a\u003eMemory\u003c/h3\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e/usr/bin/time -f \u003cspan class=\"hljs-string\"\u003e\u0026quot;\\nmaxRSS\\t%MkB\u0026quot;\u003c/span\u003e java -jar target/vertx-graalvm-native-image-test-0.0.1-SNAPSHOT.jar \n/usr/bin/time -f \u003cspan class=\"hljs-string\"\u003e\u0026quot;\\nmaxRSS\\t%MkB\u0026quot;\u003c/span\u003e ./vertx-graalvm-native-image-test-0.0.1-SNAPSHOT \n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eNa¬≠tive Image: 40 MB\u003c/li\u003e\u003cli\u003eJava 10: 125 MB\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe full project can be found on \u003ca href=\"https://github.com/Jotschi/vertx-graalvm-native-image-test\"\u003eGitHub\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eIf you want to read more on the topic I can also rec¬≠om¬≠mend \u003ca href=\"https://sites.google.com/a/athaydes.com/renato-athaydes/posts/a7mbnative-imagejavaappthatrunsin30msandusesonly4mbofram\"\u003ethis ar¬≠ti¬≠cle\u003c/a\u003e by Re¬≠nato Athay¬≠des in which he demon¬≠strates how to cre¬≠ate a very small light weight low mem¬≠ory ap¬≠pli¬≠ca¬≠tion using GraalVM.\u003c/p\u003e\u003cp\u003eThanks for read¬≠ing. If you have any fur¬≠ther ques¬≠tions or feed¬≠back don‚Äôt hes¬≠i¬≠tate to send me a tweet to \u003ca href=\"https://twitter.com/Jotschi/\"\u003e@Jotschi\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"nativ","tf":10},{"term":"graalvm","tf":9},{"term":"gener","tf":7},{"term":"need","tf":7},{"term":"substrat","tf":7},{"term":"vm","tf":7},{"term":"imag","tf":6},{"term":"applic","tf":6},{"term":"support","tf":6},{"term":"netti","tf":6},{"term":"us","tf":5},{"term":"execut","tf":5},{"term":"run","tf":5},{"term":"will","tf":5},{"term":"class","tf":5},{"term":"no","tf":4},{"term":"memori","tf":4},{"term":"mb","tf":4},{"term":"within","tf":4},{"term":"patch","tf":4},{"term":"ssl","tf":4},{"term":"jvm","tf":3},{"term":"requir","tf":3},{"term":"contain","tf":3},{"term":"build","tf":3}]},{"filename":"blog/2018-04-23-eclipse-vert-x-rabbitmq-client-gets-a-new-consumer-api.mdx","date":"2018-04-23","slug":"eclipse-vert-x-rabbitmq-client-gets-a-new-consumer-api","meta":{"title":"Eclipse Vert.x RabbitMQ client gets a new consumer API!","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this blog post, we present the new consumer API of the RabbitMQ client that will be released with Eclipse Vert.x 3.6.0."},"readingTime":{"text":"3 min read","minutes":2.245,"time":134700.00000000003,"words":449},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In Eclipse Vert.x 3.6.0, the Rab\\xADbitMQ client will get a new con\\xADsumer API. In this post we are going to show\\nthe im\\xADprove\\xADments since the pre\\xADvi\\xADous API and how easy it is to use now.\"), mdx(\"p\", null, \"Be\\xADfore dig\\xADging into the new API let\\u2019s find out what were the lim\\xADi\\xADta\\xADtions of the ac\\xADtual one:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The API uses the event bus in such lim\\xADit\\xADing the con\\xADtrol of the con\\xADsumer over the Rab\\xADbitMQ queue.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The mes\\xADsage API is based on \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JsonObject\"), \" which does not pro\\xADvide a typed API\")), mdx(\"h2\", {\n    \"id\": \"the-new-api-at-a-glance\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-new-api-at-a-glance\"\n  })), \"The new API at a glance\"), mdx(\"p\", null, \"Here is how sim\\xADple queue con\\xADsump\\xADtion looks like with the new API:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"RabbitMQClient client = RabbitMQClient.create(vertx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RabbitMQOptions());\\n\\nclient.basicConsumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my.queue\\\"\"), \", res -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (res.succeeded()) {\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"RabbitMQ consumer created !\\\"\"), \");\\n    RabbitMQConsumer mqConsumer = res.result();\\n    mqConsumer.handler((RabbitMQMessage message) -\u003e {\\n        System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Got message: \\\"\"), \" + message.body().toString());\\n    });\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Oups something went wrong\"), \"\\n    res.cause().printStackTrace();\\n  }\\n});\\n\")), mdx(\"p\", null, \"Now to cre\\xADate a queue you sim\\xADply call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"basicConsumer\"), \" method and you ob\\xADtain asyn\\xADchro\\xADnously\\na \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RabbitMQConsumer\"), \".\"), mdx(\"p\", null, \"Then you need to pro\\xADvide a han\\xADdler called for each mes\\xADsage con\\xADsumed via \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Rab\\xADbit\\xADMQ\\xADCon\\xADsumer#han\\xADdler\"), \" which\\nis the id\\xADiomatic way to con\\xADsumer stream in Vert.x\"), mdx(\"p\", null, \"You may also note that when we a mes\\xADsage ar\\xADrives, it has the type of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RabbitMQMessage\"), \", this is a typed\\nmes\\xADsage rep\\xADre\\xADsen\\xADta\\xADtion.\"), mdx(\"p\", null, \"Since \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RabbitMQConsumer\"), \" is a stream, you also al\\xADlowed to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pause\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"resume\"), \" the stream, sub\\xADscribe to the\\nend event, get no\\xADti\\xADfied when an ex\\xADcep\\xADtion oc\\xADcurs.\"), mdx(\"p\", null, \"In ad\\xADdi\\xADtion, you can can\\xADcel the sub\\xADscrip\\xADtion by call\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RabbitMQConsumer#cancel\"), \" method.\"), mdx(\"h2\", {\n    \"id\": \"backpressure\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#backpressure\"\n  })), \"Backpressure\"), mdx(\"p\", null, \"Some\\xADtimes you can have more in\\xADcom\\xADing mes\\xADsages than you can han\\xADdle.\"), mdx(\"p\", null, \"The new con\\xADsumer API al\\xADlows you to con\\xADtrol this and lets you store ar\\xADrived mes\\xADsages in the in\\xADter\\xADnal queue\\nbe\\xADfore they are de\\xADliv\\xADered to the ap\\xADpli\\xADca\\xADtion. In\\xADdeed, you can con\\xADfig\\xADure the queue size.\"), mdx(\"p\", null, \"Here is how you can limit the in\\xADter\\xADnal queue size:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Limit to max 300 messages\"), \"\\nQueueOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" QueueOptions()\\n  .setMaxInternalQueueSize(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"300\"), \");\\n\\nRabbitMQClient client = RabbitMQClient.create(vertx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RabbitMQOptions());\\n\\nclient.basicConsumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my.queue\\\"\"), \", options, res -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (res.succeeded()) {\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"RabbitMQ consumer created !\\\"\"), \");\\n    RabbitMQConsumer mqConsumer = res.result();\\n    mqConsumer.handler((RabbitMQMessage message) -\u003e {\\n      System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Got message: \\\"\"), \" + message.body().toString());\\n    });\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    res.cause().printStackTrace();\\n  }\\n});\\n\")), mdx(\"p\", null, \"When the in\\xADten\\xADral queue queue ca\\xADpac\\xADity is ex\\xADceeded, the new mes\\xADsage will be sim\\xADply dropped.\"), mdx(\"p\", null, \"An al\\xADter\\xADna\\xADtive op\\xADtion is to drop the old\\xADest mes\\xADsage in the queue.\"), mdx(\"p\", null, \"In order to achieve this, you should spec\\xADify the be\\xADhav\\xADior by call\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"QueueOptions#setKeepMostRecent\"), \" method.\"), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"The new Vert.x Rab\\xADbitMQ client con\\xADsumer API is way more id\\xADiomatic and mod\\xADern way to con\\xADsume mes\\xADsages from a queue.\"), mdx(\"p\", null, \"This API is going to pro\\xADvided in the 3.6.0 re\\xADlease, while the old will be dep\\xADre\\xADcated.\"), mdx(\"p\", null, \"I hope you en\\xADjoyed read\\xADing this ar\\xADti\\xADcle. See you soon on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitter.im/eclipse-vertx/vertx-users\"\n  }), \"Git\\xADter chan\\xADnel\"), \"!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eIn Eclipse Vert.x 3.6.0, the Rab¬≠bitMQ client will get a new con¬≠sumer API. In this post we are going to show\nthe im¬≠prove¬≠ments since the pre¬≠vi¬≠ous API and how easy it is to use now.\u003c/p\u003e\u003cp\u003eBe¬≠fore dig¬≠ging into the new API let‚Äôs find out what were the lim¬≠i¬≠ta¬≠tions of the ac¬≠tual one:\u003c/p\u003e\u003col\u003e\u003cli\u003eThe API uses the event bus in such lim¬≠it¬≠ing the con¬≠trol of the con¬≠sumer over the Rab¬≠bitMQ queue.\u003c/li\u003e\u003cli\u003eThe mes¬≠sage API is based on \u003ccode\u003eJsonObject\u003c/code\u003e which does not pro¬≠vide a typed API\u003c/li\u003e\u003c/ol\u003e\u003ch2 id=\"the-new-api-at-a-glance\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-new-api-at-a-glance\"\u003e\u003c/a\u003eThe new API at a glance\u003c/h2\u003e\u003cp\u003eHere is how sim¬≠ple queue con¬≠sump¬≠tion looks like with the new API:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRabbitMQClient client = RabbitMQClient.create(vertx, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions());\n\nclient.basicConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ consumer created !\u0026quot;\u003c/span\u003e);\n    RabbitMQConsumer mqConsumer = res.result();\n    mqConsumer.handler((RabbitMQMessage message) -\u0026gt; {\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got message: \u0026quot;\u003c/span\u003e + message.body().toString());\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Oups something went wrong\u003c/span\u003e\n    res.cause().printStackTrace();\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow to cre¬≠ate a queue you sim¬≠ply call the \u003ccode\u003ebasicConsumer\u003c/code\u003e method and you ob¬≠tain asyn¬≠chro¬≠nously\na \u003ccode\u003eRabbitMQConsumer\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThen you need to pro¬≠vide a han¬≠dler called for each mes¬≠sage con¬≠sumed via \u003cem\u003eRab¬≠bit¬≠MQ¬≠Con¬≠sumer#han¬≠dler\u003c/em\u003e which\nis the id¬≠iomatic way to con¬≠sumer stream in Vert.x\u003c/p\u003e\u003cp\u003eYou may also note that when we a mes¬≠sage ar¬≠rives, it has the type of \u003ccode\u003eRabbitMQMessage\u003c/code\u003e, this is a typed\nmes¬≠sage rep¬≠re¬≠sen¬≠ta¬≠tion.\u003c/p\u003e\u003cp\u003eSince \u003ccode\u003eRabbitMQConsumer\u003c/code\u003e is a stream, you also al¬≠lowed to \u003ccode\u003epause\u003c/code\u003e and \u003ccode\u003eresume\u003c/code\u003e the stream, sub¬≠scribe to the\nend event, get no¬≠ti¬≠fied when an ex¬≠cep¬≠tion oc¬≠curs.\u003c/p\u003e\u003cp\u003eIn ad¬≠di¬≠tion, you can can¬≠cel the sub¬≠scrip¬≠tion by call¬≠ing \u003ccode\u003eRabbitMQConsumer#cancel\u003c/code\u003e method.\u003c/p\u003e\u003ch2 id=\"backpressure\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#backpressure\"\u003e\u003c/a\u003eBackpressure\u003c/h2\u003e\u003cp\u003eSome¬≠times you can have more in¬≠com¬≠ing mes¬≠sages than you can han¬≠dle.\u003c/p\u003e\u003cp\u003eThe new con¬≠sumer API al¬≠lows you to con¬≠trol this and lets you store ar¬≠rived mes¬≠sages in the in¬≠ter¬≠nal queue\nbe¬≠fore they are de¬≠liv¬≠ered to the ap¬≠pli¬≠ca¬≠tion. In¬≠deed, you can con¬≠fig¬≠ure the queue size.\u003c/p\u003e\u003cp\u003eHere is how you can limit the in¬≠ter¬≠nal queue size:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Limit to max 300 messages\u003c/span\u003e\nQueueOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e QueueOptions()\n  .setMaxInternalQueueSize(\u003cspan class=\"hljs-number\"\u003e300\u003c/span\u003e);\n\nRabbitMQClient client = RabbitMQClient.create(vertx, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions());\n\nclient.basicConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, options, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ consumer created !\u0026quot;\u003c/span\u003e);\n    RabbitMQConsumer mqConsumer = res.result();\n    mqConsumer.handler((RabbitMQMessage message) -\u0026gt; {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got message: \u0026quot;\u003c/span\u003e + message.body().toString());\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhen the in¬≠ten¬≠ral queue queue ca¬≠pac¬≠ity is ex¬≠ceeded, the new mes¬≠sage will be sim¬≠ply dropped.\u003c/p\u003e\u003cp\u003eAn al¬≠ter¬≠na¬≠tive op¬≠tion is to drop the old¬≠est mes¬≠sage in the queue.\u003c/p\u003e\u003cp\u003eIn order to achieve this, you should spec¬≠ify the be¬≠hav¬≠ior by call¬≠ing \u003ccode\u003eQueueOptions#setKeepMostRecent\u003c/code\u003e method.\u003c/p\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThe new Vert.x Rab¬≠bitMQ client con¬≠sumer API is way more id¬≠iomatic and mod¬≠ern way to con¬≠sume mes¬≠sages from a queue.\u003c/p\u003e\u003cp\u003eThis API is going to pro¬≠vided in the 3.6.0 re¬≠lease, while the old will be dep¬≠re¬≠cated.\u003c/p\u003e\u003cp\u003eI hope you en¬≠joyed read¬≠ing this ar¬≠ti¬≠cle. See you soon on our \u003ca href=\"https://gitter.im/eclipse-vertx/vertx-users\"\u003eGit¬≠ter chan¬≠nel\u003c/a\u003e!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"api","tf":11},{"term":"queue","tf":10},{"term":"messag","tf":9},{"term":"new","tf":7},{"term":"consum","tf":7},{"term":"call","tf":4},{"term":"rabbitmq","tf":3},{"term":"will","tf":3},{"term":"limit","tf":3},{"term":"provid","tf":3},{"term":"type","tf":3},{"term":"method","tf":3},{"term":"stream","tf":3},{"term":"client","tf":2},{"term":"go","tf":2},{"term":"us","tf":2},{"term":"let","tf":2},{"term":"event","tf":2},{"term":"control","tf":2},{"term":"simpli","tf":2},{"term":"handler","tf":2},{"term":"idiomat","tf":2},{"term":"arriv","tf":2},{"term":"allow","tf":2},{"term":"intern","tf":2}]},{"filename":"blog/2018-04-09-eclipse-vert-x-metrics-now-with-micrometer-io.mdx","date":"2018-04-09","slug":"eclipse-vert-x-metrics-now-with-micrometer-io","meta":{"title":"Eclipse Vert.x metrics now with Micrometer.io","category":"guides","authors":[{"name":"Joel Takvorian","github_id":"jotak"}],"summary":"The new vertx-micrometer-metrics module provides support for collecting metrics with Micrometer.io and storing them in backends such as Graphite or InfluxDB."},"readingTime":{"text":"8 min read","minutes":7.405,"time":444300,"words":1481},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Vert.x has al\\xADready been pro\\xADvid\\xADing met\\xADrics for some time, through the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-dropwizard-metrics/java/\"\n  }), \"vertx-\\u200Bdropwizard-metrics\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-hawkular-metrics/java/\"\n  }), \"vertx-\\u200Bhawkular-metrics\"), \" mod\\xADules. Both of them im\\xADple\\xADment a ser\\xADvice provider in\\xADter\\xADface (SPI) to col\\xADlect the Vert.x met\\xADrics and make them avail\\xADable to their re\\xADspec\\xADtive back\\xADends.\"), mdx(\"p\", null, \"A new mod\\xADule, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-micrometer-metrics/java/\"\n  }), \"vertx-\\u200Bmicrometer-metrics\"), \", is now added to the fam\\xADily. It im\\xADple\\xADments the same SPI, which means that it is able to pro\\xADvide the same met\\xADrics.\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://micrometer.io/\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Mi\\xADcrom\\xADe\\xADter.io\")), \" is a pretty new met\\xADrics li\\xADbrary, quite com\\xADpa\\xADra\\xADble to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"drop\\xADwiz\\xADard met\\xADrics\"), \" in that it col\\xADlects met\\xADrics in a local, in-\\u200Bmemory reg\\xADistry and is able to store them in var\\xADi\\xADous back\\xADends such as \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Graphite\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"In\\xADfluxDB\"), \". It has sev\\xADeral ad\\xADvan\\xADtages as we will see below.\"), mdx(\"h2\", {\n    \"id\": \"tell-me-more-about-micrometer\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#tell-me-more-about-micrometer\"\n  })), \"Tell me more about Micrometer\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://micrometer.io/\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Mi\\xADcrom\\xADe\\xADter.io\")), \" de\\xADscribes it\\xADself as a a vendor-\\u200Bneutral ap\\xADpli\\xADca\\xADtion met\\xADrics fa\\xADcade.\\nIt pro\\xADvides a well de\\xADsigned API, in Java, to de\\xADfine \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"gauges\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"coun\\xADters\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"timers\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"dis\\xADtri\\xADb\\xADu\\xADtion sum\\xADmaries\"), \".\"), mdx(\"p\", null, \"Among the avail\\xADable back\\xADends, Mi\\xADcrom\\xADe\\xADter na\\xADtively sup\\xADports \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Graphite\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"In\\xADfluxDB\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"JMX\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Prometheus\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://micrometer.io/docs\"\n  }), \"sev\\xADeral oth\\xADers\"), \". Prometheus is very pop\\xADu\\xADlar in the Ku\\xADber\\xADnetes and mi\\xADcroser\\xADvices ecosys\\xADtems, so its sup\\xADport by Mi\\xADcrom\\xADe\\xADter was a strong mo\\xADti\\xADva\\xADtion for im\\xADple\\xADment\\xADing it in Vert.x.\"), mdx(\"p\", null, \"For the the mo\\xADment, our im\\xADple\\xADmen\\xADta\\xADtion in Vert.x sup\\xADports \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Prometheus\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"In\\xADfluxDB\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"JMX\"), \". More should quickly come in the near fu\\xADture.\"), mdx(\"h3\", {\n    \"id\": \"dimensionality\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#dimensionality\"\n  })), \"Dimensionality\"), mdx(\"p\", null, \"An\\xADother in\\xADter\\xADest\\xADing as\\xADpect in Mi\\xADcrom\\xADe\\xADter is that it han\\xADdles met\\xADrics \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"di\\xADmen\\xADsion\\xADal\\xADity\"), \": met\\xADrics can be as\\xADso\\xADci\\xADated with a set of key/value pairs (some\\xADtimes ref\\xADered as \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"tags\"), \", some\\xADtimes as \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"la\\xADbels\"), \"). Every value brings a new di\\xADmen\\xADsion to the met\\xADric, so that in Prometheus or any other back\\xADend that sup\\xADports di\\xADmen\\xADsion\\xADal\\xADity, we can query for dat\\xADa\\xADpoints of one or sev\\xADeral di\\xADmen\\xADsions, or query for dat\\xADa\\xADpoints ag\\xADgre\\xADgated over sev\\xADeral di\\xADmen\\xADsions.\"), mdx(\"p\", null, \"  \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ex\\xADam\\xADple: our met\\xADric \", mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"vertx_http_server_connections\"), \" ac\\xADcepts la\\xADbels \", mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"local\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"remote\"), \", that are used to store ad\\xADdresses on HTTP con\\xADnec\\xADtions\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Prometheus is used in the fol\\xADlow\\xADing ex\\xADam\\xADples, but equiv\\xADa\\xADlent queries can be per\\xADformed with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"In\\xADfluxDB\"), \".\")), mdx(\"p\", null, \"In Prometheus, the query \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx_http_server_connections\"), \" will re\\xADturn as many time\\xADseries as there are com\\xADbi\\xADna\\xADtions of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"local\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"remote\"), \" val\\xADues. Ex\\xADam\\xADple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-basic\"\n  }), \"vertx_http_server_connections{local=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.0.0:8080\\\"\"), \",\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"remote=\\\"1.1.1.1\\\"}\"), \"\\nvertx_http_server_connections{local=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.0.0:8080\\\"\"), \",\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"remote=\\\"2.2.2.2\\\"}\"), \"\\nvertx_http_server_connections{local=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.0.0:8080\\\"\"), \",\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"remote=\\\"3.3.3.3\\\"}\"), \"\\n\")), mdx(\"p\", null, \"To query on a sin\\xADgle di\\xADmen\\xADsion, we must pro\\xADvide the la\\xADbels:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx_http_server_connections{local=\\\"0.0.0.0:8080\\\",remote=\\\"1.1.1.1\\\"}\"), \". It will re\\xADturn a sin\\xADgle time\\xADseries.\"), mdx(\"p\", null, \"To get an ag\\xADgre\\xADgate, Prometheus (PromQL) pro\\xADvides sev\\xADeral \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://prometheus.io/docs/prometheus/latest/querying/operators/#aggregation-operators\"\n  }), \"ag\\xADgre\\xADga\\xADtion op\\xADer\\xADa\\xADtors\"), \":\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sum(vertx_http_server_connections)\"), \" will re\\xADturn the sum across all di\\xADmen\\xADsions.\"), mdx(\"h2\", {\n    \"id\": \"so-what-are-the-vertx-metrics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#so-what-are-the-vertx-metrics\"\n  })), \"So what are the Vert.x metrics?\"), mdx(\"p\", null, \"Peo\\xADple al\\xADready fa\\xADmil\\xADiar with the ex\\xADist\\xADing met\\xADrics mod\\xADules (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"drop\\xADwiz\\xADard\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"hawku\\xADlar\"), \") will not be too dis\\xADori\\xADented. They are roughly the same. The main dif\\xADfer\\xADence is where pre\\xADvi\\xADously, some met\\xADric names could have a vari\\xADable part within - such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.eventbus.handlers.myaddress\"), \" - here we take ad\\xADvan\\xADtage of di\\xADmen\\xADsion\\xADal\\xADity and we will have \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx_eventbus_handlers{address=\\\"myaddress\\\"}\"), \".\"), mdx(\"p\", null, \"Some other met\\xADrics are no longer use\\xADful, for in\\xADstance the drop\\xADwiz\\xADard\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.eventbus.messages.pending\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.eventbus.messages.pending-local\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.eventbus.messages.pending-remote\"), \" are now just \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx_eventbus_pending{side=local}\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx_eventbus_pending{side=remote}\"), \" in mi\\xADcrom\\xADe\\xADter. The sum of them can eas\\xADily be com\\xADputed at query time.\"), mdx(\"p\", null, \"The met\\xADrics pro\\xADvided by Vert.x are dis\\xADpatched into eight big fam\\xADi\\xADlies:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Net client\"), \": dis\\xADtri\\xADb\\xADu\\xADtion sum\\xADmaries of bytes sent and re\\xADceived, num\\xADber of con\\xADnec\\xADtions, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Net server\"), \": dis\\xADtri\\xADb\\xADu\\xADtion sum\\xADmaries of bytes sent and re\\xADceived, num\\xADber of con\\xADnec\\xADtions, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"HTTP client\"), \": counter of re\\xADquests, re\\xADsponse times, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"HTTP server\"), \": counter of re\\xADquests, pro\\xADcess\\xADing times, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Event bus\"), \": counter of han\\xADdlers, mes\\xADsages sent and re\\xADceived, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Pool\"), \": for worker pools and some data\\xADsource pools, queue size and wait\\xADing time, pro\\xADcess\\xADing time, etc.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ver\\xADti\\xADcles\"), \": num\\xADber of ver\\xADti\\xADcles de\\xADployed.\")), mdx(\"p\", null, \"The full list of col\\xADlected met\\xADrics is \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-micrometer-metrics/java/#_vert_x_core_tools_metrics\"\n  }), \"avail\\xADable here\"), \".\"), mdx(\"h2\", {\n    \"id\": \"getting-started\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#getting-started\"\n  })), \"Getting started\"), mdx(\"p\", null, \"This sec\\xADtion will guide you through a quick setup to run a Vert.x ap\\xADpli\\xADca\\xADtion with Mi\\xADcrom\\xADe\\xADter. The code ex\\xADam\\xADples used here are taken from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"micrometer-metrics-example\"), \" in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-examples\"), \" repos\\xADi\\xADtory, in Java, using \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"maven\"), \". But the same could be done with other Vert.x sup\\xADported lan\\xADguages, as well as \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"gra\\xADdle\"), \" in\\xADstead of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"maven\"), \".\"), mdx(\"h3\", {\n    \"id\": \"maven-configuration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#maven-configuration\"\n  })), \"Maven configuration\"), mdx(\"p\", null, \"The con\\xADfig\\xADu\\xADra\\xADtion and the maven im\\xADports will vary ac\\xADcord\\xADing to the back\\xADend stor\\xADage that will be used. For maven, the com\\xADmon part is al\\xADways:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-micrometer-metrics\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.5.1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Then, to re\\xADport to In\\xADfluxDB:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.micrometer\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"micrometer-registry-influx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.0.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Or Prometheus:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.micrometer\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"micrometer-registry-prometheus\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.0.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-web\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.5.1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"Re\\xADmark that, since Prometheus pulls met\\xADrics from their source, they must be ex\\xADposed on an HTTP end\\xADpoint. That\\u2019s why \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-web\"), \" is im\\xADported here. It is not \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ab\\xADsolutely\"), \" nec\\xADes\\xADsary (it\\u2019s pos\\xADsi\\xADble to get the met\\xADrics reg\\xADistry con\\xADtent and ex\\xADpose it in any other way) but it\\u2019s prob\\xADa\\xADbly the eas\\xADi\\xADest way to do.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Or JMX:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.micrometer\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"micrometer-registry-jmx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.0.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"At the mo\\xADment, it is not pos\\xADsi\\xADble to re\\xADport met\\xADrics to sev\\xADeral back\\xADends at the same time. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-micrometer-metrics/issues/16\"\n  }), \"It might be soon im\\xADple\\xADmented\"), \".\")), mdx(\"h3\", {\n    \"id\": \"setting-up-vertx-options\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#setting-up-vertx-options\"\n  })), \"Setting up Vert.x options\"), mdx(\"p\", null, \"A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MicrometerMetricsOptions\"), \" ob\\xADject must be cre\\xADated and passed to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"VertxOptions\"), \", with one back\\xADend con\\xADfig\\xADured (though hav\\xADing no back\\xADend is pos\\xADsi\\xADble: you would get met\\xADrics sent to a de\\xADfault Mi\\xADcrom\\xADe\\xADter reg\\xADistry, but with\\xADout any per\\xADsis\\xADtent stor\\xADage).\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In\\xADfluxDB ex\\xADam\\xADple:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Default InfluxDB options will push metrics to localhost:8086, db \\\"default\\\"\"), \"\\nMicrometerMetricsOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MicrometerMetricsOptions()\\n  .setInfluxDbOptions(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxInfluxDbOptions().setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"))\\n  .setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\nVertx vertx = Vertx.vertx(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxOptions().setMetricsOptions(options));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Then deploy verticles with this vertx instance\"), \"\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Prometheus ex\\xADam\\xADple:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Deploy with embedded server: prometheus metrics will be automatically exposed,\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// independently from any other HTTP server defined\"), \"\\nMicrometerMetricsOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MicrometerMetricsOptions()\\n  .setPrometheusOptions(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxPrometheusOptions()\\n    .setStartEmbeddedServer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \")\\n    .setEmbeddedServerOptions(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" HttpServerOptions().setPort(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8081\"), \"))\\n    .setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"))\\n  .setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\nVertx vertx = Vertx.vertx(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxOptions().setMetricsOptions(options));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Then deploy verticles with this vertx instance\"), \"\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Or Prometheus with the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/metrics\"), \" end\\xADpoint bound to an ex\\xADist\\xADing HTTP server:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Deploy without embedded server: we need to \\\"manually\\\" expose the prometheus metrics\"), \"\\nMicrometerMetricsOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MicrometerMetricsOptions()\\n  .setPrometheusOptions(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxPrometheusOptions().setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"))\\n  .setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\nVertx vertx = Vertx.vertx(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxOptions().setMetricsOptions(options));\\n\\nRouter router = Router.router(vertx);\\nPrometheusMeterRegistry registry = (PrometheusMeterRegistry) BackendRegistries.getDefaultNow();\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Setup a route for metrics\"), \"\\nrouter.route(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/metrics\\\"\"), \").handler(ctx -\u003e {\\n  String response = registry.scrape();\\n  ctx.response().end(response);\\n});\\nvertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"JMX ex\\xADam\\xADple:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Default JMX options will publish MBeans under domain \\\"metrics\\\"\"), \"\\nMicrometerMetricsOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MicrometerMetricsOptions()\\n  .setJmxMetricsOptions(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxJmxMetricsOptions().setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \"))\\n  .setEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\nVertx vertx = Vertx.vertx(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" VertxOptions().setMetricsOptions(options));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Then deploy verticles with this vertx instance\"), \"\\n\")), mdx(\"h3\", {\n    \"id\": \"setup-the-backend-server\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#setup-the-backend-server\"\n  })), \"Setup the backend server\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.influxdata.com/\"\n  }), \"In\\xADfluxDB\"), \", by de\\xADfault, is ex\\xADpected to run on \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"localhost:8086\"), \" with\\xADout au\\xADthen\\xADti\\xADca\\xADtion, data\\xADbase \\u201Cde\\xADfault\\u201D. It is con\\xADfig\\xADurable in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"VertxInfluxDbOptions\"), \".\\nIf you don\\u2019t have a run\\xADning in\\xADstance of In\\xADfluxDB, the short\\xADest way to start is cer\\xADtainly with docker, just run:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"docker run -p 8086:8086 influxdb\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://prometheus.io/docs/prometheus/latest/getting_started/\"\n  }), \"Prometheus\"), \" needs some con\\xADfig\\xADu\\xADra\\xADtion since it pulls met\\xADrics from the sources. Once it is in\\xADstalled, con\\xADfig\\xADure the scrape end\\xADpoints in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"prometheus.yml\"), \":\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"job_name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'vertx-8081'\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"static_configs:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"targets:\"), \" [\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'localhost:8081'\"), \"]\\n\")), mdx(\"p\", null, \"or, when using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/metrics\"), \" end\\xADpoint bound to an ex\\xADist\\xADing HTTP server:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"job_name:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'vertx-8080'\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"static_configs:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-bullet\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"targets:\"), \" [\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'localhost:8080'\"), \"]\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For JMX there is noth\\xADing spe\\xADcial to con\\xADfig\\xADure.\")), mdx(\"h3\", {\n    \"id\": \"collecting-vertx-metrics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#collecting-vertx-metrics\"\n  })), \"Collecting Vert.x metrics\"), mdx(\"p\", null, \"From now on, all Vert.x met\\xADrics will be col\\xADlected and sent to the con\\xADfig\\xADured back\\xADend. In our Vert.x ex\\xADam\\xADple, we setup an HTTP server met\\xADrics:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Router router = Router.router(vertx);\\nrouter.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \").handler(ctx -\u003e {\\n  ctx.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello Micrometer from HTTP!\\\"\"), \");\\n});\\nvertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n\")), mdx(\"p\", null, \" And some event bus ping-\\u200Bpong:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Producer side\"), \"\\nvertx.setPeriodic(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1000\"), \", x -\u003e {\\n  vertx.eventBus().send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"greeting\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello Micrometer from event bus!\\\"\"), \");\\n});\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Consumer side\"), \"\\nvertx.eventBus().\u003cString\u003econsumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"greeting\\\"\"), \", message -\u003e {\\n  String greeting = message.body();\\n  System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Received: \\\"\"), \" + greeting);\\n  message.reply(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello back!\\\"\"), \");\\n});\\n\")), mdx(\"p\", null, \"To trig\\xADger some ac\\xADtiv\\xADity on the HTTP server, we can write a small bash script:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"while\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"do\"), \" curl http://localhost:8080/\\n    sleep .8\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"done\"), \"\\n\")), mdx(\"h3\", {\n    \"id\": \"viewing-the-results\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#viewing-the-results\"\n  })), \"Viewing the results\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://grafana.com/\"\n  }), \"Grafana\"), \" can be used to dis\\xADplay the In\\xADfluxDB and Prometheus met\\xADrics. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-examples\"), \" repos\\xADi\\xADtory con\\xADtains two dash\\xADboards for that: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/blob/master/micrometer-metrics-examples/grafana/Vertx-InfluxDB.json\"\n  }), \"for In\\xADfluxDB\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/blob/master/micrometer-metrics-examples/grafana/Vertx-Prometheus.json\"\n  }), \"for Prometheus\"), \".\"), mdx(\"h5\", {\n    \"id\": \"http-server-metrics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#http-server-metrics\"\n  })), \"HTTP server metrics\"), mdx(\"img\", {\n    alt: \"HTTP server metrics\",\n    className: \"img-fluid\",\n    src: \"https://raw.githubusercontent.com/jotak/vertx-examples/micrometer-example/micrometer-metrics-examples/grafana/http-server-metrics.png\"\n  }), mdx(\"h5\", {\n    \"id\": \"event-bus-metrics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#event-bus-metrics\"\n  })), \"Event bus metrics\"), mdx(\"img\", {\n    alt: \"Event bus metrics\",\n    className: \"img-fluid\",\n    src: \"https://raw.githubusercontent.com/jotak/vertx-examples/micrometer-example/micrometer-metrics-examples/grafana/eventbus-metrics.png\"\n  }), mdx(\"h2\", {\n    \"id\": \"going-further\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#going-further\"\n  })), \"Going further\"), mdx(\"p\", null, \"We\\u2019ve seen the basic setup. There is a good bunch of op\\xADtions avail\\xADable, de\\xADtailed \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-micrometer-metrics/java/\"\n  }), \"in the doc\\xADu\\xADmen\\xADta\\xADtion\"), \": how to dis\\xADable some met\\xADrics do\\xADmains, how to fil\\xADter or re\\xADarrange la\\xADbels, how to ex\\xADport met\\xADrics snap\\xADshots to Json ob\\xADjects, how to add JVM or proces\\xADsor in\\xADstru\\xADmen\\xADta\\xADtion, etc.\"), mdx(\"p\", null, \"Be\\xADfore we fin\\xADish, there is one im\\xADpor\\xADtant point that we can cover here: defin\\xADing cus\\xADtom met\\xADrics.\\nBe\\xADcause the mod\\xADule gives you ac\\xADcess to its Mi\\xADcrom\\xADe\\xADter reg\\xADistry, you can add your cus\\xADtom met\\xADrics there.\"), mdx(\"p\", null, \"Get\\xADting the de\\xADfault reg\\xADistry is straight\\xADfor\\xADward:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"MeterRegistry registry = BackendRegistries.getDefaultNow();\\n\")), mdx(\"p\", null, \"Then you have plain ac\\xADcess to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://micrometer.io/docs/concepts\"\n  }), \"Mi\\xADcrom\\xADe\\xADter API\"), \".\"), mdx(\"p\", null, \"For in\\xADstance, here is how you can track the ex\\xADe\\xADcu\\xADtion time of a piece of code that is reg\\xADu\\xADlarly called:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"MeterRegistry registry = BackendRegistries.getDefaultNow();\\nTimer timer = Timer\\n  .builder(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my.timer\\\"\"), \")\\n  .description(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Time tracker for my extremely sophisticated algorithm\\\"\"), \")\\n  .register(registry);\\n\\nvertx.setPeriodic(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1000\"), \", l -\u003e {\\n  timer.record(() -\u003e myExtremelySophisticatedAlgorithm());\\n});\\n\")), mdx(\"p\", null, \"Since it is using the same reg\\xADistry, there is no extra back\\xADend con\\xADfig\\xADu\\xADra\\xADtion to do.\"), mdx(\"h2\", {\n    \"id\": \"whats-next\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#whats-next\"\n  })), \"What\\u2019s next?\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-micrometer-metrics\"), \" mod\\xADule will con\\xADtinue to be im\\xADproved, with al\\xADready two planned en\\xADhance\\xADments:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-micrometer-metrics/issues/15\"\n  }), \"Adding more back\\xADends\"), \", like Graphite.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-micrometer-metrics/issues/16\"\n  }), \"Allow to con\\xADfig\\xADure sev\\xADeral back\\xADends\"), \", and not only one at the same time.\")), mdx(\"p\", null, \"Would you miss any fea\\xADture, please \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-micrometer-metrics/issues\"\n  }), \"ask on GitHub\"), \". Con\\xADtri\\xADbu\\xADtions and bug fixes are also wel\\xADcome!\"), mdx(\"p\", null, \"Now is time to enter the Met\\xADrics.\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eVert.x has al¬≠ready been pro¬≠vid¬≠ing met¬≠rics for some time, through the \u003ca href=\"https://vertx.io/docs/vertx-dropwizard-metrics/java/\"\u003evertx-‚Äãdropwizard-metrics\u003c/a\u003e and \u003ca href=\"https://vertx.io/docs/vertx-hawkular-metrics/java/\"\u003evertx-‚Äãhawkular-metrics\u003c/a\u003e mod¬≠ules. Both of them im¬≠ple¬≠ment a ser¬≠vice provider in¬≠ter¬≠face (SPI) to col¬≠lect the Vert.x met¬≠rics and make them avail¬≠able to their re¬≠spec¬≠tive back¬≠ends.\u003c/p\u003e\u003cp\u003eA new mod¬≠ule, \u003ca href=\"https://vertx.io/docs/vertx-micrometer-metrics/java/\"\u003evertx-‚Äãmicrometer-metrics\u003c/a\u003e, is now added to the fam¬≠ily. It im¬≠ple¬≠ments the same SPI, which means that it is able to pro¬≠vide the same met¬≠rics.\n\u003ca href=\"http://micrometer.io/\"\u003e\u003cem\u003eMi¬≠crom¬≠e¬≠ter.io\u003c/em\u003e\u003c/a\u003e is a pretty new met¬≠rics li¬≠brary, quite com¬≠pa¬≠ra¬≠ble to \u003cem\u003edrop¬≠wiz¬≠ard met¬≠rics\u003c/em\u003e in that it col¬≠lects met¬≠rics in a local, in-‚Äãmemory reg¬≠istry and is able to store them in var¬≠i¬≠ous back¬≠ends such as \u003cem\u003eGraphite\u003c/em\u003e or \u003cem\u003eIn¬≠fluxDB\u003c/em\u003e. It has sev¬≠eral ad¬≠van¬≠tages as we will see below.\u003c/p\u003e\u003ch2 id=\"tell-me-more-about-micrometer\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#tell-me-more-about-micrometer\"\u003e\u003c/a\u003eTell me more about Micrometer\u003c/h2\u003e\u003cp\u003e\u003ca href=\"http://micrometer.io/\"\u003e\u003cem\u003eMi¬≠crom¬≠e¬≠ter.io\u003c/em\u003e\u003c/a\u003e de¬≠scribes it¬≠self as a a vendor-‚Äãneutral ap¬≠pli¬≠ca¬≠tion met¬≠rics fa¬≠cade.\nIt pro¬≠vides a well de¬≠signed API, in Java, to de¬≠fine \u003cem\u003egauges\u003c/em\u003e, \u003cem\u003ecoun¬≠ters\u003c/em\u003e, \u003cem\u003etimers\u003c/em\u003e and \u003cem\u003edis¬≠tri¬≠b¬≠u¬≠tion sum¬≠maries\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eAmong the avail¬≠able back¬≠ends, Mi¬≠crom¬≠e¬≠ter na¬≠tively sup¬≠ports \u003cem\u003eGraphite\u003c/em\u003e, \u003cem\u003eIn¬≠fluxDB\u003c/em\u003e, \u003cem\u003eJMX\u003c/em\u003e, \u003cem\u003ePrometheus\u003c/em\u003e and \u003ca href=\"http://micrometer.io/docs\"\u003esev¬≠eral oth¬≠ers\u003c/a\u003e. Prometheus is very pop¬≠u¬≠lar in the Ku¬≠ber¬≠netes and mi¬≠croser¬≠vices ecosys¬≠tems, so its sup¬≠port by Mi¬≠crom¬≠e¬≠ter was a strong mo¬≠ti¬≠va¬≠tion for im¬≠ple¬≠ment¬≠ing it in Vert.x.\u003c/p\u003e\u003cp\u003eFor the the mo¬≠ment, our im¬≠ple¬≠men¬≠ta¬≠tion in Vert.x sup¬≠ports \u003cem\u003ePrometheus\u003c/em\u003e, \u003cem\u003eIn¬≠fluxDB\u003c/em\u003e and \u003cem\u003eJMX\u003c/em\u003e. More should quickly come in the near fu¬≠ture.\u003c/p\u003e\u003ch3 id=\"dimensionality\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#dimensionality\"\u003e\u003c/a\u003eDimensionality\u003c/h3\u003e\u003cp\u003eAn¬≠other in¬≠ter¬≠est¬≠ing as¬≠pect in Mi¬≠crom¬≠e¬≠ter is that it han¬≠dles met¬≠rics \u003cem\u003edi¬≠men¬≠sion¬≠al¬≠ity\u003c/em\u003e: met¬≠rics can be as¬≠so¬≠ci¬≠ated with a set of key/value pairs (some¬≠times ref¬≠ered as \u003cem\u003etags\u003c/em\u003e, some¬≠times as \u003cem\u003ela¬≠bels\u003c/em\u003e). Every value brings a new di¬≠men¬≠sion to the met¬≠ric, so that in Prometheus or any other back¬≠end that sup¬≠ports di¬≠men¬≠sion¬≠al¬≠ity, we can query for dat¬≠a¬≠points of one or sev¬≠eral di¬≠men¬≠sions, or query for dat¬≠a¬≠points ag¬≠gre¬≠gated over sev¬≠eral di¬≠men¬≠sions.\u003c/p\u003e\u003cp\u003e  \u003cem\u003eEx¬≠am¬≠ple: our met¬≠ric \u003ccode\u003evertx_http_server_connections\u003c/code\u003e ac¬≠cepts la¬≠bels \u003ccode\u003elocal\u003c/code\u003e and \u003ccode\u003eremote\u003c/code\u003e, that are used to store ad¬≠dresses on HTTP con¬≠nec¬≠tions\u003c/em\u003e\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003ePrometheus is used in the fol¬≠low¬≠ing ex¬≠am¬≠ples, but equiv¬≠a¬≠lent queries can be per¬≠formed with \u003cem\u003eIn¬≠fluxDB\u003c/em\u003e.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eIn Prometheus, the query \u003ccode\u003evertx_http_server_connections\u003c/code\u003e will re¬≠turn as many time¬≠series as there are com¬≠bi¬≠na¬≠tions of \u003ccode\u003elocal\u003c/code\u003e and \u003ccode\u003eremote\u003c/code\u003e val¬≠ues. Ex¬≠am¬≠ple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-basic\"\u003evertx_http_server_connections{local=\u003cspan class=\"hljs-string\"\u003e\u0026quot;0.0.0.0:8080\u0026quot;\u003c/span\u003e,\u003cspan class=\"hljs-comment\"\u003eremote=\u0026quot;1.1.1.1\u0026quot;}\u003c/span\u003e\nvertx_http_server_connections{local=\u003cspan class=\"hljs-string\"\u003e\u0026quot;0.0.0.0:8080\u0026quot;\u003c/span\u003e,\u003cspan class=\"hljs-comment\"\u003eremote=\u0026quot;2.2.2.2\u0026quot;}\u003c/span\u003e\nvertx_http_server_connections{local=\u003cspan class=\"hljs-string\"\u003e\u0026quot;0.0.0.0:8080\u0026quot;\u003c/span\u003e,\u003cspan class=\"hljs-comment\"\u003eremote=\u0026quot;3.3.3.3\u0026quot;}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo query on a sin¬≠gle di¬≠men¬≠sion, we must pro¬≠vide the la¬≠bels:\u003c/p\u003e\u003cp\u003e\u003ccode\u003evertx_http_server_connections{local=\u0026quot;0.0.0.0:8080\u0026quot;,remote=\u0026quot;1.1.1.1\u0026quot;}\u003c/code\u003e. It will re¬≠turn a sin¬≠gle time¬≠series.\u003c/p\u003e\u003cp\u003eTo get an ag¬≠gre¬≠gate, Prometheus (PromQL) pro¬≠vides sev¬≠eral \u003ca href=\"https://prometheus.io/docs/prometheus/latest/querying/operators/#aggregation-operators\"\u003eag¬≠gre¬≠ga¬≠tion op¬≠er¬≠a¬≠tors\u003c/a\u003e:\u003c/p\u003e\u003cp\u003e\u003ccode\u003esum(vertx_http_server_connections)\u003c/code\u003e will re¬≠turn the sum across all di¬≠men¬≠sions.\u003c/p\u003e\u003ch2 id=\"so-what-are-the-vertx-metrics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#so-what-are-the-vertx-metrics\"\u003e\u003c/a\u003eSo what are the Vert.x metrics?\u003c/h2\u003e\u003cp\u003ePeo¬≠ple al¬≠ready fa¬≠mil¬≠iar with the ex¬≠ist¬≠ing met¬≠rics mod¬≠ules (\u003cem\u003edrop¬≠wiz¬≠ard\u003c/em\u003e or \u003cem\u003ehawku¬≠lar\u003c/em\u003e) will not be too dis¬≠ori¬≠ented. They are roughly the same. The main dif¬≠fer¬≠ence is where pre¬≠vi¬≠ously, some met¬≠ric names could have a vari¬≠able part within - such as \u003ccode\u003evertx.eventbus.handlers.myaddress\u003c/code\u003e - here we take ad¬≠van¬≠tage of di¬≠men¬≠sion¬≠al¬≠ity and we will have \u003ccode\u003evertx_eventbus_handlers{address=\u0026quot;myaddress\u0026quot;}\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eSome other met¬≠rics are no longer use¬≠ful, for in¬≠stance the drop¬≠wiz¬≠ard‚Äôs \u003ccode\u003evertx.eventbus.messages.pending\u003c/code\u003e, \u003ccode\u003evertx.eventbus.messages.pending-local\u003c/code\u003e and \u003ccode\u003evertx.eventbus.messages.pending-remote\u003c/code\u003e are now just \u003ccode\u003evertx_eventbus_pending{side=local}\u003c/code\u003e and \u003ccode\u003evertx_eventbus_pending{side=remote}\u003c/code\u003e in mi¬≠crom¬≠e¬≠ter. The sum of them can eas¬≠ily be com¬≠puted at query time.\u003c/p\u003e\u003cp\u003eThe met¬≠rics pro¬≠vided by Vert.x are dis¬≠patched into eight big fam¬≠i¬≠lies:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eNet client\u003c/strong\u003e: dis¬≠tri¬≠b¬≠u¬≠tion sum¬≠maries of bytes sent and re¬≠ceived, num¬≠ber of con¬≠nec¬≠tions, etc.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eNet server\u003c/strong\u003e: dis¬≠tri¬≠b¬≠u¬≠tion sum¬≠maries of bytes sent and re¬≠ceived, num¬≠ber of con¬≠nec¬≠tions, etc.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eHTTP client\u003c/strong\u003e: counter of re¬≠quests, re¬≠sponse times, etc.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eHTTP server\u003c/strong\u003e: counter of re¬≠quests, pro¬≠cess¬≠ing times, etc.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eEvent bus\u003c/strong\u003e: counter of han¬≠dlers, mes¬≠sages sent and re¬≠ceived, etc.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003ePool\u003c/strong\u003e: for worker pools and some data¬≠source pools, queue size and wait¬≠ing time, pro¬≠cess¬≠ing time, etc.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eVer¬≠ti¬≠cles\u003c/strong\u003e: num¬≠ber of ver¬≠ti¬≠cles de¬≠ployed.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe full list of col¬≠lected met¬≠rics is \u003ca href=\"https://vertx.io/docs/vertx-micrometer-metrics/java/#_vert_x_core_tools_metrics\"\u003eavail¬≠able here\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"getting-started\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#getting-started\"\u003e\u003c/a\u003eGetting started\u003c/h2\u003e\u003cp\u003eThis sec¬≠tion will guide you through a quick setup to run a Vert.x ap¬≠pli¬≠ca¬≠tion with Mi¬≠crom¬≠e¬≠ter. The code ex¬≠am¬≠ples used here are taken from the \u003ccode\u003emicrometer-metrics-example\u003c/code\u003e in \u003ccode\u003evertx-examples\u003c/code\u003e repos¬≠i¬≠tory, in Java, using \u003cem\u003emaven\u003c/em\u003e. But the same could be done with other Vert.x sup¬≠ported lan¬≠guages, as well as \u003cem\u003egra¬≠dle\u003c/em\u003e in¬≠stead of \u003cem\u003emaven\u003c/em\u003e.\u003c/p\u003e\u003ch3 id=\"maven-configuration\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#maven-configuration\"\u003e\u003c/a\u003eMaven configuration\u003c/h3\u003e\u003cp\u003eThe con¬≠fig¬≠u¬≠ra¬≠tion and the maven im¬≠ports will vary ac¬≠cord¬≠ing to the back¬≠end stor¬≠age that will be used. For maven, the com¬≠mon part is al¬≠ways:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-micrometer-metrics\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.5.1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eThen, to re¬≠port to In¬≠fluxDB:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.micrometer\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emicrometer-registry-influx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.0.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eOr Prometheus:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.micrometer\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emicrometer-registry-prometheus\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.0.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-web\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.5.1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRe¬≠mark that, since Prometheus pulls met¬≠rics from their source, they must be ex¬≠posed on an HTTP end¬≠point. That‚Äôs why \u003ccode\u003evertx-web\u003c/code\u003e is im¬≠ported here. It is not \u003cem\u003eab¬≠solutely\u003c/em\u003e nec¬≠es¬≠sary (it‚Äôs pos¬≠si¬≠ble to get the met¬≠rics reg¬≠istry con¬≠tent and ex¬≠pose it in any other way) but it‚Äôs prob¬≠a¬≠bly the eas¬≠i¬≠est way to do.\u003c/p\u003e\u003cul\u003e\u003cli\u003eOr JMX:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.micrometer\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emicrometer-registry-jmx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.0.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eAt the mo¬≠ment, it is not pos¬≠si¬≠ble to re¬≠port met¬≠rics to sev¬≠eral back¬≠ends at the same time. \u003ca href=\"https://github.com/vert-x3/vertx-micrometer-metrics/issues/16\"\u003eIt might be soon im¬≠ple¬≠mented\u003c/a\u003e.\u003c/p\u003e\u003c/div\u003e\u003ch3 id=\"setting-up-vertx-options\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#setting-up-vertx-options\"\u003e\u003c/a\u003eSetting up Vert.x options\u003c/h3\u003e\u003cp\u003eA \u003ccode\u003eMicrometerMetricsOptions\u003c/code\u003e ob¬≠ject must be cre¬≠ated and passed to \u003ccode\u003eVertxOptions\u003c/code\u003e, with one back¬≠end con¬≠fig¬≠ured (though hav¬≠ing no back¬≠end is pos¬≠si¬≠ble: you would get met¬≠rics sent to a de¬≠fault Mi¬≠crom¬≠e¬≠ter reg¬≠istry, but with¬≠out any per¬≠sis¬≠tent stor¬≠age).\u003c/p\u003e\u003cul\u003e\u003cli\u003eIn¬≠fluxDB ex¬≠am¬≠ple:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Default InfluxDB options will push metrics to localhost:8086, db \u0026quot;default\u0026quot;\u003c/span\u003e\nMicrometerMetricsOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MicrometerMetricsOptions()\n  .setInfluxDbOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxInfluxDbOptions().setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e))\n  .setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\nVertx vertx = Vertx.vertx(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxOptions().setMetricsOptions(options));\n\u003cspan class=\"hljs-comment\"\u003e// Then deploy verticles with this vertx instance\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003ePrometheus ex¬≠am¬≠ple:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Deploy with embedded server: prometheus metrics will be automatically exposed,\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// independently from any other HTTP server defined\u003c/span\u003e\nMicrometerMetricsOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MicrometerMetricsOptions()\n  .setPrometheusOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxPrometheusOptions()\n    .setStartEmbeddedServer(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n    .setEmbeddedServerOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HttpServerOptions().setPort(\u003cspan class=\"hljs-number\"\u003e8081\u003c/span\u003e))\n    .setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e))\n  .setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\nVertx vertx = Vertx.vertx(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxOptions().setMetricsOptions(options));\n\u003cspan class=\"hljs-comment\"\u003e// Then deploy verticles with this vertx instance\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eOr Prometheus with the \u003ccode\u003e/metrics\u003c/code\u003e end¬≠point bound to an ex¬≠ist¬≠ing HTTP server:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Deploy without embedded server: we need to \u0026quot;manually\u0026quot; expose the prometheus metrics\u003c/span\u003e\nMicrometerMetricsOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MicrometerMetricsOptions()\n  .setPrometheusOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxPrometheusOptions().setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e))\n  .setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\nVertx vertx = Vertx.vertx(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxOptions().setMetricsOptions(options));\n\nRouter router = Router.router(vertx);\nPrometheusMeterRegistry registry = (PrometheusMeterRegistry) BackendRegistries.getDefaultNow();\n\u003cspan class=\"hljs-comment\"\u003e// Setup a route for metrics\u003c/span\u003e\nrouter.route(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/metrics\u0026quot;\u003c/span\u003e).handler(ctx -\u0026gt; {\n  String response = registry.scrape();\n  ctx.response().end(response);\n});\nvertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eJMX ex¬≠am¬≠ple:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Default JMX options will publish MBeans under domain \u0026quot;metrics\u0026quot;\u003c/span\u003e\nMicrometerMetricsOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MicrometerMetricsOptions()\n  .setJmxMetricsOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxJmxMetricsOptions().setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e))\n  .setEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\nVertx vertx = Vertx.vertx(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxOptions().setMetricsOptions(options));\n\u003cspan class=\"hljs-comment\"\u003e// Then deploy verticles with this vertx instance\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"setup-the-backend-server\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#setup-the-backend-server\"\u003e\u003c/a\u003eSetup the backend server\u003c/h3\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.influxdata.com/\"\u003eIn¬≠fluxDB\u003c/a\u003e, by de¬≠fault, is ex¬≠pected to run on \u003ccode\u003elocalhost:8086\u003c/code\u003e with¬≠out au¬≠then¬≠ti¬≠ca¬≠tion, data¬≠base ‚Äúde¬≠fault‚Äù. It is con¬≠fig¬≠urable in \u003ccode\u003eVertxInfluxDbOptions\u003c/code\u003e.\nIf you don‚Äôt have a run¬≠ning in¬≠stance of In¬≠fluxDB, the short¬≠est way to start is cer¬≠tainly with docker, just run:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edocker run -p 8086:8086 influxdb\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://prometheus.io/docs/prometheus/latest/getting_started/\"\u003ePrometheus\u003c/a\u003e needs some con¬≠fig¬≠u¬≠ra¬≠tion since it pulls met¬≠rics from the sources. Once it is in¬≠stalled, con¬≠fig¬≠ure the scrape end¬≠points in \u003ccode\u003eprometheus.yml\u003c/code\u003e:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ejob_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-8081\u0026#x27;\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estatic_configs:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etargets:\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;localhost:8081\u0026#x27;\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eor, when using \u003ccode\u003e/metrics\u003c/code\u003e end¬≠point bound to an ex¬≠ist¬≠ing HTTP server:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ejob_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-8080\u0026#x27;\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003estatic_configs:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etargets:\u003c/span\u003e [\u003cspan class=\"hljs-string\"\u003e\u0026#x27;localhost:8080\u0026#x27;\u003c/span\u003e]\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eFor JMX there is noth¬≠ing spe¬≠cial to con¬≠fig¬≠ure.\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"collecting-vertx-metrics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#collecting-vertx-metrics\"\u003e\u003c/a\u003eCollecting Vert.x metrics\u003c/h3\u003e\u003cp\u003eFrom now on, all Vert.x met¬≠rics will be col¬≠lected and sent to the con¬≠fig¬≠ured back¬≠end. In our Vert.x ex¬≠am¬≠ple, we setup an HTTP server met¬≠rics:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRouter router = Router.router(vertx);\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e).handler(ctx -\u0026gt; {\n  ctx.response().end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello Micrometer from HTTP!\u0026quot;\u003c/span\u003e);\n});\nvertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e And some event bus ping-‚Äãpong:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Producer side\u003c/span\u003e\nvertx.setPeriodic(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, x -\u0026gt; {\n  vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\u0026quot;greeting\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello Micrometer from event bus!\u0026quot;\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Consumer side\u003c/span\u003e\nvertx.eventBus().\u0026lt;String\u0026gt;consumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;greeting\u0026quot;\u003c/span\u003e, message -\u0026gt; {\n  String greeting = message.body();\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received: \u0026quot;\u003c/span\u003e + greeting);\n  message.reply(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello back!\u0026quot;\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo trig¬≠ger some ac¬≠tiv¬≠ity on the HTTP server, we can write a small bash script:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e curl http://localhost:8080/\n    sleep .8\n\u003cspan class=\"hljs-keyword\"\u003edone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"viewing-the-results\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#viewing-the-results\"\u003e\u003c/a\u003eViewing the results\u003c/h3\u003e\u003cp\u003e\u003ca href=\"https://grafana.com/\"\u003eGrafana\u003c/a\u003e can be used to dis¬≠play the In¬≠fluxDB and Prometheus met¬≠rics. The \u003ccode\u003evertx-examples\u003c/code\u003e repos¬≠i¬≠tory con¬≠tains two dash¬≠boards for that: \u003ca href=\"https://github.com/vert-x3/vertx-examples/blob/master/micrometer-metrics-examples/grafana/Vertx-InfluxDB.json\"\u003efor In¬≠fluxDB\u003c/a\u003e and \u003ca href=\"https://github.com/vert-x3/vertx-examples/blob/master/micrometer-metrics-examples/grafana/Vertx-Prometheus.json\"\u003efor Prometheus\u003c/a\u003e.\u003c/p\u003e\u003ch5 id=\"http-server-metrics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#http-server-metrics\"\u003e\u003c/a\u003eHTTP server metrics\u003c/h5\u003e\u003cimg alt=\"HTTP server metrics\" class=\"img-fluid\" src=\"https://raw.githubusercontent.com/jotak/vertx-examples/micrometer-example/micrometer-metrics-examples/grafana/http-server-metrics.png\"/\u003e\u003ch5 id=\"event-bus-metrics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#event-bus-metrics\"\u003e\u003c/a\u003eEvent bus metrics\u003c/h5\u003e\u003cimg alt=\"Event bus metrics\" class=\"img-fluid\" src=\"https://raw.githubusercontent.com/jotak/vertx-examples/micrometer-example/micrometer-metrics-examples/grafana/eventbus-metrics.png\"/\u003e\u003ch2 id=\"going-further\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#going-further\"\u003e\u003c/a\u003eGoing further\u003c/h2\u003e\u003cp\u003eWe‚Äôve seen the basic setup. There is a good bunch of op¬≠tions avail¬≠able, de¬≠tailed \u003ca href=\"https://vertx.io/docs/vertx-micrometer-metrics/java/\"\u003ein the doc¬≠u¬≠men¬≠ta¬≠tion\u003c/a\u003e: how to dis¬≠able some met¬≠rics do¬≠mains, how to fil¬≠ter or re¬≠arrange la¬≠bels, how to ex¬≠port met¬≠rics snap¬≠shots to Json ob¬≠jects, how to add JVM or proces¬≠sor in¬≠stru¬≠men¬≠ta¬≠tion, etc.\u003c/p\u003e\u003cp\u003eBe¬≠fore we fin¬≠ish, there is one im¬≠por¬≠tant point that we can cover here: defin¬≠ing cus¬≠tom met¬≠rics.\nBe¬≠cause the mod¬≠ule gives you ac¬≠cess to its Mi¬≠crom¬≠e¬≠ter reg¬≠istry, you can add your cus¬≠tom met¬≠rics there.\u003c/p\u003e\u003cp\u003eGet¬≠ting the de¬≠fault reg¬≠istry is straight¬≠for¬≠ward:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eMeterRegistry registry = BackendRegistries.getDefaultNow();\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen you have plain ac¬≠cess to the \u003ca href=\"https://micrometer.io/docs/concepts\"\u003eMi¬≠crom¬≠e¬≠ter API\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eFor in¬≠stance, here is how you can track the ex¬≠e¬≠cu¬≠tion time of a piece of code that is reg¬≠u¬≠larly called:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eMeterRegistry registry = BackendRegistries.getDefaultNow();\nTimer timer = Timer\n  .builder(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.timer\u0026quot;\u003c/span\u003e)\n  .description(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Time tracker for my extremely sophisticated algorithm\u0026quot;\u003c/span\u003e)\n  .register(registry);\n\nvertx.setPeriodic(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, l -\u0026gt; {\n  timer.record(() -\u0026gt; myExtremelySophisticatedAlgorithm());\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSince it is using the same reg¬≠istry, there is no extra back¬≠end con¬≠fig¬≠u¬≠ra¬≠tion to do.\u003c/p\u003e\u003ch2 id=\"whats-next\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#whats-next\"\u003e\u003c/a\u003eWhat‚Äôs next?\u003c/h2\u003e\u003cp\u003eThe \u003ccode\u003evertx-micrometer-metrics\u003c/code\u003e mod¬≠ule will con¬≠tinue to be im¬≠proved, with al¬≠ready two planned en¬≠hance¬≠ments:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-micrometer-metrics/issues/15\"\u003eAdding more back¬≠ends\u003c/a\u003e, like Graphite.\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-micrometer-metrics/issues/16\"\u003eAllow to con¬≠fig¬≠ure sev¬≠eral back¬≠ends\u003c/a\u003e, and not only one at the same time.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWould you miss any fea¬≠ture, please \u003ca href=\"https://github.com/vert-x3/vertx-micrometer-metrics/issues\"\u003eask on GitHub\u003c/a\u003e. Con¬≠tri¬≠bu¬≠tions and bug fixes are also wel¬≠come!\u003c/p\u003e\u003cp\u003eNow is time to enter the Met¬≠rics.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"metric","tf":36},{"term":"prometheu","tf":14},{"term":"backend","tf":13},{"term":"micromet","tf":12},{"term":"will","tf":11},{"term":"time","tf":10},{"term":"influxdb","tf":10},{"term":"configur","tf":10},{"term":"us","tf":9},{"term":"http","tf":9},{"term":"exampl","tf":8},{"term":"server","tf":8},{"term":"provid","tf":7},{"term":"sever","tf":7},{"term":"etc","tf":7},{"term":"registri","tf":6},{"term":"queri","tf":6},{"term":"modul","tf":5},{"term":"implement","tf":5},{"term":"collect","tf":5},{"term":"support","tf":5},{"term":"jmx","tf":5},{"term":"dimens","tf":5},{"term":"sent","tf":5},{"term":"maven","tf":5}]},{"filename":"blog/2017-12-21-eclipse-vert-x-based-framework-url-shortener-backend.mdx","date":"2017-12-21","slug":"eclipse-vert-x-based-framework-url-shortener-backend","meta":{"title":"Eclipse Vert.x based Framework URL Shortener Backend","category":"guides","authors":[{"name":"Lazar Buliƒá","github_id":"pendula95"}],"summary":"We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda."},"readingTime":{"text":"5 min read","minutes":4.65,"time":279000,"words":930},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Re\\xADcently, I stum\\xADbled upon \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"Vertx\")), \". \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Event-\\u200Bdriven, asyn\\xADchro\\xADnized, light\\xADweight, re\\xADac\\xADtive, highly per\\xADfor\\xADmant, poly\\xADglot\"), \" ap\\xADpli\\xADca\\xADtion frame\\xADwork. Ideal for writ\\xADing \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"micro-\\u200Bservices\"), \". I played around with it for a while and re\\xADally en\\xADjoyed the con\\xADcept of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"server\\xADless\"), \" ap\\xADpli\\xADca\\xADtions.\"), mdx(\"p\", null, \"I de\\xADvel\\xADoped a few apps and cases and started to won\\xADder how to run and de\\xADploy them so that I get a 100% re\\xADli\\xADable ser\\xADvice. I sud\\xADdenly re\\xADmem\\xADbered the tech sem\\xADi\\xADnar that I at\\xADtended re\\xADcently, specif\\xADi\\xADcally ses\\xADsion about server\\xADless apps with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://aws.amazon.com/\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"AWS\")), \" (Ama\\xADzon Web Ser\\xADvices) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lambda\"), \". Lambda is a server\\xADless com\\xADpute ser\\xADvice that runs your code in re\\xADsponse to events and au\\xADto\\xADmat\\xADi\\xADcally man\\xADages the un\\xADder\\xADly\\xADing com\\xADpute re\\xADsources for you. Fairly sim\\xADi\\xADlar con\\xADcepts \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS Lambda\"), \", so maybe they com\\xADple\\xADment each other? As it turns out they do, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" can get most of your \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lamb\\xADdas\"), \"\\u2026\"), mdx(\"p\", null, \"Using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com/\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"Server\\xADless Frame\\xADwork\")), \" to cre\\xADate, man\\xADage and de\\xADploy your new \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lamb\\xADdas\"), \" I was able to get this \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"micro-\\u200Bservice\"), \" up and run\\xADning in no time.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Enough with the talk, lets see the im\\xADple\\xADmen\\xADta\\xADtion.\")), mdx(\"h2\", {\n    \"id\": \"code\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#code\"\n  })), \"Code\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler Class, entry point of AWS Re\\xADquest.\")), mdx(\"p\", null, \"The first issue that I had was the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sync\"), \" Event Han\\xADdler that is pro\\xADvided by AWS. So I had to by pass it with Fu\\xADture. In the Han\\xADdler class I first ini\\xADti\\xADate Vertx in\\xADstance in a sta\\xADtic block and de\\xADploy few Ver\\xADti\\xADcles that will do the work. This class only re\\xADceives the event, ex\\xADtracts needed data from the re\\xADquest and passes the data to Vertx Event\\xADBus. After the Con\\xADsumers han\\xADdle the re\\xADquest, Han\\xADdler class will gen\\xADer\\xADate a proper re\\xADsponse and fin\\xADish the AWS re\\xADquest.\"), mdx(Gist, {\n    url: \"https://gist.github.com/pendula95/583eb45bd0a7990136fba029bdcd555b\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Line 4-18:\"), \" This is where Vertx in\\xADstance is cre\\xADated, Ver\\xADti\\xADcles are de\\xADployed and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Async JDBC\"), \" client is cre\\xADated. I fig\\xADured out that it is bet\\xADter to cre\\xADated JDBC client here as in some cases I was time\\xADout when that logic was in the Ver\\xADti\\xADcle start method.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Line 27-36:\"), \" These are helper lines, pars\\xADing and for\\xADmat\\xADting the data so I can pass it to the Ver\\xADti\\xADcles.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Line 38-45:\"), \" I have de\\xADcided to map the con\\xADsumers to the ad\\xADdress that is made of re\\xADquest method and url path, ex\\xADam\\xADple POST/api. This means each API re\\xADquest is mapped to its own con\\xADsumer in Ver\\xADti\\xADcle class.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Line 47-77:\"), \" This is noth\\xADing but a block of code that han\\xADdles the re\\xADsponse that was passed from Ver\\xADti\\xADcles to the Fu\\xADture and gen\\xADer\\xADates the final re\\xADsponse that will be re\\xADturn to API Gate\\xADway.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"UrlSer\\xADvice, Vertx Ver\\xADti\\xADcle.\")), mdx(\"p\", null, \"Ver\\xADti\\xADcle class is pretty for\\xADward. Con\\xADsumers that will process the mes\\xADsage, meth\\xADods for work\\xADing with JDBC and helper meth\\xADods for hash\\xADing/de\\xADhash\\xADing id. The logic be\\xADhind url short\\xADen\\xADing is fairly sim\\xADple here. Each long url is stored in data\\xADbase with a unique id and few ad\\xADdi\\xADtional columns. Row id is hashed and re\\xADturned as short url. When re\\xADtriev\\xADing long url hash is de\\xADcoded to row id and long url is re\\xADtrieved. Later user is redi\\xADrected to long url. With this im\\xADple\\xADmen\\xADta\\xADtion, on 6 char short url (char\\xADac\\xADters after the do\\xADmain) you get 62^6 com\\xADbi\\xADna\\xADtions which is 56 800 235 584 rows for stor\\xADing your urls. TinyURL is cur\\xADrently at 6 long char urls (char\\xADac\\xADters after do\\xADmain). You can of course im\\xADple\\xADment meth\\xADods for reusing and re\\xADcy\\xADcling ids.\"), mdx(Gist, {\n    url: \"https://gist.github.com/pendula95/aeb4479162e6e33504add2af9fa68bc5\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"As said, this is all fairly straight for\\xADward, if you are al\\xADready fa\\xADmil\\xADiar with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \". If you are think\\xADing why have I re\\xADpeated the code for es\\xADtab\\xADlish a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"JDBC\"), \" con\\xADnec\\xADtion, here is the ex\\xADpla\\xADna\\xADtion \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"(line: 10-16)\"), \". I was get\\xADting Time\\xADouts when cre\\xADat\\xADing JDBC con\\xADnec\\xADtion in Ver\\xADti\\xADcles. To avoid this I also added this code to my Han\\xADdler class. This way con\\xADnec\\xADtion is cre\\xADated there and be\\xADcause of the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" im\\xADple\\xADmen\\xADta\\xADtion any later at\\xADtempt to cre\\xADate it again will re\\xADsult in just get\\xADting the in\\xADstances from the first in\\xADvo\\xADca\\xADtion. This es\\xADcaped the need to pass the in\\xADstances di\\xADrectly from the Han\\xADdler class when cre\\xADat\\xADing Ver\\xADti\\xADcle in\\xADstances.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Server\\xADless con\\xADfig\\xADu\\xADra\\xADtion.\")), mdx(\"p\", null, \"Lastly I would like to share the server\\xADless.yml, con\\xADfir\\xADma\\xADtion file that al\\xADlows seam\\xADlessly de\\xADploy and man\\xADage\\xADment of AWS Lambda. With just a few com\\xADmands and lines of con\\xADfig\\xADu\\xADra\\xADtion you are able to con\\xADfig\\xADure all nec\\xADes\\xADsary steps for de\\xADploy\\xADing your AWS Lambda. Frame\\xADwork takes care of mak\\xADing con\\xADfig\\xADu\\xADra\\xADtion of Api-\\u200BGateway and other AWS has\\xADsle that would oth\\xADer\\xADwise needed to be done by hand. In this case Lambda is in\\xADvoked by HTTP events.\"), mdx(Gist, {\n    url: \"https://gist.github.com/pendula95/33adc47265072ed930c7df98c9ace7be\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"performance-and-tests\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#performance-and-tests\"\n  })), \"Performance and Tests\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" async ca\\xADpa\\xADbil\\xADi\\xADties eased the stress and mem\\xADory needs of tra\\xADdi\\xADtional \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS Lamb\\xADdas\"), \" with sync meth\\xADods. After per\\xADform\\xADing load tests Lamb\\xADdas that were writ\\xADten using Vertx frame\\xADwork pre\\xADformed \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"10% faster and con\\xADsumed 40% less mem\\xADory\"), \". As I have read some\\xADwhere in Vertx doc\\xADu\\xADmen\\xADta\\xADtion, Sync meth\\xADods will def\\xADi\\xADnitely fin\\xADish the first re\\xADquest faster but in total Async will be faster in the end. This sav\\xADings in mem\\xADory and time will def\\xADi\\xADnitely re\\xADduce the cost of run\\xADning your Lamb\\xADdas and the lit\\xADtle over\\xADhead with ad\\xADdi\\xADtional code is for sure worth it.\"), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"To fol\\xADlow the pace of de\\xADmand\\xADing needs for fast and re\\xADsilient ser\\xADvices we need to move from tra\\xADdi\\xADtional Mono\\xADliths. Em\\xADbrac\\xADing the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"micro ser\\xADvice\"), \" ar\\xADchi\\xADtec\\xADture alone will not cut it, not any\\xADmore. With the rise and rapid ad\\xADvance\\xADment of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Cloud\"), \" so\\xADlu\\xADtions it has never been so easy to make a truly \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server\\xADless\"), \" sys\\xADtems build upon net\\xADwork of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"micro ser\\xADvices\"), \".\\nAs you have seen \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" with its async API makes the full ad\\xADvan\\xADtage of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS Lamb\\xADdas\"), \", em\\xADbrac\\xADing them while also im\\xADprov\\xADing the per\\xADfor\\xADmance and low\\xADer\\xADing the costs. With the help from \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server\\xADless Frame\\xADwork\"), \" writ\\xADing, de\\xADploy\\xADing and man\\xADag\\xADing your \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lamb\\xADdas\"), \" has never been so easy.\"), mdx(\"p\", null, \"If you are in\\xADter\\xADested in the whole project, you can find it on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/pendula95/vertx-aws-url-shortener-service/tree/master\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"GitHub\")), \".\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://lazarbulic.com/blog/2017/11/10/aws-lambda-vertx-framework-url-shortener-backend/\"\n  }), \"blog post\"))));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eRe¬≠cently, I stum¬≠bled upon \u003ca href=\"http://vertx.io/\"\u003e\u003cstrong\u003eVertx\u003c/strong\u003e\u003c/a\u003e. \u003cstrong\u003eEvent-‚Äãdriven, asyn¬≠chro¬≠nized, light¬≠weight, re¬≠ac¬≠tive, highly per¬≠for¬≠mant, poly¬≠glot\u003c/strong\u003e ap¬≠pli¬≠ca¬≠tion frame¬≠work. Ideal for writ¬≠ing \u003cstrong\u003emicro-‚Äãservices\u003c/strong\u003e. I played around with it for a while and re¬≠ally en¬≠joyed the con¬≠cept of \u003cstrong\u003eserver¬≠less\u003c/strong\u003e ap¬≠pli¬≠ca¬≠tions.\u003c/p\u003e\u003cp\u003eI de¬≠vel¬≠oped a few apps and cases and started to won¬≠der how to run and de¬≠ploy them so that I get a 100% re¬≠li¬≠able ser¬≠vice. I sud¬≠denly re¬≠mem¬≠bered the tech sem¬≠i¬≠nar that I at¬≠tended re¬≠cently, specif¬≠i¬≠cally ses¬≠sion about server¬≠less apps with \u003ca href=\"https://aws.amazon.com/\"\u003e\u003cstrong\u003eAWS\u003c/strong\u003e\u003c/a\u003e (Ama¬≠zon Web Ser¬≠vices) \u003cstrong\u003eLambda\u003c/strong\u003e. Lambda is a server¬≠less com¬≠pute ser¬≠vice that runs your code in re¬≠sponse to events and au¬≠to¬≠mat¬≠i¬≠cally man¬≠ages the un¬≠der¬≠ly¬≠ing com¬≠pute re¬≠sources for you. Fairly sim¬≠i¬≠lar con¬≠cepts \u003cstrong\u003eVertx\u003c/strong\u003e and \u003cstrong\u003eAWS Lambda\u003c/strong\u003e, so maybe they com¬≠ple¬≠ment each other? As it turns out they do, \u003cstrong\u003eVertx\u003c/strong\u003e can get most of your \u003cstrong\u003eLamb¬≠das\u003c/strong\u003e‚Ä¶\u003c/p\u003e\u003cp\u003eUsing the \u003ca href=\"https://serverless.com/\"\u003e\u003cstrong\u003eServer¬≠less Frame¬≠work\u003c/strong\u003e\u003c/a\u003e to cre¬≠ate, man¬≠age and de¬≠ploy your new \u003cstrong\u003eLamb¬≠das\u003c/strong\u003e I was able to get this \u003cstrong\u003emicro-‚Äãservice\u003c/strong\u003e up and run¬≠ning in no time.\u003c/p\u003e\u003cp\u003e\u003cem\u003eEnough with the talk, lets see the im¬≠ple¬≠men¬≠ta¬≠tion.\u003c/em\u003e\u003c/p\u003e\u003ch2 id=\"code\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#code\"\u003e\u003c/a\u003eCode\u003c/h2\u003e\u003cp\u003e\u003cem\u003eHan¬≠dler Class, entry point of AWS Re¬≠quest.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThe first issue that I had was the \u003cstrong\u003esync\u003c/strong\u003e Event Han¬≠dler that is pro¬≠vided by AWS. So I had to by pass it with Fu¬≠ture. In the Han¬≠dler class I first ini¬≠ti¬≠ate Vertx in¬≠stance in a sta¬≠tic block and de¬≠ploy few Ver¬≠ti¬≠cles that will do the work. This class only re¬≠ceives the event, ex¬≠tracts needed data from the re¬≠quest and passes the data to Vertx Event¬≠Bus. After the Con¬≠sumers han¬≠dle the re¬≠quest, Han¬≠dler class will gen¬≠er¬≠ate a proper re¬≠sponse and fin¬≠ish the AWS re¬≠quest.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003e\u003cem\u003eLine 4-18:\u003c/em\u003e This is where Vertx in¬≠stance is cre¬≠ated, Ver¬≠ti¬≠cles are de¬≠ployed and \u003cstrong\u003eAsync JDBC\u003c/strong\u003e client is cre¬≠ated. I fig¬≠ured out that it is bet¬≠ter to cre¬≠ated JDBC client here as in some cases I was time¬≠out when that logic was in the Ver¬≠ti¬≠cle start method.\u003c/p\u003e\u003cp\u003e\u003cem\u003eLine 27-36:\u003c/em\u003e These are helper lines, pars¬≠ing and for¬≠mat¬≠ting the data so I can pass it to the Ver¬≠ti¬≠cles.\u003c/p\u003e\u003cp\u003e\u003cem\u003eLine 38-45:\u003c/em\u003e I have de¬≠cided to map the con¬≠sumers to the ad¬≠dress that is made of re¬≠quest method and url path, ex¬≠am¬≠ple POST/api. This means each API re¬≠quest is mapped to its own con¬≠sumer in Ver¬≠ti¬≠cle class.\u003c/p\u003e\u003cp\u003e\u003cem\u003eLine 47-77:\u003c/em\u003e This is noth¬≠ing but a block of code that han¬≠dles the re¬≠sponse that was passed from Ver¬≠ti¬≠cles to the Fu¬≠ture and gen¬≠er¬≠ates the final re¬≠sponse that will be re¬≠turn to API Gate¬≠way.\u003c/p\u003e\u003cp\u003e\u003cem\u003eUrlSer¬≠vice, Vertx Ver¬≠ti¬≠cle.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eVer¬≠ti¬≠cle class is pretty for¬≠ward. Con¬≠sumers that will process the mes¬≠sage, meth¬≠ods for work¬≠ing with JDBC and helper meth¬≠ods for hash¬≠ing/de¬≠hash¬≠ing id. The logic be¬≠hind url short¬≠en¬≠ing is fairly sim¬≠ple here. Each long url is stored in data¬≠base with a unique id and few ad¬≠di¬≠tional columns. Row id is hashed and re¬≠turned as short url. When re¬≠triev¬≠ing long url hash is de¬≠coded to row id and long url is re¬≠trieved. Later user is redi¬≠rected to long url. With this im¬≠ple¬≠men¬≠ta¬≠tion, on 6 char short url (char¬≠ac¬≠ters after the do¬≠main) you get 62^6 com¬≠bi¬≠na¬≠tions which is 56 800 235 584 rows for stor¬≠ing your urls. TinyURL is cur¬≠rently at 6 long char urls (char¬≠ac¬≠ters after do¬≠main). You can of course im¬≠ple¬≠ment meth¬≠ods for reusing and re¬≠cy¬≠cling ids.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003eAs said, this is all fairly straight for¬≠ward, if you are al¬≠ready fa¬≠mil¬≠iar with \u003cstrong\u003eVertx\u003c/strong\u003e. If you are think¬≠ing why have I re¬≠peated the code for es¬≠tab¬≠lish a \u003cstrong\u003eJDBC\u003c/strong\u003e con¬≠nec¬≠tion, here is the ex¬≠pla¬≠na¬≠tion \u003cem\u003e(line: 10-16)\u003c/em\u003e. I was get¬≠ting Time¬≠outs when cre¬≠at¬≠ing JDBC con¬≠nec¬≠tion in Ver¬≠ti¬≠cles. To avoid this I also added this code to my Han¬≠dler class. This way con¬≠nec¬≠tion is cre¬≠ated there and be¬≠cause of the \u003cstrong\u003eVertx\u003c/strong\u003e im¬≠ple¬≠men¬≠ta¬≠tion any later at¬≠tempt to cre¬≠ate it again will re¬≠sult in just get¬≠ting the in¬≠stances from the first in¬≠vo¬≠ca¬≠tion. This es¬≠caped the need to pass the in¬≠stances di¬≠rectly from the Han¬≠dler class when cre¬≠at¬≠ing Ver¬≠ti¬≠cle in¬≠stances.\u003c/p\u003e\u003cp\u003e\u003cem\u003eServer¬≠less con¬≠fig¬≠u¬≠ra¬≠tion.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eLastly I would like to share the server¬≠less.yml, con¬≠fir¬≠ma¬≠tion file that al¬≠lows seam¬≠lessly de¬≠ploy and man¬≠age¬≠ment of AWS Lambda. With just a few com¬≠mands and lines of con¬≠fig¬≠u¬≠ra¬≠tion you are able to con¬≠fig¬≠ure all nec¬≠es¬≠sary steps for de¬≠ploy¬≠ing your AWS Lambda. Frame¬≠work takes care of mak¬≠ing con¬≠fig¬≠u¬≠ra¬≠tion of Api-‚ÄãGateway and other AWS has¬≠sle that would oth¬≠er¬≠wise needed to be done by hand. In this case Lambda is in¬≠voked by HTTP events.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"performance-and-tests\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#performance-and-tests\"\u003e\u003c/a\u003ePerformance and Tests\u003c/h2\u003e\u003cp\u003e\u003cstrong\u003eVertx\u003c/strong\u003e async ca¬≠pa¬≠bil¬≠i¬≠ties eased the stress and mem¬≠ory needs of tra¬≠di¬≠tional \u003cstrong\u003eAWS Lamb¬≠das\u003c/strong\u003e with sync meth¬≠ods. After per¬≠form¬≠ing load tests Lamb¬≠das that were writ¬≠ten using Vertx frame¬≠work pre¬≠formed \u003cstrong\u003e10% faster and con¬≠sumed 40% less mem¬≠ory\u003c/strong\u003e. As I have read some¬≠where in Vertx doc¬≠u¬≠men¬≠ta¬≠tion, Sync meth¬≠ods will def¬≠i¬≠nitely fin¬≠ish the first re¬≠quest faster but in total Async will be faster in the end. This sav¬≠ings in mem¬≠ory and time will def¬≠i¬≠nitely re¬≠duce the cost of run¬≠ning your Lamb¬≠das and the lit¬≠tle over¬≠head with ad¬≠di¬≠tional code is for sure worth it.\u003c/p\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eTo fol¬≠low the pace of de¬≠mand¬≠ing needs for fast and re¬≠silient ser¬≠vices we need to move from tra¬≠di¬≠tional Mono¬≠liths. Em¬≠brac¬≠ing the \u003cstrong\u003emicro ser¬≠vice\u003c/strong\u003e ar¬≠chi¬≠tec¬≠ture alone will not cut it, not any¬≠more. With the rise and rapid ad¬≠vance¬≠ment of \u003cstrong\u003eCloud\u003c/strong\u003e so¬≠lu¬≠tions it has never been so easy to make a truly \u003cstrong\u003eServer¬≠less\u003c/strong\u003e sys¬≠tems build upon net¬≠work of \u003cstrong\u003emicro ser¬≠vices\u003c/strong\u003e.\nAs you have seen \u003cstrong\u003eVertx\u003c/strong\u003e with its async API makes the full ad¬≠van¬≠tage of \u003cstrong\u003eAWS Lamb¬≠das\u003c/strong\u003e, em¬≠brac¬≠ing them while also im¬≠prov¬≠ing the per¬≠for¬≠mance and low¬≠er¬≠ing the costs. With the help from \u003cstrong\u003eServer¬≠less Frame¬≠work\u003c/strong\u003e writ¬≠ing, de¬≠ploy¬≠ing and man¬≠ag¬≠ing your \u003cstrong\u003eLamb¬≠das\u003c/strong\u003e has never been so easy.\u003c/p\u003e\u003cp\u003eIf you are in¬≠ter¬≠ested in the whole project, you can find it on \u003ca href=\"https://github.com/pendula95/vertx-aws-url-shortener-service/tree/master\"\u003e\u003cstrong\u003eGitHub\u003c/strong\u003e\u003c/a\u003e.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThis is a re-‚Äãpublication of the fol¬≠low¬≠ing \u003ca href=\"http://lazarbulic.com/blog/2017/11/10/aws-lambda-vertx-framework-url-shortener-backend/\"\u003eblog post\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e","scope":{}},"tfIdfTerms":[{"term":"lambda","tf":13},{"term":"aw","tf":10},{"term":"verticl","tf":10},{"term":"url","tf":10},{"term":"will","tf":9},{"term":"servic","tf":8},{"term":"serverless","tf":8},{"term":"creat","tf":8},{"term":"class","tf":8},{"term":"deploi","tf":7},{"term":"request","tf":7},{"term":"line","tf":7},{"term":"method","tf":7},{"term":"code","tf":6},{"term":"handler","tf":6},{"term":"need","tf":6},{"term":"event","tf":5},{"term":"framework","tf":5},{"term":"pass","tf":5},{"term":"instanc","tf":5},{"term":"consum","tf":5},{"term":"jdbc","tf":5},{"term":"api","tf":5},{"term":"id","tf":5},{"term":"long","tf":5}]}],"numPages":9},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["category","guides","page","2"]},"buildId":"C_I4gGOFTI-4fY_eV8SrD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.8577696c4e17514af975.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_buildManifest.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_ssgManifest.js" async=""></script></body></html>