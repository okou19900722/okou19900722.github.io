<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Page 4 | Guides | Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.176b8cb6.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.176b8cb6.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.8577696c4e17514af975.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-entries"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">26 April 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/building-a-real-time-web-app-with-angular-ngrx-and-vert-x/">Building a real-time web app with Angular/Ngrx and Vert.x</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/benorama.png?size=50"/><a href="https://github.com/benorama" target="_blank" rel="noopener noreferrer">Benoit Hediard</a></li></ul></span><p class="blog-entry-summary">There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?</p><span class="read-more-link"><a href="/blog/building-a-real-time-web-app-with-angular-ngrx-and-vert-x/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">14 April 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/">Dynamic Routing in Serverless Microservice with Vert.x Event Bus</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/bytekast.png?size=50"/><a href="https://github.com/bytekast" target="_blank" rel="noopener noreferrer">Rowell Belen</a></li></ul></span><p class="blog-entry-summary">The Serverless Framework has become the de facto toolkit for building and deploying serverless functions or applications.</p><span class="read-more-link"><a href="/blog/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">20 March 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/scala-is-here/">Scala is here</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/codepitbull.png?size=50"/><a href="https://github.com/codepitbull" target="_blank" rel="noopener noreferrer">Jochen Mader</a></li></ul></span><p class="blog-entry-summary">The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers.</p><span class="read-more-link"><a href="/blog/scala-is-here/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">13 March 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh/">Data-driven Apps made easy with Vert.x 3.4.0 and headless CMS Gentics Mesh</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/jotschi.png?size=50"/><a href="https://github.com/jotschi" target="_blank" rel="noopener noreferrer">Johannes Schüth</a></li></ul></span><p class="blog-entry-summary">I would like to share why Vert.x is not only a robust foundation for the headless Content Management System Gentics Mesh but also how it can be used to build a template-based web server.</p><span class="read-more-link"><a href="/blog/data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">9 February 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/vert-x-3-4-0-beta1-release/">Vert.x 3.4.0.Beta1 release</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">We have released 3.4.0.Beta1, this release is the biggest since Vert.x 3.0.0 with plenty of great features.</p><span class="read-more-link"><a href="/blog/vert-x-3-4-0-beta1-release/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">31 January 2017</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/an-introduction-to-the-vert-x-context-object/">An Introduction to the Vert.x Context Object</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/millross.png?size=50"/><a href="https://github.com/millross" target="_blank" rel="noopener noreferrer">Jez Prime</a></li></ul></span><p class="blog-entry-summary">Under the hood, the vert.x Context class plays a critical part in maintaining the thread-safety guarantees of verticles. Most of the time, vert.x coders don&#x27;t need to make use of Context objects directly.</p><span class="read-more-link"><a href="/blog/an-introduction-to-the-vert-x-context-object/">Read more</a></span></div></div><div class="pagination"><div class="pagination-page"><a href="/blog/category/guides/page/3/">«</a></div><div class="pagination-page"><a href="/blog/category/guides/">1</a></div><div class="pagination-page disabled">…</div><div class="pagination-page"><a href="/blog/category/guides/page/3/">3</a></div><div class="pagination-page active"><a href="/blog/category/guides/page/4/">4</a></div><div class="pagination-page"><a href="/blog/category/guides/page/5/">5</a></div><div class="pagination-page"><a href="/blog/category/guides/page/6/">6</a></div><div class="pagination-page"><a href="/blog/category/guides/page/7/">7</a></div><div class="pagination-page disabled">…</div><div class="pagination-page"><a href="/blog/category/guides/page/9/">9</a></div><div class="pagination-page"><a href="/blog/category/guides/page/5/">»</a></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"category":"guides","page":4,"posts":[{"filename":"blog/2017-04-26-building-a-real-time-web-app-with-angular-ngrx-and-vert-x.mdx","date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x","meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"readingTime":{"text":"7 min read","minutes":6.23,"time":373800,"words":1246},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Nowa\\xADdays, there are mul\\xADti\\xADple tech stacks to build a real-\\u200Btime web app. What are the best choices to build real-\\u200Btime An\\xADgu\\xADlar client apps, con\\xADnected to a JVM-\\u200Bbased back\\xADend? This ar\\xADti\\xADcle de\\xADscribes an An\\xADgu\\xADlar+Vertx real-\\u200Btime ar\\xADchi\\xADtec\\xADture with a Proof of Con\\xADcept demo app.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/@benorama/building-a-realtime-web-app-with-angular-ngrx-and-vert-x-a5381c0397a1\"\n  }), \"Medium post\"))), mdx(\"h2\", {\n    \"id\": \"intro\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#intro\"\n  })), \"Intro\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Wel\\xADcome to the real-\\u200Btime web!\"), \" It\\u2019s time to move on from tra\\xADdi\\xADtional syn\\xADchro\\xADnous HTTP re\\xADquest/re\\xADsponse ar\\xADchi\\xADtec\\xADtures to re\\xADac\\xADtive apps with con\\xADnected clients (ouch\\u2026 that\\u2019s a lot of buzz\\xADwords in just one sen\\xADtence)!\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/data-in-motion.jpg\",\n    \"alt\": null\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Image source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.voxxed.com\"\n  }), \"https://www.voxxed.com\"))), mdx(\"p\", null, \"To build this kind of app, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.meteor.com\"\n  }), \"Me\\xADte\\xADorJS\"), \" is the new cool kid on the block (v1.0 re\\xADleased in oc\\xADto\\xADber 2014): \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"a full stack Javascript plat\\xADform to build connected-\\u200Bclient re\\xADac\\xADtive ap\\xADpli\\xADca\\xADtions\"), \". It al\\xADlows JS de\\xADvel\\xADop\\xADers to build and de\\xADploy amaz\\xADing mod\\xADern web and mo\\xADbile apps (iOS/An\\xADdroid) in no time, using a uni\\xADfied back\\xADend+fron\\xADtend code within a sin\\xADgle app repo. That\\u2019s a pretty am\\xADbi\\xADtious ap\\xADproach but it re\\xADquires a very opin\\xADion\\xADated and highly cou\\xADpled JS tech stack and it\\u2019s still a pretty niche frame\\xADwork.\"), mdx(\"p\", null, \"More\\xADover, we are a Java shop on the back\\xADend. At Ago\\xADra\\xADPulse, we rely heav\\xADily on :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://angular.io\"\n  }), \"An\\xADgu\\xADlar\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://ionicframework.com\"\n  }), \"Ionic\"), \" for the JS fron\\xADtend (with a shared busi\\xADness/data ar\\xADchi\\xADtec\\xADture based on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"Ngrx\"), \"),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.groovy-lang.org\"\n  }), \"Groovy\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://grails.org\"\n  }), \"Grails\"), \" ecosys\\xADtem for the JVM back\\xADend.\")), mdx(\"p\", null, \"So my ques\\xADtion is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"What are the best choices to build real-\\u200Btime An\\xADgu\\xADlar client apps, con\\xADnected to a JVM-\\u200Bbased back\\xADend these days?\")), mdx(\"p\", null, \"Our re\\xADquire\\xADments are pretty basic. We don\\u2019t need full Me\\xADteor\\u2019s end-\\u200Bto-end ap\\xADpli\\xADca\\xADtion model.\\nWe just want to be able to :\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"build a re\\xADac\\xADtive app with an event bus on the JVM, and\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"ex\\xADtend the event bus down to the browser to be able to pub\\xADlish/sub\\xADscribe to real-\\u200Btime events from an An\\xADgu\\xADlar app.\")), mdx(\"h3\", {\n    \"id\": \"server-side-jvm\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#server-side-jvm\"\n  })), \"Server side (JVM)\"), mdx(\"p\", null, \"Re\\xADac\\xADtive apps is a hot topic nowa\\xADdays and there are many great libs/plat\\xADforms to build this type of event-\\u200Bdriven ar\\xADchi\\xADtec\\xADture on the JVM:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \",\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.lightbend.com\"\n  }), \"Light\\xADbend\"), \" plat\\xADform (Play, Akka, Scala),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Spring \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://projectreactor.io\"\n  }), \"Project Re\\xADac\\xADtor\"), \" (in\\xADte\\xADgrated into Grails 3.0).\")), mdx(\"h3\", {\n    \"id\": \"client-side\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#client-side\"\n  })), \"Client side\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://facebook.github.io/react/\"\n  }), \"Re\\xADac\\xADtJS\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://angular.io\"\n  }), \"An\\xADgu\\xADlar\"), \" are the two most pop\\xADu\\xADlar frame\\xADwork right now to build mod\\xADern JS apps. Most plat\\xADforms use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sockjs/sockjs-client\"\n  }), \"SockJS\"), \" to han\\xADdle real-\\u200Btime con\\xADnec\\xADtions:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/groovy/\"\n  }), \"Vertx-\\u200Bweb\"), \" pro\\xADvides a SockJS server im\\xADple\\xADmen\\xADta\\xADtion with an event bus bridge and a \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/groovy/#_sockjs_event_bus_bridge\"\n  }), \"vertx-\\u200Bevenbus.js\"), \" client li\\xADbrary (very easy to use),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Spring pro\\xADvides web\\xADsocket SockJS sup\\xADport though Spring Mes\\xADsag\\xADing and Web\\xADsocket libs (see an ex\\xADam\\xADple \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://spring.io/guides/gs/messaging-stomp-websocket/\"\n  }), \"here\"), \")\")), mdx(\"h3\", {\n    \"id\": \"final-choice-vertx--angular\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#final-choice-vertx--angular\"\n  })), \"Final choice: Vert.x + Angular\"), mdx(\"p\", null, \"In the end, I\\u2019ve cho\\xADsen to ex\\xADper\\xADi\\xADment with Vert.x for its ex\\xADcel\\xADlent Groovy sup\\xADport, dis\\xADtrib\\xADuted event bus, scal\\xADa\\xADbil\\xADity and ease of use.\"), mdx(\"p\", null, \"I en\\xADjoyed it very much. Let me show you the re\\xADsult of my ex\\xADper\\xADi\\xADmen\\xADta\\xADtion which is the root of our real-\\u200Btime fea\\xADtures com\\xADing very soon in Ago\\xADra\\xADPulse v6.0!\"), mdx(\"h2\", {\n    \"id\": \"why-vertx\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#why-vertx\"\n  })), \"Why Vert.x?\"), mdx(\"p\", null, \"Like other re\\xADac\\xADtive plat\\xADform, Vert.x is event dri\\xADven and non block\\xADing. It scales very well (even more that Node.js).\"), mdx(\"p\", null, \"Un\\xADlike other re\\xADac\\xADtive plat\\xADforms, Vert.x is poly\\xADglot: you can use Vert.x with mul\\xADti\\xADple lan\\xADguages in\\xADclud\\xADing Java, JavaScript, Groovy, Ruby, Cey\\xADlon, Scala and Kotlin.\"), mdx(\"p\", null, \"Un\\xADlike Node.js, Vert.x is a gen\\xADeral pur\\xADpose tool-\\u200Bkit and un\\xADopin\\xADion\\xADated. It\\u2019s a ver\\xADsa\\xADtile plat\\xADform suit\\xADable for many things: from sim\\xADple net\\xADwork util\\xADi\\xADties, so\\xADphis\\xADti\\xADcated mod\\xADern web ap\\xADpli\\xADca\\xADtions, HTTP/REST mi\\xADcroser\\xADvices or a full blown back-\\u200Bend message-\\u200Bbus ap\\xADpli\\xADca\\xADtion.\"), mdx(\"p\", null, \"Like other re\\xADac\\xADtive plat\\xADforms, it looks scary in the be\\xADgin\\xADing when you read the doc\\xADu\\xADmen\\xADta\\xADtion\\u2026 ;) But once you start play\\xADing with it, it re\\xADmains fun and sim\\xADple to use, es\\xADpe\\xADcially with Groovy! Vert.x re\\xADally al\\xADlows you to build sub\\xADstan\\xADtial sys\\xADtems with\\xADout get\\xADting tan\\xADgled in com\\xADplex\\xADity.\"), mdx(\"p\", null, \"In my case, I was mainly in\\xADter\\xADested by the dis\\xADtrib\\xADuted event-\\u200Bbus pro\\xADvided (a core fea\\xADture of Vert.x).\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"To val\\xADi\\xADdate our ap\\xADproach, we built pro\\xADto\\xADtypes with the fol\\xADlow\\xADing goals:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"share and syn\\xADchro\\xADnize a com\\xADmon (Ngrx-\\u200Bbased) state be\\xADtween mul\\xADti\\xADple con\\xADnected clients, and\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dis\\xADtrib\\xADute real-\\u200Btime (Ngrx-\\u200Bbased) ac\\xADtions across mul\\xADti\\xADple con\\xADnected clients, which im\\xADpact local states/re\\xADduc\\xADers.\"))), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"@ngrx/store\"), \" is a RxJS pow\\xADered state man\\xADage\\xADment in\\xADspired by Redux for An\\xADgu\\xADlar apps. It\\u2019s cur\\xADrently the most pop\\xADu\\xADlar way to struc\\xADture com\\xADplex busi\\xADness logic in An\\xADgu\\xADlar apps.\")), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/redux.png\",\n    \"alt\": \"Redux\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.smashingmagazine.com/2016/06/an-introduction-to-redux/\"\n  }), \"https://www.smash\\xADing\\xADmagazine.com/2016/06/an-\\u200Bintroduction-to-redux/\"))), mdx(\"h2\", {\n    \"id\": \"proof-of-concept\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#proof-of-concept\"\n  })), \"PROOF OF CONCEPT\"), mdx(\"p\", null, \"Here is the repo of our ini\\xADtial proof of con\\xADcept:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://github.com/benorama/ngrx-realtime-app\"\n  }), \"http://github.com/beno\\xADrama/ngrx-\\u200Brealtime-app\")), mdx(\"p\", null, \"The repo is di\\xADvided into two sep\\xADa\\xADrate projects:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Vert.x server app\"), \", based on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \" (ver\\xADsion 3.3), man\\xADaged by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://gradle.org\"\n  }), \"Gra\\xADdle\"), \", with a main ver\\xADti\\xADcle de\\xADvel\\xADoped in \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://groovy-lang.org\"\n  }), \"Groovy\"), \" lang.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"An\\xADgu\\xADlar client app\"), \", based on An\\xADgu\\xADlar (ver\\xADsion 4.0.1), man\\xADaged by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://angular.io\"\n  }), \"An\\xADgu\\xADlar\"), \" CLI with state, re\\xADduc\\xADers and ac\\xADtions logic based on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"@ngrx/store\"), \" (ver\\xADsion 2.2.1)\")), mdx(\"p\", null, \"For the demo, we are using the counter ex\\xADam\\xADple code (ac\\xADtions and re\\xADduc\\xADers) from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ngrx/store\"\n  }), \"@ngrx/store\"), \".\"), mdx(\"p\", null, \"The counter client busi\\xADness logic is based on:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"CounterState\"), \" in\\xADter\\xADface, counter state model,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"counterReducer\"), \" re\\xADducer, counter state man\\xADage\\xADment based on dis\\xADpatched ac\\xADtions, and\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"In\\xADcre\\xADment\"), \", \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"decre\\xADment\"), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"reset\"), \" counter ac\\xADtions.\")), mdx(\"p\", null, \"State is main\\xADtained server-\\u200Bside with a sim\\xADple sin\\xADgle\\xADton \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CounterService\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-groovy\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"CounterService\"), \" {\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" INCREMENT = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'[Counter] Increment'\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" DECREMENT = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'[Counter] Decrement'\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" RESET = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'[Counter] Reset'\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" total = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" handleEvent(event) {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"switch\"), \"(event.type) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"INCREMENT:\"), \"\\n                total++\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"break\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"DECREMENT:\"), \"\\n                total--\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"break\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"RESET:\"), \"\\n                total = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"break\"), \"\\n        }\\n    }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"client-state-initialization-through-requestresponse\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#client-state-initialization-through-requestresponse\"\n  })), \"Client state initialization through Request/Response\"), mdx(\"p\", null, \"Ini\\xADtial state is ini\\xADtial\\xADized with sim\\xADple \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"re\\xADquest/re\\xADsponse\"), \" (or send/reply) on the event bus.\\nOnce the client is con\\xADnected, it sends a re\\xADquest to the event bus at the ad\\xADdress \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"counter::total\"), \". The server replies di\\xADrectly with the value of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CounterService\"), \" total and the client dis\\xADpatches lo\\xADcally a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"reset\"), \" ac\\xADtion with the total value from the reply.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/vertx-request-response.png\",\n    \"alt\": \"Vertx Request Response\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"\n  }), \"https://www.slideshare.net/Red\\xADHat\\xADDe\\xADvel\\xADop\\xADers/vertx-\\u200Bmicroservices-were-never-so-easy-clement-escoffier\"))), mdx(\"p\", null, \"Here is an ex\\xADtract of the cor\\xADre\\xADspond\\xADing code (from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppEventBusService\"), \"):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-typescript\"\n  }), \"initializeCounter() {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".eventBusService.send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'counter::total'\"), \", body, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"error, message\"), \") =\u003e\"), \" {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle reply\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (message \u0026\u0026 message.body) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"let\"), \" localAction = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" CounterActions.ResetAction();\\n            localAction.payload = message.body; \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Total value\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".store.dispatch(localAction);\\n        }\\n    });\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"actions-distribution-through-publishsubscribe\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#actions-distribution-through-publishsubscribe\"\n  })), \"Actions distribution through Publish/Subscribe\"), mdx(\"p\", null, \"Ac\\xADtion dis\\xADtri\\xADb\\xADu\\xADtion/sync uses the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"pub\\xADlish/sub\\xADscribe\"), \" pat\\xADtern.\"), mdx(\"p\", null, \"Counter ac\\xADtions are pub\\xADlished from the client to the event bus at the ad\\xADdress \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"counter::ac\\xADtions\"), \".\"), mdx(\"p\", null, \"Any client that have sub\\xADscribed to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"counter::ac\\xADtions\"), \" ad\\xADdress will re\\xADceive the ac\\xADtions and re\\xADdis\\xADpatch them lo\\xADcally to im\\xADpact app states/re\\xADduc\\xADers.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/vertx-publish-subscribe.png\",\n    \"alt\": \"Vertx Publish Subscribe\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"em\"\n  }, {\n    \"href\": \"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"\n  }), \"https://www.slideshare.net/Red\\xADHat\\xADDe\\xADvel\\xADop\\xADers/vertx-\\u200Bmicroservices-were-never-so-easy-clement-escoffier\"))), mdx(\"p\", null, \"Here is an ex\\xADtract of the cor\\xADre\\xADspond\\xADing code (from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppEventBusService\"), \"):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-typescript\"\n  }), \"publishAction(action: RemoteAction) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (action.publishedByUser) {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"console\"), \".error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"This action has already been published\\\"\"), \");\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n    }\\n    action.publishedByUser = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".currentUser;\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".eventBusService.publish(action.eventBusAddress, action);\\n}\\nsubscribeToActions(eventBusAddress: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"string\"), \") {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".eventBusService.registerHandler(eventBusAddress, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"error, message\"), \") =\u003e\"), \" {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle message from subscription\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (message.body.publishedByUser === \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".currentUser) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Ignore action sent by current manager\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"let\"), \" localAction = message.body;\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".store.dispatch(localAction);\\n    });\\n}\\n\")), mdx(\"p\", null, \"The event bus pub\\xADlish\\xADing logic is achieved through a sim\\xADple Ngrx Ef\\xADfects. Any ac\\xADtions that ex\\xADtend \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RemoteAction\"), \" class will be pub\\xADlished to the event bus.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-typescript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Injectable\"), \"()\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"export\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" AppEventBusEffects {\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"constructor\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" actions$: Actions, \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" appEventBusService: AppEventBusService\"), \") {}\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Listen to all actions and publish remote actions to account event bus\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Effect\"), \"({dispatch: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"}) remoteAction$ = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".actions$\\n        .filter(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"action\"), \" =\u003e\"), \" action \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"instanceof\"), \" RemoteAction \u0026\u0026 action.publishedByUser == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"undefined\"), \")\\n        .do(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"action: RemoteAction\"), \") =\u003e\"), \" {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".appEventBusService.publishAction(action);\\n        });\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Effect\"), \"({dispatch: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \"}) login$ = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".actions$\\n        .ofType(UserActionTypes.LOGIN)\\n        .do(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"() =\u003e\"), \" {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"this\"), \".appEventBusService.connect();\\n        });\\n}\\n\")), mdx(\"p\", null, \"You can see all of this in ac\\xADtion by lo\\xADcally launch\\xADing the server and the client app in two sep\\xADa\\xADrate browser win\\xADdows.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-realtime-angular-ngrx/demo-app-screen.png\",\n    \"alt\": \"Demo app screen\"\n  }))), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Bonus: the demo app also in\\xADcludes user sta\\xADtus (of\\xADfline/on\\xADline), based of the event bus con\\xADnec\\xADtion sta\\xADtus.\")), mdx(\"p\", null, \"The counter state is shared and syn\\xADchro\\xADnized be\\xADtween con\\xADnected clients and each local ac\\xADtion is dis\\xADtrib\\xADuted in real-\\u200Btime to other clients.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Mis\\xADsion ac\\xADcom\\xADplished!\")), mdx(Alert, {\n    info: true,\n    title: \"Typescript version of Vertx EventBus Client\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The app uses our own Type\\xADscript ver\\xADsion of the of\\xADfi\\xADcial JS \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"Vertx Event\\xADBus Client\"), \". It can be found \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gist.github.com/benorama/93373c3c1c3574732d6cc1b4754aab9f\"\n  }), \"here\"), \", any feed\\xADback, im\\xADprove\\xADment sug\\xADges\\xADtions are wel\\xADcome!\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eNowa­days, there are mul­ti­ple tech stacks to build a real-​time web app. What are the best choices to build real-​time An­gu­lar client apps, con­nected to a JVM-​based back­end? This ar­ti­cle de­scribes an An­gu­lar+Vertx real-​time ar­chi­tec­ture with a Proof of Con­cept demo app.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThis is a re-​publication of the fol­low­ing \u003ca href=\"https://medium.com/@benorama/building-a-realtime-web-app-with-angular-ngrx-and-vert-x-a5381c0397a1\"\u003eMedium post\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"intro\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#intro\"\u003e\u003c/a\u003eIntro\u003c/h2\u003e\u003cp\u003e\u003cstrong\u003eWel­come to the real-​time web!\u003c/strong\u003e It’s time to move on from tra­di­tional syn­chro­nous HTTP re­quest/re­sponse ar­chi­tec­tures to re­ac­tive apps with con­nected clients (ouch… that’s a lot of buzz­words in just one sen­tence)!\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-realtime-angular-ngrx/data-in-motion.jpg\"/\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eImage source: \u003ca href=\"https://www.voxxed.com\"\u003ehttps://www.voxxed.com\u003c/a\u003e\u003c/em\u003e\u003c/p\u003e\u003cp\u003eTo build this kind of app, \u003ca href=\"https://www.meteor.com\"\u003eMe­te­orJS\u003c/a\u003e is the new cool kid on the block (v1.0 re­leased in oc­to­ber 2014): \u003cstrong\u003ea full stack Javascript plat­form to build connected-​client re­ac­tive ap­pli­ca­tions\u003c/strong\u003e. It al­lows JS de­vel­op­ers to build and de­ploy amaz­ing mod­ern web and mo­bile apps (iOS/An­droid) in no time, using a uni­fied back­end+fron­tend code within a sin­gle app repo. That’s a pretty am­bi­tious ap­proach but it re­quires a very opin­ion­ated and highly cou­pled JS tech stack and it’s still a pretty niche frame­work.\u003c/p\u003e\u003cp\u003eMore­over, we are a Java shop on the back­end. At Ago­ra­Pulse, we rely heav­ily on :\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://angular.io\"\u003eAn­gu­lar\u003c/a\u003e and \u003ca href=\"http://ionicframework.com\"\u003eIonic\u003c/a\u003e for the JS fron­tend (with a shared busi­ness/data ar­chi­tec­ture based on \u003ca href=\"https://github.com/ngrx/store\"\u003eNgrx\u003c/a\u003e),\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://www.groovy-lang.org\"\u003eGroovy\u003c/a\u003e and \u003ca href=\"https://grails.org\"\u003eGrails\u003c/a\u003e ecosys­tem for the JVM back­end.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSo my ques­tion is:\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eWhat are the best choices to build real-​time An­gu­lar client apps, con­nected to a JVM-​based back­end these days?\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eOur re­quire­ments are pretty basic. We don’t need full Me­teor’s end-​to-end ap­pli­ca­tion model.\nWe just want to be able to :\u003c/p\u003e\u003col\u003e\u003cli\u003ebuild a re­ac­tive app with an event bus on the JVM, and\u003c/li\u003e\u003cli\u003eex­tend the event bus down to the browser to be able to pub­lish/sub­scribe to real-​time events from an An­gu­lar app.\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"server-side-jvm\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#server-side-jvm\"\u003e\u003c/a\u003eServer side (JVM)\u003c/h3\u003e\u003cp\u003eRe­ac­tive apps is a hot topic nowa­days and there are many great libs/plat­forms to build this type of event-​driven ar­chi­tec­ture on the JVM:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"http://vertx.io\"\u003eVert.x\u003c/a\u003e,\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.lightbend.com\"\u003eLight­bend\u003c/a\u003e plat­form (Play, Akka, Scala),\u003c/li\u003e\u003cli\u003eSpring \u003ca href=\"http://projectreactor.io\"\u003eProject Re­ac­tor\u003c/a\u003e (in­te­grated into Grails 3.0).\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"client-side\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#client-side\"\u003e\u003c/a\u003eClient side\u003c/h3\u003e\u003cp\u003e\u003ca href=\"http://facebook.github.io/react/\"\u003eRe­ac­tJS\u003c/a\u003e and \u003ca href=\"https://angular.io\"\u003eAn­gu­lar\u003c/a\u003e are the two most pop­u­lar frame­work right now to build mod­ern JS apps. Most plat­forms use \u003ca href=\"https://github.com/sockjs/sockjs-client\"\u003eSockJS\u003c/a\u003e to han­dle real-​time con­nec­tions:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"http://vertx.io/docs/vertx-web/groovy/\"\u003eVertx-​web\u003c/a\u003e pro­vides a SockJS server im­ple­men­ta­tion with an event bus bridge and a \u003ca href=\"http://vertx.io/docs/vertx-web/groovy/#_sockjs_event_bus_bridge\"\u003evertx-​evenbus.js\u003c/a\u003e client li­brary (very easy to use),\u003c/li\u003e\u003cli\u003eSpring pro­vides web­socket SockJS sup­port though Spring Mes­sag­ing and Web­socket libs (see an ex­am­ple \u003ca href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\"\u003ehere\u003c/a\u003e)\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"final-choice-vertx--angular\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#final-choice-vertx--angular\"\u003e\u003c/a\u003eFinal choice: Vert.x + Angular\u003c/h3\u003e\u003cp\u003eIn the end, I’ve cho­sen to ex­per­i­ment with Vert.x for its ex­cel­lent Groovy sup­port, dis­trib­uted event bus, scal­a­bil­ity and ease of use.\u003c/p\u003e\u003cp\u003eI en­joyed it very much. Let me show you the re­sult of my ex­per­i­men­ta­tion which is the root of our real-​time fea­tures com­ing very soon in Ago­ra­Pulse v6.0!\u003c/p\u003e\u003ch2 id=\"why-vertx\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#why-vertx\"\u003e\u003c/a\u003eWhy Vert.x?\u003c/h2\u003e\u003cp\u003eLike other re­ac­tive plat­form, Vert.x is event dri­ven and non block­ing. It scales very well (even more that Node.js).\u003c/p\u003e\u003cp\u003eUn­like other re­ac­tive plat­forms, Vert.x is poly­glot: you can use Vert.x with mul­ti­ple lan­guages in­clud­ing Java, JavaScript, Groovy, Ruby, Cey­lon, Scala and Kotlin.\u003c/p\u003e\u003cp\u003eUn­like Node.js, Vert.x is a gen­eral pur­pose tool-​kit and un­opin­ion­ated. It’s a ver­sa­tile plat­form suit­able for many things: from sim­ple net­work util­i­ties, so­phis­ti­cated mod­ern web ap­pli­ca­tions, HTTP/REST mi­croser­vices or a full blown back-​end message-​bus ap­pli­ca­tion.\u003c/p\u003e\u003cp\u003eLike other re­ac­tive plat­forms, it looks scary in the be­gin­ing when you read the doc­u­men­ta­tion… ;) But once you start play­ing with it, it re­mains fun and sim­ple to use, es­pe­cially with Groovy! Vert.x re­ally al­lows you to build sub­stan­tial sys­tems with­out get­ting tan­gled in com­plex­ity.\u003c/p\u003e\u003cp\u003eIn my case, I was mainly in­ter­ested by the dis­trib­uted event-​bus pro­vided (a core fea­ture of Vert.x).\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eTo val­i­date our ap­proach, we built pro­to­types with the fol­low­ing goals:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eshare and syn­chro­nize a com­mon (Ngrx-​based) state be­tween mul­ti­ple con­nected clients, and\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong\u003edis­trib­ute real-​time (Ngrx-​based) ac­tions across mul­ti­ple con­nected clients, which im­pact local states/re­duc­ers.\u003c/strong\u003e\u003c/li\u003e\u003c/ul\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003e\u003ca href=\"https://github.com/ngrx/store\"\u003e@ngrx/store\u003c/a\u003e is a RxJS pow­ered state man­age­ment in­spired by Redux for An­gu­lar apps. It’s cur­rently the most pop­u­lar way to struc­ture com­plex busi­ness logic in An­gu­lar apps.\u003c/p\u003e\u003c/div\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-realtime-angular-ngrx/redux.png\" alt=\"Redux\"/\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eSource: \u003ca href=\"https://www.smashingmagazine.com/2016/06/an-introduction-to-redux/\"\u003ehttps://www.smash­ing­magazine.com/2016/06/an-​introduction-to-redux/\u003c/a\u003e\u003c/em\u003e\u003c/p\u003e\u003ch2 id=\"proof-of-concept\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#proof-of-concept\"\u003e\u003c/a\u003ePROOF OF CONCEPT\u003c/h2\u003e\u003cp\u003eHere is the repo of our ini­tial proof of con­cept:\u003c/p\u003e\u003cp\u003e\u003ca href=\"http://github.com/benorama/ngrx-realtime-app\"\u003ehttp://github.com/beno­rama/ngrx-​realtime-app\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThe repo is di­vided into two sep­a­rate projects:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eVert.x server app\u003c/strong\u003e, based on \u003ca href=\"http://vertx.io\"\u003eVert.x\u003c/a\u003e (ver­sion 3.3), man­aged by \u003ca href=\"https://gradle.org\"\u003eGra­dle\u003c/a\u003e, with a main ver­ti­cle de­vel­oped in \u003ca href=\"http://groovy-lang.org\"\u003eGroovy\u003c/a\u003e lang.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eAn­gu­lar client app\u003c/strong\u003e, based on An­gu­lar (ver­sion 4.0.1), man­aged by \u003ca href=\"https://angular.io\"\u003eAn­gu­lar\u003c/a\u003e CLI with state, re­duc­ers and ac­tions logic based on \u003ca href=\"https://github.com/ngrx/store\"\u003e@ngrx/store\u003c/a\u003e (ver­sion 2.2.1)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eFor the demo, we are using the counter ex­am­ple code (ac­tions and re­duc­ers) from \u003ca href=\"https://github.com/ngrx/store\"\u003e@ngrx/store\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe counter client busi­ness logic is based on:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003eCounterState\u003c/code\u003e in­ter­face, counter state model,\u003c/li\u003e\u003cli\u003e\u003ccode\u003ecounterReducer\u003c/code\u003e re­ducer, counter state man­age­ment based on dis­patched ac­tions, and\u003c/li\u003e\u003cli\u003e\u003cem\u003eIn­cre­ment\u003c/em\u003e, \u003cem\u003edecre­ment\u003c/em\u003e and \u003cem\u003ereset\u003c/em\u003e counter ac­tions.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eState is main­tained server-​side with a sim­ple sin­gle­ton \u003ccode\u003eCounterService\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-groovy\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCounterService\u003c/span\u003e {\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e INCREMENT = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;[Counter] Increment\u0026#x27;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e DECREMENT = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;[Counter] Decrement\u0026#x27;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e RESET = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;[Counter] Reset\u0026#x27;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e total = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e handleEvent(event) {\n        \u003cspan class=\"hljs-keyword\"\u003eswitch\u003c/span\u003e(event.type) {\n            \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eINCREMENT:\u003c/span\u003e\n                total++\n                \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eDECREMENT:\u003c/span\u003e\n                total--\n                \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eRESET:\u003c/span\u003e\n                total = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n                \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"client-state-initialization-through-requestresponse\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#client-state-initialization-through-requestresponse\"\u003e\u003c/a\u003eClient state initialization through Request/Response\u003c/h3\u003e\u003cp\u003eIni­tial state is ini­tial­ized with sim­ple \u003cstrong\u003ere­quest/re­sponse\u003c/strong\u003e (or send/reply) on the event bus.\nOnce the client is con­nected, it sends a re­quest to the event bus at the ad­dress \u003cstrong\u003ecounter::total\u003c/strong\u003e. The server replies di­rectly with the value of \u003ccode\u003eCounterService\u003c/code\u003e total and the client dis­patches lo­cally a \u003cem\u003ereset\u003c/em\u003e ac­tion with the total value from the reply.\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-realtime-angular-ngrx/vertx-request-response.png\" alt=\"Vertx Request Response\"/\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eSource: \u003ca href=\"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"\u003ehttps://www.slideshare.net/Red­Hat­De­vel­op­ers/vertx-​microservices-were-never-so-easy-clement-escoffier\u003c/a\u003e\u003c/em\u003e\u003c/p\u003e\u003cp\u003eHere is an ex­tract of the cor­re­spond­ing code (from \u003ccode\u003eAppEventBusService\u003c/code\u003e):\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-typescript\"\u003einitializeCounter() {\n    \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.eventBusService.send(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;counter::total\u0026#x27;\u003c/span\u003e, body, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerror, message\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Handle reply\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (message \u0026amp;\u0026amp; message.body) {\n            \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e localAction = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e CounterActions.ResetAction();\n            localAction.payload = message.body; \u003cspan class=\"hljs-comment\"\u003e// Total value\u003c/span\u003e\n            \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.store.dispatch(localAction);\n        }\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"actions-distribution-through-publishsubscribe\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#actions-distribution-through-publishsubscribe\"\u003e\u003c/a\u003eActions distribution through Publish/Subscribe\u003c/h3\u003e\u003cp\u003eAc­tion dis­tri­b­u­tion/sync uses the \u003cstrong\u003epub­lish/sub­scribe\u003c/strong\u003e pat­tern.\u003c/p\u003e\u003cp\u003eCounter ac­tions are pub­lished from the client to the event bus at the ad­dress \u003cstrong\u003ecounter::ac­tions\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eAny client that have sub­scribed to \u003cstrong\u003ecounter::ac­tions\u003c/strong\u003e ad­dress will re­ceive the ac­tions and re­dis­patch them lo­cally to im­pact app states/re­duc­ers.\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-realtime-angular-ngrx/vertx-publish-subscribe.png\" alt=\"Vertx Publish Subscribe\"/\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eSource: \u003ca href=\"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"\u003ehttps://www.slideshare.net/Red­Hat­De­vel­op­ers/vertx-​microservices-were-never-so-easy-clement-escoffier\u003c/a\u003e\u003c/em\u003e\u003c/p\u003e\u003cp\u003eHere is an ex­tract of the cor­re­spond­ing code (from \u003ccode\u003eAppEventBusService\u003c/code\u003e):\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-typescript\"\u003epublishAction(action: RemoteAction) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (action.publishedByUser) {\n        \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;This action has already been published\u0026quot;\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n    }\n    action.publishedByUser = \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.currentUser;\n    \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.eventBusService.publish(action.eventBusAddress, action);\n}\nsubscribeToActions(eventBusAddress: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e) {\n    \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.eventBusService.registerHandler(eventBusAddress, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerror, message\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-comment\"\u003e// Handle message from subscription\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (message.body.publishedByUser === \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.currentUser) {\n            \u003cspan class=\"hljs-comment\"\u003e// Ignore action sent by current manager\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n        }\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e localAction = message.body;\n        \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.store.dispatch(localAction);\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe event bus pub­lish­ing logic is achieved through a sim­ple Ngrx Ef­fects. Any ac­tions that ex­tend \u003ccode\u003eRemoteAction\u003c/code\u003e class will be pub­lished to the event bus.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-typescript\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Injectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e AppEventBusEffects {\n\n    \u003cspan class=\"hljs-keyword\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e actions$: Actions, \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e appEventBusService: AppEventBusService\u003c/span\u003e) {}\n    \u003cspan class=\"hljs-comment\"\u003e// Listen to all actions and publish remote actions to account event bus\u003c/span\u003e\n    \u003cspan class=\"hljs-meta\"\u003e@Effect\u003c/span\u003e({dispatch: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e}) remoteAction$ = \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.actions$\n        .filter(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eaction\u003c/span\u003e =\u0026gt;\u003c/span\u003e action \u003cspan class=\"hljs-keyword\"\u003einstanceof\u003c/span\u003e RemoteAction \u0026amp;\u0026amp; action.publishedByUser == \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e)\n        .do(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eaction: RemoteAction\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n            \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.appEventBusService.publishAction(action);\n        });\n\n    \u003cspan class=\"hljs-meta\"\u003e@Effect\u003c/span\u003e({dispatch: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e}) login$ = \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.actions$\n        .ofType(UserActionTypes.LOGIN)\n        .do(\u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n            \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.appEventBusService.connect();\n        });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can see all of this in ac­tion by lo­cally launch­ing the server and the client app in two sep­a­rate browser win­dows.\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-realtime-angular-ngrx/demo-app-screen.png\" alt=\"Demo app screen\"/\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eBonus: the demo app also in­cludes user sta­tus (of­fline/on­line), based of the event bus con­nec­tion sta­tus.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThe counter state is shared and syn­chro­nized be­tween con­nected clients and each local ac­tion is dis­trib­uted in real-​time to other clients.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMis­sion ac­com­plished!\u003c/strong\u003e\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eTypescript version of Vertx EventBus Client\u003c/div\u003e\u003cp\u003eThe app uses our own Type­script ver­sion of the of­fi­cial JS \u003ca href=\"https://github.com/vert-x3/vertx-bus-bower\"\u003eVertx Event­Bus Client\u003c/a\u003e. It can be found \u003ca href=\"https://gist.github.com/benorama/93373c3c1c3574732d6cc1b4754aab9f\"\u003ehere\u003c/a\u003e, any feed­back, im­prove­ment sug­ges­tions are wel­come!\u003c/p\u003e\u003c/div\u003e","scope":{}},"tfIdfTerms":[{"term":"app","tf":21},{"term":"client","tf":19},{"term":"action","tf":15},{"term":"event","tf":14},{"term":"time","tf":12},{"term":"angular","tf":12},{"term":"bu","tf":12},{"term":"base","tf":11},{"term":"state","tf":11},{"term":"build","tf":10},{"term":"real","tf":10},{"term":"connect","tf":10},{"term":"counter","tf":10},{"term":"us","tf":9},{"term":"platform","tf":8},{"term":"js","tf":8},{"term":"ngrx","tf":8},{"term":"http","tf":7},{"term":"reactiv","tf":7},{"term":"jvm","tf":6},{"term":"publish","tf":6},{"term":"server","tf":6},{"term":"distribut","tf":6},{"term":"web","tf":5},{"term":"backend","tf":5}]},{"filename":"blog/2017-04-14-dynamic-routing-in-serverless-microservice-with-vert-x-event-bus.mdx","date":"2017-04-14","slug":"dynamic-routing-in-serverless-microservice-with-vert-x-event-bus","meta":{"title":"Dynamic Routing in Serverless Microservice with Vert.x Event Bus","category":"guides","authors":[{"name":"Rowell Belen","github_id":"bytekast"}],"summary":"The Serverless Framework has become the de facto toolkit for building and deploying serverless functions or applications."},"readingTime":{"text":"3 min read","minutes":2.6,"time":156000,"words":520},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\"\n  }), \"blog post\"))), mdx(\"h2\", {\n    \"id\": \"serverless-framework\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#serverless-framework\"\n  })), \"Serverless framework\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com\"\n  }), \"Server\\xADless Frame\\xADwork\"), \" has be\\xADcome the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"De Facto\"), \" toolkit for build\\xADing and de\\xADploy\\xADing Server\\xADless func\\xADtions or ap\\xADpli\\xADca\\xADtions. Its com\\xADmu\\xADnity has done a great job ad\\xADvanc\\xADing the tools around Server\\xADless ar\\xADchi\\xADtec\\xADture.\"), mdx(\"p\", null, \"How\\xADever, in the Server\\xADless com\\xADmu\\xADnity there is de\\xADbate among de\\xADvel\\xADop\\xADers on whether a sin\\xADgle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS Lambda\"), \" func\\xADtion should only be re\\xADspon\\xADsi\\xADble for a sin\\xADgle API end\\xADpoint. My an\\xADswer, based on my real-\\u200Bworld pro\\xADduc\\xADtion ex\\xADpe\\xADri\\xADence, is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO\"), \". \"), mdx(\"p\", null, \"Imag\\xADine if you are build\\xADing a set of APIs with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"10\"), \" end\\xADpoints and you need to de\\xADploy the APIs to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DEV\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"STAGE\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PROD\"), \" en\\xADvi\\xADron\\xADments. Now you are look\\xADing at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"30\"), \" dif\\xADfer\\xADent func\\xADtions to ver\\xADsion, de\\xADploy and man\\xADage - not to men\\xADtion the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Copy \u0026 Paste\"), \" code and con\\xADfig\\xADu\\xADra\\xADtion that will re\\xADsult from this type of set-\\u200Bup. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO THANKS!!!\"), \" \"), mdx(\"p\", null, \"I be\\xADlieve a more prag\\xADmatic ap\\xADproach is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 Lambda Func\\xADtion\"), \" == \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 Mi\\xADcroser\\xADvice\"), \".\"), mdx(\"p\", null, \"For ex\\xADam\\xADple, if you were build\\xADing a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" with basic \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CRUD\"), \" func\\xADtion\\xADal\\xADity, you should im\\xADple\\xADment \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CREATE\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"READ\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UPDATE\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \" in a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sin\\xADgle\"), \" Lambda func\\xADtion. In the code, you should re\\xADsolve the de\\xADsired ac\\xADtion by in\\xADspect\\xADing the re\\xADquest or the con\\xADtext.\"), mdx(\"h2\", {\n    \"id\": \"vertx-to-the-rescue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-to-the-rescue\"\n  })), \"Vert.x to the rescue\"), mdx(\"p\", null, \"There are many ben\\xADe\\xADfits to using \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" in any ap\\xADpli\\xADca\\xADtion. With \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \", you get a rock-\\u200Bsolid and light\\xADweight toolkit for build\\xADing \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"re\\xADac\\xADtive\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"highly per\\xADfor\\xADmant\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"event-\\u200Bdriven\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"non-\\u200Bblocking\"), \" ap\\xADpli\\xADca\\xADtions. The toolkit even pro\\xADvides asyn\\xADchro\\xADnous \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"APIs\"), \" for ac\\xADcess\\xADing tra\\xADdi\\xADtional block\\xADing dri\\xADvers such as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-jdbc-client/groovy/\"\n  }), \"JDBC\")), \".\"), mdx(\"p\", null, \"How\\xADever, for this ex\\xADam\\xADple, we will mainly focus on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\n  }), \"Event Bus\"), \". The event bus al\\xADlows dif\\xADfer\\xADent parts of your ap\\xADpli\\xADca\\xADtion to com\\xADmu\\xADni\\xADcate with each other via event mes\\xADsages. It sup\\xADports \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pub\\xADlish/sub\\xADscribe\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"point to point\"), \", and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"request-\\u200Bresponse mes\\xADsag\\xADing\"), \".\"), mdx(\"p\", null, \"For the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" ex\\xADam\\xADple above, we could treat the com\\xADbi\\xADna\\xADtion of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTTP METHOD\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RESOURCE PATH\"), \" as a unique event chan\\xADnel, and reg\\xADis\\xADter the sub\\xADscribers/han\\xADdlers to re\\xADspond ap\\xADpro\\xADpri\\xADately.\"), mdx(\"p\", null, \"Let\\u2019s dive right in.\"), mdx(\"h2\", {\n    \"id\": \"goal\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#goal\"\n  })), \"Goal\"), mdx(\"p\", null, \"Cre\\xADate a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADac\\xADtive\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"message-\\u200Bdriven\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"asyn\\xADchro\\xADnous\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" CRUD op\\xADer\\xADa\\xADtions in a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"sin\\xADgle\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"aws.amazon.com/lambda\"\n  }), \"AWS Lambda Func\\xADtion\")), \" using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com\"\n  }), \"Server\\xADless Frame\\xADwork\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Serverless stack definition\"), \":\"), mdx(Gist, {\n    url: \"https://gist.github.com/bytekast/48daa2ca479156c98d2735cca181ef30\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"solution\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#solution\"\n  })), \"Solution\"), mdx(\"p\", null, \"Use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \"\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\n  }), \"Event Bus\"), \" to han\\xADdle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dy\\xADnamic rout\\xADing\"), \" to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"event han\\xADdlers\"), \" based on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HTTP method\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADsource path\"), \" from the API input.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Lambda Handler\"), \":\"), mdx(Gist, {\n    url: \"https://gist.github.com/bytekast/d5a544f8cdcd327a12010100b2ba2d66\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"code-review\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#code-review\"\n  })), \"Code review\"), mdx(\"p\", null, \"Lines \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"14-19\"), \" ini\\xADtial\\xADizes the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" in\\xADstance. AWS Lambda will hold on to this in\\xADstance for the life of the con\\xADtainer/\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"JVM\"), \". It is reused in sub\\xADse\\xADquent re\\xADquests.\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"17\"), \" reg\\xADis\\xADters the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Ser\\xADvice\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"han\\xADdlers\")), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"22\"), \" de\\xADfines the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"main han\\xADdler\"), \" method that is called when the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lambda func\\xADtion\"), \" is in\\xADvoked.\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"27\"), \" sends the Lambda func\\xADtion input to the (dy\\xADnamic) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ad\\xADdress\"), \" where han\\xADdlers are wait\\xADing to re\\xADspond. \"), mdx(\"p\", null, \"Lines \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"44-66\"), \" de\\xADfines the spe\\xADcific \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"han\\xADdlers\"), \" and binds them to the ap\\xADpro\\xADpri\\xADate \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"chan\\xADnels\"), \" (http method + re\\xADsource path)\"), mdx(\"h2\", {\n    \"id\": \"summary\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#summary\"\n  })), \"Summary\"), mdx(\"p\", null, \"As you can see, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x\"), \"\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\n  }), \"Event Bus\"), \" makes it very easy to dy\\xADnam\\xADi\\xADcally sup\\xADport mul\\xADti\\xADple routes in a sin\\xADgle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server\\xADless\"), \" func\\xADtion. This re\\xADduces the num\\xADber of func\\xADtions you have to man\\xADage, de\\xADploy and main\\xADtain in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS\"), \". In ad\\xADdi\\xADtion, you gain ac\\xADcess to asyn\\xADchro\\xADnous, non-\\u200Bblocking APIs that come stan\\xADdard with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Server\\xADless + Vert.x = BLISS\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThis is a re-​publication of the fol­low­ing \u003ca href=\"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\"\u003eblog post\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"serverless-framework\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#serverless-framework\"\u003e\u003c/a\u003eServerless framework\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://serverless.com\"\u003eServer­less Frame­work\u003c/a\u003e has be­come the \u003cem\u003eDe Facto\u003c/em\u003e toolkit for build­ing and de­ploy­ing Server­less func­tions or ap­pli­ca­tions. Its com­mu­nity has done a great job ad­vanc­ing the tools around Server­less ar­chi­tec­ture.\u003c/p\u003e\u003cp\u003eHow­ever, in the Server­less com­mu­nity there is de­bate among de­vel­op­ers on whether a sin­gle \u003cstrong\u003eAWS Lambda\u003c/strong\u003e func­tion should only be re­spon­si­ble for a sin­gle API end­point. My an­swer, based on my real-​world pro­duc­tion ex­pe­ri­ence, is \u003cstrong\u003eNO\u003c/strong\u003e. \u003c/p\u003e\u003cp\u003eImag­ine if you are build­ing a set of APIs with \u003cstrong\u003e10\u003c/strong\u003e end­points and you need to de­ploy the APIs to \u003cstrong\u003eDEV\u003c/strong\u003e, \u003cstrong\u003eSTAGE\u003c/strong\u003e and \u003cstrong\u003ePROD\u003c/strong\u003e en­vi­ron­ments. Now you are look­ing at \u003cstrong\u003e30\u003c/strong\u003e dif­fer­ent func­tions to ver­sion, de­ploy and man­age - not to men­tion the \u003cem\u003eCopy \u0026amp; Paste\u003c/em\u003e code and con­fig­u­ra­tion that will re­sult from this type of set-​up. \u003cstrong\u003eNO THANKS!!!\u003c/strong\u003e \u003c/p\u003e\u003cp\u003eI be­lieve a more prag­matic ap­proach is \u003cstrong\u003e1 Lambda Func­tion\u003c/strong\u003e == \u003cstrong\u003e1 Mi­croser­vice\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eFor ex­am­ple, if you were build­ing a \u003cstrong\u003eUser Mi­croser­vice\u003c/strong\u003e with basic \u003cstrong\u003eCRUD\u003c/strong\u003e func­tion­al­ity, you should im­ple­ment \u003ccode\u003eCREATE\u003c/code\u003e, \u003ccode\u003eREAD\u003c/code\u003e, \u003ccode\u003eUPDATE\u003c/code\u003e and \u003ccode\u003eDELETE\u003c/code\u003e in a \u003cstrong\u003esin­gle\u003c/strong\u003e Lambda func­tion. In the code, you should re­solve the de­sired ac­tion by in­spect­ing the re­quest or the con­text.\u003c/p\u003e\u003ch2 id=\"vertx-to-the-rescue\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-to-the-rescue\"\u003e\u003c/a\u003eVert.x to the rescue\u003c/h2\u003e\u003cp\u003eThere are many ben­e­fits to using \u003cstrong\u003eVert.x\u003c/strong\u003e in any ap­pli­ca­tion. With \u003cstrong\u003eVert.x\u003c/strong\u003e, you get a rock-​solid and light­weight toolkit for build­ing \u003cstrong\u003ere­ac­tive\u003c/strong\u003e, \u003cstrong\u003ehighly per­for­mant\u003c/strong\u003e, \u003cstrong\u003eevent-​driven\u003c/strong\u003e and \u003cstrong\u003enon-​blocking\u003c/strong\u003e ap­pli­ca­tions. The toolkit even pro­vides asyn­chro­nous \u003cem\u003eAPIs\u003c/em\u003e for ac­cess­ing tra­di­tional block­ing dri­vers such as \u003cstrong\u003e\u003ca href=\"http://vertx.io/docs/vertx-jdbc-client/groovy/\"\u003eJDBC\u003c/a\u003e\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eHow­ever, for this ex­am­ple, we will mainly focus on the \u003ca href=\"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\u003eEvent Bus\u003c/a\u003e. The event bus al­lows dif­fer­ent parts of your ap­pli­ca­tion to com­mu­ni­cate with each other via event mes­sages. It sup­ports \u003cem\u003epub­lish/sub­scribe\u003c/em\u003e, \u003cem\u003epoint to point\u003c/em\u003e, and \u003cem\u003erequest-​response mes­sag­ing\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eFor the \u003cstrong\u003eUser Mi­croser­vice\u003c/strong\u003e ex­am­ple above, we could treat the com­bi­na­tion of the \u003ccode\u003eHTTP METHOD\u003c/code\u003e and \u003ccode\u003eRESOURCE PATH\u003c/code\u003e as a unique event chan­nel, and reg­is­ter the sub­scribers/han­dlers to re­spond ap­pro­pri­ately.\u003c/p\u003e\u003cp\u003eLet’s dive right in.\u003c/p\u003e\u003ch2 id=\"goal\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#goal\"\u003e\u003c/a\u003eGoal\u003c/h2\u003e\u003cp\u003eCre­ate a \u003cem\u003ere­ac­tive\u003c/em\u003e, \u003cem\u003emessage-​driven\u003c/em\u003e, \u003cem\u003easyn­chro­nous\u003c/em\u003e \u003cstrong\u003eUser Mi­croser­vice\u003c/strong\u003e with \u003ccode\u003eGET\u003c/code\u003e, \u003ccode\u003ePOST\u003c/code\u003e, \u003ccode\u003eDELETE\u003c/code\u003e, \u003ccode\u003ePUT\u003c/code\u003e CRUD op­er­a­tions in a \u003cem\u003esin­gle\u003c/em\u003e \u003cstrong\u003e\u003ca href=\"aws.amazon.com/lambda\"\u003eAWS Lambda Func­tion\u003c/a\u003e\u003c/strong\u003e using the \u003ca href=\"https://serverless.com\"\u003eServer­less Frame­work\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ccode\u003eServerless stack definition\u003c/code\u003e:\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"solution\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#solution\"\u003e\u003c/a\u003eSolution\u003c/h2\u003e\u003cp\u003eUse \u003ca href=\"http://vertx.io\"\u003eVert.x\u003c/a\u003e’s \u003ca href=\"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\u003eEvent Bus\u003c/a\u003e to han­dle \u003cstrong\u003edy­namic rout­ing\u003c/strong\u003e to \u003cstrong\u003eevent han­dlers\u003c/strong\u003e based on \u003cem\u003eHTTP method\u003c/em\u003e and \u003cem\u003ere­source path\u003c/em\u003e from the API input.\u003c/p\u003e\u003cp\u003e\u003ccode\u003eLambda Handler\u003c/code\u003e:\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"code-review\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#code-review\"\u003e\u003c/a\u003eCode review\u003c/h2\u003e\u003cp\u003eLines \u003ccode\u003e14-19\u003c/code\u003e ini­tial­izes the \u003cstrong\u003eVert.x\u003c/strong\u003e in­stance. AWS Lambda will hold on to this in­stance for the life of the con­tainer/\u003cstrong\u003eJVM\u003c/strong\u003e. It is reused in sub­se­quent re­quests.\u003c/p\u003e\u003cp\u003eLine \u003ccode\u003e17\u003c/code\u003e reg­is­ters the \u003cstrong\u003eUser Ser­vice\u003c/strong\u003e \u003cem\u003ehan­dlers\u003c/em\u003e\u003c/p\u003e\u003cp\u003eLine \u003ccode\u003e22\u003c/code\u003e de­fines the \u003cstrong\u003emain han­dler\u003c/strong\u003e method that is called when the \u003cstrong\u003eLambda func­tion\u003c/strong\u003e is in­voked.\u003c/p\u003e\u003cp\u003eLine \u003ccode\u003e27\u003c/code\u003e sends the Lambda func­tion input to the (dy­namic) \u003cstrong\u003ead­dress\u003c/strong\u003e where han­dlers are wait­ing to re­spond. \u003c/p\u003e\u003cp\u003eLines \u003ccode\u003e44-66\u003c/code\u003e de­fines the spe­cific \u003cem\u003ehan­dlers\u003c/em\u003e and binds them to the ap­pro­pri­ate \u003cem\u003echan­nels\u003c/em\u003e (http method + re­source path)\u003c/p\u003e\u003ch2 id=\"summary\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#summary\"\u003e\u003c/a\u003eSummary\u003c/h2\u003e\u003cp\u003eAs you can see, \u003ca href=\"http://vertx.io\"\u003eVert.x\u003c/a\u003e’s \u003ca href=\"http://vertx.io/docs/vertx-core/groovy/#event_bus\"\u003eEvent Bus\u003c/a\u003e makes it very easy to dy­nam­i­cally sup­port mul­ti­ple routes in a sin­gle \u003cstrong\u003eServer­less\u003c/strong\u003e func­tion. This re­duces the num­ber of func­tions you have to man­age, de­ploy and main­tain in \u003cstrong\u003eAWS\u003c/strong\u003e. In ad­di­tion, you gain ac­cess to asyn­chro­nous, non-​blocking APIs that come stan­dard with \u003cstrong\u003eVert.x\u003c/strong\u003e.\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eServer­less + Vert.x = BLISS\u003c/p\u003e\u003c/blockquote\u003e","scope":{}},"tfIdfTerms":[{"term":"function","tf":11},{"term":"serverless","tf":8},{"term":"event","tf":8},{"term":"lambda","tf":7},{"term":"api","tf":6},{"term":"handler","tf":6},{"term":"singl","tf":5},{"term":"line","tf":5},{"term":"build","tf":4},{"term":"deploi","tf":4},{"term":"applic","tf":4},{"term":"aw","tf":4},{"term":"microservic","tf":4},{"term":"user","tf":4},{"term":"bu","tf":4},{"term":"framework","tf":3},{"term":"toolkit","tf":3},{"term":"commun","tf":3},{"term":"code","tf":3},{"term":"will","tf":3},{"term":"exampl","tf":3},{"term":"request","tf":3},{"term":"us","tf":3},{"term":"block","tf":3},{"term":"asynchron","tf":3}]},{"filename":"blog/2017-03-20-scala-is-here.mdx","date":"2017-03-20","slug":"scala-is-here","meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"readingTime":{"text":"8 min read","minutes":7.065,"time":423900.00000000006,"words":1413},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TL;DR:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Scala sup\\xADport for Vert.x is here!\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It is based on Scala 2.12, no sup\\xADport for 2.11 planned\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"all Vert.x-\\u200Bmodules are avail\\xADable in a Scala fla\\xADvor\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It\\u2019s awe\\xADsome\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Get started \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-sbt-starter\"\n  }), \"here\"))), mdx(\"h2\", {\n    \"id\": \"intro\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#intro\"\n  })), \"Intro\"), mdx(\"p\", null, \"The rise of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://scala-lang.org/\"\n  }), \"Scala\"), \" as one of the most im\\xADpor\\xADtant lan\\xADguages on the JVM caught many (me in\\xADcluded) by sur\\xADprise. This hy\\xADbrid of func\\xADtional and im\\xADper\\xADa\\xADtive par\\xADa\\xADdigms struck a chord with many de\\xADvel\\xADop\\xADers. Thanks to Scala a lot of peo\\xADple who\\u2019d never have touched a lan\\xADguage like Haskell got ex\\xADposed to func\\xADtional pro\\xADgram\\xADming. This ex\\xADpo\\xADsure was one of the dri\\xADving forces to get streams and lambda into the JVM.\"), mdx(\"p\", null, \"With the re\\xADlease of Vert.x 3.4.0 we fi\\xADnally in\\xADtro\\xADduced Scala to the fam\\xADily of sup\\xADported lan\\xADguages: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala\"\n  }), \"vertx-\\u200Blang-scala\"), \".\"), mdx(\"p\", null, \"In this post I will in\\xADtro\\xADduce the new stack and how the power of Scala can be used in your fa\\xADvorite re\\xADac\\xADtive toolkit.\"), mdx(\"h2\", {\n    \"id\": \"basics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#basics\"\n  })), \"Basics\"), mdx(\"p\", null, \"vertx-\\u200Blang-scala is based on Scala 2.12. There are no plans to sup\\xADport 2.11.\"), mdx(\"p\", null, \"All mod\\xADules avail\\xADable for Vert.x are sup\\xADported (you can check  \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala/tree/master/vertx-lang-scala-stack\"\n  }), \"here\"), \" ).\"), mdx(Alert, {\n    info: true,\n    title: \"Future and Promise both need a ExecutionContext\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Mod\\xADules use the fol\\xADlow\\xADing naming-\\u200Bscheme: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"io.vertx:\", \"\u003c\", \"name-\\u200Bof-vertx-module\", \"\u003e\", \"-\\u200Bscala_2.12:\", \"\u003c\", \"vertx-\\u200Bmajor-version\", \"\u003e\"), \". The Scala ver\\xADsion of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"io.vertx:vert-\\u200Bweb:3.4.0\"), \" would be \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"io.vertx:vertx-\\u200Bweb-scala_2.12:3.4.0\"), \".\")), mdx(\"p\", null, \"There is an sbt-\\u200Bbased \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-sbt-starter\"\n  }), \"quickstart-\\u200Bproject\"), \" avail\\xADable that will be up\\xADdated for each Vert.x-\\u200Brelease.\"), mdx(\"p\", null, \"Please note: Al\\xADthough \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.scala-sbt.org/\"\n  }), \"sbt\"), \" is used in this quick\\xADstart it is by no means re\\xADquired. There are no spe\\xADcial plu\\xADg\\xADins in\\xADvolved so vertx-\\u200Blang-scala can eas\\xADily be used with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.gradle.org/current/userguide/scala_plugin.html\"\n  }), \"Gra\\xADdle\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/davidB/scala-maven-plugin\"\n  }), \"Maven\"), \".\"), mdx(\"p\", null, \"I use sbt as it is the de\\xADfault build sys\\xADtem used for Scala projects.\"), mdx(\"h2\", {\n    \"id\": \"quickstart\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#quickstart\"\n  })), \"Quickstart\"), mdx(\"p\", null, \"Let\\u2019s get started by cloning the quick\\xADstart:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"git \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" git@github.com:vert-x3/vertx-sbt-starter.git\\n\")), mdx(\"p\", null, \"You just got the fol\\xADlow\\xADing things:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An sbt project con\\xADtain\\xADing de\\xADpen\\xADden\\xADcies to Vert.x-\\u200Bcore and Vert.x-web\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The abil\\xADity to cre\\xADate a fat-\\u200Bjat via \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sbt assembly\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The abil\\xADity to cre\\xADate a docker con\\xADtainer via \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sbt docker\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A few ex\\xADam\\xADple ver\\xADti\\xADcles\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Unit test ex\\xADam\\xADples\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"a pre-\\u200Bconfigured Scala-\\u200Bshell in\\xADside sbt\")), mdx(\"p\", null, \"We will now run the ap\\xADpli\\xADca\\xADtion to get some quick sat\\xADis\\xADfac\\xADtion. Use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sbt assembly\"), \" to pro\\xADduce the fat-\\u200Bjar fol\\xADlowed by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"java -jar target/scala-2.12/vertx-scala-sbt-assembly-0.1-SNAPSHOT.jar\"), \". Now point your browser to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8666/hello\"\n  }), \"http://lo\\xADcal\\xADhost:8666/hello\"), \" for a clas\\xADsic wel\\xADcome mes\\xADsage.\"), mdx(\"h2\", {\n    \"id\": \"the-details\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-details\"\n  })), \"The details\"), mdx(\"p\", null, \"Open your IDE so we can take a look at what\\u2019s going on under the hood. We start with the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HttpVer\\xADti\\xADcle\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" io.vertx.scala.sbt\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.lang.scala.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"ScalaVerticle\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.scala.ext.web.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Router\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" scala.concurrent.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Future\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"HttpVerticle\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"ScalaVerticle\"), \" \"), \"{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c1\u003e\"), \"\\n\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"override\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"def\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"startFuture\")), \"(): \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Future\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Unit\"), \"] = { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c2\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"val\"), \" router = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Router\"), \".router(vertx) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c3\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"val\"), \" route = router\\n      .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \")\\n        .handler(_.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"world\\\"\"), \"))\\n\\n    vertx \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\u003c4\u003e\"), \"\\n      .createHttpServer()\\n      .requestHandler(router.accept)\\n      .listenFuture(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8666\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.0.0\\\"\"), \")  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c5\u003e\"), \"\\n        .map(_ =\u003e ()) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c6\u003e\"), \"\\n  }\\n}\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"ScalaVer\\xADti\\xADcle\"), \" is the base class for all Scala-\\u200BVerticles. It pro\\xADvides all re\\xADquired meth\\xADods to in\\xADte\\xADgrate with the Vert.x-\\u200Bruntime.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"There are two ways to start a Ver\\xADti\\xADcle. Over\\xADrid\\xADing \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\\xADFu\\xADture\"), \", like in this ex\\xADam\\xADple, tells Vert.x to only con\\xADsider the Ver\\xADti\\xADcle fully started after the re\\xADturned \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[Unit]\"), \" has been suc\\xADcess\\xADfully com\\xADpleted. Al\\xADter\\xADna\\xADtively one can over\\xADride \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\"), \" and by that sig\\xADnal to Vert.x the in\\xADstant avail\\xADabil\\xADity of the Ver\\xADti\\xADcle.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This block cre\\xADates a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Router\"), \" for in\\xADcom\\xADing HTTP-\\u200Brequests. It reg\\xADis\\xADters a han\\xADdler to an\\xADswer with \\u201Cworld\\u201D if a re\\xADquest to the URL \\u201C/hello\\u201D ar\\xADrives. The class is com\\xADing from the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/scala/\"\n  }), \"Vert.x-\\u200Bweb-module\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Every Ver\\xADti\\xADcle has ac\\xADcess to the Vert.x-\\u200Binstance. Here we use it to cre\\xADate a web\\xADserver and reg\\xADis\\xADter our router to han\\xADdle in\\xADcom\\xADing re\\xADquests.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We fi\\xADnally reached the rea\\xADson why I use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\\xADFu\\xADture\"), \" in the first place. All op\\xADer\\xADa\\xADtions in Vert.x are asyn\\xADchro\\xADnous. So start\\xADing the web\\xADserver most def\\xADi\\xADnitely means it takes some more time until it bound to the given port (8666 in this case). That\\u2019s why \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"lis\\xADten\\xADFu\\xADture\"), \" is used, which re\\xADturns a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" which in turn con\\xADtains the ac\\xADtual in\\xADstance of the web\\xADserver that just got started. So our Ver\\xADti\\xADcle will be ready to re\\xADceive re\\xADquests \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"after\"), \" the re\\xADturned \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" has been com\\xADpleted.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In most cases we can re\\xADturn the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" di\\xADrectly. In this case the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" re\\xADturned by \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"lis\\xADten\\xADFu\\xADture\"), \" has the wrong type. We get a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[HttpServer]\"), \" but we need a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[Unit]\"), \" as you can see in the sig\\xADna\\xADture of \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"start\\xADFu\\xADture\"), \". This call takes care of map\\xADping the given \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\", \"[HttpServer]\"), \" to the re\\xADquired re\\xADturn type.\")), mdx(\"h2\", {\n    \"id\": \"testing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#testing\"\n  })), \"Testing\"), mdx(\"p\", null, \"I use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.scalatest.org/\"\n  }), \"Sca\\xADlaT\\xADest\"), \" for all my test\\xADing needs. It comes with stel\\xADlar sup\\xADport for asyn\\xADchro\\xADnous op\\xADer\\xADa\\xADtions and is a per\\xADfect fit for test\\xADing Vert.x-\\u200Bapplications.\"), mdx(\"p\", null, \"The fol\\xADlow\\xADing \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HttpVer\\xADti\\xADcle\\xADSpec\"), \" shows how to test an HTTP-\\u200BAPI using only Vert.x-\\u200Bclasses. Per\\xADson\\xADally I pre\\xADfer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://rest-assured.io/\"\n  }), \"REST-\\u200Bassured\"), \" with its rich DSL. For this post I wanted to stick with Vert.x-API, so here we go.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" io.vertx.scala.sbt\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" org.scalatest.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Matchers\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" scala.concurrent.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Promise\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"HttpVerticleSpec\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"VerticleTesting\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"HttpVerticle\"), \"] \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"with\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Matchers\"), \" \"), \"{ \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c1\u003e\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"HttpVerticle\\\"\"), \" should \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bind to 8666 and answer with 'world'\\\"\"), \" in { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c2\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"val\"), \" promise = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Promise\"), \"[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"String\"), \"] \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c3\u003e\"), \"\\n\\n    vertx.createHttpClient()  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c4\u003e\"), \"\\n      .getNow(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8666\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"127.0.0.1\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \",\\n        r =\u003e {\\n          r.exceptionHandler(promise.failure)\\n          r.bodyHandler(b =\u003e promise.success(b.toString))\\n        })\\n\\n    promise.future.map(res =\u003e res should equal(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"world\\\"\"), \")) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c5\u003e\"), \"\\n  }\\n\\n}\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Ver\\xADti\\xADcleTest\\xADing\"), \" is a base class for your tests in\\xADcluded with the quickstart-\\u200Bproject. It\\u2019s a small helper that takes care of de\\xADploy\\xADing/un-\\u200Bdeploying the Ver\\xADti\\xADcle to be tested and man\\xADages a Vert.x-\\u200Binstance. It ad\\xADdi\\xADtion\\xADally ex\\xADtends \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.scalatest.org/user_guide/async_testing\"\n  }), \"AsyncFlat\\xADSpec\"), \" so we can use Fu\\xADtures as test-\\u200Breturn-types.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Isn\\u2019t it nice and read\\xADable?\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The promise is re\\xADquired as the whole test will run async\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We use the vertx-\\u200Binstance pro\\xADvided by \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Ver\\xADti\\xADcleTest\\xADing\"), \" to cre\\xADate a Netty-\\u200Bbased Http\\xADClient. We in\\xADstruct the client to call the spec\\xADi\\xADfied URL and to suc\\xADceed the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Promise\"), \" with the re\\xADturned body.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This cre\\xADates the ac\\xADtual as\\xADser\\xADtion. After get\\xADting the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" from the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Promise\"), \" an as\\xADser\\xADtion is cre\\xADated: \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"The Re\\xADsult should be equal to the String \\u201Cworld\\u201D\"), \". Sca\\xADlaT\\xADest takes care of eval\\xADu\\xADat\\xADing the re\\xADturned \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \".\")), mdx(\"p\", null, \"That\\u2019s all you need to get started!\"), mdx(\"h2\", {\n    \"id\": \"futures-in-vertx-lang-scala\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#futures-in-vertx-lang-scala\"\n  })), \"Futures in vertx-lang-scala\"), mdx(\"p\", null, \"Now for a more in depth topic I think is worth men\\xADtion\\xADing. vertx-\\u200Blang-scala treats async op\\xADer\\xADa\\xADtions the Scala-\\u200Bway which is a lit\\xADtle dif\\xADfer\\xADent from what you might be used from Vert.x. For async op\\xADer\\xADa\\xADtions like sub\\xADscrib\\xADing to the event\\xADbus or de\\xADploy\\xADing a Ver\\xADti\\xADcle you would call a method like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), \"vertx.deployVerticle(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"com.foo.OtherVerticle\\\"\"), \", res -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (res.succeeded()) {\\n    startFuture.complete();\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    startFuture.fail(res.cause());\\n  }\\n});\\n\")), mdx(\"p\", null, \"The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"de\\xADployVer\\xADti\\xADcle\"), \" method takes the Verticle-\\u200Bname and a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler\", \"[Asyn\\xADcRe\\xADsult]\"), \" as its ar\\xADgu\\xADments. The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler\", \"[Asyn\\xADcRe\\xADsult]\"), \" is called after Vert.x tried de\\xADploy\\xADing the Ver\\xADti\\xADcle. This style can also be used for Scala (which might ease the tran\\xADsi\\xADtion when com\\xADing from the Java-\\u200Bworld) but their is a way more \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"scalaish\"), \" way of doing this.\"), mdx(\"p\", null, \"For every method tak\\xADing a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdler\", \"[Asyn\\xADcRe\\xADsult]\"), \" as its ar\\xADgu\\xADment I cre\\xADate an al\\xADter\\xADna\\xADtive method using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://docs.scala-lang.org/overviews/core/futures.html\"\n  }), \"Scala-\\u200BFutures\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-scala\"\n  }), \"vertx.deployVerticleFuture(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"com.foo.OtherVerticle\\\"\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c1\u003e\"), \"\\n  .onComplete{  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c2\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Success\"), \"(s) =\u003e println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"s\\\"Verticle id is: \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-subst\"\n  }), \"$s\"), \"\\\"\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// \u003c3\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"case\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"Failure\"), \"(t) =\u003e t.printStackTrace()\\n  }\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A method pro\\xADvid\\xADing a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" based al\\xADter\\xADna\\xADtive gets \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" ap\\xADpended to its name and re\\xADturns a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" in\\xADstead of tak\\xADing a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Han\\xADdler\"), \" as its ar\\xADgu\\xADment.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We are now free to use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Fu\\xADture\"), \" the way we want. In this case on\\xADCom\\xADplete is used to react on the com\\xADple\\xADtion.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Pat\\xADtern match\\xADing on the re\\xADsult \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"\u003c\", \"3\"))), mdx(\"p\", null, \"I strongly rec\\xADom\\xADmend using this ap\\xADproach over using \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Han\\xADdlers\"), \" as you won\\u2019t run into Callback-\\u200Bhell and you get all the good\\xADies Scala pro\\xADvides for async op\\xADer\\xADa\\xADtions.\"), mdx(Alert, {\n    info: true,\n    title: \"Future and Promise both need a ExecutionContext\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/VertxExecutionContext.scala\"\n  }), \"Vertx\\xADEx\\xADe\\xADcu\\xADtion\\xADCon\\xADtext\"), \" is made im\\xADplic\\xADitly avail\\xADable in\\xADside the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/ScalaVerticle.scala\"\n  }), \"ScalaVer\\xADti\\xADcle\"), \". It makes sure all  op\\xADer\\xADa\\xADtions are ex\\xADe\\xADcuted on the cor\\xADrect Event Loop. If you are using Vert.x with\\xADout Ver\\xADti\\xADcles you have to pro\\xADvide it on your own.\")), mdx(\"h2\", {\n    \"id\": \"using-the-console\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#using-the-console\"\n  })), \"Using the console\"), mdx(\"p\", null, \"A great fea\\xADture of sbt is the em\\xADbed\\xADded, con\\xADfig\\xADurable Scala-\\u200Bconsole. The con\\xADsole avail\\xADable in the quickstart-\\u200Bproject is pre-\\u200Bconfigured to pro\\xADvide a fresh Vert.x-\\u200Binstance and all re\\xADquired im\\xADports so you can start play\\xADing around with Vert.x in an in\\xADstant.\"), mdx(\"p\", null, \"Ex\\xADe\\xADcute the fol\\xADlow\\xADing com\\xADmands in the project-\\u200Bfolder to de\\xADploy the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HttpVer\\xADti\\xADcle\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"sbt\\n\u003e console\\nscala\u003e vertx.deployVerticle(nameForVerticle[HttpVerticle])\\nscala\u003e vertx.deploymentIDs\\n\")), mdx(\"p\", null, \"After  ex\\xADe\\xADcut\\xADing this se\\xADquence you can now point your browser \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8666/hello\"\n  }), \"http://lo\\xADcal\\xADhost:8666/hello\"), \" to see our mes\\xADsage. The last com\\xADmand is\\xADsued shows the Ids under which Ver\\xADti\\xADcles have been de\\xADployed.\"), mdx(\"p\", null, \"To get rid of the de\\xADploy\\xADment you can now type \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.undeploy(vertx.deploymentIDs.head)\"), \".\"), mdx(\"h2\", {\n    \"id\": \"thats-it\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#thats-it\"\n  })), \"That\\u2019s it!\"), mdx(\"p\", null, \"This was a very quick in\\xADtro\\xADduc\\xADtion to our new Scala-\\u200Bstack. I hope to have given you a lit\\xADtle taste of the Scala good\\xADness now avail\\xADable with Vert.x. I rec\\xADom\\xADmend dig\\xADging a lit\\xADtle more through the quick\\xADstart to get a feel\\xADing for what\\u2019s there.\\nIn my next blog post I will ex\\xADplain some of the de\\xADci\\xADsions I made and the ob\\xADsta\\xADcles I faced with the dif\\xADfer\\xADences be\\xADtween Java and Scala /Hint: They are way big\\xADger than I was aware of).\"), mdx(\"p\", null, \"Enjoy!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003e\u003cstrong\u003eTL;DR:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eScala sup­port for Vert.x is here!\u003c/li\u003e\u003cli\u003eIt is based on Scala 2.12, no sup­port for 2.11 planned\u003c/li\u003e\u003cli\u003eall Vert.x-​modules are avail­able in a Scala fla­vor\u003c/li\u003e\u003cli\u003eIt’s awe­some\u003c/li\u003e\u003cli\u003eGet started \u003ca href=\"https://github.com/vert-x3/vertx-sbt-starter\"\u003ehere\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"intro\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#intro\"\u003e\u003c/a\u003eIntro\u003c/h2\u003e\u003cp\u003eThe rise of \u003ca href=\"http://scala-lang.org/\"\u003eScala\u003c/a\u003e as one of the most im­por­tant lan­guages on the JVM caught many (me in­cluded) by sur­prise. This hy­brid of func­tional and im­per­a­tive par­a­digms struck a chord with many de­vel­op­ers. Thanks to Scala a lot of peo­ple who’d never have touched a lan­guage like Haskell got ex­posed to func­tional pro­gram­ming. This ex­po­sure was one of the dri­ving forces to get streams and lambda into the JVM.\u003c/p\u003e\u003cp\u003eWith the re­lease of Vert.x 3.4.0 we fi­nally in­tro­duced Scala to the fam­ily of sup­ported lan­guages: \u003ca href=\"https://github.com/vert-x3/vertx-lang-scala\"\u003evertx-​lang-scala\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eIn this post I will in­tro­duce the new stack and how the power of Scala can be used in your fa­vorite re­ac­tive toolkit.\u003c/p\u003e\u003ch2 id=\"basics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#basics\"\u003e\u003c/a\u003eBasics\u003c/h2\u003e\u003cp\u003evertx-​lang-scala is based on Scala 2.12. There are no plans to sup­port 2.11.\u003c/p\u003e\u003cp\u003eAll mod­ules avail­able for Vert.x are sup­ported (you can check  \u003ca href=\"https://github.com/vert-x3/vertx-lang-scala/tree/master/vertx-lang-scala-stack\"\u003ehere\u003c/a\u003e ).\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eFuture and Promise both need a ExecutionContext\u003c/div\u003e\u003cp\u003eMod­ules use the fol­low­ing naming-​scheme: \u003cem\u003eio.vertx:\u003c!-- --\u003e\u0026lt;\u003c!-- --\u003ename-​of-vertx-module\u003c!-- --\u003e\u0026gt;\u003c!-- --\u003e-​scala_2.12:\u003c!-- --\u003e\u0026lt;\u003c!-- --\u003evertx-​major-version\u003c!-- --\u003e\u0026gt;\u003c/em\u003e. The Scala ver­sion of \u003cem\u003eio.vertx:vert-​web:3.4.0\u003c/em\u003e would be \u003cem\u003eio.vertx:vertx-​web-scala_2.12:3.4.0\u003c/em\u003e.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eThere is an sbt-​based \u003ca href=\"https://github.com/vert-x3/vertx-sbt-starter\"\u003equickstart-​project\u003c/a\u003e avail­able that will be up­dated for each Vert.x-​release.\u003c/p\u003e\u003cp\u003ePlease note: Al­though \u003ca href=\"http://www.scala-sbt.org/\"\u003esbt\u003c/a\u003e is used in this quick­start it is by no means re­quired. There are no spe­cial plu­g­ins in­volved so vertx-​lang-scala can eas­ily be used with \u003ca href=\"https://docs.gradle.org/current/userguide/scala_plugin.html\"\u003eGra­dle\u003c/a\u003e or \u003ca href=\"https://github.com/davidB/scala-maven-plugin\"\u003eMaven\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eI use sbt as it is the de­fault build sys­tem used for Scala projects.\u003c/p\u003e\u003ch2 id=\"quickstart\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#quickstart\"\u003e\u003c/a\u003eQuickstart\u003c/h2\u003e\u003cp\u003eLet’s get started by cloning the quick­start:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit \u003cspan class=\"hljs-built_in\"\u003eclone\u003c/span\u003e git@github.com:vert-x3/vertx-sbt-starter.git\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou just got the fol­low­ing things:\u003c/p\u003e\u003cul\u003e\u003cli\u003eAn sbt project con­tain­ing de­pen­den­cies to Vert.x-​core and Vert.x-web\u003c/li\u003e\u003cli\u003eThe abil­ity to cre­ate a fat-​jat via \u003ccode\u003esbt assembly\u003c/code\u003e\u003c/li\u003e\u003cli\u003eThe abil­ity to cre­ate a docker con­tainer via \u003ccode\u003esbt docker\u003c/code\u003e\u003c/li\u003e\u003cli\u003eA few ex­am­ple ver­ti­cles\u003c/li\u003e\u003cli\u003eUnit test ex­am­ples\u003c/li\u003e\u003cli\u003ea pre-​configured Scala-​shell in­side sbt\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWe will now run the ap­pli­ca­tion to get some quick sat­is­fac­tion. Use \u003ccode\u003esbt assembly\u003c/code\u003e to pro­duce the fat-​jar fol­lowed by \u003ccode\u003ejava -jar target/scala-2.12/vertx-scala-sbt-assembly-0.1-SNAPSHOT.jar\u003c/code\u003e. Now point your browser to \u003ca href=\"http://localhost:8666/hello\"\u003ehttp://lo­cal­host:8666/hello\u003c/a\u003e for a clas­sic wel­come mes­sage.\u003c/p\u003e\u003ch2 id=\"the-details\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-details\"\u003e\u003c/a\u003eThe details\u003c/h2\u003e\u003cp\u003eOpen your IDE so we can take a look at what’s going on under the hood. We start with the \u003cem\u003eHttpVer­ti­cle\u003c/em\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-scala\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e io.vertx.scala.sbt\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.lang.scala.\u003cspan class=\"hljs-type\"\u003eScalaVerticle\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.scala.ext.web.\u003cspan class=\"hljs-type\"\u003eRouter\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e scala.concurrent.\u003cspan class=\"hljs-type\"\u003eFuture\u003c/span\u003e\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eHttpVerticle\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eScalaVerticle\u003c/span\u003e \u003c/span\u003e{ \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;1\u0026gt;\u003c/span\u003e\n\n\n  \u003cspan class=\"hljs-keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estartFuture\u003c/span\u003e\u003c/span\u003e(): \u003cspan class=\"hljs-type\"\u003eFuture\u003c/span\u003e[\u003cspan class=\"hljs-type\"\u003eUnit\u003c/span\u003e] = { \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;2\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e router = \u003cspan class=\"hljs-type\"\u003eRouter\u003c/span\u003e.router(vertx) \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;3\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e route = router\n      .get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e)\n        .handler(_.response().end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;world\u0026quot;\u003c/span\u003e))\n\n    vertx \u003cspan class=\"hljs-comment\"\u003e//\u0026lt;4\u0026gt;\u003c/span\u003e\n      .createHttpServer()\n      .requestHandler(router.accept)\n      .listenFuture(\u003cspan class=\"hljs-number\"\u003e8666\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;0.0.0.0\u0026quot;\u003c/span\u003e)  \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;5\u0026gt;\u003c/span\u003e\n        .map(_ =\u0026gt; ()) \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;6\u0026gt;\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003col\u003e\u003cli\u003e\u003cem\u003eScalaVer­ti­cle\u003c/em\u003e is the base class for all Scala-​Verticles. It pro­vides all re­quired meth­ods to in­te­grate with the Vert.x-​runtime.\u003c/li\u003e\u003cli\u003eThere are two ways to start a Ver­ti­cle. Over­rid­ing \u003cem\u003estart­Fu­ture\u003c/em\u003e, like in this ex­am­ple, tells Vert.x to only con­sider the Ver­ti­cle fully started after the re­turned \u003cem\u003eFu­ture\u003c!-- --\u003e[Unit]\u003c/em\u003e has been suc­cess­fully com­pleted. Al­ter­na­tively one can over­ride \u003cem\u003estart\u003c/em\u003e and by that sig­nal to Vert.x the in­stant avail­abil­ity of the Ver­ti­cle.\u003c/li\u003e\u003cli\u003eThis block cre­ates a \u003cem\u003eRouter\u003c/em\u003e for in­com­ing HTTP-​requests. It reg­is­ters a han­dler to an­swer with “world” if a re­quest to the URL “/hello” ar­rives. The class is com­ing from the \u003ca href=\"http://vertx.io/docs/vertx-web/scala/\"\u003eVert.x-​web-module\u003c/a\u003e.\u003c/li\u003e\u003cli\u003eEvery Ver­ti­cle has ac­cess to the Vert.x-​instance. Here we use it to cre­ate a web­server and reg­is­ter our router to han­dle in­com­ing re­quests.\u003c/li\u003e\u003cli\u003eWe fi­nally reached the rea­son why I use \u003cem\u003estart­Fu­ture\u003c/em\u003e in the first place. All op­er­a­tions in Vert.x are asyn­chro­nous. So start­ing the web­server most def­i­nitely means it takes some more time until it bound to the given port (8666 in this case). That’s why \u003cem\u003elis­ten­Fu­ture\u003c/em\u003e is used, which re­turns a \u003cem\u003eFu­ture\u003c/em\u003e which in turn con­tains the ac­tual in­stance of the web­server that just got started. So our Ver­ti­cle will be ready to re­ceive re­quests \u003cem\u003eafter\u003c/em\u003e the re­turned \u003cem\u003eFu­ture\u003c/em\u003e has been com­pleted.\u003c/li\u003e\u003cli\u003eIn most cases we can re­turn the \u003cem\u003eFu­ture\u003c/em\u003e di­rectly. In this case the \u003cem\u003eFu­ture\u003c/em\u003e re­turned by \u003cem\u003elis­ten­Fu­ture\u003c/em\u003e has the wrong type. We get a \u003cem\u003eFu­ture\u003c!-- --\u003e[HttpServer]\u003c/em\u003e but we need a \u003cem\u003eFu­ture\u003c!-- --\u003e[Unit]\u003c/em\u003e as you can see in the sig­na­ture of \u003cem\u003estart­Fu­ture\u003c/em\u003e. This call takes care of map­ping the given \u003cem\u003eFu­ture\u003c!-- --\u003e[HttpServer]\u003c/em\u003e to the re­quired re­turn type.\u003c/li\u003e\u003c/ol\u003e\u003ch2 id=\"testing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#testing\"\u003e\u003c/a\u003eTesting\u003c/h2\u003e\u003cp\u003eI use \u003ca href=\"http://www.scalatest.org/\"\u003eSca­laT­est\u003c/a\u003e for all my test­ing needs. It comes with stel­lar sup­port for asyn­chro­nous op­er­a­tions and is a per­fect fit for test­ing Vert.x-​applications.\u003c/p\u003e\u003cp\u003eThe fol­low­ing \u003cem\u003eHttpVer­ti­cle­Spec\u003c/em\u003e shows how to test an HTTP-​API using only Vert.x-​classes. Per­son­ally I pre­fer \u003ca href=\"http://rest-assured.io/\"\u003eREST-​assured\u003c/a\u003e with its rich DSL. For this post I wanted to stick with Vert.x-API, so here we go.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-scala\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e io.vertx.scala.sbt\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e org.scalatest.\u003cspan class=\"hljs-type\"\u003eMatchers\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e scala.concurrent.\u003cspan class=\"hljs-type\"\u003ePromise\u003c/span\u003e\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eHttpVerticleSpec\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eVerticleTesting\u003c/span\u003e[\u003cspan class=\"hljs-type\"\u003eHttpVerticle\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMatchers\u003c/span\u003e \u003c/span\u003e{ \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;1\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;HttpVerticle\u0026quot;\u003c/span\u003e should \u003cspan class=\"hljs-string\"\u003e\u0026quot;bind to 8666 and answer with \u0026#x27;world\u0026#x27;\u0026quot;\u003c/span\u003e in { \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;2\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e promise = \u003cspan class=\"hljs-type\"\u003ePromise\u003c/span\u003e[\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e] \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;3\u0026gt;\u003c/span\u003e\n\n    vertx.createHttpClient()  \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;4\u0026gt;\u003c/span\u003e\n      .getNow(\u003cspan class=\"hljs-number\"\u003e8666\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;127.0.0.1\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e,\n        r =\u0026gt; {\n          r.exceptionHandler(promise.failure)\n          r.bodyHandler(b =\u0026gt; promise.success(b.toString))\n        })\n\n    promise.future.map(res =\u0026gt; res should equal(\u003cspan class=\"hljs-string\"\u003e\u0026quot;world\u0026quot;\u003c/span\u003e)) \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;5\u0026gt;\u003c/span\u003e\n  }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\u003col\u003e\u003cli\u003e\u003cem\u003eVer­ti­cleTest­ing\u003c/em\u003e is a base class for your tests in­cluded with the quickstart-​project. It’s a small helper that takes care of de­ploy­ing/un-​deploying the Ver­ti­cle to be tested and man­ages a Vert.x-​instance. It ad­di­tion­ally ex­tends \u003ca href=\"http://www.scalatest.org/user_guide/async_testing\"\u003eAsyncFlat­Spec\u003c/a\u003e so we can use Fu­tures as test-​return-types.\u003c/li\u003e\u003cli\u003eIsn’t it nice and read­able?\u003c/li\u003e\u003cli\u003eThe promise is re­quired as the whole test will run async\u003c/li\u003e\u003cli\u003eWe use the vertx-​instance pro­vided by \u003cem\u003eVer­ti­cleTest­ing\u003c/em\u003e to cre­ate a Netty-​based Http­Client. We in­struct the client to call the spec­i­fied URL and to suc­ceed the \u003cem\u003ePromise\u003c/em\u003e with the re­turned body.\u003c/li\u003e\u003cli\u003eThis cre­ates the ac­tual as­ser­tion. After get­ting the \u003cem\u003eFu­ture\u003c/em\u003e from the \u003cem\u003ePromise\u003c/em\u003e an as­ser­tion is cre­ated: \u003cem\u003eThe Re­sult should be equal to the String “world”\u003c/em\u003e. Sca­laT­est takes care of eval­u­at­ing the re­turned \u003cem\u003eFu­ture\u003c/em\u003e.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eThat’s all you need to get started!\u003c/p\u003e\u003ch2 id=\"futures-in-vertx-lang-scala\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#futures-in-vertx-lang-scala\"\u003e\u003c/a\u003eFutures in vertx-lang-scala\u003c/h2\u003e\u003cp\u003eNow for a more in depth topic I think is worth men­tion­ing. vertx-​lang-scala treats async op­er­a­tions the Scala-​way which is a lit­tle dif­fer­ent from what you might be used from Vert.x. For async op­er­a­tions like sub­scrib­ing to the event­bus or de­ploy­ing a Ver­ti­cle you would call a method like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-scala\"\u003evertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;com.foo.OtherVerticle\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    startFuture.complete();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    startFuture.fail(res.cause());\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003cem\u003ede­ployVer­ti­cle\u003c/em\u003e method takes the Verticle-​name and a \u003cem\u003eHan­dler\u003c!-- --\u003e[Asyn­cRe­sult]\u003c/em\u003e as its ar­gu­ments. The \u003cem\u003eHan­dler\u003c!-- --\u003e[Asyn­cRe­sult]\u003c/em\u003e is called after Vert.x tried de­ploy­ing the Ver­ti­cle. This style can also be used for Scala (which might ease the tran­si­tion when com­ing from the Java-​world) but their is a way more \u003cem\u003escalaish\u003c/em\u003e way of doing this.\u003c/p\u003e\u003cp\u003eFor every method tak­ing a \u003cem\u003eHan­dler\u003c!-- --\u003e[Asyn­cRe­sult]\u003c/em\u003e as its ar­gu­ment I cre­ate an al­ter­na­tive method using \u003ca href=\"http://docs.scala-lang.org/overviews/core/futures.html\"\u003eScala-​Futures\u003c/a\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-scala\"\u003evertx.deployVerticleFuture(\u003cspan class=\"hljs-string\"\u003e\u0026quot;com.foo.OtherVerticle\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;1\u0026gt;\u003c/span\u003e\n  .onComplete{  \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;2\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eSuccess\u003c/span\u003e(s) =\u0026gt; println(\u003cspan class=\"hljs-string\"\u003es\u0026quot;Verticle id is: \u003cspan class=\"hljs-subst\"\u003e$s\u003c/span\u003e\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// \u0026lt;3\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eFailure\u003c/span\u003e(t) =\u0026gt; t.printStackTrace()\n  }\n\u003c/code\u003e\u003c/pre\u003e\u003col\u003e\u003cli\u003eA method pro­vid­ing a \u003cem\u003eFu­ture\u003c/em\u003e based al­ter­na­tive gets \u003cem\u003eFu­ture\u003c/em\u003e ap­pended to its name and re­turns a \u003cem\u003eFu­ture\u003c/em\u003e in­stead of tak­ing a \u003cem\u003eHan­dler\u003c/em\u003e as its ar­gu­ment.\u003c/li\u003e\u003cli\u003eWe are now free to use \u003cem\u003eFu­ture\u003c/em\u003e the way we want. In this case on­Com­plete is used to react on the com­ple­tion.\u003c/li\u003e\u003cli\u003ePat­tern match­ing on the re­sult \u003cem\u003e\u0026lt;\u003c!-- --\u003e3\u003c/em\u003e\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eI strongly rec­om­mend using this ap­proach over using \u003cem\u003eHan­dlers\u003c/em\u003e as you won’t run into Callback-​hell and you get all the good­ies Scala pro­vides for async op­er­a­tions.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eFuture and Promise both need a ExecutionContext\u003c/div\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/VertxExecutionContext.scala\"\u003eVertx­Ex­e­cu­tion­Con­text\u003c/a\u003e is made im­plic­itly avail­able in­side the \u003ca href=\"https://github.com/vert-x3/vertx-lang-scala/blob/master/vertx-lang-scala/src/main/scala/io/vertx/lang/scala/ScalaVerticle.scala\"\u003eScalaVer­ti­cle\u003c/a\u003e. It makes sure all  op­er­a­tions are ex­e­cuted on the cor­rect Event Loop. If you are using Vert.x with­out Ver­ti­cles you have to pro­vide it on your own.\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"using-the-console\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#using-the-console\"\u003e\u003c/a\u003eUsing the console\u003c/h2\u003e\u003cp\u003eA great fea­ture of sbt is the em­bed­ded, con­fig­urable Scala-​console. The con­sole avail­able in the quickstart-​project is pre-​configured to pro­vide a fresh Vert.x-​instance and all re­quired im­ports so you can start play­ing around with Vert.x in an in­stant.\u003c/p\u003e\u003cp\u003eEx­e­cute the fol­low­ing com­mands in the project-​folder to de­ploy the \u003cem\u003eHttpVer­ti­cle\u003c/em\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esbt\n\u0026gt; console\nscala\u0026gt; vertx.deployVerticle(nameForVerticle[HttpVerticle])\nscala\u0026gt; vertx.deploymentIDs\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter  ex­e­cut­ing this se­quence you can now point your browser \u003ca href=\"http://localhost:8666/hello\"\u003ehttp://lo­cal­host:8666/hello\u003c/a\u003e to see our mes­sage. The last com­mand is­sued shows the Ids under which Ver­ti­cles have been de­ployed.\u003c/p\u003e\u003cp\u003eTo get rid of the de­ploy­ment you can now type \u003ccode\u003evertx.undeploy(vertx.deploymentIDs.head)\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"thats-it\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#thats-it\"\u003e\u003c/a\u003eThat’s it!\u003c/h2\u003e\u003cp\u003eThis was a very quick in­tro­duc­tion to our new Scala-​stack. I hope to have given you a lit­tle taste of the Scala good­ness now avail­able with Vert.x. I rec­om­mend dig­ging a lit­tle more through the quick­start to get a feel­ing for what’s there.\nIn my next blog post I will ex­plain some of the de­ci­sions I made and the ob­sta­cles I faced with the dif­fer­ences be­tween Java and Scala /Hint: They are way big­ger than I was aware of).\u003c/p\u003e\u003cp\u003eEnjoy!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"scala","tf":25},{"term":"us","tf":23},{"term":"futur","tf":17},{"term":"verticl","tf":13},{"term":"start","tf":10},{"term":"return","tf":10},{"term":"test","tf":9},{"term":"creat","tf":8},{"term":"base","tf":7},{"term":"avail","tf":7},{"term":"quickstart","tf":7},{"term":"take","tf":7},{"term":"support","tf":6},{"term":"will","tf":6},{"term":"sbt","tf":6},{"term":"project","tf":6},{"term":"provid","tf":6},{"term":"method","tf":6},{"term":"handler","tf":6},{"term":"oper","tf":6},{"term":"deploi","tf":6},{"term":"modul","tf":5},{"term":"lang","tf":5},{"term":"follow","tf":5},{"term":"requir","tf":5}]},{"filename":"blog/2017-03-13-data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh.mdx","date":"2017-03-13","slug":"data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh","meta":{"title":"Data-driven Apps made easy with Vert.x 3.4.0 and headless CMS Gentics Mesh","category":"guides","authors":[{"name":"Johannes Schüth","github_id":"jotschi"}],"summary":"I would like to share why Vert.x is not only a robust foundation for the headless Content Management System Gentics Mesh but also how it can be used to build a template-based web server."},"readingTime":{"text":"6 min read","minutes":5.8,"time":348000,"words":1160},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In this ar\\xADti\\xADcle, I would like to share why Vert.x is not only a ro\\xADbust foun\\xADda\\xADtion for the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/\"\n  }), \"head\\xADless Con\\xADtent Man\\xADage\\xADment Sys\\xADtem Gen\\xADtics Mesh\"), \" but also how the re\\xADcent re\\xADlease 3.4.0 can be used to build a template-\\u200Bbased web server with Gen\\xADtics Mesh and han\\xADdle\\xADbars.\"), mdx(\"p\", null, \"A head\\xADless CMS fo\\xADcuses on de\\xADliv\\xADer\\xADing your con\\xADtent through an API and al\\xADlows ed\\xADi\\xADtors cre\\xADat\\xADing and man\\xADag\\xADing that data through a web-\\u200Bbased in\\xADter\\xADface. Un\\xADlike a tra\\xADdi\\xADtional CMS, it does not pro\\xADvide a specif\\xADi\\xADcally ren\\xADdered out\\xADput. The fron\\xADtend part (the head) is lit\\xADer\\xADally cut off, al\\xADlow\\xADing de\\xADvel\\xADop\\xADers cre\\xADate web\\xADsites, apps, or any other data-\\u200Bdriven projects with their favourite tech\\xADnolo\\xADgies.\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/blog/vert-x-3-4-0-is-released/\"\n  }), \"Vert.x 3.4.0\"), \" has just been re\\xADleased and it comes with a bunch of new fea\\xADtures and bug fixes. I am es\\xADpe\\xADcially ex\\xADcited about a small en\\xADhance\\xADment that changes the way in which the han\\xADdle\\xADbars tem\\xADplate en\\xADgine han\\xADdle their con\\xADtext data. Pre\\xADvi\\xADously it was not pos\\xADsi\\xADble to re\\xADsolve Vert.x \\u2018s JsonOb\\xADjects within the ren\\xADder con\\xADtext. With my en\\xADhance\\xADment \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/pull/509\"\n  }), \"#509\"), \" - re\\xADleased in Vert.x 3.4.0 - it is now pos\\xADsi\\xADble to ac\\xADcess nested data from these ob\\xADjects within your tem\\xADplates. Pre\\xADvi\\xADously this would have re\\xADquired flat\\xADten\\xADing out each ob\\xADject and re\\xADsolv\\xADing it in\\xADdi\\xADvid\\xADu\\xADally, which would have been very cum\\xADber\\xADsome.\"), mdx(\"p\", null, \"I\\u2019m going to demon\\xADstrate this en\\xADhance\\xADment by show\\xADing how to build a prod\\xADuct cat\\xADa\\xADlogue using Vert.x to\\xADgether with han\\xADdle\\xADbars tem\\xADplates to ren\\xADder and serve the web pages. The prod\\xADuct data is man\\xADaged, stored and de\\xADliv\\xADered by the CMS server as source for JSON data.\"), mdx(\"h2\", {\n    \"id\": \"clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n  })), \"Clone, Import, Download, Start - Set up your product catalogue website quickly\"), mdx(\"p\", null, \"Let\\u2019s quickly set up every\\xADthing you need to run the web\\xADsite be\\xADfore I walk you through the code.\"), mdx(\"h3\", {\n    \"id\": \"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n  })), \"1.  Clone - \", mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example\"\n  }), \"Get the full Vert.x with Gentics Mesh example from Github\")), mdx(\"p\", null, \"Fire up your ter\\xADmi\\xADnal and clone the ex\\xADam\\xADple ap\\xADpli\\xADca\\xADtion to the di\\xADrec\\xADtory of your choice.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"git \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" git@github.com:gentics/mesh-vertx-example.git\\n\")), mdx(\"h3\", {\n    \"id\": \"2-import---the-maven-project-in-your-favourite-ide\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#2-import---the-maven-project-in-your-favourite-ide\"\n  })), \"2. Import - The maven project in your favourite IDE\"), mdx(\"p\", null, \"The ap\\xADpli\\xADca\\xADtion is set up as a maven project and can be im\\xADported in Eclipse IDE via File \\u2192 Im\\xADport \\u2192 Ex\\xADist\\xADing Maven Project\"), mdx(\"h3\", {\n    \"id\": \"3-download-----get-the-headless-cms-gentics-mesh\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#3-download-----get-the-headless-cms-gentics-mesh\"\n  })), \"3. Download \\xA0- \\xA0Get the headless CMS Gentics Mesh\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/Download\"\n  }), \"Down\\xADload the lat\\xADest ver\\xADsion of Gen\\xADtics Mesh\"), \" and start the CMS with this one-\\u200Bliner\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -jar mesh-demo-0.6.xx.jar\\n\")), mdx(\"p\", null, \"For the cur\\xADrent ex\\xADam\\xADple we are going to use the read-\\u200Bonly user cre\\xADden\\xADtials (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"we\\xADb\\xADclient:we\\xADb\\xADclient\"), \").\\nIf you want to play around with the demo data you can point your browser to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080/mesh-ui/\"\n  }), \"http://lo\\xADcal\\xADhost:8080/mesh-\\u200Bui/\"), \" to reach the Gen\\xADtics Mesh user in\\xADter\\xADface and use one of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/getting-started.html#_startup\"\n  }), \"avail\\xADable demo cre\\xADden\\xADtials\"), \" to login.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-ui.jpg\",\n    \"alt\": \"Gentics Mesh User Interface\"\n  }))), mdx(\"h3\", {\n    \"id\": \"4-start---the-application-and-browse-the-product-catalogue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#4-start---the-application-and-browse-the-product-catalogue\"\n  })), \"4. Start - The application and browse the product catalogue\"), mdx(\"p\", null, \"You can start the Vert.x web server by run\\xADning Server.java.\"), mdx(\"p\", null, \"That\\u2019s it - now you can ac\\xADcess the prod\\xADuct cat\\xADa\\xADlogue web\\xADsite in your browser: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:3000\"\n  }), \"http://lo\\xADcal\\xADhost:3000\")), mdx(\"h2\", {\n    \"id\": \"why-vertx-is-a-good-fit-for-gentics-mesh\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#why-vertx-is-a-good-fit-for-gentics-mesh\"\n  })), \"Why Vert.x is a good fit for Gentics Mesh\"), mdx(\"p\", null, \"Be\\xADfore dig\\xADging into the ex\\xADam\\xADple, let me share a few thoughts on Vert.x and Gen\\xADtics Mesh in com\\xADbi\\xADna\\xADtion. In this ex\\xADam\\xADple Vert.x is part of the fron\\xADtend stack in de\\xADliv\\xADer\\xADing the prod\\xADuct cat\\xADa\\xADlogue web\\xADsite. But it might also be of in\\xADter\\xADest to you that Vert.x is also used at the very heart of Gen\\xADtics Mesh it\\xADself. The Gen\\xADtics Mesh \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/raml/\"\n  }), \"REST API end\\xADpoints\"), \" are built on top of Vert.x as a core com\\xADpo\\xADnent.\"), mdx(\"p\", null, \"The great thing about Vert.x is that there are a lot of de\\xADfault im\\xADple\\xADmen\\xADta\\xADtions for var\\xADi\\xADous tasks such as au\\xADthen\\xADti\\xADca\\xADtion, data\\xADbase in\\xADte\\xADgra\\xADtion, mon\\xADi\\xADtor\\xADing and clus\\xADter\\xADing. It is pos\\xADsi\\xADble to use one or more fea\\xADtures and omit the rest and thus your ap\\xADpli\\xADca\\xADtion re\\xADmains light\\xADweight.\"), mdx(\"h2\", {\n    \"id\": \"curious-about-the-code\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#curious-about-the-code\"\n  })), \"Curious about the code?\"), mdx(\"p\", null, \"Source: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example\"\n  }), \"https://github.com/gen\\xADtics/mesh-\\u200Bvertx-example\")), mdx(\"p\", null, \"Now that every\\xADthing is up and run\\xADning let\\u2019s have a de\\xADtailed look at the code.\"), mdx(\"p\", null, \"A typ\\xADi\\xADcal de\\xADploy\\xADment unit for Vert.x is a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_verticles\"\n  }), \"ver\\xADti\\xADcle\"), \". In our case we use the ver\\xADti\\xADcle to bun\\xADdle our code and run the web server within it. Once de\\xADployed, Vert.x will run the ver\\xADti\\xADcle and start the HTTP server code.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"main.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/#_java_rest_client\"\n  }), \"Gen\\xADtics Mesh REST client\"), \" is used to com\\xADmu\\xADni\\xADcate with the Gen\\xADtics Mesh server. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/\"\n  }), \"Vert.x web li\\xADbrary\"), \" is used to set up our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/#_basic_vert_x_web_concepts\"\n  }), \"HTTP Router\"), \". As with other rout\\xADing frame\\xADworks like \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Silex\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ex\\xADpress\"), \", the router can be used to cre\\xADate routes for in\\xADbound HTTP re\\xADquests. In our case we only need two routes. The main route which ac\\xADcepts the re\\xADquest will uti\\xADlize the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://getmesh.io/docs/beta/#_webroot\"\n  }), \"Gen\\xADtics Mesh We\\xADb\\xADroot API End\\xADpoint\"), \" which is able to re\\xADsolve con\\xADtent by a pro\\xADvided path. It will ex\\xADam\\xADine the re\\xADsponse and add fields to the rout\\xADing con\\xADtext.\"), mdx(\"p\", null, \"The other route is chained and will take the pre\\xADvi\\xADously pre\\xADpared rout\\xADing con\\xADtext and ren\\xADder the de\\xADsired tem\\xADplate using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/#_templates\"\n  }), \"han\\xADdle\\xADbars tem\\xADplate han\\xADdler\"), \".\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"start.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"First we can han\\xADdle var\\xADi\\xADous spe\\xADcial re\\xADquests path such as \\u201D/\\u201D for the wel\\xADcome page. Or the typ\\xADi\\xADcal fav\\xADi\\xADcon.ico re\\xADquest. Other re\\xADquests are passed to the We\\xADb\\xADroot API han\\xADdler method.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"pathHandler.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"Once the path has been re\\xADsolved to a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"We\\xADb\\xADRootRe\\xADsponse\"), \" we can ex\\xADam\\xADine that data and de\\xADter\\xADmine whether it is a bi\\xADnary re\\xADsponse or a JSON re\\xADsponse. Bi\\xADnary re\\xADsponses may occur if the re\\xADquested re\\xADsource rep\\xADre\\xADsents an image or any other bi\\xADnary data. Re\\xADsolved bi\\xADnary con\\xADtents are di\\xADrectly passed through to the client and the han\\xADdle\\xADbars route is not in\\xADvoked.\"), mdx(\"p\", null, \"Ex\\xADam\\xADples\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/\"\n  }), \"http://lo\\xADcal\\xADhost:3000/\"), \" \\u2192 wel\\xADcome.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Automobiles\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Au\\xADto\\xADmo\\xADbiles\"), \" \\u2192 cat\\xADe\\xADgory \\u2192 pro\\xADductList.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Automobiles/Tesla%20Roadster\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Au\\xADto\\xADmo\\xADbiles/Tesla Road\\xADster\"), \" \\u2192 ve\\xADhi\\xADcle \\u2192 pro\\xADduct\\xADDe\\xADtail.hbs\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\"\n  }), \"http://lo\\xADcal\\xADhost:3000/Ve\\xADhi\\xADcle Im\\xADages/tesla-\\u200Broadster.jpg\"), \" \\u2192 bi\\xADnary passthru\")), mdx(\"p\", null, \"JSON re\\xADsponses on the other hand are ex\\xADam\\xADined to de\\xADter\\xADmine the type of node which was lo\\xADcated. A typ\\xADi\\xADcal node re\\xADsponse con\\xADtains in\\xADfor\\xADma\\xADtion about the schema used by the node. This will ef\\xADfec\\xADtively de\\xADter\\xADmine the type of the lo\\xADcated con\\xADtent (e.g.: cat\\xADe\\xADgory, ve\\xADhi\\xADcle).\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"routeHandler.java\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-schemas.jpg\",\n    \"alt\": \"Mesh Schemas\"\n  }))), mdx(\"p\", null, \"The demo ap\\xADpli\\xADca\\xADtion serves dif\\xADfer\\xADent pages which cor\\xADre\\xADspond to the iden\\xADti\\xADfied type.\\nTake a look at the tem\\xADplate sources within \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"src/main/re\\xADsources/tem\\xADplates/\"), \" if you are in\\xADter\\xADested in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://handlebarsjs.com/\"\n  }), \"han\\xADdle\\xADbars syn\\xADtax\"), \".\\nThe tem\\xADplates in the ex\\xADam\\xADple should cover most com\\xADmon cases.   \"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\",\n    \"alt\": \"Handlebars Template Overview\"\n  }))), mdx(\"p\", null, \"The Mesh REST Client li\\xADbrary in\\xADter\\xADnally makes use of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/java/#_creating_an_http_client\"\n  }), \"Vert.x core HTTP client\"), \".\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ReactiveX/RxJava\"\n  }), \"Rx\\xADJava\"), \" is being used to han\\xADdle these async re\\xADquests. This way we can com\\xADbine all asyn\\xADchro\\xADnously re\\xADquested Gen\\xADtics Mesh re\\xADsources (bread\\xADcrumb, list of prod\\xADucts) and add the loaded data into the rout\\xADing con\\xADtext.\"), mdx(\"p\", null, \"The Vert.x ex\\xADam\\xADple server loads JSON con\\xADtent from the Gen\\xADtics Mesh server. The \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"JsonOb\\xADject\"), \" is placed in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jknack/handlebars.java\"\n  }), \"han\\xADdle\\xADbars\"), \" ren\\xADder con\\xADtext and the tem\\xADplate can ac\\xADcess all nested fields within.\"), mdx(\"p\", null, \"This way it is pos\\xADsi\\xADble to re\\xADsolve any field within the han\\xADdle\\xADbars tem\\xADplate.\"), mdx(Gist, {\n    url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n    file: \"template.example\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"That\\u2019s it! Fi\\xADnally, we can in\\xADvoke mvn clean pack\\xADage in order to pack\\xADage our web\\xADserver. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://maven.apache.org/plugins/maven-shade-plugin/\"\n  }), \"maven-\\u200Bshade-plugin\"), \" will bun\\xADdle every\\xADthing and cre\\xADate an ex\\xADe\\xADcutable jar.\"), mdx(\"h2\", {\n    \"id\": \"whats-next\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#whats-next\"\n  })), \"What\\u2019s next?\"), mdx(\"p\", null, \"Fu\\xADture re\\xADleases of Gen\\xADtics Mesh will re\\xADfine the Mesh REST Client API and pro\\xADvide a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://graphql.org/\"\n  }), \"GraphQL\"), \" which will re\\xADduce the JSON over\\xADhead. Using GraphQL will also re\\xADduce the amount of re\\xADquests which need to be is\\xADsued.\"), mdx(\"p\", null, \"Thanks for read\\xADing. If you have any futher ques\\xADtions or feed\\xADback don\\u2019t hes\\xADi\\xADtate to send me a tweet to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/Jotschi/\"\n  }), \"@Jotschi\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/genticsmesh/\"\n  }), \"@gen\\xADtic\\xADsmesh\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eIn this ar­ti­cle, I would like to share why Vert.x is not only a ro­bust foun­da­tion for the \u003ca href=\"http://getmesh.io/\"\u003ehead­less Con­tent Man­age­ment Sys­tem Gen­tics Mesh\u003c/a\u003e but also how the re­cent re­lease 3.4.0 can be used to build a template-​based web server with Gen­tics Mesh and han­dle­bars.\u003c/p\u003e\u003cp\u003eA head­less CMS fo­cuses on de­liv­er­ing your con­tent through an API and al­lows ed­i­tors cre­at­ing and man­ag­ing that data through a web-​based in­ter­face. Un­like a tra­di­tional CMS, it does not pro­vide a specif­i­cally ren­dered out­put. The fron­tend part (the head) is lit­er­ally cut off, al­low­ing de­vel­op­ers cre­ate web­sites, apps, or any other data-​driven projects with their favourite tech­nolo­gies.\u003c/p\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/blog/vert-x-3-4-0-is-released/\"\u003eVert.x 3.4.0\u003c/a\u003e has just been re­leased and it comes with a bunch of new fea­tures and bug fixes. I am es­pe­cially ex­cited about a small en­hance­ment that changes the way in which the han­dle­bars tem­plate en­gine han­dle their con­text data. Pre­vi­ously it was not pos­si­ble to re­solve Vert.x ‘s JsonOb­jects within the ren­der con­text. With my en­hance­ment \u003ca href=\"https://github.com/vert-x3/vertx-web/pull/509\"\u003e#509\u003c/a\u003e - re­leased in Vert.x 3.4.0 - it is now pos­si­ble to ac­cess nested data from these ob­jects within your tem­plates. Pre­vi­ously this would have re­quired flat­ten­ing out each ob­ject and re­solv­ing it in­di­vid­u­ally, which would have been very cum­ber­some.\u003c/p\u003e\u003cp\u003eI’m going to demon­strate this en­hance­ment by show­ing how to build a prod­uct cat­a­logue using Vert.x to­gether with han­dle­bars tem­plates to ren­der and serve the web pages. The prod­uct data is man­aged, stored and de­liv­ered by the CMS server as source for JSON data.\u003c/p\u003e\u003ch2 id=\"clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\u003e\u003c/a\u003eClone, Import, Download, Start - Set up your product catalogue website quickly\u003c/h2\u003e\u003cp\u003eLet’s quickly set up every­thing you need to run the web­site be­fore I walk you through the code.\u003c/p\u003e\u003ch3 id=\"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\u003e\u003c/a\u003e1.  Clone - \u003ca href=\"https://github.com/gentics/mesh-vertx-example\"\u003eGet the full Vert.x with Gentics Mesh example from Github\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eFire up your ter­mi­nal and clone the ex­am­ple ap­pli­ca­tion to the di­rec­tory of your choice.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egit \u003cspan class=\"hljs-built_in\"\u003eclone\u003c/span\u003e git@github.com:gentics/mesh-vertx-example.git\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"2-import---the-maven-project-in-your-favourite-ide\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#2-import---the-maven-project-in-your-favourite-ide\"\u003e\u003c/a\u003e2. Import - The maven project in your favourite IDE\u003c/h3\u003e\u003cp\u003eThe ap­pli­ca­tion is set up as a maven project and can be im­ported in Eclipse IDE via File → Im­port → Ex­ist­ing Maven Project\u003c/p\u003e\u003ch3 id=\"3-download-----get-the-headless-cms-gentics-mesh\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#3-download-----get-the-headless-cms-gentics-mesh\"\u003e\u003c/a\u003e3. Download  -  Get the headless CMS Gentics Mesh\u003c/h3\u003e\u003cp\u003e\u003ca href=\"http://getmesh.io/Download\"\u003eDown­load the lat­est ver­sion of Gen­tics Mesh\u003c/a\u003e and start the CMS with this one-​liner\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ejava -jar mesh-demo-0.6.xx.jar\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFor the cur­rent ex­am­ple we are going to use the read-​only user cre­den­tials (\u003cem\u003ewe­b­client:we­b­client\u003c/em\u003e).\nIf you want to play around with the demo data you can point your browser to \u003ca href=\"http://localhost:8080/mesh-ui/\"\u003ehttp://lo­cal­host:8080/mesh-​ui/\u003c/a\u003e to reach the Gen­tics Mesh user in­ter­face and use one of the \u003ca href=\"http://getmesh.io/docs/beta/getting-started.html#_startup\"\u003eavail­able demo cre­den­tials\u003c/a\u003e to login.\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-mesh/mesh-ui.jpg\" alt=\"Gentics Mesh User Interface\"/\u003e\u003c/p\u003e\u003ch3 id=\"4-start---the-application-and-browse-the-product-catalogue\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#4-start---the-application-and-browse-the-product-catalogue\"\u003e\u003c/a\u003e4. Start - The application and browse the product catalogue\u003c/h3\u003e\u003cp\u003eYou can start the Vert.x web server by run­ning Server.java.\u003c/p\u003e\u003cp\u003eThat’s it - now you can ac­cess the prod­uct cat­a­logue web­site in your browser: \u003ca href=\"http://localhost:3000\"\u003ehttp://lo­cal­host:3000\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"why-vertx-is-a-good-fit-for-gentics-mesh\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#why-vertx-is-a-good-fit-for-gentics-mesh\"\u003e\u003c/a\u003eWhy Vert.x is a good fit for Gentics Mesh\u003c/h2\u003e\u003cp\u003eBe­fore dig­ging into the ex­am­ple, let me share a few thoughts on Vert.x and Gen­tics Mesh in com­bi­na­tion. In this ex­am­ple Vert.x is part of the fron­tend stack in de­liv­er­ing the prod­uct cat­a­logue web­site. But it might also be of in­ter­est to you that Vert.x is also used at the very heart of Gen­tics Mesh it­self. The Gen­tics Mesh \u003ca href=\"http://getmesh.io/docs/beta/raml/\"\u003eREST API end­points\u003c/a\u003e are built on top of Vert.x as a core com­po­nent.\u003c/p\u003e\u003cp\u003eThe great thing about Vert.x is that there are a lot of de­fault im­ple­men­ta­tions for var­i­ous tasks such as au­then­ti­ca­tion, data­base in­te­gra­tion, mon­i­tor­ing and clus­ter­ing. It is pos­si­ble to use one or more fea­tures and omit the rest and thus your ap­pli­ca­tion re­mains light­weight.\u003c/p\u003e\u003ch2 id=\"curious-about-the-code\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#curious-about-the-code\"\u003e\u003c/a\u003eCurious about the code?\u003c/h2\u003e\u003cp\u003eSource: \u003ca href=\"https://github.com/gentics/mesh-vertx-example\"\u003ehttps://github.com/gen­tics/mesh-​vertx-example\u003c/a\u003e\u003c/p\u003e\u003cp\u003eNow that every­thing is up and run­ning let’s have a de­tailed look at the code.\u003c/p\u003e\u003cp\u003eA typ­i­cal de­ploy­ment unit for Vert.x is a \u003ca href=\"http://vertx.io/docs/vertx-core/java/#_verticles\"\u003ever­ti­cle\u003c/a\u003e. In our case we use the ver­ti­cle to bun­dle our code and run the web server within it. Once de­ployed, Vert.x will run the ver­ti­cle and start the HTTP server code.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003eThe \u003ca href=\"http://getmesh.io/docs/beta/#_java_rest_client\"\u003eGen­tics Mesh REST client\u003c/a\u003e is used to com­mu­ni­cate with the Gen­tics Mesh server. The \u003ca href=\"http://vertx.io/docs/vertx-web/java/\"\u003eVert.x web li­brary\u003c/a\u003e is used to set up our \u003ca href=\"http://vertx.io/docs/vertx-web/java/#_basic_vert_x_web_concepts\"\u003eHTTP Router\u003c/a\u003e. As with other rout­ing frame­works like \u003cem\u003eSilex\u003c/em\u003e and \u003cem\u003eEx­press\u003c/em\u003e, the router can be used to cre­ate routes for in­bound HTTP re­quests. In our case we only need two routes. The main route which ac­cepts the re­quest will uti­lize the \u003ca href=\"http://getmesh.io/docs/beta/#_webroot\"\u003eGen­tics Mesh We­b­root API End­point\u003c/a\u003e which is able to re­solve con­tent by a pro­vided path. It will ex­am­ine the re­sponse and add fields to the rout­ing con­text.\u003c/p\u003e\u003cp\u003eThe other route is chained and will take the pre­vi­ously pre­pared rout­ing con­text and ren­der the de­sired tem­plate using the \u003ca href=\"http://vertx.io/docs/vertx-web/java/#_templates\"\u003ehan­dle­bars tem­plate han­dler\u003c/a\u003e.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003eFirst we can han­dle var­i­ous spe­cial re­quests path such as ”/” for the wel­come page. Or the typ­i­cal fav­i­con.ico re­quest. Other re­quests are passed to the We­b­root API han­dler method.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003eOnce the path has been re­solved to a \u003cem\u003eWe­b­RootRe­sponse\u003c/em\u003e we can ex­am­ine that data and de­ter­mine whether it is a bi­nary re­sponse or a JSON re­sponse. Bi­nary re­sponses may occur if the re­quested re­source rep­re­sents an image or any other bi­nary data. Re­solved bi­nary con­tents are di­rectly passed through to the client and the han­dle­bars route is not in­voked.\u003c/p\u003e\u003cp\u003eEx­am­ples\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"http://localhost:3000/\"\u003ehttp://lo­cal­host:3000/\u003c/a\u003e → wel­come.hbs\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://localhost:3000/Automobiles\"\u003ehttp://lo­cal­host:3000/Au­to­mo­biles\u003c/a\u003e → cat­e­gory → pro­ductList.hbs\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://localhost:3000/Automobiles/Tesla%20Roadster\"\u003ehttp://lo­cal­host:3000/Au­to­mo­biles/Tesla Road­ster\u003c/a\u003e → ve­hi­cle → pro­duct­De­tail.hbs\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\"\u003ehttp://lo­cal­host:3000/Ve­hi­cle Im­ages/tesla-​roadster.jpg\u003c/a\u003e → bi­nary passthru\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eJSON re­sponses on the other hand are ex­am­ined to de­ter­mine the type of node which was lo­cated. A typ­i­cal node re­sponse con­tains in­for­ma­tion about the schema used by the node. This will ef­fec­tively de­ter­mine the type of the lo­cated con­tent (e.g.: cat­e­gory, ve­hi­cle).\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-mesh/mesh-schemas.jpg\" alt=\"Mesh Schemas\"/\u003e\u003c/p\u003e\u003cp\u003eThe demo ap­pli­ca­tion serves dif­fer­ent pages which cor­re­spond to the iden­ti­fied type.\nTake a look at the tem­plate sources within \u003cem\u003esrc/main/re­sources/tem­plates/\u003c/em\u003e if you are in­ter­ested in the \u003ca href=\"http://handlebarsjs.com/\"\u003ehan­dle­bars syn­tax\u003c/a\u003e.\nThe tem­plates in the ex­am­ple should cover most com­mon cases.   \u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\" alt=\"Handlebars Template Overview\"/\u003e\u003c/p\u003e\u003cp\u003eThe Mesh REST Client li­brary in­ter­nally makes use of the \u003ca href=\"http://vertx.io/docs/vertx-core/java/#_creating_an_http_client\"\u003eVert.x core HTTP client\u003c/a\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://github.com/ReactiveX/RxJava\"\u003eRx­Java\u003c/a\u003e is being used to han­dle these async re­quests. This way we can com­bine all asyn­chro­nously re­quested Gen­tics Mesh re­sources (bread­crumb, list of prod­ucts) and add the loaded data into the rout­ing con­text.\u003c/p\u003e\u003cp\u003eThe Vert.x ex­am­ple server loads JSON con­tent from the Gen­tics Mesh server. The \u003cem\u003eJsonOb­ject\u003c/em\u003e is placed in the \u003ca href=\"https://github.com/jknack/handlebars.java\"\u003ehan­dle­bars\u003c/a\u003e ren­der con­text and the tem­plate can ac­cess all nested fields within.\u003c/p\u003e\u003cp\u003eThis way it is pos­si­ble to re­solve any field within the han­dle­bars tem­plate.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003eThat’s it! Fi­nally, we can in­voke mvn clean pack­age in order to pack­age our web­server. The \u003ca href=\"https://maven.apache.org/plugins/maven-shade-plugin/\"\u003emaven-​shade-plugin\u003c/a\u003e will bun­dle every­thing and cre­ate an ex­e­cutable jar.\u003c/p\u003e\u003ch2 id=\"whats-next\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#whats-next\"\u003e\u003c/a\u003eWhat’s next?\u003c/h2\u003e\u003cp\u003eFu­ture re­leases of Gen­tics Mesh will re­fine the Mesh REST Client API and pro­vide a \u003ca href=\"http://graphql.org/\"\u003eGraphQL\u003c/a\u003e which will re­duce the JSON over­head. Using GraphQL will also re­duce the amount of re­quests which need to be is­sued.\u003c/p\u003e\u003cp\u003eThanks for read­ing. If you have any futher ques­tions or feed­back don’t hes­i­tate to send me a tweet to \u003ca href=\"https://twitter.com/Jotschi/\"\u003e@Jotschi\u003c/a\u003e or \u003ca href=\"https://twitter.com/genticsmesh/\"\u003e@gen­tic­smesh\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"mesh","tf":20},{"term":"gentic","tf":17},{"term":"us","tf":15},{"term":"templat","tf":11},{"term":"http","tf":11},{"term":"data","tf":10},{"term":"server","tf":9},{"term":"exampl","tf":9},{"term":"will","tf":9},{"term":"rout","tf":9},{"term":"request","tf":9},{"term":"handlebar","tf":8},{"term":"product","tf":7},{"term":"content","tf":6},{"term":"web","tf":6},{"term":"context","tf":6},{"term":"resolv","tf":6},{"term":"within","tf":6},{"term":"localhost","tf":6},{"term":"respons","tf":6},{"term":"3000","tf":5},{"term":"cm","tf":5},{"term":"api","tf":5},{"term":"render","tf":5},{"term":"websit","tf":5}]},{"filename":"blog/2017-02-09-vert-x-3-4-0-beta1-release.mdx","date":"2017-02-09","slug":"vert-x-3-4-0-beta1-release","meta":{"title":"Vert.x 3.4.0.Beta1 release","category":"guides","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We have released 3.4.0.Beta1, this release is the biggest since Vert.x 3.0.0 with plenty of great features."},"readingTime":{"text":"6 min read","minutes":5.605,"time":336300,"words":1121},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We have re\\xADleased 3.4.0.Beta1, this re\\xADlease is the biggest since Vert.x 3.0.0 with plenty of great fea\\xADtures.\"), mdx(\"p\", null, \"You can use con\\xADsume it in your projects from Maven or Gra\\xADdle as usual with the ver\\xADsion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"3.4.0.Beta1\"), \" or read\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/3.4.0.Beta1/\"\n  }), \"doc\\xADu\\xADmen\\xADta\\xADtion pre\\xADview\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://gist.github.com/vietj/1ce63b368af127775512afbfc0ab14cc\"\n  }), \"re\\xADlease notes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"see the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/tree/3.4.0-SNAPSHOT\"\n  }), \"ac\\xADtual ex\\xADam\\xADples\"))), mdx(\"p\", null, \"Let me out\\xADline the im\\xADpor\\xADtant changes you can al\\xADready find in this Beta1.\"), mdx(\"h2\", {\n    \"id\": \"vertx-web-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-web-client\"\n  })), \"Vert.x Web Client\"), mdx(\"p\", null, \"In a sim\\xADple sen\\xADtence \\u201CVert.x Web Client is to Vert.x Http\\xADClient what Vert.x Web is to HttpServer\\u201D\"), mdx(\"p\", null, \"The Web Client makes it easy to do HTTP re\\xADquest/re\\xADsponse in\\xADter\\xADac\\xADtions with a web server, and pro\\xADvides ad\\xADvanced fea\\xADtures like:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Json body en\\xADcod\\xADing / de\\xADcod\\xADing\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADquest/re\\xADsponse pump\\xADing\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADquest pa\\xADra\\xADme\\xADters\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"uni\\xADfied error han\\xADdling\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"form sub\\xADmis\\xADsions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"and more!\")), mdx(\"p\", null, \"Built on top of Http\\xADClient, it nat\\xADu\\xADrally in\\xADher\\xADits its fea\\xADtures and pro\\xADvides a bet\\xADter API, let me give an overview in one ex\\xADam\\xADple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"WebClient client = WebClient.\\nclient\\n  .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .as(BodyCodec.json(User.class))\\n  .send(ar -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n\\n      HttpResponse\u003cUser\u003e response = ar.result();\\n      User user = response.body();\\n\\n      System.out.println(\\\"Received response with status code\\\" + response.statusCode() + \\\" with body \\\" +\\n        user.getFirstName() + \\\" \\\" + user.getLastName());\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n      System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Something went wrong \\\"\"), \" + ar.cause().getMessage());\\n    }\\n  });\\n\")), mdx(\"h2\", {\n    \"id\": \"rxjava-singles\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#rxjava-singles\"\n  })), \"RxJava singles\"), mdx(\"p\", null, \"Rx\\xADJava is a very pop\\xADu\\xADlar Java ex\\xADten\\xADsion and in this re\\xADlease we fo\\xADcused on the API us\\xADabil\\xADity with the sup\\xADport\\nof the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Single\"), \" Rx\\xADJava type.\"), mdx(\"p\", null, \"The new meth\\xADods are pre\\xADfixed by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rx\"), \" and dep\\xADre\\xADcates the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Observable\"), \" suf\\xADfixed meth\\xADods.\"), mdx(\"p\", null, \"So in\\xADstead of start\\xADing a server with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"listenObservable\"), \" now you use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rxListen\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"HttpServer server = vertx.createHttpServer();\\nSingle\u003cHttpServer\u003e single = server.rxListen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \");\\nsingle.subscribe(\\n  ok -\u003e System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Server started\\\"\"), \"),\\n  err -\u003e System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Something went wrong \\\"\"), \" + err.getMessage()));\\n\")), mdx(\"p\", null, \"One no\\xADtice\\xADable dif\\xADfer\\xADence with the pre\\xADvi\\xADous API, is that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"listen\"), \" method is called when the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Single\"), \" is sub\\xADscribed.\"), mdx(\"p\", null, \"This is very handy when com\\xADbined with the new web client:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Single\u003cHttpResponse\u003cBuffer\u003e\u003e single = client\\n  .get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myserver.mycompany.com\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \")\\n  .rxSend();\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send the request\"), \"\\nsingle.subscribe(response -\u003e System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"got response \\\"\"), \" + response.statusCode());\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send the request again\"), \"\\nsingle.subscribe(response -\u003e System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"got response \\\"\"), \" + response.statusCode());\\n\")), mdx(\"h2\", {\n    \"id\": \"polyglot\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#polyglot\"\n  })), \"Polyglot\"), mdx(\"p\", null, \"In this beta you can try \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vert.x for Kotlin\"), \".\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vert.x for Kotlin\"), \" is based on the Java API and pro\\xADvides also the ex\\xADe\\xADcu\\xADtion of Kotlin Ver\\xADti\\xADcles.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-kotlin\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.core.*\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.kotlin.core.http.HttpServerOptions\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Server\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-type\"\n  }), \"AbstractVerticle\")), \"() {\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"override\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"fun\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\")), \" {\\n    vertx.createHttpServer(\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// We provide Kotlin extension methods, allowing to use an idiomatic Kotlin API for building these options\"), \"\\n        HttpServerOptions(\\n            port = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \",\\n            host = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \"\\n        ))\\n        .requestHandler() { req -\u003e\\n          req.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello from Kotlin\\\"\"), \")\\n        }\\n        .listen()\\n    println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Server started on 8080\\\"\"), \")\\n  }\\n}\\n\")), mdx(\"p\", null, \"It can be di\\xADrectly ran from the com\\xADmand line:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"julien:vertx-kotlin-example julien$ vertx run Server.kt\\nServer started on 8080\\nSucceeded \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"in\"), \" deploying verticle\\n\")), mdx(\"p\", null, \"As you can see, Kotlin is using the Java API di\\xADrectly, and we thought that it might be a cool thing to do the\\nsame with Groovy sup\\xADport. So we have re\\xADcon\\xADsid\\xADered our Groovy sup\\xADport and now it uses the plain Java API,\\nwith\\xADout los\\xADing the ex\\xADist\\xADing fea\\xADtures.\"), mdx(\"p\", null, \"Thanks to Groovy ex\\xADten\\xADsion meth\\xADods, id\\xADiomatic Groovy is still sup\\xADported while ben\\xADe\\xADfit\\xADing from the full Java API!\"), mdx(\"p\", null, \"Scala sup\\xADport is also planned for 3.4.0 and will be re\\xADleased soon, watch \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/vertx_project\"\n  }), \"@vertx_project\"), \".\"), mdx(\"h2\", {\n    \"id\": \"the-microservices-story-goes-on\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-microservices-story-goes-on\"\n  })), \"The microservices story goes on\\u2026\"), mdx(\"p\", null, \"Our APIs have ma\\xADtured and now they have been moved out of tech pre\\xADview, of course this wasn\\u2019t enough and we now\\nhave \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vert.x Con\\xADfig\"), \", an ex\\xADten\\xADsi\\xADble way to con\\xADfig\\xADure Vert.x ap\\xADpli\\xADca\\xADtions sup\\xADport\\xADing File, json, ENV, sys\\xADtem prop\\xADer\\xADties,\\nHTTP, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Ku\\xADber\\xADnetes Con\\xADfigmap\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Con\\xADsul\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Spring Con\\xADfig Server\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Redis\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Git\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Zookeeper\"), \", \\u2026 stores as well as\\nsev\\xADeral for\\xADmats: prop\\xADer\\xADties file, YAML and Hocon.\"), mdx(\"p\", null, \"Here is a small ex\\xADam\\xADple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"ConfigStoreOptions httpStore = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ConfigStoreOptions()\\n  .setType(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http\\\"\"), \")\\n  .setConfig(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n    .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"host\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"port\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"path\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/conf\\\"\"), \"));\\n\\nConfigStoreOptions fileStore = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ConfigStoreOptions()\\n  .setType(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"file\\\"\"), \")\\n  .setConfig(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"path\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my-config.json\\\"\"), \"));\\n\\nConfigStoreOptions sysPropsStore = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ConfigStoreOptions().setType(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"sys\\\"\"), \");\\n\\nConfigRetrieverOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ConfigRetrieverOptions()\\n  .addStore(httpStore).addStore(fileStore).addStore(sysPropsStore);\\n\\nConfigRetriever retriever = ConfigRetriever.create(vertx, options);\\n\")), mdx(\"p\", null, \"Vert.x Con\\xADfig also sup\\xADports push based no\\xADti\\xADfi\\xADca\\xADtion style:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"ConfigRetriever retriever = ConfigRetriever.create(Vertx.vertx(), options);\\nretriever.configStream()\\n  .endHandler(v -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// retriever closed\"), \"\\n  })\\n  .exceptionHandler(t -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// an error has been caught while retrieving the configuration\"), \"\\n  })\\n  .handler(conf -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// the configuration\"), \"\\n  });\\n\")), mdx(\"h2\", {\n    \"id\": \"vertx-mqtt-server\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-mqtt-server\"\n  })), \"Vertx MQTT Server\"), mdx(\"p\", null, \"Vert.x MQTT Server is able to han\\xADdle con\\xADnec\\xADtions, com\\xADmu\\xADni\\xADca\\xADtion and mes\\xADsages ex\\xADchange with re\\xADmote MQTT clients.\\nIts API pro\\xADvides a bunch of events re\\xADlated to pro\\xADto\\xADcol mes\\xADsages re\\xADceived by clients and ex\\xADposes allow to send\\nmes\\xADsages to them.\"), mdx(\"p\", null, \"Here is a small ef\\xADfec\\xADtive ex\\xADam\\xADple of cre\\xADat\\xADing, the Vert.x way!\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"MqttServerOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MqttServerOptions()\\n  .setPort(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1883\"), \")\\n  .setHost(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.0.0\\\"\"), \");\\n\\nMqttServer server = MqttServer.create(vertx, options);\\n\\nserver.endpointHandler(endpoint -\u003e {\\n\\n  System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"connected client \\\"\"), \" + endpoint.clientIdentifier());\\n\\n  endpoint.publishHandler(message -\u003e {\\n\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Just received message on [\\\"\"), \" + message.topicName() + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"] payload [\\\"\"), \" +\\n      message.payload() + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"] with QoS [\\\"\"), \" +\\n      message.qosLevel() + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"]\\\"\"), \");\\n  });\\n\\n  endpoint.accept(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"false\"), \");\\n});\\n\\nserver.listen(ar -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"MQTT server started and listening on port \\\"\"), \" + server.actualPort());\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    System.err.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"MQTT server error on start\\\"\"), \" + ar.cause().getMessage());\\n  }\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"vertx-sql-streaming\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-sql-streaming\"\n  })), \"Vert.x SQL streaming\"), mdx(\"p\", null, \"We now sup\\xADport stream\\xADing style for SQL queries:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"connection.queryStream(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"select * from test\\\"\"), \", stream -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (stream.succeeded()) {\\n    SQLRowStream sqlRowStream = stream.result();\\n\\n    sqlRowStream\\n      .handler(row -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// do something with the row...\"), \"\\n        System.out.println(row.encode());\\n      })\\n      .endHandler(v -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// no more data available, close the connection\"), \"\\n        connection.close(done -\u003e {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (done.failed()) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"throw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RuntimeException(done.cause());\\n          }\\n        });\\n      });\\n  }\\n});\\n\")), mdx(\"p\", null, \"And with the Rx\\xADJava API:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-reasonml\"\n  }), \"client\\n  .rx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"GetConnection()\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Connect to the database\"), \"\\n  .flat\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"MapObservable(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"conn\"), \" -\u003e { \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-operator\"\n  }), \"/\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-operator\"\n  }), \"/\"), \" With \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"the\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"connection\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-operator\"\n  }), \"...\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"conn\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"rxUpdate\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"CREATE TABLE test(col VARCHAR(20))\\\"\"), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// ...create test table\"), \"\\n      .flat\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"Map(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"result\"), \" -\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"conn\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"rxUpdate\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO test (col) VALUES ('val1')\\\"\"), \")\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// ...insert a row\"), \"\\n      .flat\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"Map(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"result\"), \" -\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"conn\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"rxUpdate\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO test (col) VALUES ('val2')\\\"\"), \")\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// ...another one\"), \"\\n      .flat\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"Map(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"result\"), \" -\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"conn\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"rxQueryStream\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM test\\\"\"), \")\"), \") \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// ...get values stream\"), \"\\n      .flat\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"MapObservable(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"sqlRowStream\"), \" -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"sqlRowStream\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"toObservable\"), \"()\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Transform the stream into an Observable...\"), \"\\n          .\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"do\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-constructor\"\n  }), \"OnTerminate(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"conn\"), \"::\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"close\"), \")\"), \"; \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// ...and close the connection when the stream is fully read or an error occurs\"), \"\\n      });\\n  }).subscribe(row -\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-module-access\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-module\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-identifier\"\n  }), \"System\"), \".\")), \"out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Row : \\\"\"), \" + row.encode\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"()\"), \"));\\n\")), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"In ad\\xADdi\\xADtion to all these bril\\xADlant fea\\xADtures here is a list of more-\\u200Bthan-noticeable things you have in this Beta1:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vert.x In\\xADfin\\xADis\\xADpan re\\xADplaces Vert.x Jgroups clus\\xADter man\\xADager\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vert.x Con\\xADsul Client pro\\xADvides a full fledged client for Con\\xADsul\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Oauth2 pre\\xADde\\xADfined con\\xADfig\\xADu\\xADra\\xADtion with 16 set\\xADtings from \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Azure Ac\\xADtive Di\\xADrec\\xADtory\"), \", to \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Twit\\xADter\"), \" with the usual sus\\xADpects (\", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Face\\xADbook\"), \", \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"LinkedIn\"), \", \\u2026)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Http client now fol\\xADlow redi\\xADrects\")), mdx(\"p\", null, \"You can use and con\\xADsume it in your projects from Maven or Gra\\xADdle as usual with the ver\\xADsion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"3.4.0.Beta1\"), \" or read\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/3.4.0.Beta1/\"\n  }), \"doc\\xADu\\xADmen\\xADta\\xADtion pre\\xADview\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://gist.github.com/vietj/1ce63b368af127775512afbfc0ab14cc\"\n  }), \"re\\xADlease notes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"see the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-examples/tree/3.4.0-SNAPSHOT\"\n  }), \"ac\\xADtual ex\\xADam\\xADples\"))), mdx(\"p\", null, \"Last but not least, I want to per\\xADson\\xADally thank all the peo\\xADple that con\\xADtributed to this re\\xADlease, be\\xADyond the Vert.x core team, the ac\\xADtual\\nVert.x com\\xADmit\\xADters and many other peo\\xADple who have given a lot of ef\\xADfort to this up\\xADcom\\xADing 3.4.0!!!!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe have re­leased 3.4.0.Beta1, this re­lease is the biggest since Vert.x 3.0.0 with plenty of great fea­tures.\u003c/p\u003e\u003cp\u003eYou can use con­sume it in your projects from Maven or Gra­dle as usual with the ver­sion \u003ccode\u003e3.4.0.Beta1\u003c/code\u003e or read\u003c/p\u003e\u003cul\u003e\u003cli\u003ethe \u003ca href=\"http://vertx.io/docs/3.4.0.Beta1/\"\u003edoc­u­men­ta­tion pre­view\u003c/a\u003e\u003c/li\u003e\u003cli\u003ethe \u003ca href=\"https://gist.github.com/vietj/1ce63b368af127775512afbfc0ab14cc\"\u003ere­lease notes\u003c/a\u003e\u003c/li\u003e\u003cli\u003esee the \u003ca href=\"https://github.com/vert-x3/vertx-examples/tree/3.4.0-SNAPSHOT\"\u003eac­tual ex­am­ples\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eLet me out­line the im­por­tant changes you can al­ready find in this Beta1.\u003c/p\u003e\u003ch2 id=\"vertx-web-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-web-client\"\u003e\u003c/a\u003eVert.x Web Client\u003c/h2\u003e\u003cp\u003eIn a sim­ple sen­tence “Vert.x Web Client is to Vert.x Http­Client what Vert.x Web is to HttpServer”\u003c/p\u003e\u003cp\u003eThe Web Client makes it easy to do HTTP re­quest/re­sponse in­ter­ac­tions with a web server, and pro­vides ad­vanced fea­tures like:\u003c/p\u003e\u003cul\u003e\u003cli\u003eJson body en­cod­ing / de­cod­ing\u003c/li\u003e\u003cli\u003ere­quest/re­sponse pump­ing\u003c/li\u003e\u003cli\u003ere­quest pa­ra­me­ters\u003c/li\u003e\u003cli\u003euni­fied error han­dling\u003c/li\u003e\u003cli\u003eform sub­mis­sions\u003c/li\u003e\u003cli\u003eand more!\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eBuilt on top of Http­Client, it nat­u­rally in­her­its its fea­tures and pro­vides a bet­ter API, let me give an overview in one ex­am­ple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eWebClient client = WebClient.\nclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.json(User.class))\n  .send(ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n\n      HttpResponse\u0026lt;User\u0026gt; response = ar.result();\n      User user = response.body();\n\n      System.out.println(\u0026quot;Received response with status code\u0026quot; + response.statusCode() + \u0026quot; with body \u0026quot; +\n        user.getFirstName() + \u0026quot; \u0026quot; + user.getLastName());\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n    }\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"rxjava-singles\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#rxjava-singles\"\u003e\u003c/a\u003eRxJava singles\u003c/h2\u003e\u003cp\u003eRx­Java is a very pop­u­lar Java ex­ten­sion and in this re­lease we fo­cused on the API us­abil­ity with the sup­port\nof the \u003ccode\u003eSingle\u003c/code\u003e Rx­Java type.\u003c/p\u003e\u003cp\u003eThe new meth­ods are pre­fixed by \u003ccode\u003erx\u003c/code\u003e and dep­re­cates the \u003ccode\u003eObservable\u003c/code\u003e suf­fixed meth­ods.\u003c/p\u003e\u003cp\u003eSo in­stead of start­ing a server with \u003ccode\u003elistenObservable\u003c/code\u003e now you use \u003ccode\u003erxListen\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eHttpServer server = vertx.createHttpServer();\nSingle\u0026lt;HttpServer\u0026gt; single = server.rxListen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e);\nsingle.subscribe(\n  ok -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Server started\u0026quot;\u003c/span\u003e),\n  err -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOne no­tice­able dif­fer­ence with the pre­vi­ous API, is that the \u003ccode\u003elisten\u003c/code\u003e method is called when the \u003ccode\u003eSingle\u003c/code\u003e is sub­scribed.\u003c/p\u003e\u003cp\u003eThis is very handy when com­bined with the new web client:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eSingle\u0026lt;HttpResponse\u0026lt;Buffer\u0026gt;\u0026gt; single = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .rxSend();\n\n\u003cspan class=\"hljs-comment\"\u003e// Send the request\u003c/span\u003e\nsingle.subscribe(response -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;got response \u0026quot;\u003c/span\u003e + response.statusCode());\n\n\u003cspan class=\"hljs-comment\"\u003e// Send the request again\u003c/span\u003e\nsingle.subscribe(response -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;got response \u0026quot;\u003c/span\u003e + response.statusCode());\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"polyglot\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#polyglot\"\u003e\u003c/a\u003ePolyglot\u003c/h2\u003e\u003cp\u003eIn this beta you can try \u003cem\u003eVert.x for Kotlin\u003c/em\u003e.\u003c/p\u003e\u003cp\u003e\u003cem\u003eVert.x for Kotlin\u003c/em\u003e is based on the Java API and pro­vides also the ex­e­cu­tion of Kotlin Ver­ti­cles.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.core.*\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.kotlin.core.http.HttpServerOptions\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eServer\u003c/span\u003e : \u003cspan class=\"hljs-type\"\u003eAbstractVerticle\u003c/span\u003e\u003c/span\u003e() {\n\n  \u003cspan class=\"hljs-keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n    vertx.createHttpServer(\n\n        \u003cspan class=\"hljs-comment\"\u003e// We provide Kotlin extension methods, allowing to use an idiomatic Kotlin API for building these options\u003c/span\u003e\n        HttpServerOptions(\n            port = \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e,\n            host = \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e\n        ))\n        .requestHandler() { req -\u0026gt;\n          req.response().end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello from Kotlin\u0026quot;\u003c/span\u003e)\n        }\n        .listen()\n    println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Server started on 8080\u0026quot;\u003c/span\u003e)\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIt can be di­rectly ran from the com­mand line:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ejulien:vertx-kotlin-example julien$ vertx run Server.kt\nServer started on 8080\nSucceeded \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e deploying verticle\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see, Kotlin is using the Java API di­rectly, and we thought that it might be a cool thing to do the\nsame with Groovy sup­port. So we have re­con­sid­ered our Groovy sup­port and now it uses the plain Java API,\nwith­out los­ing the ex­ist­ing fea­tures.\u003c/p\u003e\u003cp\u003eThanks to Groovy ex­ten­sion meth­ods, id­iomatic Groovy is still sup­ported while ben­e­fit­ing from the full Java API!\u003c/p\u003e\u003cp\u003eScala sup­port is also planned for 3.4.0 and will be re­leased soon, watch \u003ca href=\"https://twitter.com/vertx_project\"\u003e@vertx_project\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"the-microservices-story-goes-on\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-microservices-story-goes-on\"\u003e\u003c/a\u003eThe microservices story goes on…\u003c/h2\u003e\u003cp\u003eOur APIs have ma­tured and now they have been moved out of tech pre­view, of course this wasn’t enough and we now\nhave \u003cem\u003eVert.x Con­fig\u003c/em\u003e, an ex­ten­si­ble way to con­fig­ure Vert.x ap­pli­ca­tions sup­port­ing File, json, ENV, sys­tem prop­er­ties,\nHTTP, \u003cem\u003eKu­ber­netes Con­figmap\u003c/em\u003e, \u003cem\u003eCon­sul\u003c/em\u003e, \u003cem\u003eSpring Con­fig Server\u003c/em\u003e, \u003cem\u003eRedis\u003c/em\u003e, \u003cem\u003eGit\u003c/em\u003e, \u003cem\u003eZookeeper\u003c/em\u003e, … stores as well as\nsev­eral for­mats: prop­er­ties file, YAML and Hocon.\u003c/p\u003e\u003cp\u003eHere is a small ex­am­ple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eConfigStoreOptions httpStore = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ConfigStoreOptions()\n  .setType(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http\u0026quot;\u003c/span\u003e)\n  .setConfig(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n    .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;path\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/conf\u0026quot;\u003c/span\u003e));\n\nConfigStoreOptions fileStore = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ConfigStoreOptions()\n  .setType(\u003cspan class=\"hljs-string\"\u003e\u0026quot;file\u0026quot;\u003c/span\u003e)\n  .setConfig(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;path\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my-config.json\u0026quot;\u003c/span\u003e));\n\nConfigStoreOptions sysPropsStore = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ConfigStoreOptions().setType(\u003cspan class=\"hljs-string\"\u003e\u0026quot;sys\u0026quot;\u003c/span\u003e);\n\nConfigRetrieverOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ConfigRetrieverOptions()\n  .addStore(httpStore).addStore(fileStore).addStore(sysPropsStore);\n\nConfigRetriever retriever = ConfigRetriever.create(vertx, options);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eVert.x Con­fig also sup­ports push based no­ti­fi­ca­tion style:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eConfigRetriever retriever = ConfigRetriever.create(Vertx.vertx(), options);\nretriever.configStream()\n  .endHandler(v -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// retriever closed\u003c/span\u003e\n  })\n  .exceptionHandler(t -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// an error has been caught while retrieving the configuration\u003c/span\u003e\n  })\n  .handler(conf -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// the configuration\u003c/span\u003e\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"vertx-mqtt-server\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-mqtt-server\"\u003e\u003c/a\u003eVertx MQTT Server\u003c/h2\u003e\u003cp\u003eVert.x MQTT Server is able to han­dle con­nec­tions, com­mu­ni­ca­tion and mes­sages ex­change with re­mote MQTT clients.\nIts API pro­vides a bunch of events re­lated to pro­to­col mes­sages re­ceived by clients and ex­poses allow to send\nmes­sages to them.\u003c/p\u003e\u003cp\u003eHere is a small ef­fec­tive ex­am­ple of cre­at­ing, the Vert.x way!\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eMqttServerOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MqttServerOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e1883\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;0.0.0.0\u0026quot;\u003c/span\u003e);\n\nMqttServer server = MqttServer.create(vertx, options);\n\nserver.endpointHandler(endpoint -\u0026gt; {\n\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;connected client \u0026quot;\u003c/span\u003e + endpoint.clientIdentifier());\n\n  endpoint.publishHandler(message -\u0026gt; {\n\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Just received message on [\u0026quot;\u003c/span\u003e + message.topicName() + \u003cspan class=\"hljs-string\"\u003e\u0026quot;] payload [\u0026quot;\u003c/span\u003e +\n      message.payload() + \u003cspan class=\"hljs-string\"\u003e\u0026quot;] with QoS [\u0026quot;\u003c/span\u003e +\n      message.qosLevel() + \u003cspan class=\"hljs-string\"\u003e\u0026quot;]\u0026quot;\u003c/span\u003e);\n  });\n\n  endpoint.accept(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e);\n});\n\nserver.listen(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;MQTT server started and listening on port \u0026quot;\u003c/span\u003e + server.actualPort());\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.err.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;MQTT server error on start\u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"vertx-sql-streaming\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-sql-streaming\"\u003e\u003c/a\u003eVert.x SQL streaming\u003c/h2\u003e\u003cp\u003eWe now sup­port stream­ing style for SQL queries:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003econnection.queryStream(\u003cspan class=\"hljs-string\"\u003e\u0026quot;select * from test\u0026quot;\u003c/span\u003e, stream -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (stream.succeeded()) {\n    SQLRowStream sqlRowStream = stream.result();\n\n    sqlRowStream\n      .handler(row -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// do something with the row...\u003c/span\u003e\n        System.out.println(row.encode());\n      })\n      .endHandler(v -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// no more data available, close the connection\u003c/span\u003e\n        connection.close(done -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (done.failed()) {\n            \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RuntimeException(done.cause());\n          }\n        });\n      });\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd with the Rx­Java API:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-reasonml\"\u003eclient\n  .rx\u003cspan class=\"hljs-constructor\"\u003eGetConnection()\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// Connect to the database\u003c/span\u003e\n  .flat\u003cspan class=\"hljs-constructor\"\u003eMapObservable(\u003cspan class=\"hljs-params\"\u003econn\u003c/span\u003e -\u0026gt; { \u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003e With \u003cspan class=\"hljs-params\"\u003ethe\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003econnection\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"hljs-params\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003econn\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003erxUpdate\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;CREATE TABLE test(col VARCHAR(20))\u0026quot;\u003c/span\u003e)\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// ...create test table\u003c/span\u003e\n      .flat\u003cspan class=\"hljs-constructor\"\u003eMap(\u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e -\u0026gt; \u003cspan class=\"hljs-params\"\u003econn\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003erxUpdate\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO test (col) VALUES (\u0026#x27;val1\u0026#x27;)\u0026quot;\u003c/span\u003e)\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// ...insert a row\u003c/span\u003e\n      .flat\u003cspan class=\"hljs-constructor\"\u003eMap(\u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e -\u0026gt; \u003cspan class=\"hljs-params\"\u003econn\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003erxUpdate\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO test (col) VALUES (\u0026#x27;val2\u0026#x27;)\u0026quot;\u003c/span\u003e)\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// ...another one\u003c/span\u003e\n      .flat\u003cspan class=\"hljs-constructor\"\u003eMap(\u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e -\u0026gt; \u003cspan class=\"hljs-params\"\u003econn\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003erxQueryStream\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM test\u0026quot;\u003c/span\u003e)\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// ...get values stream\u003c/span\u003e\n      .flat\u003cspan class=\"hljs-constructor\"\u003eMapObservable(\u003cspan class=\"hljs-params\"\u003esqlRowStream\u003c/span\u003e -\u0026gt; {\n        \u003cspan class=\"hljs-params\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-params\"\u003esqlRowStream\u003c/span\u003e.\u003cspan class=\"hljs-params\"\u003etoObservable\u003c/span\u003e()\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// Transform the stream into an Observable...\u003c/span\u003e\n          .\u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e\u003cspan class=\"hljs-constructor\"\u003eOnTerminate(\u003cspan class=\"hljs-params\"\u003econn\u003c/span\u003e::\u003cspan class=\"hljs-params\"\u003eclose\u003c/span\u003e)\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// ...and close the connection when the stream is fully read or an error occurs\u003c/span\u003e\n      });\n  }).subscribe(row -\u0026gt; \u003cspan class=\"hljs-module-access\"\u003e\u003cspan class=\"hljs-module\"\u003e\u003cspan class=\"hljs-identifier\"\u003eSystem\u003c/span\u003e.\u003c/span\u003e\u003c/span\u003eout.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Row : \u0026quot;\u003c/span\u003e + row.encode\u003cspan class=\"hljs-literal\"\u003e()\u003c/span\u003e));\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eIn ad­di­tion to all these bril­lant fea­tures here is a list of more-​than-noticeable things you have in this Beta1:\u003c/p\u003e\u003cul\u003e\u003cli\u003eVert.x In­fin­is­pan re­places Vert.x Jgroups clus­ter man­ager\u003c/li\u003e\u003cli\u003eVert.x Con­sul Client pro­vides a full fledged client for Con­sul\u003c/li\u003e\u003cli\u003eOauth2 pre­de­fined con­fig­u­ra­tion with 16 set­tings from \u003cem\u003eAzure Ac­tive Di­rec­tory\u003c/em\u003e, to \u003cem\u003eTwit­ter\u003c/em\u003e with the usual sus­pects (\u003cem\u003eFace­book\u003c/em\u003e, \u003cem\u003eLinkedIn\u003c/em\u003e, …)\u003c/li\u003e\u003cli\u003eHttp client now fol­low redi­rects\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eYou can use and con­sume it in your projects from Maven or Gra­dle as usual with the ver­sion \u003ccode\u003e3.4.0.Beta1\u003c/code\u003e or read\u003c/p\u003e\u003cul\u003e\u003cli\u003ethe \u003ca href=\"http://vertx.io/docs/3.4.0.Beta1/\"\u003edoc­u­men­ta­tion pre­view\u003c/a\u003e\u003c/li\u003e\u003cli\u003ethe \u003ca href=\"https://gist.github.com/vietj/1ce63b368af127775512afbfc0ab14cc\"\u003ere­lease notes\u003c/a\u003e\u003c/li\u003e\u003cli\u003esee the \u003ca href=\"https://github.com/vert-x3/vertx-examples/tree/3.4.0-SNAPSHOT\"\u003eac­tual ex­am­ples\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eLast but not least, I want to per­son­ally thank all the peo­ple that con­tributed to this re­lease, be­yond the Vert.x core team, the ac­tual\nVert.x com­mit­ters and many other peo­ple who have given a lot of ef­fort to this up­com­ing 3.4.0!!!!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"api","tf":10},{"term":"client","tf":9},{"term":"support","tf":8},{"term":"releas","tf":7},{"term":"web","tf":6},{"term":"featur","tf":5},{"term":"us","tf":5},{"term":"exampl","tf":5},{"term":"server","tf":5},{"term":"provid","tf":5},{"term":"java","tf":5},{"term":"rxjava","tf":4},{"term":"method","tf":4},{"term":"kotlin","tf":4},{"term":"groovi","tf":4},{"term":"beta1","tf":3},{"term":"usual","tf":3},{"term":"preview","tf":3},{"term":"actual","tf":3},{"term":"http","tf":3},{"term":"request","tf":3},{"term":"extens","tf":3},{"term":"config","tf":3},{"term":"consul","tf":3},{"term":"mqtt","tf":3}]},{"filename":"blog/2017-01-31-an-introduction-to-the-vert-x-context-object.mdx","date":"2017-01-31","slug":"an-introduction-to-the-vert-x-context-object","meta":{"title":"An Introduction to the Vert.x Context Object","category":"guides","authors":[{"name":"Jez Prime","github_id":"millross"}],"summary":"Under the hood, the vert.x Context class plays a critical part in maintaining the thread-safety guarantees of verticles. Most of the time, vert.x coders don't need to make use of Context objects directly."},"readingTime":{"text":"6 min read","minutes":5.915,"time":354900,"words":1183},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Under the hood, the vert.x Con\\xADtext class plays a crit\\xADi\\xADcal part in main\\xADtain\\xADing the thread-\\u200Bsafety guar\\xADan\\xADtees of ver\\xADti\\xADcles. Most of the time, vert.x coders don\\u2019t need to make use of Con\\xADtext ob\\xADjects di\\xADrectly. How\\xADever, some\\xADtimes you may need to. This ar\\xADti\\xADcle pro\\xADvides a brief in\\xADtro\\xADduc\\xADtion to the vert.x Con\\xADtext class, which cov\\xADers why it\\u2019s im\\xADpor\\xADtant, and why and when you might wish to make use of the Con\\xADtext di\\xADrectly, based on the au\\xADthor\\u2019s ex\\xADpe\\xADri\\xADence of build\\xADing a generic async li\\xADbrary which can be used with vert.x.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.millross-consultants.com/vertx_context_object.html\"\n  }), \"blog post\"))), mdx(\"h2\", {\n    \"id\": \"introduction\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#introduction\"\n  })), \"Introduction\"), mdx(\"p\", null, \"Re\\xADcently I\\u2019ve been look\\xADing at the pos\\xADsi\\xADbil\\xADity of build\\xADing an asyn\\xADchro\\xADnous ver\\xADsion of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.pac4j.org\"\n  }), \"pac4j\"), \" li\\xADbrary, with a view to then mi\\xADgrat\\xADing the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/pac4j/vertx-pac4j\"\n  }), \"vertx-\\u200Bpac4j\"), \" im\\xADple\\xADmen\\xADta\\xADtion to use the asyn\\xADchro\\xADnous ver\\xADsion of pac4j by de\\xADfault.\"), mdx(\"p\", null, \"I\\u2019m keen (for ob\\xADvi\\xADous rea\\xADsons) that the async ver\\xADsion of pac4j is not tightly cou\\xADpled to  one par\\xADtic\\xADu\\xADlar asyn\\xADchro\\xADnous/non-\\u200Bblocking frame\\xADwork, I de\\xADcided to ex\\xADpose the API via the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\"\n  }), \"Com\\xADpletable\\xADFu\\xADture\"), \" class, using this to wrap val\\xADues which will be de\\xADter\\xADmined in the fu\\xADture. How\\xADever, I opted to use the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"vert.x\"), \" frame\\xADwork for my asyn\\xADchro\\xADnous test\\xADing as a way of test\\xADing the API as it emerged. This in turn has led me to learn some as\\xADpects of the vert.x \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/core/Context.html\"\n  }), \"Con\\xADtext\"), \" class which I didn\\u2019t re\\xADally un\\xADder\\xADstand be\\xADfore.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The in\\xADfor\\xADma\\xADtion pre\\xADsented re\\xADlates to Vert.x ver\\xADsion 3.3.3. It is con\\xADceiv\\xADable that later ver\\xADsions of vert.x could ren\\xADder as\\xADpects of this ar\\xADti\\xADcle in\\xADcor\\xADrect.\")), mdx(\"h2\", {\n    \"id\": \"introduction-to-the-context-class\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#introduction-to-the-context-class\"\n  })), \"Introduction to the Context class\"), mdx(\"p\", null, \"When\\xADever a vert.x \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/core/Handler.html\"\n  }), \"Han\\xADdler\"), \" is ex\\xADe\\xADcuted, or the start or step method of a ver\\xADti\\xADcle is called, then that ex\\xADe\\xADcu\\xADtion is as\\xADso\\xADci\\xADated with a spe\\xADcific con\\xADtext. Gen\\xADer\\xADally a con\\xADtext is an event-\\u200Bloop con\\xADtext and is there\\xADfore as\\xADso\\xADci\\xADated with an event loop thread (ex\\xADcep\\xADtions are cov\\xADered in the Fur\\xADther Read\\xADing ref\\xADer\\xADenced below). Con\\xADtexts are prop\\xADa\\xADgated. When a han\\xADdler is set by code run\\xADning on a spe\\xADcific con\\xADtext, then that han\\xADdler will also be ex\\xADe\\xADcuted on the same con\\xADtext. This means for ex\\xADam\\xADple, that if the start method of a ver\\xADti\\xADcle in\\xADstance sets a num\\xADber of event bus han\\xADdlers (as many do), then they will all run on the same con\\xADtext as the start method for that ver\\xADti\\xADcle (so all han\\xADdlers for that ver\\xADti\\xADcle in\\xADstance will share a com\\xADmon con\\xADtext). \"), mdx(\"p\", null, \"A schematic of the re\\xADla\\xADtion\\xADships be\\xADtween non-\\u200Bworker ver\\xADti\\xADcles, con\\xADtexts and event\\xADloop threads is shown in Fig\\xADure 1. \"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx3-intro-to-context-object/VertxContextRelationships.png\",\n    \"alt\": \"Vertx Context/Thread/Verticle Relationships\"\n  }))), mdx(\"p\", null, \"Note that each ver\\xADti\\xADcle ef\\xADfec\\xADtively has only one con\\xADtext for han\\xADdlers cre\\xADated by its start method, and each con\\xADtext is bound to a sin\\xADgle event-\\u200Bloop thread. A given event-\\u200Bloop thread can, how\\xADever, have mul\\xADti\\xADple con\\xADtexts bound to it. \"), mdx(\"h2\", {\n    \"id\": \"when-are-contexts-not-propagated\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#when-are-contexts-not-propagated\"\n  })), \"When are contexts not propagated?\"), mdx(\"p\", null, \"When a ver\\xADti\\xADcle\\u2019s start method is called, a new con\\xADtext is cre\\xADated. If 4 iden\\xADti\\xADcal ver\\xADti\\xADcles are de\\xADployed via the in\\xADstances pa\\xADra\\xADme\\xADter on De\\xADploy\\xADmen\\xADtOp\\xADtions, the start method of each will be on a new con\\xADtext. This is log\\xADi\\xADcal as we may not want all non-\\u200Bworker ver\\xADti\\xADcles to be bound to a sin\\xADgle event\\xADloop thread when mul\\xADti\\xADple event\\xADloop threads are avail\\xADable. \"), mdx(\"h2\", {\n    \"id\": \"threading-guarantees\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#threading-guarantees\"\n  })), \"Threading Guarantees\"), mdx(\"p\", null, \"There are cer\\xADtain con\\xADse\\xADquences of the prop\\xADa\\xADga\\xADtion of con\\xADtexts to han\\xADdlers as men\\xADtioned above. The most im\\xADpor\\xADtant one is that since all han\\xADdlers in a given event\\xADloop ver\\xADti\\xADcle run on the same con\\xADtext (the one on which its start method ran), they all run on the same event\\xADloop thread. This gives rise to the thread\\xADing guar\\xADan\\xADtee within vert.x, that as long as a given ver\\xADti\\xADcle is the only one to ever ac\\xADcess a piece of state, then that state is being ac\\xADcessed by only one thread, so no syn\\xADchro\\xADniza\\xADtion will be nec\\xADes\\xADsary. \"), mdx(\"h2\", {\n    \"id\": \"exception-handling\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#exception-handling\"\n  })), \"Exception Handling\"), mdx(\"p\", null, \"Each con\\xADtext can have its own ex\\xADcep\\xADtion han\\xADdler at\\xADtached for han\\xADdling ex\\xADcep\\xADtions which occur dur\\xADing event loop pro\\xADcess\\xADing.\"), mdx(\"h3\", {\n    \"id\": \"why-might-you-not-want-the-default-exception-handler\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#why-might-you-not-want-the-default-exception-handler\"\n  })), \"Why might you not want the default exception handler?\"), mdx(\"p\", null, \"As one ex\\xADam\\xADple, you might have some ver\\xADti\\xADcles run\\xADning whose job it is to mon\\xADi\\xADtor other ver\\xADti\\xADcles, and if some\\xADthing ap\\xADpears to go wrong with them, un\\xADde\\xADploy and restart them, a fre\\xADquent pat\\xADtern in an actor-\\u200B or microservices-\\u200B style archic\\xADtec\\xADture. So one op\\xADtion could be that when a su\\xADper\\xADvised ver\\xADti\\xADcle en\\xADcoun\\xADters an un\\xADre\\xADcov\\xADer\\xADable error, it could sim\\xADply no\\xADtify its su\\xADper\\xADvi\\xADsor that it has gone wrong via an event\\xADbus mes\\xADsage, and its su\\xADper\\xADvi\\xADsor could then un\\xADde\\xADploy and re\\xADde\\xADploy (and after a num\\xADber of fail\\xADures in rapid suc\\xADces\\xADsion pos\\xADsi\\xADbly give up hope or es\\xADca\\xADlate to its own su\\xADper\\xADvi\\xADsor.\"), mdx(\"h2\", {\n    \"id\": \"going-off-context-and-getting-back-onto-a-particular-context\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#going-off-context-and-getting-back-onto-a-particular-context\"\n  })), \"Going off-context and getting back onto a particular context\"), mdx(\"p\", null, \"There are sev\\xADeral rea\\xADsons why you might ex\\xADe\\xADcute code off-\\u200Bcontext and then want to op\\xADer\\xADate back on a vert.x con\\xADtext when com\\xADplete. I\\u2019ll out\\xADline a cou\\xADple of sce\\xADnar\\xADios below\"), mdx(\"h3\", {\n    \"id\": \"running-code-on-a-separate-thread\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#running-code-on-a-separate-thread\"\n  })), \"Running code on a separate thread\"), mdx(\"p\", null, \"Firstly you might be using an asyn\\xADchro\\xADnous dri\\xADver which is en\\xADtirely vertx-\\u200Bunaware. Its code will run on non-\\u200Beventloop threads but it\\u2019s pos\\xADsi\\xADble you may then want to use the re\\xADsults of that code to up\\xADdate in\\xADfor\\xADma\\xADtion within your ver\\xADti\\xADcle. If you don\\u2019t get back onto the cor\\xADrect con\\xADtext, you can\\u2019t make any guar\\xADan\\xADtees about thread-\\u200Bsafety, so your sub\\xADse\\xADquent pro\\xADcess\\xADing needs to be run back on the cor\\xADrect event\\xADloop thread.\"), mdx(\"h3\", {\n    \"id\": \"using-asynchronous-java-8-apis\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#using-asynchronous-java-8-apis\"\n  })), \"Using asynchronous Java 8 APIs\"), mdx(\"p\", null, \"APIs such as Com\\xADpletable\\xADFu\\xADture are context-\\u200Bunaware. In one ex\\xADam\\xADple, I cre\\xADated an al\\xADready com\\xADpleted fu\\xADture on the vert.x event loop in a test. I then at\\xADtached sub\\xADse\\xADquent pro\\xADcess\\xADing to it via then run:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@RunWith(VertxUnitRunner.class)\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"ImmediateCompletionTest\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Rule\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" RunTestOnContext rule = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RunTestOnContext();\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"testImmediateCompletion\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" Async async = context.async();\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" Vertx vertx = rule.vertx();\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" CompletableFuture\u003cInteger\u003e toComplete = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" CompletableFuture\u003c\u003e();\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// delay future completion by 500 ms\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" String threadName = Thread.currentThread().getName();\\n        toComplete.complete(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"100\"), \");\\n        toComplete.thenRun(() -\u003e {\\n            assertThat(Thread.currentThread().getName(), is(threadName));\\n            async.complete();\\n        });\\n    }\\n}\\n\")), mdx(\"p\", null, \"Naively one might ex\\xADpect this to au\\xADto\\xADmat\\xADi\\xADcally run on the con\\xADtext, since it hasn\\u2019t left the event\\xADloop thread on which the fu\\xADture was com\\xADpleted, and in\\xADdeed it\\u2019s prov\\xADable that it is on the cor\\xADrect thread. How\\xADever, it will not be on the cor\\xADrect con\\xADtext. This would mean that it wouldn\\u2019t, for ex\\xADam\\xADple, in\\xADvoke any mod\\xADi\\xADfied ex\\xADcep\\xADtion han\\xADdler at\\xADtached to the con\\xADtext.\"), mdx(\"h3\", {\n    \"id\": \"getting-back-on-context\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#getting-back-on-context\"\n  })), \"Getting back on context\"), mdx(\"p\", null, \"For\\xADtu\\xADnately, once we\\u2019ve left the con\\xADtext, it\\u2019s quite straight\\xADfor\\xADward to re\\xADturn to it. Prior to de\\xADf\\xADi\\xADn\\xADi\\xADtion of the code block within then\\xADRun, we can use Vertx.cur\\xADrent\\xADCon\\xADtext() or vertx.getOr\\xADCre\\xADate\\xADCon\\xADtext() to get a han\\xADdle to the con\\xADtext on which our event\\xADloop code is run\\xADning, We can then ex\\xADe\\xADcute the code block in\\xADside a call to Con\\xADtext::runOn\\xADCon\\xADtext, sim\\xADi\\xADlar to\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" Context currentContext = vertx.getOrCreateContext();\\ntoComplete.thenRun(() -\u003e {\\n        currentContext.runOnContext(v -\u003e {\\n        assertThat(Thread.currentThread().getName(), is(threadName));\\n        async.complete();\\n    }\\n});\\n\")), mdx(\"p\", null, \"While get\\xADting back onto the cor\\xADrect con\\xADtext may not be crit\\xADi\\xADcal if you have re\\xADmained on the event loop thread through\\xADout, it is crit\\xADi\\xADcal if you are going to in\\xADvoke sub\\xADse\\xADquent vert.x han\\xADdlers, up\\xADdate ver\\xADti\\xADcle state or any\\xADthing sim\\xADi\\xADlar, so it\\u2019s a sen\\xADsi\\xADble gen\\xADeral ap\\xADproach.\"), mdx(\"h2\", {\n    \"id\": \"further-reading\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#further-reading\"\n  })), \"Further Reading\"), mdx(\"p\", null, \"The vert.x team them\\xADselves offer an ex\\xADcel\\xADlent blog about the Vert.x event\\xADloop, with ex\\xADcel\\xADlent ma\\xADte\\xADr\\xADial on the con\\xADtext, on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vietj/vertx-materials/blob/master/src/main/asciidoc/Demystifying_the_event_loop.adoc\"\n  }), \"Github\"), \".\"), mdx(\"h2\", {\n    \"id\": \"thanks\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#thanks\"\n  })), \"Thanks\"), mdx(\"p\", null, \"Thanks very much to the vert.x core team for their clear github pages on the event\\xADloop, and also to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/alexlehm?lang=en\"\n  }), \"Alexan\\xADder Lehmann\"), \" for his an\\xADswers to my stu\\xADpid and naive ques\\xADtions on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://groups.google.com/forum/#!forum/vertx\"\n  }), \"Vert.x google group\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eUnder the hood, the vert.x Con­text class plays a crit­i­cal part in main­tain­ing the thread-​safety guar­an­tees of ver­ti­cles. Most of the time, vert.x coders don’t need to make use of Con­text ob­jects di­rectly. How­ever, some­times you may need to. This ar­ti­cle pro­vides a brief in­tro­duc­tion to the vert.x Con­text class, which cov­ers why it’s im­por­tant, and why and when you might wish to make use of the Con­text di­rectly, based on the au­thor’s ex­pe­ri­ence of build­ing a generic async li­brary which can be used with vert.x.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThis is a re-​publication of the fol­low­ing \u003ca href=\"http://www.millross-consultants.com/vertx_context_object.html\"\u003eblog post\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"introduction\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#introduction\"\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\u003cp\u003eRe­cently I’ve been look­ing at the pos­si­bil­ity of build­ing an asyn­chro­nous ver­sion of the \u003ca href=\"http://www.pac4j.org\"\u003epac4j\u003c/a\u003e li­brary, with a view to then mi­grat­ing the \u003ca href=\"https://github.com/pac4j/vertx-pac4j\"\u003evertx-​pac4j\u003c/a\u003e im­ple­men­ta­tion to use the asyn­chro­nous ver­sion of pac4j by de­fault.\u003c/p\u003e\u003cp\u003eI’m keen (for ob­vi­ous rea­sons) that the async ver­sion of pac4j is not tightly cou­pled to  one par­tic­u­lar asyn­chro­nous/non-​blocking frame­work, I de­cided to ex­pose the API via the \u003ca href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\"\u003eCom­pletable­Fu­ture\u003c/a\u003e class, using this to wrap val­ues which will be de­ter­mined in the fu­ture. How­ever, I opted to use the \u003ca href=\"http://vertx.io\"\u003evert.x\u003c/a\u003e frame­work for my asyn­chro­nous test­ing as a way of test­ing the API as it emerged. This in turn has led me to learn some as­pects of the vert.x \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/core/Context.html\"\u003eCon­text\u003c/a\u003e class which I didn’t re­ally un­der­stand be­fore.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThe in­for­ma­tion pre­sented re­lates to Vert.x ver­sion 3.3.3. It is con­ceiv­able that later ver­sions of vert.x could ren­der as­pects of this ar­ti­cle in­cor­rect.\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"introduction-to-the-context-class\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#introduction-to-the-context-class\"\u003e\u003c/a\u003eIntroduction to the Context class\u003c/h2\u003e\u003cp\u003eWhen­ever a vert.x \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/core/Handler.html\"\u003eHan­dler\u003c/a\u003e is ex­e­cuted, or the start or step method of a ver­ti­cle is called, then that ex­e­cu­tion is as­so­ci­ated with a spe­cific con­text. Gen­er­ally a con­text is an event-​loop con­text and is there­fore as­so­ci­ated with an event loop thread (ex­cep­tions are cov­ered in the Fur­ther Read­ing ref­er­enced below). Con­texts are prop­a­gated. When a han­dler is set by code run­ning on a spe­cific con­text, then that han­dler will also be ex­e­cuted on the same con­text. This means for ex­am­ple, that if the start method of a ver­ti­cle in­stance sets a num­ber of event bus han­dlers (as many do), then they will all run on the same con­text as the start method for that ver­ti­cle (so all han­dlers for that ver­ti­cle in­stance will share a com­mon con­text). \u003c/p\u003e\u003cp\u003eA schematic of the re­la­tion­ships be­tween non-​worker ver­ti­cles, con­texts and event­loop threads is shown in Fig­ure 1. \u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx3-intro-to-context-object/VertxContextRelationships.png\" alt=\"Vertx Context/Thread/Verticle Relationships\"/\u003e\u003c/p\u003e\u003cp\u003eNote that each ver­ti­cle ef­fec­tively has only one con­text for han­dlers cre­ated by its start method, and each con­text is bound to a sin­gle event-​loop thread. A given event-​loop thread can, how­ever, have mul­ti­ple con­texts bound to it. \u003c/p\u003e\u003ch2 id=\"when-are-contexts-not-propagated\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#when-are-contexts-not-propagated\"\u003e\u003c/a\u003eWhen are contexts not propagated?\u003c/h2\u003e\u003cp\u003eWhen a ver­ti­cle’s start method is called, a new con­text is cre­ated. If 4 iden­ti­cal ver­ti­cles are de­ployed via the in­stances pa­ra­me­ter on De­ploy­men­tOp­tions, the start method of each will be on a new con­text. This is log­i­cal as we may not want all non-​worker ver­ti­cles to be bound to a sin­gle event­loop thread when mul­ti­ple event­loop threads are avail­able. \u003c/p\u003e\u003ch2 id=\"threading-guarantees\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#threading-guarantees\"\u003e\u003c/a\u003eThreading Guarantees\u003c/h2\u003e\u003cp\u003eThere are cer­tain con­se­quences of the prop­a­ga­tion of con­texts to han­dlers as men­tioned above. The most im­por­tant one is that since all han­dlers in a given event­loop ver­ti­cle run on the same con­text (the one on which its start method ran), they all run on the same event­loop thread. This gives rise to the thread­ing guar­an­tee within vert.x, that as long as a given ver­ti­cle is the only one to ever ac­cess a piece of state, then that state is being ac­cessed by only one thread, so no syn­chro­niza­tion will be nec­es­sary. \u003c/p\u003e\u003ch2 id=\"exception-handling\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#exception-handling\"\u003e\u003c/a\u003eException Handling\u003c/h2\u003e\u003cp\u003eEach con­text can have its own ex­cep­tion han­dler at­tached for han­dling ex­cep­tions which occur dur­ing event loop pro­cess­ing.\u003c/p\u003e\u003ch3 id=\"why-might-you-not-want-the-default-exception-handler\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#why-might-you-not-want-the-default-exception-handler\"\u003e\u003c/a\u003eWhy might you not want the default exception handler?\u003c/h3\u003e\u003cp\u003eAs one ex­am­ple, you might have some ver­ti­cles run­ning whose job it is to mon­i­tor other ver­ti­cles, and if some­thing ap­pears to go wrong with them, un­de­ploy and restart them, a fre­quent pat­tern in an actor-​ or microservices-​ style archic­tec­ture. So one op­tion could be that when a su­per­vised ver­ti­cle en­coun­ters an un­re­cov­er­able error, it could sim­ply no­tify its su­per­vi­sor that it has gone wrong via an event­bus mes­sage, and its su­per­vi­sor could then un­de­ploy and re­de­ploy (and after a num­ber of fail­ures in rapid suc­ces­sion pos­si­bly give up hope or es­ca­late to its own su­per­vi­sor.\u003c/p\u003e\u003ch2 id=\"going-off-context-and-getting-back-onto-a-particular-context\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#going-off-context-and-getting-back-onto-a-particular-context\"\u003e\u003c/a\u003eGoing off-context and getting back onto a particular context\u003c/h2\u003e\u003cp\u003eThere are sev­eral rea­sons why you might ex­e­cute code off-​context and then want to op­er­ate back on a vert.x con­text when com­plete. I’ll out­line a cou­ple of sce­nar­ios below\u003c/p\u003e\u003ch3 id=\"running-code-on-a-separate-thread\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#running-code-on-a-separate-thread\"\u003e\u003c/a\u003eRunning code on a separate thread\u003c/h3\u003e\u003cp\u003eFirstly you might be using an asyn­chro­nous dri­ver which is en­tirely vertx-​unaware. Its code will run on non-​eventloop threads but it’s pos­si­ble you may then want to use the re­sults of that code to up­date in­for­ma­tion within your ver­ti­cle. If you don’t get back onto the cor­rect con­text, you can’t make any guar­an­tees about thread-​safety, so your sub­se­quent pro­cess­ing needs to be run back on the cor­rect event­loop thread.\u003c/p\u003e\u003ch3 id=\"using-asynchronous-java-8-apis\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#using-asynchronous-java-8-apis\"\u003e\u003c/a\u003eUsing asynchronous Java 8 APIs\u003c/h3\u003e\u003cp\u003eAPIs such as Com­pletable­Fu­ture are context-​unaware. In one ex­am­ple, I cre­ated an al­ready com­pleted fu­ture on the vert.x event loop in a test. I then at­tached sub­se­quent pro­cess­ing to it via then run:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@RunWith(VertxUnitRunner.class)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eImmediateCompletionTest\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-meta\"\u003e@Rule\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e RunTestOnContext rule = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RunTestOnContext();\n\n    \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etestImmediateCompletion\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n\n        \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e Async async = context.async();\n        \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e Vertx vertx = rule.vertx();\n        \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e CompletableFuture\u0026lt;Integer\u0026gt; toComplete = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e CompletableFuture\u0026lt;\u0026gt;();\n        \u003cspan class=\"hljs-comment\"\u003e// delay future completion by 500 ms\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e String threadName = Thread.currentThread().getName();\n        toComplete.complete(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e);\n        toComplete.thenRun(() -\u0026gt; {\n            assertThat(Thread.currentThread().getName(), is(threadName));\n            async.complete();\n        });\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNaively one might ex­pect this to au­to­mat­i­cally run on the con­text, since it hasn’t left the event­loop thread on which the fu­ture was com­pleted, and in­deed it’s prov­able that it is on the cor­rect thread. How­ever, it will not be on the cor­rect con­text. This would mean that it wouldn’t, for ex­am­ple, in­voke any mod­i­fied ex­cep­tion han­dler at­tached to the con­text.\u003c/p\u003e\u003ch3 id=\"getting-back-on-context\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#getting-back-on-context\"\u003e\u003c/a\u003eGetting back on context\u003c/h3\u003e\u003cp\u003eFor­tu­nately, once we’ve left the con­text, it’s quite straight­for­ward to re­turn to it. Prior to de­f­i­n­i­tion of the code block within then­Run, we can use Vertx.cur­rent­Con­text() or vertx.getOr­Cre­ate­Con­text() to get a han­dle to the con­text on which our event­loop code is run­ning, We can then ex­e­cute the code block in­side a call to Con­text::runOn­Con­text, sim­i­lar to\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e Context currentContext = vertx.getOrCreateContext();\ntoComplete.thenRun(() -\u0026gt; {\n        currentContext.runOnContext(v -\u0026gt; {\n        assertThat(Thread.currentThread().getName(), is(threadName));\n        async.complete();\n    }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhile get­ting back onto the cor­rect con­text may not be crit­i­cal if you have re­mained on the event loop thread through­out, it is crit­i­cal if you are going to in­voke sub­se­quent vert.x han­dlers, up­date ver­ti­cle state or any­thing sim­i­lar, so it’s a sen­si­ble gen­eral ap­proach.\u003c/p\u003e\u003ch2 id=\"further-reading\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#further-reading\"\u003e\u003c/a\u003eFurther Reading\u003c/h2\u003e\u003cp\u003eThe vert.x team them­selves offer an ex­cel­lent blog about the Vert.x event­loop, with ex­cel­lent ma­te­r­ial on the con­text, on \u003ca href=\"https://github.com/vietj/vertx-materials/blob/master/src/main/asciidoc/Demystifying_the_event_loop.adoc\"\u003eGithub\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"thanks\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#thanks\"\u003e\u003c/a\u003eThanks\u003c/h2\u003e\u003cp\u003eThanks very much to the vert.x core team for their clear github pages on the event­loop, and also to \u003ca href=\"https://twitter.com/alexlehm?lang=en\"\u003eAlexan­der Lehmann\u003c/a\u003e for his an­swers to my stu­pid and naive ques­tions on the \u003ca href=\"https://groups.google.com/forum/#!forum/vertx\"\u003eVert.x google group\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"context","tf":39},{"term":"thread","tf":18},{"term":"verticl","tf":17},{"term":"handler","tf":12},{"term":"run","tf":11},{"term":"eventloop","tf":11},{"term":"us","tf":10},{"term":"on","tf":10},{"term":"will","tf":8},{"term":"event","tf":8},{"term":"code","tf":8},{"term":"start","tf":7},{"term":"method","tf":7},{"term":"loop","tf":7},{"term":"asynchron","tf":6},{"term":"not","tf":6},{"term":"except","tf":6},{"term":"back","tf":6},{"term":"class","tf":5},{"term":"version","tf":5},{"term":"execut","tf":5},{"term":"correct","tf":5},{"term":"guarante","tf":4},{"term":"howev","tf":4},{"term":"mai","tf":4}]}],"numPages":9},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["category","guides","page","4"]},"buildId":"C_I4gGOFTI-4fY_eV8SrD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.8577696c4e17514af975.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_buildManifest.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_ssgManifest.js" async=""></script></body></html>