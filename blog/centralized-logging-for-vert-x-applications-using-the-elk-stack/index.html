<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Centralized logging for Vert.x applications using the ELK stack | Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.3958b262.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.3958b262.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.a818060475ab2f7b1a67.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-8bfcbdfdb799e5de2da7.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-post-main"><div class="blog-post-content"><h1>Centralized logging for Vert.x applications using the ELK stack</h1><p>This post entry de­scribes a so­lu­tion to achieve cen­tral­ized log­ging of Vert.x ap­pli­ca­tions using the <a href="https://www.elastic.co/webinars/introduction-elk-stack">ELK stack</a>, a set of tools in­clud­ing Logstash, Elas­tic­search, and Kibana that are well known to work to­gether seam­lessly.</p><h2 id="preamble"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#preamble"></a>Preamble</h2><p>This post was writ­ten in con­text of the project ti­tled “<a href="https://summerofcode.withgoogle.com/projects/#4858492141699072">De­vOps tool­ing for Vert.x ap­pli­ca­tions</a>”, one of the Vert.x projects tak­ing place dur­ing the 2016 edi­tion of <a href="https://summerofcode.withgoogle.com/about/">Google Sum­mer of Code</a>, a pro­gram that aims to bring to­gether stu­dents with open source or­ga­ni­za­tions, in order to help them to gain ex­po­sure to soft­ware de­vel­op­ment prac­tices and real-​world chal­lenges.</p><h2 id="introduction"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#introduction"></a>Introduction</h2><p>Cen­tral­ized log­ging is an im­por­tant topic while build­ing a Mi­croser­vices ar­chi­tec­ture and it is a step for­ward to adopt­ing the De­vOps cul­ture. Hav­ing an over­all so­lu­tion par­ti­tioned into a set of ser­vices dis­trib­uted across the In­ter­net can rep­re­sent a chal­lenge when try­ing to mon­i­tor the log out­put of each of them, hence, a tool that helps to ac­com­plish this re­sults very help­ful.</p><h2 id="overview"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#overview"></a>Overview</h2><p>As shown in the di­a­gram below, the gen­eral cen­tral­ized log­ging so­lu­tion com­prises two main el­e­ments: the ap­pli­ca­tion server, which runs our Vert.x ap­pli­ca­tion; and a sep­a­rate server, host­ing the ELK stack. Both el­e­ments are linked by File­beat, a highly con­fig­urable tool ca­pa­ble of ship­ping our ap­pli­ca­tion logs to the Logstash in­stance, i.e., our gate­way to the ELK stack.</p><img src="/_next/static/images/elk-overview-d637f3455278492bcb6820de578d066b.svg" alt="Overview of centralized logging with ELK"/><h2 id="app-logging-configuration"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#app-logging-configuration"></a>App logging configuration</h2><p>The ap­proach de­scribed here is based on a File­beat + Logstash con­fig­u­ra­tion, that means first we need to make sure our app logs to a file, whose records will be shipped to Logstash by File­beat. Luck­ily, Vert.x pro­vides the means to <a href="https://vertx.io/docs/vertx-core/java/#_logging">con­fig­ure</a> al­ter­na­tive log­ging frame­works (e.g., Log4j, Log4j2 and SLF4J) be­sides the de­fault JUL log­ging. How­ever, we can use File­beat in­de­pen­dently of the log­ging frame­work cho­sen.</p><h3 id="log4j-logging"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#log4j-logging"></a>Log4j Logging</h3><p>The demo that ac­com­pa­nies this post re­lies on Log4j2 as the log­ging frame­work. We in­structed Vert.x to use this frame­work fol­low­ing the <a href="https://vertx.io/docs/vertx-core/java/#_logging">guide­lines</a> and we made sure our log­ging calls are made asyn­chro­nous, since we don’t want them to block our ap­pli­ca­tion. For this pur­pose, we opted for the <code>AsyncAppender</code> and this was in­cluded in the Log4J con­fig­u­ra­tion to­gether with the log out­put for­mat de­scribed in a XML con­fig­u­ra­tion avail­able in the ap­pli­ca­tion’s <em>Re­source</em> folder.</p><pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Appenders</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">RollingFile</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;vertx_logs&quot;</span> <span class="hljs-attr">append</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">fileName</span>=<span class="hljs-string">&quot;/var/log/vertx.log&quot;</span> <span class="hljs-attr">filePattern</span>=<span class="hljs-string">&quot;/var/log/vertx/$${date:yyyy-MM}/vertx-%d{MM-dd-yyyy}-%i.log.gz&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PatternLayout</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;%d{ISO8601} %-5p %c:%L - %m%n&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RollingFile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Async</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;vertx_async&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;vertx_logs&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Async</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Appenders</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Loggers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">&quot;DEBUG&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AppenderRef</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;vertx_async&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Root</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Loggers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Configuration</span>&gt;</span>
</code></pre><h3 id="filebeat-configuration"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#filebeat-configuration"></a>Filebeat configuration</h3><p>Now that we have con­fig­ured the log out­put of our Vert.x ap­pli­ca­tion to be stored in the file sys­tem, we del­e­gate to File­beat the task of for­ward­ing the logs to the Logstash in­stance. File­beat can be con­fig­ured through a YAML file con­tain­ing the logs out­put lo­ca­tion and the pat­tern to in­ter­pret mul­ti­line logs (i.e., stack traces). Also, the Logstash out­put plug­in is con­fig­ured with the host lo­ca­tion and a se­cure con­nec­tion is en­forced using the cer­tifi­cate from the ma­chine host­ing Logstash. We set the <code>document_type</code> to the type of in­stance that this log be­longs to, which could later help us while in­dex­ing our logs in­side Elas­tic­search.</p><pre><code class="hljs language-yaml"><span class="hljs-attr">filebeat:</span>
  <span class="hljs-attr">prospectors:</span>
    <span class="hljs-bullet">-</span>
      <span class="hljs-attr">document_type:</span> <span class="hljs-string">trader_dashboard</span>
      <span class="hljs-attr">paths:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">/var/log/vertx.log</span>
      <span class="hljs-attr">multiline:</span>
        <span class="hljs-attr">pattern:</span> <span class="hljs-string">&quot;^[0-9]+&quot;</span>
        <span class="hljs-attr">negate:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">match:</span> <span class="hljs-string">after</span>
<span class="hljs-attr">output:</span>
  <span class="hljs-attr">logstash:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">hosts:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">elk:5044</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-number">15</span>
    <span class="hljs-attr">tls:</span>
      <span class="hljs-attr">insecure:</span> <span class="hljs-literal">false</span>
      <span class="hljs-attr">certificate_authoritites:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">/etc/pki/tls/certs/logstash-beats.crt</span>
</code></pre><h2 id="elk-configuration"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#elk-configuration"></a>ELK configuration</h2><p>To take fully ad­van­tage of the ELK stack with re­spect to Vert.x and our app logs, we need to con­fig­ure each of its in­di­vid­ual com­po­nents, namely Logstash, Elas­tic­search and Kibana.</p><h3 id="logstash"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#logstash"></a>Logstash</h3><p>Logstash is the com­po­nent within the ELK stack that is in charge of ag­gre­gat­ing the logs from each of the sources and for­ward­ing them to the Elas­tic­search in­stance.<br/>
<!-- -->Con­fig­ur­ing Logstash is straight­for­ward with the help of the spe­cific input and out­put plu­g­ins for Beats and Elas­tic­search, re­spec­tively.
In the pre­vi­ous sec­tion we men­tioned that File­beat could be eas­ily cou­pled with Logstash. Now, we see that this can be done by just spec­i­fy­ing <code>Beat</code> as the input plug­in and set the pa­ra­me­ters needed to be reached by our ship­pers (lis­ten­ing port, ssl key and cer­tifi­cate lo­ca­tion).</p><pre><code class="hljs language-bash">input {
  beats {
    port =&gt; 5044
    ssl =&gt; <span class="hljs-literal">true</span>
    ssl_certificate =&gt; <span class="hljs-string">&quot;/etc/pki/tls/certs/logstash-beats.crt&quot;</span>
    ssl_key =&gt; <span class="hljs-string">&quot;/etc/pki/tls/private/logstash-beats.key&quot;</span>
  }
}
</code></pre><p>Now that we are ready to re­ceive logs from the app, we can use Logstash fil­ter­ing ca­pa­bil­i­ties to spec­ify the for­mat of our logs and ex­tract the fields so they can be in­dexed more ef­fi­ciently by Elas­tic­search.<br/>
<!-- -->The <code>grok</code> fil­ter­ing plug­in comes handy in this sit­u­a­tion. This plug­in al­lows to de­clare the logs for­mat using pre­de­fined and cus­tomized pat­terns based in reg­u­lar ex­pres­sions al­low­ing to de­clare new fields from the in­for­ma­tion ex­tracted from each log line. In the fol­low­ing block, we in­struct Logstash to rec­og­nize our Log4j pat­tern in­side a <code>message</code> field, which con­tains the log mes­sage shipped by File­beat. After that, the <code>date</code> fil­ter­ing plug­in parses the <code>timestamp</code> field ex­tracted in the pre­vi­ous step and re­places it for the one set by File­beat after read­ing the log out­put file.</p><pre><code class="hljs language-bash">filter {
  grok {
    break_on_match =&gt; <span class="hljs-literal">false</span>
    match =&gt;  [ <span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;%{LOG4J}&quot;</span>]
  }
  date{
    match =&gt; [ <span class="hljs-string">&quot;timestamp_string&quot;</span>, <span class="hljs-string">&quot;ISO8601&quot;</span>]
    remove_field =&gt; [ <span class="hljs-string">&quot;timestamp_string&quot;</span> ]
  }
}
</code></pre><p>The Log4j pat­tern is not in­cluded within the Logstash con­fig­u­ra­tion, how­ever, we can spec­ify it using pre­de­fined data for­mats shipped with Logstash and adapt it to the spe­cific log for­mats re­quired in our ap­pli­ca­tion, as shown next.</p><pre><code class="hljs language-ruby"><span class="hljs-comment"># Pattern to match our Log4j format</span>
SPACING (?<span class="hljs-symbol">:</span>[\s]+)
LOGGER (?<span class="hljs-symbol">:</span>[a-zA-Z$_][a-zA-Z$_0-<span class="hljs-number">9</span>]*\.)*[a-zA-Z$_][a-zA-Z$_0-<span class="hljs-number">9</span>]*
LINE <span class="hljs-string">%{INT}</span>?
LOG4J <span class="hljs-string">%{TIMESTAMP_ISO8601:timestamp_string}</span> <span class="hljs-string">%{LOGLEVEL:log_level}</span><span class="hljs-string">%{SPACING}</span><span class="hljs-string">%{LOGGER:logger_name}</span><span class="hljs-symbol">:<span class="hljs-string">%{LINE:loc_line}</span></span> - <span class="hljs-string">%{JAVALOGMESSAGE:log_message}</span>
</code></pre><p>Fi­nally, we take a look at Logstash’s out­put con­fig­u­ra­tion. This sim­ply points to our elas­tic­search in­stance, in­structs it to pro­vide a list of all clus­ter nodes (<code>sniffing</code>), de­fines the name pat­tern for our in­dices, as­signs the doc­u­ment type ac­cord­ing to the meta­data com­ing from File­beat, and al­lows to de­fine a cus­tom index tem­plate for our data.</p><pre><code class="hljs language-puppet"><span class="hljs-keyword">output</span> {
  elasticsearch {
    <span class="hljs-attr">hosts</span> =&gt; [<span class="hljs-string">&quot;localhost&quot;</span>]
    <span class="hljs-attr">sniffing</span> =&gt; <span class="hljs-keyword">true</span>
    <span class="hljs-attr">manage_template</span> =&gt; <span class="hljs-keyword">true</span>
    <span class="hljs-attr">index</span> =&gt; <span class="hljs-string">&quot;%{[@metadata][beat]}-%{+YYYY.MM.dd}&quot;</span>
    <span class="hljs-attr">document_type</span> =&gt; <span class="hljs-string">&quot;%{[@metadata][type]}&quot;</span>
    <span class="hljs-attr">template</span> =&gt; <span class="hljs-string">&quot;/etc/filebeat/vertx_app_filebeat.json&quot;</span>
    <span class="hljs-attr">template_overwrite</span> =&gt; <span class="hljs-keyword">true</span>
  }
}
</code></pre><h3 id="elasticsearch"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#elasticsearch"></a>Elasticsearch</h3><p>Elas­tic­search is the cen­tral com­po­nent that en­ables the ef­fi­cient in­dex­ing and real-​time search ca­pa­bil­i­ties of the stack. To take the most ad­van­tage of Elas­tic­search, we can pro­vide an in­dex­ing tem­plate of our in­com­ing logs, which can help to op­ti­mize the data stor­age and match the queries is­sued by Kibana at a later point.<br/>
<!-- -->In the ex­am­ple below, we see an index tem­plate that would be ap­plied to any index match­ing the pat­tern <code>filebeat-*</code>. Ad­di­tion­ally, we de­clare our new log fields <code>type</code>, <code>host</code>, <code>log_level</code>, <code>logger_name</code>, and <code>log_message</code>, which are set as <code>not_analyzed</code> ex­cept for the last two that are set as <code>analyzed</code> al­low­ing to per­form queries based on reg­u­lar ex­pres­sions and not re­stricted to query the full text.</p><pre><code class="hljs language-json">{
  <span class="hljs-attr">&quot;mappings&quot;</span>: {
    <span class="hljs-attr">&quot;_default_&quot;</span>: {
      <span class="hljs-attr">&quot;_all&quot;</span>: {
        <span class="hljs-attr">&quot;enabled&quot;</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">&quot;norms&quot;</span>: {
          <span class="hljs-attr">&quot;enabled&quot;</span>: <span class="hljs-literal">false</span>
        }
      },
      <span class="hljs-attr">&quot;dynamic_templates&quot;</span>: [
        {
          <span class="hljs-attr">&quot;template1&quot;</span>: {
            <span class="hljs-attr">&quot;mapping&quot;</span>: {
              <span class="hljs-attr">&quot;doc_values&quot;</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">&quot;ignore_above&quot;</span>: <span class="hljs-number">1024</span>,
              <span class="hljs-attr">&quot;index&quot;</span>: <span class="hljs-string">&quot;not_analyzed&quot;</span>,
              <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;{dynamic_type}&quot;</span>
            },
            <span class="hljs-attr">&quot;match&quot;</span>: <span class="hljs-string">&quot;*&quot;</span>
          }
        }
      ],
      <span class="hljs-attr">&quot;properties&quot;</span>: {
        <span class="hljs-attr">&quot;@timestamp&quot;</span>: {
          <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;date&quot;</span>
        },
        <span class="hljs-attr">&quot;offset&quot;</span>: {
          <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;long&quot;</span>,
          <span class="hljs-attr">&quot;doc_values&quot;</span>: <span class="hljs-string">&quot;true&quot;</span>
        },
        <span class="hljs-attr">&quot;type&quot;</span>: { <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-attr">&quot;index&quot;</span>: <span class="hljs-string">&quot;not_analyzed&quot;</span> },
        <span class="hljs-attr">&quot;host&quot;</span>: { <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-attr">&quot;index&quot;</span>: <span class="hljs-string">&quot;not_analyzed&quot;</span> },
        <span class="hljs-attr">&quot;log_level&quot;</span>: { <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-attr">&quot;index&quot;</span>: <span class="hljs-string">&quot;not_analyzed&quot;</span> },
        <span class="hljs-attr">&quot;logger_name&quot;</span>: { <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-attr">&quot;index&quot;</span>: <span class="hljs-string">&quot;analyzed&quot;</span> },
        <span class="hljs-attr">&quot;log_message&quot;</span>: { <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-attr">&quot;index&quot;</span>: <span class="hljs-string">&quot;analyzed&quot;</span> }
      }
    }
  },
  <span class="hljs-attr">&quot;settings&quot;</span>: {
    <span class="hljs-attr">&quot;index.refresh_interval&quot;</span>: <span class="hljs-string">&quot;5s&quot;</span>
  },
  <span class="hljs-attr">&quot;template&quot;</span>: <span class="hljs-string">&quot;filebeat-*&quot;</span>
}
</code></pre><h3 id="kibana"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#kibana"></a>Kibana</h3><p>Al­though we could fetch all our logs from Elas­tic­search through its API, Kibana is a pow­er­ful tool that al­lows a more friendly query and vi­su­al­iza­tion.
Be­sides the op­tion to query our data through the avail­able in­dexed field names and search boxes al­low­ing typ­ing spe­cific queries, Kibana al­lows cre­at­ing our own <em>Vi­su­al­iza­tions</em> and <em>Dash­boards</em>. Com­bined, they rep­re­sent a pow­er­ful way to dis­play data and gain in­sight in a cus­tomized man­ner.
The ac­com­pa­nied demo ships with a cou­ple of sam­ple dash­boards and vi­su­al­iza­tions that take ad­van­tage of the log fields that we spec­i­fied in our index tem­plate and throw valu­able in­sight. This in­cludes: vi­su­al­iz­ing the num­ber of log mes­sages re­ceived by ELK, ob­serve the pro­por­tion of mes­sages that each log source pro­duces, and di­rectly find out the sources of error logs.</p><img src="/_next/static/images/kibana-dashboard-3c28c8dda8615298263ae606fcec7d70.png" alt="Kibana Dashboard" width="550"/><h2 id="log-shipping-challenge"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#log-shipping-challenge"></a>Log shipping challenge</h2><p>The so­lu­tion pre­sented here re­lied on File­beat to ship log data to Logstash. How­ever, if you are fa­mil­iar with the Log4j frame­work you may be aware that there ex­ists a <em>Sock­e­tAp­pen­der</em> that al­lows to write log events di­rectly to a re­mote server using a TCP con­nec­tion. Al­though in­clud­ing the File­beat + Logstash com­bi­na­tion  may sound an un­nec­es­sary over­head to the log­ging pipeline, they pro­vide a num­ber of ben­e­fits in com­par­i­son to the Log4j socket al­ter­na­tive:</p><ul><li>The Sock­e­tAp­pen­der re­lies on the spe­cific se­ri­al­iza­tion of Log4j’s <em>Lo­gEvent</em> ob­jects, which is no an in­ter­change­able for­mat as JSON, which is used by the Beats so­lu­tion. Al­though there are <a href="https://github.com/majikthys/log4j2-logstash-jsonevent-layout">at­tempts</a> to out­put the logs in a JSON for­mat for Logstash, it doesn’t sup­port mul­ti­line logs, which re­sults in mes­sages being split into dif­fer­ent events by Logstash. On the other hand, there is no of­fi­cial nor sta­ble <a href="https://www.elastic.co/guide/en/logstash/current/input-plugins.html">input plugin</a> for Log4j ver­sion 2.</li><li>While en­abling Log4j’s async log­ging mode in an ap­pli­ca­tion del­e­gates log­ging op­er­a­tions to sep­a­rate threads, given their co­ex­is­tence in the same JVM there is still the risk of data loss in case of a sud­den JVM ter­mi­na­tion with­out proper log chan­nel clos­ing.</li><li>File­beat is a data ship­per de­signed to deal with many con­straints that arise in dis­trib­uted en­vi­ron­ments in a re­li­able man­ner, there­fore it pro­vides op­tions to tai­lor and scale this op­er­a­tion to our needs: the pos­si­bil­ity to load bal­ance be­tween mul­ti­ple Logstash in­stances, spec­ify the num­ber of si­mul­ta­ne­ous File­beat work­ers that ship log files, and spec­ify a com­pres­sion level in order to re­duce the con­sumed band­width. Be­sides that, logs can be shipped in spe­cific batch sizes, with max­i­mum amount of re­tries, and spec­i­fy­ing a con­nec­tion time­out.</li><li>Lastly, al­though File­beat can for­ward logs di­rectly to Elas­tic­search, using Logstash as an in­ter­me­di­ary of­fers the pos­si­bil­ity to col­lect logs from di­verse sources (e.g., sys­tem met­rics).</li></ul><h2 id="demo"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#demo"></a>Demo</h2><p>This post is ac­com­pa­nied by a demo based on the Vert.x Mi­croser­vices <a href="http://vertx-lab.dynamis-technologies.com/">work­shop</a>, where each of them is shipped in a Docker con­tainer sim­u­lat­ing a dis­trib­uted sys­tem com­posed of in­de­pen­dent ad­dress­able nodes.<br/>
<!-- -->Also, the ELK stack is pro­vi­sioned using a pre­con­fig­ured Docker image by <a href="https://github.com/spujadas">Sébastien Pu­jadas</a>.</p><p>Fol­low­ing the guide­lines in this post, this demo con­fig­ures each of the Mi­croser­vices of the work­shop, sets up a File­beat process on each of them to ship the logs to a cen­tral con­tainer host­ing the ELK stack.</p><h3 id="installation"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#installation"></a>Installation</h3><p>In order to run this demo, it is nec­es­sary to have Docker in­stalled, then pro­ceed with:</p><ul><li>Cloning or down­load­ing the demo <a href="https://github.com/ricardohmon/vertx-elk">repos­i­tory</a>.</li><li>Sep­a­rately, ob­tain­ing the source code of the <a href="https://github.com/ricardohmon/vertx-microservices-workshop/tree/elk-demo">branch</a> of the Mi­croser­vices work­shop adapted for this demo.</li></ul><h3 id="building-the-example"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#building-the-example"></a>Building the example</h3><p>The Docker im­ages be­long­ing to the Vert.x Mi­croser­vices work­shop need to be built sep­a­rately to this project be­fore this project can be launched.</p><h3 id="building-the-vertx-microservices-workshop-docker-images"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#building-the-vertx-microservices-workshop-docker-images"></a>Building the Vert.x Microservices workshop Docker images.</h3><p>Build the <em>root</em> project and the <em>Trader Dash­board</em> fol­lowed by each of the mod­ules con­tained in the so­lu­tion folder. Issue the fol­low­ing com­mands for this:</p><pre><code class="hljs language-bash">mvn clean install
<span class="hljs-built_in">cd</span> trader-dashboard
mvn package docker:build
<span class="hljs-built_in">cd</span> ../solution/audit-service
mvn package docker:build
<span class="hljs-built_in">cd</span> ../compulsive-traders
mvn package docker:build
<span class="hljs-built_in">cd</span> ../portfolio-service
mvn package docker:build
<span class="hljs-built_in">cd</span> ../quote-generator/
mvn package docker:build
</code></pre><h3 id="running-the-example"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#running-the-example"></a>Running the example</h3><p>After build­ing the pre­vi­ous im­ages, build and run the ex­am­ple in <code>vertx-elk</code> using the fol­low­ing com­mand:</p><pre><code class="hljs language-ebnf"><span class="hljs-attribute">docker-compose up</span>
</code></pre><h3 id="the-demo"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#the-demo"></a>The demo</h3><p>You can watch the demo in ac­tion in the fol­low­ing screen­cast:</p><div class="youtube-embed"><iframe src="https://www.youtube.com/embed/8P-MgXSujes" frameBorder="0" allowfullscreen=""></iframe></div><h2 id="conclusion"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#conclusion"></a>Conclusion</h2><p>The ELK stack is a pow­er­ful set of tools that ease the ag­gre­ga­tion of logs com­ing from dis­trib­uted ser­vices into a cen­tral server. Its main pil­lar, Elas­tic­search, pro­vides the in­dex­ing and search ca­pa­bil­i­ties of our log data. Also, it is ac­com­pa­nied by the con­ve­nient input/out­put com­po­nents: Logstash, which can be flex­i­bly con­fig­ured to ac­cept dif­fer­ent data sources; and Kibana, which can be cus­tomized to present the in­for­ma­tion in the most con­ve­nient way.</p><p>Logstash has been de­signed to work seam­lessly with File­beat, the log ship­per which rep­re­sents a ro­bust so­lu­tion that can be adapted to our ap­pli­ca­tions with­out hav­ing to make <em>sig­nif­i­cant</em> changes to our ar­chi­tec­ture. In ad­di­tion, Logstash can ac­cept var­ied types of sources, fil­ter the data, and process it be­fore de­liv­er­ing to Elas­tic­search. This flex­i­bil­ity comes with the price of hav­ing extra el­e­ments in our log ag­gre­ga­tion pipeline, which can rep­re­sent an in­crease of pro­cess­ing over­head or a point-​of-failure. This ad­di­tional over­head could be avoided if an ap­pli­ca­tion would be ca­pa­ble of de­liv­er­ing its log out­put di­rectly to Elas­tic­search.</p><p>Happy log­ging!</p></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/ricardohmon.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/ricardohmon" target="_blank" rel="noopener noreferrer">Ricardo Hernandez</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->8 September 2016</div>in <a class="blog-post-sidebar-category" href="/blog/category/guides/">guides</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->11 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=Centralized%20logging%20for%20Vert.x%20applications%20using%20the%20ELK%20stack&amp;url=https%3A%2F%2Fvertx-web-site.github.io%2Fblog%2Fcentralized-logging-for-vert-x-applications-using-the-elk-stack&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx-web-site.github.io%2Fblog%2Fcentralized-logging-for-vert-x-applications-using-the-elk-stack" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx-web-site.github.io%2Fblog%2Fcentralized-logging-for-vert-x-applications-using-the-elk-stack" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">12 September 2016</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/vert-x-3-3-3-is-released/">Vert.x 3.3.3 is released !</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">We have just released Vert.x 3.3.3, a bug fix release of Vert.x 3.3.x.</p><span class="read-more-link"><a href="/blog/vert-x-3-3-3-is-released/">Read more</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">1 September 2016</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/vert-x-blueprint-tutorials/">Vert.x Blueprint Tutorials</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/sczyh30.png?size=50"/><a href="https://github.com/sczyh30" target="_blank" rel="noopener noreferrer">Eric Zhao</a></li></ul></span><p class="blog-entry-summary">The Vert.x Blueprint project aims to provide guidelines to Vert.x users to implement various applications such as message-based applications and microservices.</p><span class="read-more-link"><a href="/blog/vert-x-blueprint-tutorials/">Read more</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">7 December 2016</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/getting-started-with-new-fabric8-vert-x-maven-plugin/">Getting started with new fabric8 Vert.x Maven Plugin</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/kameshsampath.png?size=50"/><a href="https://github.com/kameshsampath" target="_blank" rel="noopener noreferrer">Kamesh Sampath</a></li></ul></span><p class="blog-entry-summary">The all new fabric8 Vert.x Maven Plugin allows you to setup, package, run, start, stop and redeploy easily with a very little configuration resulting in a less verbose pom.xml.</p><span class="read-more-link"><a href="/blog/getting-started-with-new-fabric8-vert-x-maven-plugin/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">28 September 2016</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/vert-x-featuring-continuous-delivery-with-jenkins-and-ansible/">Vert.x featuring Continuous Delivery with Jenkins and Ansible</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/ricardohmon.png?size=50"/><a href="https://github.com/ricardohmon" target="_blank" rel="noopener noreferrer">Ricardo Hernandez</a></li></ul></span><p class="blog-entry-summary">This blog entry describes an approach to adopt Continuous Delivery for Vert.x applications using Jenkins and Ansible by taking advantage of the Jenkins Job DSL and Ansible plugins.</p><span class="read-more-link"><a href="/blog/vert-x-featuring-continuous-delivery-with-jenkins-and-ansible/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">3 August 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/unit-and-integration-tests/">Unit and Integration Tests</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Let’s refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didn’t test the API.</p><span class="read-more-link"><a href="/blog/unit-and-integration-tests/">Read more</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"filename":"2016-09-08-centralized-logging-for-vert-x-applications-using-the-elk-stack.mdx","date":"2016-09-08","slug":"centralized-logging-for-vert-x-applications-using-the-elk-stack","meta":{"title":"Centralized logging for Vert.x applications using the ELK stack","category":"guides","authors":[{"name":"Ricardo Hernandez","github_id":"ricardohmon"}],"summary":"This post entry describes a solution to achieve centralized logging of Vert.x applications using the ELK stack (Logstash, Elasticsearch, and Kibana)."},"tfIdfTerms":[{"term":"log","tf":56},{"term":"logstash","tf":26},{"term":"filebeat","tf":18},{"term":"configur","tf":17},{"term":"elasticsearch","tf":15},{"term":"us","tf":13},{"term":"applic","tf":12},{"term":"output","tf":11},{"term":"ship","tf":11},{"term":"data","tf":11},{"term":"elk","tf":10},{"term":"stack","tf":10},{"term":"log4j","tf":10},{"term":"demo","tf":10},{"term":"index","tf":10},{"term":"set","tf":9},{"term":"sourc","tf":8},{"term":"allow","tf":8},{"term":"solut","tf":7},{"term":"kibana","tf":7},{"term":"follow","tf":7},{"term":"format","tf":7},{"term":"plugin","tf":7},{"term":"specifi","tf":7},{"term":"field","tf":7}],"readingTime":{"text":"11 min read","minutes":10.72,"time":643200,"words":2144},"relatedPosts":[59,61,84]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["centralized-logging-for-vert-x-applications-using-the-elk-stack"]},"buildId":"EVc1Y2o3yRTsTMpG624UR","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.a818060475ab2f7b1a67.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-8bfcbdfdb799e5de2da7.js" async=""></script><script src="/_next/static/EVc1Y2o3yRTsTMpG624UR/_buildManifest.js" async=""></script><script src="/_next/static/EVc1Y2o3yRTsTMpG624UR/_ssgManifest.js" async=""></script></body></html>