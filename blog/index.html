<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.176b8cb6.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.176b8cb6.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.8577696c4e17514af975.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-entries"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">28 July 2020</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/eclipse-vert-x-4-beta-1-released/">Eclipse Vert.x 4 beta 1 released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">We are extremely pleased to announce the first 4.0 beta release of Eclipse Vert.x. Highlights of this release are the improved JDBC Client API, event loop affinity, and much more.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-4-beta-1-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">21 July 2020</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/eclipse-vert-x-3-9-2-released/">Eclipse Vert.x 3.9.2 released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">The new Eclipse Vert.x version 3.9.2 has just been released. It includes a few bug fixes, a new reactive DB2 client, and reactive MySQL Client domain socket support.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-3-9-2-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">10 June 2020</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/eclipse-vert-x-4-milestone-5-released/">Eclipse Vert.x 4 milestone 5 released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">We are extremely pleased to announce the fifth 4.0 milestone release of Eclipse Vert.x. This release aims to provide a reliable distribution of the current development of Vert.x 4.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-4-milestone-5-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">22 May 2020</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/eclipse-vert-x-3-9-1-released/">Eclipse Vert.x 3.9.1 released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">The new version comes with many enhancements including an SQL client for DB2 and out-of-the-box support for HTTP/2 on JDK 8.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-3-9-1-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">2 April 2020</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/eclipse-vert-x-3-9-0-released/">Eclipse Vert.x 3.9.0 released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">New features include fluent queries in SQL clients, a new Redis client, an updated Kafka client, an improved Future API, and many more things.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-3-9-0-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">16 March 2020</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/easy-sso-for-vert-x-with-keycloak/">Easy SSO for Vert.x with Keycloak</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/thomasdarimont.png?size=50"/><a href="https://github.com/thomasdarimont" target="_blank" rel="noopener noreferrer">Thomas Darimont</a></li></ul></span><p class="blog-entry-summary">In this blog post, you&#x27;ll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x.</p><span class="read-more-link"><a href="/blog/easy-sso-for-vert-x-with-keycloak/">Read more</a></span></div></div><div class="pagination"><div class="pagination-page disabled">«</div><div class="pagination-page active"><a href="/blog/">1</a></div><div class="pagination-page"><a href="/blog/page/2/">2</a></div><div class="pagination-page"><a href="/blog/page/3/">3</a></div><div class="pagination-page"><a href="/blog/page/4/">4</a></div><div class="pagination-page"><a href="/blog/page/5/">5</a></div><div class="pagination-page disabled">…</div><div class="pagination-page"><a href="/blog/page/16/">16</a></div><div class="pagination-page"><a href="/blog/page/2/">»</a></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"posts":[{"filename":"blog/2020-07-28-eclipse-vert-x-4-beta-1-released.mdx","date":"2020-07-28","slug":"eclipse-vert-x-4-beta-1-released","meta":{"title":"Eclipse Vert.x 4 beta 1 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We are extremely pleased to announce the first 4.0 beta release of Eclipse Vert.x. Highlights of this release are the improved JDBC Client API, event loop affinity, and much more."},"readingTime":{"text":"4 min read","minutes":3.73,"time":223800,"words":746},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are ex\\xADtremely pleased to an\\xADnounce the first 4.0 beta re\\xADlease of Eclipse Vert.x .\"), mdx(\"p\", null, \"Vert.x 4 is the evo\\xADlu\\xADtion of the Vert.x 3.x se\\xADries that will bring key fea\\xADtures to Vert.x.\"), mdx(\"h2\", {\n    \"id\": \"sql-client-metrics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sql-client-metrics\"\n  })), \"SQL client metrics\"), mdx(\"p\", null, \"Vert.x 4 sup\\xADports met\\xADrics for clients which are crit\\xADi\\xADcal for mon\\xADi\\xADtor\\xADing ap\\xADpli\\xADca\\xADtion per\\xADfor\\xADmance.\"), mdx(\"p\", null, \"While the ca\\xADpa\\xADbil\\xADi\\xADties are generic and can apply to any client, each client needs a spe\\xADcific in\\xADte\\xADgra\\xADtion.\\nOb\\xADvi\\xADously the SQL client was the per\\xADfect can\\xADdi\\xADdate in mind for this new fea\\xADture.\"), mdx(\"p\", null, \"Mi\\xADcrom\\xADe\\xADter met\\xADrics will re\\xADport these met\\xADrics as\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"vertx_sql_queue_pend\\xADing: num\\xADber of re\\xADquests sched\\xADuled but not yet ex\\xADe\\xADcuted\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"vertx_sql_queue_time: time spent in queue be\\xADfore pro\\xADcess\\xADing\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"vertx_sql_pro\\xADcess\\xADing_pend\\xADing: num\\xADber of re\\xADquest being processed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"vertx_sql_pro\\xADcess\\xADing_time: re\\xADquests la\\xADten\\xADcies\")), mdx(\"h2\", {\n    \"id\": \"a-better-api-for-jdbc-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#a-better-api-for-jdbc-client\"\n  })), \"A better API for JDBC Client\"), mdx(\"p\", null, \"Our JDBC client will not go away in Vert.x 4, we do rec\\xADkn\\xADog\\xADnize that JDBC is im\\xADpor\\xADtant be\\xADcause it sup\\xADports\\nthe most im\\xADpor\\xADtant num\\xADber of data\\xADbases in the ecosys\\xADtem.\"), mdx(\"p\", null, \"When we de\\xADsigned the SQL client API we strived a lot to come with the sim\\xADplest and most pow\\xADer\\xADful API\\nfor asyn\\xADcho\\xADnous SQL client.\"), mdx(\"p\", null, \"This re\\xADlease brings an im\\xADple\\xADmen\\xADta\\xADtion of the SQL client API for JDBC.\"), mdx(\"p\", null, \"The 3.x API se\\xADries will con\\xADtinue to be sup\\xADported for the life\\xADtime of Vert.x 4.\"), mdx(\"h2\", {\n    \"id\": \"event-loop-affinity\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#event-loop-affinity\"\n  })), \"Event loop affinity\"), mdx(\"p\", null, \"Using Vert.x from a non Vert.x thread is a very com\\xADmon use case we have been sup\\xADport\\xADing since Vert.x 3.\"), mdx(\"p\", null, \"When you use a Vert.x re\\xADsource (like a client) from a non Vert.x thread, Vert.x 3 ob\\xADtains a new event-\\u200Bloop\\nevery\\xADtime it hap\\xADpens.\"), mdx(\"p\", null, \"In Vert.x 4 we de\\xADcided to pin the first event loop to the non Vert.x thread. The goal is to pre\\xADvent\\nsome data races and also makes rea\\xADson\\xADning about this eas\\xADier.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-ini\"\n  }), \"Vertx \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"vertx\"), \" = Vertx.vertx()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n\\nfor (int \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"i\"), \" = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";i \u003c 4;i++) {\"), \"\\n  String \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"msg\"), \" = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Message \\\"\"), \" + i\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n  vertx.runOnContext(v -\u003e {\\n    System.out.println(i)\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n  })\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n}\\n\")), mdx(\"p\", null, \"Run\\xADning this with Vert.x 3 will print the 4 lines but they are likely to not be re\\xADordered, this code could\\nalso be run\\xADning in par\\xADal\\xADlel (that is two dif\\xADfer\\xADent threads run\\xADning at the same time on a dif\\xADfer\\xADent CPU core).\"), mdx(\"p\", null, \"Run\\xADning this with Vert.x 4 will print the 4 lines in the cor\\xADrect order and al\\xADways with the same thread. This\\nelim\\xADi\\xADnates some po\\xADten\\xADtial data races and also al\\xADlows to rea\\xADson about what will hap\\xADpen at run\\xADtime.\"), mdx(\"h2\", {\n    \"id\": \"vertx-json-schema-supports-draft2019-09\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-json-schema-supports-draft2019-09\"\n  })), \"Vert.x Json Schema supports Draft2019-09\"), mdx(\"p\", null, \"The new \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/eclipse-vertx/vertx-json-schema\"\n  }), \"vertx-\\u200Bjson-schema\"), \" mod\\xADule now sup\\xADports the lat\\xADest Json Schema \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://json-schema.org/specification.html\"\n  }), \"Draft2019-09 spec\"), \". You can fi\\xADnally play with the new \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"$recursiveRef\"), \" to build ex\\xADten\\xADsi\\xADble re\\xADcur\\xADsive schemas and with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"unevaluatedProperties\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"unevaluatedItems\"), \" to de\\xADfine strict schemas. Look at the mod\\xADule \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx-web-site.github.io/docs/vertx-json-schema/java/\"\n  }), \"doc\\xADu\\xADmen\\xADta\\xADtion\"), \" to start using it.\"), mdx(\"h2\", {\n    \"id\": \"clustering-configuration-simplified\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#clustering-configuration-simplified\"\n  })), \"Clustering configuration simplified\"), mdx(\"p\", null, \"In Vert.x 3, clus\\xADter host was set to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost\"), \" by de\\xADfault in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"EventBusOptions\"), \".\\nCon\\xADse\\xADquently, a lot of new users were con\\xADfused about why event bus con\\xADsumers and pro\\xADduc\\xADers were not able to com\\xADmu\\xADni\\xADcate even if the un\\xADder\\xADly\\xADing clus\\xADter man\\xADager was con\\xADfig\\xADured cor\\xADrectly.\"), mdx(\"p\", null, \"Also, when using the CLI tool or the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Launcher\"), \" class, Vert.x tried to find a host among avail\\xADable net\\xADwork in\\xADter\\xADfaces if none was pro\\xADvided with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-cluster-host\"), \" ar\\xADgu\\xADment.\\nSome\\xADtimes, the host cho\\xADsen by the clus\\xADter man\\xADager and Vert.x were not the same.\"), mdx(\"p\", null, \"Start\\xADing with Vert.x 4 beta 1, the clus\\xADter host de\\xADfault has been re\\xADmoved and, if users don\\u2019t pro\\xADvide any, Vert.x will ask the clus\\xADter man\\xADager which one it picked be\\xADfore try\\xADing to find one it\\xADself.\\nThis ap\\xADplies whether Vert.x is em\\xADbed\\xADded in any Java pro\\xADgram or started with the CLI tool or with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Launcher\"), \" class.\"), mdx(\"p\", null, \"So far, only \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-hazelcast\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-infinispan\"), \" clus\\xADter man\\xADagers can pro\\xADvide Vert.x with a clus\\xADter host.\\nWhen other clus\\xADter man\\xADagers are used, Vert.x will choose one it\\xADself.\"), mdx(\"h2\", {\n    \"id\": \"cluster-manager-upgrades\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#cluster-manager-upgrades\"\n  })), \"Cluster manager upgrades\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-hazelcast\"), \" has been up\\xADgraded to Hazel\\xADcast 4.0.2 and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-infinispan\"), \" to In\\xADfin\\xADis\\xADpan 11.0.1.Final.\"), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"This is the Beta1 re\\xADlase of Vert.x 4, you can of course ex\\xADpect more betas as we get feed\\xADback from the com\\xADmu\\xADnity and fix is\\xADsues that we failed to catch be\\xADfore.\"), mdx(\"p\", null, \"You can also read the mile\\xADstone an\\xADnounces to know more about the over\\xADral changes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-5-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-5-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-4-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-4-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-3-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-3-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-2-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-2-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-1-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-1-\\u200Breleased\"))), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\n  }), \"dep\\xADre\\xADca\\xADtions and break\\xADing changes\"), \"\\ncan be found on the wiki.\"), mdx(\"p\", null, \"For this re\\xADlease there are no Docker im\\xADages.\"), mdx(\"p\", null, \"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/\"\n  }), \"Maven Cen\\xADtral\"), \".\"), mdx(\"p\", null, \"You can boot\\xADstrap a Vert.x 4.0.0.Beta1 project using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://start.vertx.io\"\n  }), \"https://start.vertx.io\"), \".\"), mdx(\"p\", null, \"The doc\\xADu\\xADmen\\xADta\\xADtion has been de\\xADployed on this pre\\xADview web-\\u200Bsite \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx-web-site.github.io/docs/\"\n  }), \"https://vertx-\\u200Bweb-site.github.io/docs/\")), mdx(\"p\", null, \"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/community\"\n  }), \"chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are ex­tremely pleased to an­nounce the first 4.0 beta re­lease of Eclipse Vert.x .\u003c/p\u003e\u003cp\u003eVert.x 4 is the evo­lu­tion of the Vert.x 3.x se­ries that will bring key fea­tures to Vert.x.\u003c/p\u003e\u003ch2 id=\"sql-client-metrics\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sql-client-metrics\"\u003e\u003c/a\u003eSQL client metrics\u003c/h2\u003e\u003cp\u003eVert.x 4 sup­ports met­rics for clients which are crit­i­cal for mon­i­tor­ing ap­pli­ca­tion per­for­mance.\u003c/p\u003e\u003cp\u003eWhile the ca­pa­bil­i­ties are generic and can apply to any client, each client needs a spe­cific in­te­gra­tion.\nOb­vi­ously the SQL client was the per­fect can­di­date in mind for this new fea­ture.\u003c/p\u003e\u003cp\u003eMi­crom­e­ter met­rics will re­port these met­rics as\u003c/p\u003e\u003cul\u003e\u003cli\u003evertx_sql_queue_pend­ing: num­ber of re­quests sched­uled but not yet ex­e­cuted\u003c/li\u003e\u003cli\u003evertx_sql_queue_time: time spent in queue be­fore pro­cess­ing\u003c/li\u003e\u003cli\u003evertx_sql_pro­cess­ing_pend­ing: num­ber of re­quest being processed\u003c/li\u003e\u003cli\u003evertx_sql_pro­cess­ing_time: re­quests la­ten­cies\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"a-better-api-for-jdbc-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#a-better-api-for-jdbc-client\"\u003e\u003c/a\u003eA better API for JDBC Client\u003c/h2\u003e\u003cp\u003eOur JDBC client will not go away in Vert.x 4, we do rec­kn­og­nize that JDBC is im­por­tant be­cause it sup­ports\nthe most im­por­tant num­ber of data­bases in the ecosys­tem.\u003c/p\u003e\u003cp\u003eWhen we de­signed the SQL client API we strived a lot to come with the sim­plest and most pow­er­ful API\nfor asyn­cho­nous SQL client.\u003c/p\u003e\u003cp\u003eThis re­lease brings an im­ple­men­ta­tion of the SQL client API for JDBC.\u003c/p\u003e\u003cp\u003eThe 3.x API se­ries will con­tinue to be sup­ported for the life­time of Vert.x 4.\u003c/p\u003e\u003ch2 id=\"event-loop-affinity\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#event-loop-affinity\"\u003e\u003c/a\u003eEvent loop affinity\u003c/h2\u003e\u003cp\u003eUsing Vert.x from a non Vert.x thread is a very com­mon use case we have been sup­port­ing since Vert.x 3.\u003c/p\u003e\u003cp\u003eWhen you use a Vert.x re­source (like a client) from a non Vert.x thread, Vert.x 3 ob­tains a new event-​loop\nevery­time it hap­pens.\u003c/p\u003e\u003cp\u003eIn Vert.x 4 we de­cided to pin the first event loop to the non Vert.x thread. The goal is to pre­vent\nsome data races and also makes rea­son­ning about this eas­ier.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-ini\"\u003eVertx \u003cspan class=\"hljs-attr\"\u003evertx\u003c/span\u003e = Vertx.vertx()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n\nfor (int \u003cspan class=\"hljs-attr\"\u003ei\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e;i \u0026lt; 4;i++) {\u003c/span\u003e\n  String \u003cspan class=\"hljs-attr\"\u003emsg\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\u0026quot;Message \u0026quot;\u003c/span\u003e + i\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n  vertx.runOnContext(v -\u0026gt; {\n    System.out.println(i)\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n  })\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRun­ning this with Vert.x 3 will print the 4 lines but they are likely to not be re­ordered, this code could\nalso be run­ning in par­al­lel (that is two dif­fer­ent threads run­ning at the same time on a dif­fer­ent CPU core).\u003c/p\u003e\u003cp\u003eRun­ning this with Vert.x 4 will print the 4 lines in the cor­rect order and al­ways with the same thread. This\nelim­i­nates some po­ten­tial data races and also al­lows to rea­son about what will hap­pen at run­time.\u003c/p\u003e\u003ch2 id=\"vertx-json-schema-supports-draft2019-09\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-json-schema-supports-draft2019-09\"\u003e\u003c/a\u003eVert.x Json Schema supports Draft2019-09\u003c/h2\u003e\u003cp\u003eThe new \u003ca href=\"https://github.com/eclipse-vertx/vertx-json-schema\"\u003evertx-​json-schema\u003c/a\u003e mod­ule now sup­ports the lat­est Json Schema \u003ca href=\"http://json-schema.org/specification.html\"\u003eDraft2019-09 spec\u003c/a\u003e. You can fi­nally play with the new \u003ccode\u003e$recursiveRef\u003c/code\u003e to build ex­ten­si­ble re­cur­sive schemas and with \u003ccode\u003eunevaluatedProperties\u003c/code\u003e/\u003ccode\u003eunevaluatedItems\u003c/code\u003e to de­fine strict schemas. Look at the mod­ule \u003ca href=\"https://vertx-web-site.github.io/docs/vertx-json-schema/java/\"\u003edoc­u­men­ta­tion\u003c/a\u003e to start using it.\u003c/p\u003e\u003ch2 id=\"clustering-configuration-simplified\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#clustering-configuration-simplified\"\u003e\u003c/a\u003eClustering configuration simplified\u003c/h2\u003e\u003cp\u003eIn Vert.x 3, clus­ter host was set to \u003ccode\u003elocalhost\u003c/code\u003e by de­fault in \u003ccode\u003eEventBusOptions\u003c/code\u003e.\nCon­se­quently, a lot of new users were con­fused about why event bus con­sumers and pro­duc­ers were not able to com­mu­ni­cate even if the un­der­ly­ing clus­ter man­ager was con­fig­ured cor­rectly.\u003c/p\u003e\u003cp\u003eAlso, when using the CLI tool or the \u003ccode\u003eLauncher\u003c/code\u003e class, Vert.x tried to find a host among avail­able net­work in­ter­faces if none was pro­vided with the \u003ccode\u003e-cluster-host\u003c/code\u003e ar­gu­ment.\nSome­times, the host cho­sen by the clus­ter man­ager and Vert.x were not the same.\u003c/p\u003e\u003cp\u003eStart­ing with Vert.x 4 beta 1, the clus­ter host de­fault has been re­moved and, if users don’t pro­vide any, Vert.x will ask the clus­ter man­ager which one it picked be­fore try­ing to find one it­self.\nThis ap­plies whether Vert.x is em­bed­ded in any Java pro­gram or started with the CLI tool or with the \u003ccode\u003eLauncher\u003c/code\u003e class.\u003c/p\u003e\u003cp\u003eSo far, only \u003ccode\u003evertx-hazelcast\u003c/code\u003e and \u003ccode\u003evertx-infinispan\u003c/code\u003e clus­ter man­agers can pro­vide Vert.x with a clus­ter host.\nWhen other clus­ter man­agers are used, Vert.x will choose one it­self.\u003c/p\u003e\u003ch2 id=\"cluster-manager-upgrades\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#cluster-manager-upgrades\"\u003e\u003c/a\u003eCluster manager upgrades\u003c/h2\u003e\u003cp\u003e\u003ccode\u003evertx-hazelcast\u003c/code\u003e has been up­graded to Hazel­cast 4.0.2 and \u003ccode\u003evertx-infinispan\u003c/code\u003e to In­fin­is­pan 11.0.1.Final.\u003c/p\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThis is the Beta1 re­lase of Vert.x 4, you can of course ex­pect more betas as we get feed­back from the com­mu­nity and fix is­sues that we failed to catch be­fore.\u003c/p\u003e\u003cp\u003eYou can also read the mile­stone an­nounces to know more about the over­ral changes:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-5-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-5-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-4-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-4-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-3-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-3-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-2-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-2-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-1-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-1-​released\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\u003edep­re­ca­tions and break­ing changes\u003c/a\u003e\ncan be found on the wiki.\u003c/p\u003e\u003cp\u003eFor this re­lease there are no Docker im­ages.\u003c/p\u003e\u003cp\u003eThe re­lease ar­ti­facts have been de­ployed to \u003ca href=\"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1\"\u003eMaven Cen­tral\u003c/a\u003e and you can get the dis­tri­b­u­tion on \u003ca href=\"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/\"\u003eMaven Cen­tral\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eYou can boot­strap a Vert.x 4.0.0.Beta1 project using \u003ca href=\"https://start.vertx.io\"\u003ehttps://start.vertx.io\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe doc­u­men­ta­tion has been de­ployed on this pre­view web-​site \u003ca href=\"https://vertx-web-site.github.io/docs/\"\u003ehttps://vertx-​web-site.github.io/docs/\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThat’s it! Happy cod­ing and see you soon on our user or dev \u003ca href=\"https://vertx.io/community\"\u003echan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"client","tf":11},{"term":"cluster","tf":10},{"term":"releas","tf":9},{"term":"will","tf":9},{"term":"us","tf":7},{"term":"http","tf":7},{"term":"io","tf":7},{"term":"support","tf":6},{"term":"manag","tf":6},{"term":"mileston","tf":6},{"term":"sql","tf":5},{"term":"new","tf":5},{"term":"not","tf":5},{"term":"api","tf":5},{"term":"thread","tf":5},{"term":"schema","tf":5},{"term":"host","tf":5},{"term":"blog","tf":5},{"term":"metric","tf":4},{"term":"jdbc","tf":4},{"term":"event","tf":4},{"term":"run","tf":4},{"term":"start","tf":4},{"term":"beta","tf":3},{"term":"number","tf":3}]},{"filename":"blog/2020-07-21-eclipse-vert-x-3-9-2-released.mdx","date":"2020-07-21","slug":"eclipse-vert-x-3-9-2-released","meta":{"title":"Eclipse Vert.x 3.9.2 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The new Eclipse Vert.x version 3.9.2 has just been released. It includes a few bug fixes, a new reactive DB2 client, and reactive MySQL Client domain socket support."},"readingTime":{"text":"2 min read","minutes":1.33,"time":79800.00000000001,"words":266},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are ex\\xADtremely pleased to an\\xADnounce that the Eclipse Vert.x ver\\xADsion 3.9.2 has been re\\xADleased.\"), mdx(\"p\", null, \"Among all bug fixes you can find in 3.9.2 this en\\xADhance\\xADment\"), mdx(\"h2\", {\n    \"id\": \"meet-the-reactive-db2-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#meet-the-reactive-db2-client\"\n  })), \"Meet the Reactive DB2 Client\"), mdx(\"p\", null, \"The Re\\xADac\\xADtive SQL Client fam\\xADily gets a new child with an im\\xADple\\xADmen\\xADta\\xADtion con\\xADtributed by our fel\\xADlow main\\xADtainer\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/andrew_guibert\"\n  }), \"Andy Guib\\xADert\"), \".\"), mdx(\"p\", null, \"Using DB2 client is as straight\\xADfor\\xADward as its elder sib\\xADblings:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"DB2ConnectOptions connectOptions = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" DB2ConnectOptions()\\n  .setPort(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"50000\"), \")\\n  .setHost(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"the-host\\\"\"), \")\\n  .setDatabase(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"the-db\\\"\"), \")\\n  .setUser(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"user\\\"\"), \")\\n  .setPassword(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"secret\\\"\"), \");\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Create the client pool\"), \"\\nDB2Pool client = DB2Pool.pool(connectOptions, poolOptions);\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// A simple query\"), \"\\nclient\\n  .query(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM users WHERE id='julien'\\\"\"), \")\\n  .execute(ar -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n    RowSet\u003cRow\u003e result = ar.result();\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Got \\\"\"), \" + result.size() + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\" rows \\\"\"), \");\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Failure: \\\"\"), \" + ar.cause().getMessage());\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Now close the pool\"), \"\\n  client.close();\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"reactive-mysql-client-domain-socket-support\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#reactive-mysql-client-domain-socket-support\"\n  })), \"Reactive MySQL Client domain socket support\"), mdx(\"p\", null, \"The MySQL re\\xADac\\xADtive Client can now con\\xADnect using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/eclipse-vertx/vertx-sql-client/issues/521\"\n  }), \"do\\xADmain sock\\xADets\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Connect Options\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Socket file name /var/run/mysqld/mysqld.sock\"), \"\\nMySQLConnectOptions connectOptions = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MySQLConnectOptions()\\n    .setHost(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/var/run/mysqld/mysqld.sock\\\"\"), \")\\n    .setDatabase(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"the-db\\\"\"), \");\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Create the pooled client\"), \"\\nMySQLPool client = MySQLPool.pool(connectOptions, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" PoolOptions().setMaxSize(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"5\"), \"));\\n\")), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.2-Release-Notes\"\n  }), \"3.9.2 re\\xADlease notes\"), \" can be found on the wiki, as well as the\\nlist of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.2-Deprecations-and-breaking-changes\"\n  }), \"dep\\xADre\\xADca\\xADtions and break\\xADing changes\")), mdx(\"p\", null, \"Docker im\\xADages are avail\\xADable on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/u/vertx/\"\n  }), \"Docker Hub\"), \".\"), mdx(\"p\", null, \"The Vert.x dis\\xADtri\\xADb\\xADu\\xADtion can be down\\xADloaded on the web\\xADsite but is also avail\\xADable from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sdkman.io/index.html\"\n  }), \"SD\\xADKMan\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://brew.sh/\"\n  }), \"Home\\xADBrew\"), \".\"), mdx(\"p\", null, \"The event bus client using the SockJS bridge is avail\\xADable from:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-eventbus-client\"\n  }), \"NPM\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"Bower\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.webjars.org/\"\n  }), \"We\\xADb\\xADJars\"))), mdx(\"p\", null, \"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.9.2%22\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bintray.com/vertx/downloads/distribution/3.9.2/view\"\n  }), \"Bin\\xADtray\"), \".\"), mdx(\"p\", null, \"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/community\"\n  }), \"chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are ex­tremely pleased to an­nounce that the Eclipse Vert.x ver­sion 3.9.2 has been re­leased.\u003c/p\u003e\u003cp\u003eAmong all bug fixes you can find in 3.9.2 this en­hance­ment\u003c/p\u003e\u003ch2 id=\"meet-the-reactive-db2-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#meet-the-reactive-db2-client\"\u003e\u003c/a\u003eMeet the Reactive DB2 Client\u003c/h2\u003e\u003cp\u003eThe Re­ac­tive SQL Client fam­ily gets a new child with an im­ple­men­ta­tion con­tributed by our fel­low main­tainer\n\u003ca href=\"https://twitter.com/andrew_guibert\"\u003eAndy Guib­ert\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eUsing DB2 client is as straight­for­ward as its elder sib­blings:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eDB2ConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e DB2ConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Create the client pool\u003c/span\u003e\nDB2Pool client = DB2Pool.pool(connectOptions, poolOptions);\n\n\u003cspan class=\"hljs-comment\"\u003e// A simple query\u003c/span\u003e\nclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=\u0026#x27;julien\u0026#x27;\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; result = ar.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + result.size() + \u003cspan class=\"hljs-string\"\u003e\u0026quot; rows \u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Now close the pool\u003c/span\u003e\n  client.close();\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"reactive-mysql-client-domain-socket-support\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#reactive-mysql-client-domain-socket-support\"\u003e\u003c/a\u003eReactive MySQL Client domain socket support\u003c/h2\u003e\u003cp\u003eThe MySQL re­ac­tive Client can now con­nect using \u003ca href=\"https://github.com/eclipse-vertx/vertx-sql-client/issues/521\"\u003edo­main sock­ets\u003c/a\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Connect Options\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Socket file name /var/run/mysqld/mysqld.sock\u003c/span\u003e\nMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n    .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/var/run/mysqld/mysqld.sock\u0026quot;\u003c/span\u003e)\n    .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Create the pooled client\u003c/span\u003e\nMySQLPool client = MySQLPool.pool(connectOptions, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions().setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e));\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.2-Release-Notes\"\u003e3.9.2 re­lease notes\u003c/a\u003e can be found on the wiki, as well as the\nlist of \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.2-Deprecations-and-breaking-changes\"\u003edep­re­ca­tions and break­ing changes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eDocker im­ages are avail­able on \u003ca href=\"https://hub.docker.com/u/vertx/\"\u003eDocker Hub\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe Vert.x dis­tri­b­u­tion can be down­loaded on the web­site but is also avail­able from \u003ca href=\"http://sdkman.io/index.html\"\u003eSD­KMan\u003c/a\u003e and \u003ca href=\"http://brew.sh/\"\u003eHome­Brew\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe event bus client using the SockJS bridge is avail­able from:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.npmjs.com/package/vertx3-eventbus-client\"\u003eNPM\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-bus-bower\"\u003eBower\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://www.webjars.org/\"\u003eWe­b­Jars\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe re­lease ar­ti­facts have been de­ployed to \u003ca href=\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.9.2%22\"\u003eMaven Cen­tral\u003c/a\u003e and you can get the dis­tri­b­u­tion on \u003ca href=\"https://bintray.com/vertx/downloads/distribution/3.9.2/view\"\u003eBin­tray\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThat’s it! Happy cod­ing and see you soon on our user or dev \u003ca href=\"https://vertx.io/community\"\u003echan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"client","tf":6},{"term":"reactiv","tf":4},{"term":"releas","tf":3},{"term":"us","tf":3},{"term":"avail","tf":3},{"term":"db2","tf":2},{"term":"mysql","tf":2},{"term":"domain","tf":2},{"term":"socket","tf":2},{"term":"docker","tf":2},{"term":"distribut","tf":2},{"term":"extrem","tf":1},{"term":"pleas","tf":1},{"term":"announc","tf":1},{"term":"version","tf":1},{"term":"among","tf":1},{"term":"bug","tf":1},{"term":"fix","tf":1},{"term":"find","tf":1},{"term":"enhanc","tf":1},{"term":"meet","tf":1},{"term":"sql","tf":1},{"term":"famili","tf":1},{"term":"get","tf":1},{"term":"new","tf":1}]},{"filename":"blog/2020-06-10-eclipse-vert-x-4-milestone-5-released.mdx","date":"2020-06-10","slug":"eclipse-vert-x-4-milestone-5-released","meta":{"title":"Eclipse Vert.x 4 milestone 5 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We are extremely pleased to announce the fifth 4.0 milestone release of Eclipse Vert.x. This release aims to provide a reliable distribution of the current development of Vert.x 4."},"readingTime":{"text":"7 min read","minutes":6.295,"time":377700,"words":1259},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are ex\\xADtremely pleased to an\\xADnounce the fifth 4.0 mile\\xADstone re\\xADlease of Eclipse Vert.x.\"), mdx(\"p\", null, \"Vert.x 4 is the evo\\xADlu\\xADtion of the Vert.x 3.x se\\xADries that will bring key fea\\xADtures to Vert.x.\"), mdx(\"p\", null, \"This re\\xADlease aims to pro\\xADvide a re\\xADli\\xADable dis\\xADtri\\xADb\\xADu\\xADtion of the cur\\xADrent de\\xADvel\\xADop\\xADment of Vert.x 4 for peo\\xADple that\\nwant to try it and pro\\xADvide feed\\xADback.\"), mdx(\"h2\", {\n    \"id\": \"new-kids-on-the-block-json-schema-web-validation-and-web-openapi\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#new-kids-on-the-block-json-schema-web-validation-and-web-openapi\"\n  })), \"New kids on the block: Json Schema, Web Validation and Web OpenAPI\"), mdx(\"p\", null, \"we de\\xADcide to take HTTP re\\xADquest val\\xADi\\xADda\\xADtion in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-web\"), \" and Con\\xADtract Dri\\xADven de\\xADvel\\xADop\\xADment using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/OAI/OpenAPI-Specification\"\n  }), \"Ope\\xADnAPI\"), \"\\nto a next level in Vert.x 4, allow us to in\\xADtro\\xADduce:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/eclipse-vertx/vertx-json-schema\"\n  }), \"Vert.x Json Schema\"), \": Ex\\xADten\\xADsi\\xADble sync/async json-\\u200Bschema val\\xADida\\xADtor de\\xADsigned for Vert.x JSON types, sup\\xADport\\xADing Json Schema Draft-\\u200B7 and Ope\\xADnAPI di\\xADalect.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/tree/master/vertx-web-validation\"\n  }), \"Vert.x Web Val\\xADi\\xADda\\xADtion\"), \": Ex\\xADten\\xADsi\\xADble sync/async HTTP re\\xADquest val\\xADida\\xADtor, pro\\xADvid\\xADing a DSL to de\\xADscribe ex\\xADpected HTTP re\\xADquests.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/tree/master/vertx-web-openapi\"\n  }), \"Vert.x Web Ope\\xADnAPI\"), \": New sup\\xADport for Con\\xADtract Dri\\xADven de\\xADvel\\xADop\\xADment based on Ope\\xADnAPI\")), mdx(\"p\", null, \"Vert.x Json Schema is a pow\\xADer\\xADful \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://json-schema.org/\"\n  }), \"Json Schema\"), \" val\\xADida\\xADtor which in\\xADcludes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Async \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"$ref\"), \" res\\xADo\\xADlu\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cus\\xADtom key\\xADwords/Cus\\xADtom di\\xADalects sup\\xADport\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A DSL to build schemas\")), mdx(\"p\", null, \"Com\\xADbin\\xADing Vert.x Json Schema and Vert.x Web Val\\xADi\\xADda\\xADtion you can eas\\xADily val\\xADi\\xADdate HTTP re\\xADquests:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"ValidationHandler handler = ValidationHandler\\n  .builder(schemaParser)\\n  .pathParameter(Parameters.param(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myPathParam\\\"\"), \", stringSchema()))\\n  .queryParameter(Parameters.optionalParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"myQueryParam\\\"\"), \", intSchema()))\\n  .body(Bodies.json(Schemas.ref(JsonPointer.fromURI(URI.create(\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"some_schema.json\\\"\"), \"\\n  )))))\\n  .build();\\n\\nrouter.post(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/{myPathParam}\\\"\"), \").handler(handler);\\n\")), mdx(\"p\", null, \"Check out the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/blob/master/vertx-web-validation/src/main/java/examples/WebValidationExamples.java\"\n  }), \"Web val\\xADi\\xADda\\xADtion ex\\xADam\\xADples\"), \" and pro\\xADvide feed\\xADback on the APIs!\"), mdx(\"p\", null, \"Vert.x Web Val\\xADi\\xADda\\xADtion al\\xADlows you to use Vert.x Web API Ser\\xADvice with\\xADout Vert.x Web API Con\\xADtract:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/tree/master/vertx-web-api-service/src/main/java/examples\"\n  }), \"Vert.x Web API Ser\\xADvice ex\\xADam\\xADple\")), mdx(\"p\", null, \"You can achieve Con\\xADtract Dri\\xADven de\\xADvel\\xADop\\xADment, with Vert.x Web Ope\\xADnAPI:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"RouterFactory.create(vertx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"src/main/resources/petstore.yaml\\\"\"), \",\\n  routerFactoryAsyncResult -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (routerFactoryAsyncResult.succeeded()) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Spec loaded with success, retrieve the router\"), \"\\n    RouterFactory routerFactory = routerFactoryAsyncResult.result();\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// You can enable or disable different features of router factory using RouterFactoryOptions\"), \"\\n    RouterFactoryOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RouterFactoryOptions();\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Set the options\"), \"\\n    routerFactory.setOptions(options);\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Add an handler to operation listPets\"), \"\\n    routerFactory.operation(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"listPets\\\"\"), \").handler(routingContext -\u003e {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle listPets operation\"), \"\\n      routingContext.response().setStatusMessage(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Called listPets\\\"\"), \").end();\\n    }).failureHandler(routingContext -\u003e { \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Add a failure handler to the same operation\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// This is the failure handler\"), \"\\n      Throwable failure = routingContext.failure();\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (failure \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"instanceof\"), \" BadRequestException)\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle Validation Exception\"), \"\\n        routingContext\\n          .response()\\n          .setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \")\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \")\\n          .end(((BadRequestException)failure).toJson().toBuffer());\\n    });\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Add a security handler\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Handle security here\"), \"\\n    routerFactory.securityHandler(\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"api_key\\\"\"), \",\\n      JWTAuthHandler.create(jwtAuth)\\n    );\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Now you have to generate the router\"), \"\\n    Router router = routerFactory.createRouter();\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Something went wrong during router factory initialization\"), \"\\n  }\\n});\\n\")), mdx(\"p\", null, \"Vert.x Web Ope\\xADnAPI is the new way to do Vert.x Web API Con\\xADtract, how\\xADever Vert.x Web API Con\\xADtract re\\xADmains sup\\xADported\\nfor the whole life\\xADtime of Vert.x 4 to pro\\xADvide a mi\\xADgra\\xADtion path: we will pro\\xADvide soon a mi\\xADgra\\xADtion guide for Vert.x Web API Con\\xADtract.\"), mdx(\"p\", null, \"Check out the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-web/blob/master/vertx-web-openapi/src/main/java/examples/OpenAPI3Examples.java\"\n  }), \"Web Ope\\xADnAPI ex\\xADam\\xADples\")), mdx(\"h2\", {\n    \"id\": \"sql-client-templates\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sql-client-templates\"\n  })), \"SQL Client templates\"), mdx(\"p\", null, \"SQL Client Tem\\xADplates is a small li\\xADbrary de\\xADsigned to fa\\xADcil\\xADi\\xADtate the ex\\xADe\\xADcu\\xADtion of SQL queries.\"), mdx(\"p\", null, \"Sim\\xADply put you ex\\xADe\\xADcute pre\\xADpared SQL queries with a map in\\xADstead of a tuple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Map\u003cString, Object\u003e parameters = Collections.singletonMap(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \");\\n\\nSqlTemplate\\n  .forQuery(client, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM users WHERE id=#{id}\\\"\"), \")\\n  .execute(parameters)\\n  .onSuccess(users -\u003e {\\n    users.forEach(row -\u003e {\\n      System.out.println(row.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"first_name\\\"\"), \") + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\" \\\"\"), \" + row.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"last_name\\\"\"), \"));\\n    });\\n  });\\n\")), mdx(\"p\", null, \"A tem\\xADplate can per\\xADform tuple to ob\\xADject map\\xADping for pa\\xADra\\xADme\\xADters and rows.\"), mdx(\"p\", null, \"Here is row map\\xADping using Jack\\xADson Data\\xADbind.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"SqlTemplate\\n  .forQuery(client, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM users WHERE id=#{id}\\\"\"), \")\\n  .mapTo(User.class)\\n  .execute(Collections.singletonMap(\\\"id\\\", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"))\\n  .onSuccess(users -\u003e {\\n    users.forEach(user -\u003e {\\n      System.out.println(user.firstName + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\" \\\"\"), \" + user.lastName);\\n    });\\n  });\\n\")), mdx(\"p\", null, \"You can also uses Vert.x data ob\\xADjects to gen\\xADer\\xADate map\\xADpers in\\xADstead: when a data ob\\xADject is an\\xADno\\xADtate with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@RowMapped\"), \" a row map\\xADper\\nfunc\\xADtion will be gen\\xADer\\xADated\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@DataObject\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@RowMapped\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"User\"), \" \"), \"{\\n  ...\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Generated by SQL template code generator\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"UserRowMapper\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"implements\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"java\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"util\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"function\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Function\"), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"io\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"vertx\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"sqlclient\"), \".\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Row\"), \", \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"User\"), \"\u003e \"), \"{\\n  ...\\n}\\n\")), mdx(\"p\", null, \"You can then use this map\\xADper in\\xADstead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"User.class\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"SqlTemplate\\n  .forQuery(client, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM users WHERE id=#{id}\\\"\"), \")\\n  .mapTo(UserRowMapper.INSTANCE)\\n  .execute(Collections.singletonMap(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"))\\n  .onSuccess(users -\u003e {\\n    users.forEach(user -\u003e {\\n      System.out.println(user.firstName + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\" \\\"\"), \" + user.lastName);\\n    });\\n  });\\n\")), mdx(\"h2\", {\n    \"id\": \"a-new-clustering-spi\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#a-new-clustering-spi\"\n  })), \"A new clustering SPI\"), mdx(\"p\", null, \"This mile\\xADstone in\\xADtro\\xADduces the clus\\xADter\\xADing SPI re\\xADdesign that al\\xADlows to:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"sim\\xADplify both Vert.x core and clus\\xADter man\\xADager im\\xADple\\xADmen\\xADta\\xADtions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lever\\xADage ca\\xADpa\\xADbil\\xADi\\xADties of some clus\\xADter man\\xADagers (e.g. data loss pro\\xADtec\\xADtion)\")), mdx(\"p\", null, \"Read the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/RFC:-clustering-SPI-revisited\"\n  }), \"RFC\"), \" doc\\xADu\\xADment if you would like to know more.\"), mdx(\"p\", null, \"As a de\\xADvel\\xADoper, you should not see much dif\\xADfer\\xADence, the Event\\xADBus and Shared data API re\\xADmain un\\xADchanged.\"), mdx(\"p\", null, \"How\\xADever, if you op\\xADer\\xADate a clus\\xADter in pro\\xADduc\\xADtion, you can\\xADnot mix Vert.x 3 and Vert.x 4 nodes.\"), mdx(\"p\", null, \"The fol\\xADlow\\xADing clus\\xADter man\\xADagers im\\xADple\\xADmen\\xADta\\xADtions have been up\\xADdated: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-hazelcast/java/\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"vertx-hazelcast\")), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-infinispan/java/\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"vertx-infinispan\")), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-ignite/java/\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"vertx-iginite\")), \" (thanks \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/zyclonite\"\n  }), \"Lukas Pret\\xADten\\xADthaler\"), \" for your help).\\nThe \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-zookeeper/java/\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"vertx-zookeeper\")), \" up\\xADdate will be avail\\xADable in the next re\\xADlease.\"), mdx(\"h2\", {\n    \"id\": \"upgrade-to-infinispan-10-and-ignite-280\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#upgrade-to-infinispan-10-and-ignite-280\"\n  })), \"Upgrade to Infinispan 10 and Ignite 2.8.0\"), mdx(\"p\", null, \"Following-\\u200Bup on the clus\\xADter\\xADing SPI up\\xADdate :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the In\\xADfin\\xADis\\xADpan clus\\xADter man\\xADager now de\\xADpends on In\\xADfin\\xADis\\xADpan 10\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the Apache Ig\\xADnite clus\\xADter man\\xADager on 2.8.0\")), mdx(\"h2\", {\n    \"id\": \"complete-refactoring-on-vertx-auth-authnauthz-split\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#complete-refactoring-on-vertx-auth-authnauthz-split\"\n  })), \"Complete refactoring on vertx-auth authn/authz split\"), mdx(\"p\", null, \"Au\\xADthen\\xADti\\xADca\\xADtion has been de\\xADcou\\xADpled from au\\xADtho\\xADriza\\xADtion, all mod\\xADules now im\\xADple\\xADment at least one of the two in\\xADter\\xADfaces:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AuthenticationProvider\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AuthorizationProvider\"))), mdx(\"p\", null, \"This im\\xADprove\\xADment pro\\xADvides more flex\\xADi\\xADb\\xADlity such as user au\\xADthen\\xADti\\xADca\\xADtion using a prop\\xADerty file and au\\xADtho\\xADriza\\xADtion against a data\\xADbase.\"), mdx(\"p\", null, \"This mile\\xADstone also in\\xADcludes a few new im\\xADple\\xADmen\\xADta\\xADtions:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vertx-auth-ldap\"), \" su\\xADper\\xADsedes \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"shiro\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vertx-authproperties\"), \" su\\xADper\\xADsedes \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"shiro\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vertx-auth-sql\"), \" to use \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sql-client\"), \"s as source of user data\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vertx-auth-webauthn\"), \" pro\\xADvides \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"FIDO2\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"webauthn\"), \" au\\xADthen\\xADti\\xADca\\xADtion\")), mdx(\"p\", null, \"Many bug fixes have been done and miss\\xADing fea\\xADtures such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JWK\"), \" ro\\xADta\\xADtion sup\\xADport for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth2/OIDC\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JWT\"), \" is now im\\xADple\\xADmented.\"), mdx(\"h2\", {\n    \"id\": \"vertx-web-updates\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-web-updates\"\n  })), \"Vertx-web updates\"), mdx(\"p\", null, \"Vert.x-Web also got some up\\xADdates.\"), mdx(\"p\", null, \"The ses\\xADsion han\\xADdler code now al\\xADlows other stor\\xADages:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"cookie-session-store\"), \" - stores all ses\\xADsion data in a cookie\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"redis-session-store\"), \" - store all ses\\xADsion data in a redis key store data\\xADbase\")), mdx(\"p\", null, \"Ses\\xADsions fol\\xADlows the lat\\xADest OWASP rec\\xADom\\xADmen\\xADda\\xADtions and al\\xADlows to now use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cookieless\"), \" ses\\xADsions, where the ses\\xADsion key is passed in the URL.\"), mdx(\"p\", null, \"Routers are now proxy aware: when en\\xADabled, routers can parse the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Forward\"), \" head\\xADers and re\\xADbind the in\\xADter\\xADnal val\\xADues\\nfor pro\\xADto\\xADcol, host and port for user con\\xADvinience. This is quite use\\xADful when ap\\xADpli\\xADca\\xADtions are de\\xADployed be\\xADhind\\na caching server, which can mod\\xADify the orig\\xADi\\xADnal re\\xADquest.\"), mdx(\"h2\", {\n    \"id\": \"junit-5-support-updates\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#junit-5-support-updates\"\n  })), \"JUnit 5 support updates\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-junit5\"), \" mod\\xADule has had the fol\\xADlow\\xADing up\\xADdates since the last mile\\xADstone.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes#split-the-core-implementation-and-extensions\"\n  }), \"The in\\xADter\\xADnals have been refac\\xADtored\"), \" to split the im\\xADple\\xADmen\\xADta\\xADtion and ex\\xADten\\xADsions around a service-\\u200Bprovider in\\xADter\\xADface.\\nWhile this is largely trans\\xADpar\\xADent in terms of API, you need to be aware that:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the Vertx pa\\xADra\\xADme\\xADter should be placed be\\xADfore any pa\\xADra\\xADme\\xADter that re\\xADquires it for cre\\xADation, such as when in\\xADject\\xADing a We\\xADb\\xADClient,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the vertx-\\u200Bjunit5 mod\\xADule now only of\\xADfers APIs for the Vert.x core mod\\xADule (vertx-\\u200Bcore),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/reactiverse/reactiverse-junit5-extensions\"\n  }), \"reactiverse-\\u200Bjunit5-\\u200Bextensions mod\\xADule\"), \" now hosts ex\\xADten\\xADsions that offer extra pa\\xADra\\xADme\\xADter types like We\\xADb\\xADClient,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the Rx\\xADJava 1 and 2 bind\\xADings are now of\\xADfered as vertx-\\u200Bjunit5-\\u200Brx-java and vertx-\\u200Bjunit5-\\u200Brx-java2 mod\\xADules in the vertx-\\u200Bjunit5-\\u200Bextensions repos\\xADi\\xADtory.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"succeeding()\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"failing()\"), \" meth\\xADods in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"VertxTestContext\"), \" have been dep\\xADre\\xADcated to im\\xADprove er\\xADgonom\\xADics, you should in\\xADstead use \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"succeedingThenComplete()\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"failingThenComplete()\"), \".\")), mdx(\"h2\", {\n    \"id\": \"ramping-up-to-vertx-4\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#ramping-up-to-vertx-4\"\n  })), \"Ramping up to Vert.x 4\"), mdx(\"p\", null, \"In\\xADstead of de\\xADvel\\xADop\\xADing all new fea\\xADtures ex\\xADclu\\xADsively in Vert.x 4, we in\\xADtro\\xADduce some of these fea\\xADtures in the 3.x branch\\nso the com\\xADmu\\xADnity can ben\\xADe\\xADfit from them. The Vert.x 4 de\\xADvel\\xADop\\xADment focus on more fun\\xADda\\xADmen\\xADtal changes that can\\xADnot be done\\nin the 3.x se\\xADries.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-4-milestone4-release/vertx-4-timeline.png\",\n    \"alt\": \"Screenshot\"\n  }))), mdx(\"p\", null, \"This is the fifth mile\\xADstone of Vert.x 4, you can of course ex\\xADpect more mile\\xADstones to out\\xADline the progress of the ef\\xADfort.\"), mdx(\"p\", null, \"You can also read the pre\\xADvi\\xADous mile\\xADstone an\\xADnounces:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-4-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-4-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-3-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-3-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-2-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-2-\\u200Breleased\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://vertx.io/blog/eclipse-vert-x-4-milestone-1-released\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-1-\\u200Breleased\"))), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\n  }), \"dep\\xADre\\xADca\\xADtions and break\\xADing changes\"), \"\\ncan be found on the wiki.\"), mdx(\"p\", null, \"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0-milestone5\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0-milestone5/\"\n  }), \"Maven Cen\\xADtral\"), \".\"), mdx(\"p\", null, \"You can boot\\xADstrap a Vert.x 4.0.0-\\u200Bmilestone5 project using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://start.vertx.io\"\n  }), \"https://start.vertx.io\"), \".\"), mdx(\"p\", null, \"The doc\\xADu\\xADmen\\xADta\\xADtion has been de\\xADployed on this pre\\xADview web-\\u200Bsite \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx-ci.github.io/vertx-4-preview/docs/\"\n  }), \"https://vertx-\\u200Bci.github.io/vertx-\\u200B4-\\u200Bpreview/docs/\")), mdx(\"p\", null, \"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/community\"\n  }), \"chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are ex­tremely pleased to an­nounce the fifth 4.0 mile­stone re­lease of Eclipse Vert.x.\u003c/p\u003e\u003cp\u003eVert.x 4 is the evo­lu­tion of the Vert.x 3.x se­ries that will bring key fea­tures to Vert.x.\u003c/p\u003e\u003cp\u003eThis re­lease aims to pro­vide a re­li­able dis­tri­b­u­tion of the cur­rent de­vel­op­ment of Vert.x 4 for peo­ple that\nwant to try it and pro­vide feed­back.\u003c/p\u003e\u003ch2 id=\"new-kids-on-the-block-json-schema-web-validation-and-web-openapi\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#new-kids-on-the-block-json-schema-web-validation-and-web-openapi\"\u003e\u003c/a\u003eNew kids on the block: Json Schema, Web Validation and Web OpenAPI\u003c/h2\u003e\u003cp\u003ewe de­cide to take HTTP re­quest val­i­da­tion in \u003ccode\u003evertx-web\u003c/code\u003e and Con­tract Dri­ven de­vel­op­ment using \u003ca href=\"https://github.com/OAI/OpenAPI-Specification\"\u003eOpe­nAPI\u003c/a\u003e\nto a next level in Vert.x 4, allow us to in­tro­duce:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://github.com/eclipse-vertx/vertx-json-schema\"\u003eVert.x Json Schema\u003c/a\u003e: Ex­ten­si­ble sync/async json-​schema val­ida­tor de­signed for Vert.x JSON types, sup­port­ing Json Schema Draft-​7 and Ope­nAPI di­alect.\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-web/tree/master/vertx-web-validation\"\u003eVert.x Web Val­i­da­tion\u003c/a\u003e: Ex­ten­si­ble sync/async HTTP re­quest val­ida­tor, pro­vid­ing a DSL to de­scribe ex­pected HTTP re­quests.\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-web/tree/master/vertx-web-openapi\"\u003eVert.x Web Ope­nAPI\u003c/a\u003e: New sup­port for Con­tract Dri­ven de­vel­op­ment based on Ope­nAPI\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eVert.x Json Schema is a pow­er­ful \u003ca href=\"https://json-schema.org/\"\u003eJson Schema\u003c/a\u003e val­ida­tor which in­cludes:\u003c/p\u003e\u003cul\u003e\u003cli\u003eAsync \u003ccode\u003e$ref\u003c/code\u003e res­o­lu­tion\u003c/li\u003e\u003cli\u003eCus­tom key­words/Cus­tom di­alects sup­port\u003c/li\u003e\u003cli\u003eA DSL to build schemas\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eCom­bin­ing Vert.x Json Schema and Vert.x Web Val­i­da­tion you can eas­ily val­i­date HTTP re­quests:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eValidationHandler handler = ValidationHandler\n  .builder(schemaParser)\n  .pathParameter(Parameters.param(\u003cspan class=\"hljs-string\"\u003e\u0026quot;myPathParam\u0026quot;\u003c/span\u003e, stringSchema()))\n  .queryParameter(Parameters.optionalParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;myQueryParam\u0026quot;\u003c/span\u003e, intSchema()))\n  .body(Bodies.json(Schemas.ref(JsonPointer.fromURI(URI.create(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some_schema.json\u0026quot;\u003c/span\u003e\n  )))))\n  .build();\n\nrouter.post(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/{myPathParam}\u0026quot;\u003c/span\u003e).handler(handler);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCheck out the \u003ca href=\"https://github.com/vert-x3/vertx-web/blob/master/vertx-web-validation/src/main/java/examples/WebValidationExamples.java\"\u003eWeb val­i­da­tion ex­am­ples\u003c/a\u003e and pro­vide feed­back on the APIs!\u003c/p\u003e\u003cp\u003eVert.x Web Val­i­da­tion al­lows you to use Vert.x Web API Ser­vice with­out Vert.x Web API Con­tract:\n\u003ca href=\"https://github.com/vert-x3/vertx-web/tree/master/vertx-web-api-service/src/main/java/examples\"\u003eVert.x Web API Ser­vice ex­am­ple\u003c/a\u003e\u003c/p\u003e\u003cp\u003eYou can achieve Con­tract Dri­ven de­vel­op­ment, with Vert.x Web Ope­nAPI:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRouterFactory.create(vertx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;src/main/resources/petstore.yaml\u0026quot;\u003c/span\u003e,\n  routerFactoryAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (routerFactoryAsyncResult.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Spec loaded with success, retrieve the router\u003c/span\u003e\n    RouterFactory routerFactory = routerFactoryAsyncResult.result();\n    \u003cspan class=\"hljs-comment\"\u003e// You can enable or disable different features of router factory using RouterFactoryOptions\u003c/span\u003e\n    RouterFactoryOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RouterFactoryOptions();\n    \u003cspan class=\"hljs-comment\"\u003e// Set the options\u003c/span\u003e\n    routerFactory.setOptions(options);\n    \u003cspan class=\"hljs-comment\"\u003e// Add an handler to operation listPets\u003c/span\u003e\n    routerFactory.operation(\u003cspan class=\"hljs-string\"\u003e\u0026quot;listPets\u0026quot;\u003c/span\u003e).handler(routingContext -\u0026gt; {\n      \u003cspan class=\"hljs-comment\"\u003e// Handle listPets operation\u003c/span\u003e\n      routingContext.response().setStatusMessage(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Called listPets\u0026quot;\u003c/span\u003e).end();\n    }).failureHandler(routingContext -\u0026gt; { \u003cspan class=\"hljs-comment\"\u003e// Add a failure handler to the same operation\u003c/span\u003e\n      \u003cspan class=\"hljs-comment\"\u003e// This is the failure handler\u003c/span\u003e\n      Throwable failure = routingContext.failure();\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (failure \u003cspan class=\"hljs-keyword\"\u003einstanceof\u003c/span\u003e BadRequestException)\n        \u003cspan class=\"hljs-comment\"\u003e// Handle Validation Exception\u003c/span\u003e\n        routingContext\n          .response()\n          .setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e)\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)\n          .end(((BadRequestException)failure).toJson().toBuffer());\n    });\n\n    \u003cspan class=\"hljs-comment\"\u003e// Add a security handler\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Handle security here\u003c/span\u003e\n    routerFactory.securityHandler(\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;api_key\u0026quot;\u003c/span\u003e,\n      JWTAuthHandler.create(jwtAuth)\n    );\n\n    \u003cspan class=\"hljs-comment\"\u003e// Now you have to generate the router\u003c/span\u003e\n    Router router = routerFactory.createRouter();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Something went wrong during router factory initialization\u003c/span\u003e\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eVert.x Web Ope­nAPI is the new way to do Vert.x Web API Con­tract, how­ever Vert.x Web API Con­tract re­mains sup­ported\nfor the whole life­time of Vert.x 4 to pro­vide a mi­gra­tion path: we will pro­vide soon a mi­gra­tion guide for Vert.x Web API Con­tract.\u003c/p\u003e\u003cp\u003eCheck out the \u003ca href=\"https://github.com/vert-x3/vertx-web/blob/master/vertx-web-openapi/src/main/java/examples/OpenAPI3Examples.java\"\u003eWeb Ope­nAPI ex­am­ples\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"sql-client-templates\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sql-client-templates\"\u003e\u003c/a\u003eSQL Client templates\u003c/h2\u003e\u003cp\u003eSQL Client Tem­plates is a small li­brary de­signed to fa­cil­i­tate the ex­e­cu­tion of SQL queries.\u003c/p\u003e\u003cp\u003eSim­ply put you ex­e­cute pre­pared SQL queries with a map in­stead of a tuple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eMap\u0026lt;String, Object\u0026gt; parameters = Collections.singletonMap(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n\nSqlTemplate\n  .forQuery(client, \u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=#{id}\u0026quot;\u003c/span\u003e)\n  .execute(parameters)\n  .onSuccess(users -\u0026gt; {\n    users.forEach(row -\u0026gt; {\n      System.out.println(row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;first_name\u0026quot;\u003c/span\u003e) + \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;last_name\u0026quot;\u003c/span\u003e));\n    });\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eA tem­plate can per­form tuple to ob­ject map­ping for pa­ra­me­ters and rows.\u003c/p\u003e\u003cp\u003eHere is row map­ping using Jack­son Data­bind.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eSqlTemplate\n  .forQuery(client, \u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=#{id}\u0026quot;\u003c/span\u003e)\n  .mapTo(User.class)\n  .execute(Collections.singletonMap(\u0026quot;id\u0026quot;, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n  .onSuccess(users -\u0026gt; {\n    users.forEach(user -\u0026gt; {\n      System.out.println(user.firstName + \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e + user.lastName);\n    });\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can also uses Vert.x data ob­jects to gen­er­ate map­pers in­stead: when a data ob­ject is an­no­tate with \u003ccode\u003e@RowMapped\u003c/code\u003e a row map­per\nfunc­tion will be gen­er­ated\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@DataObject\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e@RowMapped\u003c/span\u003e\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eUser\u003c/span\u003e \u003c/span\u003e{\n  ...\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// Generated by SQL template code generator\u003c/span\u003e\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eUserRowMapper\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ejava\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eutil\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003efunction\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eFunction\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title\"\u003eio\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003evertx\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003esqlclient\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eRow\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eUser\u003c/span\u003e\u0026gt; \u003c/span\u003e{\n  ...\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can then use this map­per in­stead of \u003ccode\u003eUser.class\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eSqlTemplate\n  .forQuery(client, \u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=#{id}\u0026quot;\u003c/span\u003e)\n  .mapTo(UserRowMapper.INSTANCE)\n  .execute(Collections.singletonMap(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n  .onSuccess(users -\u0026gt; {\n    users.forEach(user -\u0026gt; {\n      System.out.println(user.firstName + \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e + user.lastName);\n    });\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"a-new-clustering-spi\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#a-new-clustering-spi\"\u003e\u003c/a\u003eA new clustering SPI\u003c/h2\u003e\u003cp\u003eThis mile­stone in­tro­duces the clus­ter­ing SPI re­design that al­lows to:\u003c/p\u003e\u003cul\u003e\u003cli\u003esim­plify both Vert.x core and clus­ter man­ager im­ple­men­ta­tions\u003c/li\u003e\u003cli\u003elever­age ca­pa­bil­i­ties of some clus­ter man­agers (e.g. data loss pro­tec­tion)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eRead the \u003ca href=\"https://github.com/vert-x3/wiki/wiki/RFC:-clustering-SPI-revisited\"\u003eRFC\u003c/a\u003e doc­u­ment if you would like to know more.\u003c/p\u003e\u003cp\u003eAs a de­vel­oper, you should not see much dif­fer­ence, the Event­Bus and Shared data API re­main un­changed.\u003c/p\u003e\u003cp\u003eHow­ever, if you op­er­ate a clus­ter in pro­duc­tion, you can­not mix Vert.x 3 and Vert.x 4 nodes.\u003c/p\u003e\u003cp\u003eThe fol­low­ing clus­ter man­agers im­ple­men­ta­tions have been up­dated: \u003ca href=\"https://vertx.io/docs/vertx-hazelcast/java/\"\u003e\u003ccode\u003evertx-hazelcast\u003c/code\u003e\u003c/a\u003e, \u003ca href=\"https://vertx.io/docs/vertx-infinispan/java/\"\u003e\u003ccode\u003evertx-infinispan\u003c/code\u003e\u003c/a\u003e and \u003ca href=\"https://vertx.io/docs/vertx-ignite/java/\"\u003e\u003ccode\u003evertx-iginite\u003c/code\u003e\u003c/a\u003e (thanks \u003ca href=\"https://github.com/zyclonite\"\u003eLukas Pret­ten­thaler\u003c/a\u003e for your help).\nThe \u003ca href=\"https://vertx.io/docs/vertx-zookeeper/java/\"\u003e\u003ccode\u003evertx-zookeeper\u003c/code\u003e\u003c/a\u003e up­date will be avail­able in the next re­lease.\u003c/p\u003e\u003ch2 id=\"upgrade-to-infinispan-10-and-ignite-280\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#upgrade-to-infinispan-10-and-ignite-280\"\u003e\u003c/a\u003eUpgrade to Infinispan 10 and Ignite 2.8.0\u003c/h2\u003e\u003cp\u003eFollowing-​up on the clus­ter­ing SPI up­date :\u003c/p\u003e\u003cul\u003e\u003cli\u003ethe In­fin­is­pan clus­ter man­ager now de­pends on In­fin­is­pan 10\u003c/li\u003e\u003cli\u003ethe Apache Ig­nite clus­ter man­ager on 2.8.0\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"complete-refactoring-on-vertx-auth-authnauthz-split\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#complete-refactoring-on-vertx-auth-authnauthz-split\"\u003e\u003c/a\u003eComplete refactoring on vertx-auth authn/authz split\u003c/h2\u003e\u003cp\u003eAu­then­ti­ca­tion has been de­cou­pled from au­tho­riza­tion, all mod­ules now im­ple­ment at least one of the two in­ter­faces:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003eAuthenticationProvider\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003eAuthorizationProvider\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThis im­prove­ment pro­vides more flex­i­b­lity such as user au­then­ti­ca­tion using a prop­erty file and au­tho­riza­tion against a data­base.\u003c/p\u003e\u003cp\u003eThis mile­stone also in­cludes a few new im­ple­men­ta­tions:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003evertx-auth-ldap\u003c/code\u003e su­per­sedes \u003ccode\u003eshiro\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003evertx-authproperties\u003c/code\u003e su­per­sedes \u003ccode\u003eshiro\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003evertx-auth-sql\u003c/code\u003e to use \u003ccode\u003esql-client\u003c/code\u003es as source of user data\u003c/li\u003e\u003cli\u003e\u003ccode\u003evertx-auth-webauthn\u003c/code\u003e pro­vides \u003ccode\u003eFIDO2\u003c/code\u003e \u003ccode\u003ewebauthn\u003c/code\u003e au­then­ti­ca­tion\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eMany bug fixes have been done and miss­ing fea­tures such as \u003ccode\u003eJWK\u003c/code\u003e ro­ta­tion sup­port for \u003ccode\u003eOAuth2/OIDC\u003c/code\u003e/\u003ccode\u003eJWT\u003c/code\u003e is now im­ple­mented.\u003c/p\u003e\u003ch2 id=\"vertx-web-updates\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-web-updates\"\u003e\u003c/a\u003eVertx-web updates\u003c/h2\u003e\u003cp\u003eVert.x-Web also got some up­dates.\u003c/p\u003e\u003cp\u003eThe ses­sion han­dler code now al­lows other stor­ages:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003ecookie-session-store\u003c/code\u003e - stores all ses­sion data in a cookie\u003c/li\u003e\u003cli\u003e\u003ccode\u003eredis-session-store\u003c/code\u003e - store all ses­sion data in a redis key store data­base\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSes­sions fol­lows the lat­est OWASP rec­om­men­da­tions and al­lows to now use \u003ccode\u003ecookieless\u003c/code\u003e ses­sions, where the ses­sion key is passed in the URL.\u003c/p\u003e\u003cp\u003eRouters are now proxy aware: when en­abled, routers can parse the \u003ccode\u003eForward\u003c/code\u003e head­ers and re­bind the in­ter­nal val­ues\nfor pro­to­col, host and port for user con­vinience. This is quite use­ful when ap­pli­ca­tions are de­ployed be­hind\na caching server, which can mod­ify the orig­i­nal re­quest.\u003c/p\u003e\u003ch2 id=\"junit-5-support-updates\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#junit-5-support-updates\"\u003e\u003c/a\u003eJUnit 5 support updates\u003c/h2\u003e\u003cp\u003eThe \u003ccode\u003evertx-junit5\u003c/code\u003e mod­ule has had the fol­low­ing up­dates since the last mile­stone.\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes#split-the-core-implementation-and-extensions\"\u003eThe in­ter­nals have been refac­tored\u003c/a\u003e to split the im­ple­men­ta­tion and ex­ten­sions around a service-​provider in­ter­face.\nWhile this is largely trans­par­ent in terms of API, you need to be aware that:\u003cul\u003e\u003cli\u003ethe Vertx pa­ra­me­ter should be placed be­fore any pa­ra­me­ter that re­quires it for cre­ation, such as when in­ject­ing a We­b­Client,\u003c/li\u003e\u003cli\u003ethe vertx-​junit5 mod­ule now only of­fers APIs for the Vert.x core mod­ule (vertx-​core),\u003c/li\u003e\u003cli\u003ethe \u003ca href=\"https://github.com/reactiverse/reactiverse-junit5-extensions\"\u003ereactiverse-​junit5-​extensions mod­ule\u003c/a\u003e now hosts ex­ten­sions that offer extra pa­ra­me­ter types like We­b­Client,\u003c/li\u003e\u003cli\u003ethe Rx­Java 1 and 2 bind­ings are now of­fered as vertx-​junit5-​rx-java and vertx-​junit5-​rx-java2 mod­ules in the vertx-​junit5-​extensions repos­i­tory.\u003c/li\u003e\u003c/ul\u003e\u003c/li\u003e\u003cli\u003eThe \u003ccode\u003esucceeding()\u003c/code\u003e and \u003ccode\u003efailing()\u003c/code\u003e meth­ods in \u003ccode\u003eVertxTestContext\u003c/code\u003e have been dep­re­cated to im­prove er­gonom­ics, you should in­stead use \u003ccode\u003esucceedingThenComplete()\u003c/code\u003e and \u003ccode\u003efailingThenComplete()\u003c/code\u003e.\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"ramping-up-to-vertx-4\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#ramping-up-to-vertx-4\"\u003e\u003c/a\u003eRamping up to Vert.x 4\u003c/h2\u003e\u003cp\u003eIn­stead of de­vel­op­ing all new fea­tures ex­clu­sively in Vert.x 4, we in­tro­duce some of these fea­tures in the 3.x branch\nso the com­mu­nity can ben­e­fit from them. The Vert.x 4 de­vel­op­ment focus on more fun­da­men­tal changes that can­not be done\nin the 3.x se­ries.\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-4-milestone4-release/vertx-4-timeline.png\" alt=\"Screenshot\"/\u003e\u003c/p\u003e\u003cp\u003eThis is the fifth mile­stone of Vert.x 4, you can of course ex­pect more mile­stones to out­line the progress of the ef­fort.\u003c/p\u003e\u003cp\u003eYou can also read the pre­vi­ous mile­stone an­nounces:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-4-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-4-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-3-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-3-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-2-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-2-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://vertx.io/blog/eclipse-vert-x-4-milestone-1-released\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-1-​released\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\u003edep­re­ca­tions and break­ing changes\u003c/a\u003e\ncan be found on the wiki.\u003c/p\u003e\u003cp\u003eThe re­lease ar­ti­facts have been de­ployed to \u003ca href=\"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0-milestone5\"\u003eMaven Cen­tral\u003c/a\u003e and you can get the dis­tri­b­u­tion on \u003ca href=\"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0-milestone5/\"\u003eMaven Cen­tral\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eYou can boot­strap a Vert.x 4.0.0-​milestone5 project using \u003ca href=\"https://start.vertx.io\"\u003ehttps://start.vertx.io\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe doc­u­men­ta­tion has been de­ployed on this pre­view web-​site \u003ca href=\"https://vertx-ci.github.io/vertx-4-preview/docs/\"\u003ehttps://vertx-​ci.github.io/vertx-​4-​preview/docs/\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThat’s it! Happy cod­ing and see you soon on our user or dev \u003ca href=\"https://vertx.io/community\"\u003echan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"web","tf":19},{"term":"us","tf":12},{"term":"mileston","tf":11},{"term":"valid","tf":10},{"term":"http","tf":10},{"term":"api","tf":10},{"term":"provid","tf":9},{"term":"cluster","tf":9},{"term":"releas","tf":8},{"term":"json","tf":8},{"term":"schema","tf":8},{"term":"openapi","tf":8},{"term":"develop","tf":7},{"term":"contract","tf":7},{"term":"data","tf":7},{"term":"updat","tf":7},{"term":"new","tf":6},{"term":"extens","tf":6},{"term":"support","tf":6},{"term":"implement","tf":6},{"term":"modul","tf":6},{"term":"session","tf":6},{"term":"io","tf":6},{"term":"request","tf":5},{"term":"allow","tf":5}]},{"filename":"blog/2020-05-22-eclipse-vert-x-3-9-1-released.mdx","date":"2020-05-22","slug":"eclipse-vert-x-3-9-1-released","meta":{"title":"Eclipse Vert.x 3.9.1 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The new version comes with many enhancements including an SQL client for DB2 and out-of-the-box support for HTTP/2 on JDK 8."},"readingTime":{"text":"1 min read","minutes":0.93,"time":55800.00000000001,"words":186},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are ex\\xADtremely pleased to an\\xADnounce that the Eclipse Vert.x ver\\xADsion 3.9.1 has been re\\xADleased.\"), mdx(\"p\", null, \"Among all bug fixes you can find in 3.9.1 these en\\xADhance\\xADment.\"), mdx(\"h2\", {\n    \"id\": \"jdk-8-http2-support\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#jdk-8-http2-support\"\n  })), \"JDK 8 HTTP/2 support\"), mdx(\"p\", null, \"Pre\\xADvi\\xADously using the Jetty ALPN agent or netty-\\u200Btcnative was re\\xADquired to use HTTP/2 on JDK 8.\"), mdx(\"p\", null, \"TLS ALPN sup\\xADport has been back-\\u200Bported to JDK 8 re\\xADcently and Vert.x has been up\\xADgraded to sup\\xADport it, which means now you\\ncan have HTTP/2 on JDK 8 out of the box. You need to most re\\xADcent ver\\xADsion of Open\\xADJDK 8 or Or\\xADa\\xADcle JDK 8.\"), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.1-Release-Notes\"\n  }), \"3.9.1 re\\xADlease notes\"), \" can be found on the wiki, as well as the\\nlist of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.1-Deprecations-and-breaking-changes\"\n  }), \"dep\\xADre\\xADca\\xADtions and break\\xADing changes\")), mdx(\"p\", null, \"Docker im\\xADages are avail\\xADable on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/u/vertx/\"\n  }), \"Docker Hub\"), \".\"), mdx(\"p\", null, \"The Vert.x dis\\xADtri\\xADb\\xADu\\xADtion can be down\\xADloaded on the web\\xADsite but is also avail\\xADable from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sdkman.io/index.html\"\n  }), \"SD\\xADKMan\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://brew.sh/\"\n  }), \"Home\\xADBrew\"), \".\"), mdx(\"p\", null, \"The event bus client using the SockJS bridge is avail\\xADable from:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-eventbus-client\"\n  }), \"NPM\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"Bower\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.webjars.org/\"\n  }), \"We\\xADb\\xADJars\"))), mdx(\"p\", null, \"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.9.1%22\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bintray.com/vertx/downloads/distribution/3.9.1/view\"\n  }), \"Bin\\xADtray\"), \".\"), mdx(\"p\", null, \"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/community\"\n  }), \"chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are ex­tremely pleased to an­nounce that the Eclipse Vert.x ver­sion 3.9.1 has been re­leased.\u003c/p\u003e\u003cp\u003eAmong all bug fixes you can find in 3.9.1 these en­hance­ment.\u003c/p\u003e\u003ch2 id=\"jdk-8-http2-support\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#jdk-8-http2-support\"\u003e\u003c/a\u003eJDK 8 HTTP/2 support\u003c/h2\u003e\u003cp\u003ePre­vi­ously using the Jetty ALPN agent or netty-​tcnative was re­quired to use HTTP/2 on JDK 8.\u003c/p\u003e\u003cp\u003eTLS ALPN sup­port has been back-​ported to JDK 8 re­cently and Vert.x has been up­graded to sup­port it, which means now you\ncan have HTTP/2 on JDK 8 out of the box. You need to most re­cent ver­sion of Open­JDK 8 or Or­a­cle JDK 8.\u003c/p\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.1-Release-Notes\"\u003e3.9.1 re­lease notes\u003c/a\u003e can be found on the wiki, as well as the\nlist of \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.1-Deprecations-and-breaking-changes\"\u003edep­re­ca­tions and break­ing changes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eDocker im­ages are avail­able on \u003ca href=\"https://hub.docker.com/u/vertx/\"\u003eDocker Hub\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe Vert.x dis­tri­b­u­tion can be down­loaded on the web­site but is also avail­able from \u003ca href=\"http://sdkman.io/index.html\"\u003eSD­KMan\u003c/a\u003e and \u003ca href=\"http://brew.sh/\"\u003eHome­Brew\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe event bus client using the SockJS bridge is avail­able from:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.npmjs.com/package/vertx3-eventbus-client\"\u003eNPM\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-bus-bower\"\u003eBower\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://www.webjars.org/\"\u003eWe­b­Jars\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe re­lease ar­ti­facts have been de­ployed to \u003ca href=\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.9.1%22\"\u003eMaven Cen­tral\u003c/a\u003e and you can get the dis­tri­b­u­tion on \u003ca href=\"https://bintray.com/vertx/downloads/distribution/3.9.1/view\"\u003eBin­tray\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThat’s it! Happy cod­ing and see you soon on our user or dev \u003ca href=\"https://vertx.io/community\"\u003echan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"jdk","tf":5},{"term":"releas","tf":3},{"term":"http","tf":3},{"term":"support","tf":3},{"term":"us","tf":3},{"term":"avail","tf":3},{"term":"version","tf":2},{"term":"alpn","tf":2},{"term":"recent","tf":2},{"term":"docker","tf":2},{"term":"distribut","tf":2},{"term":"extrem","tf":1},{"term":"pleas","tf":1},{"term":"announc","tf":1},{"term":"among","tf":1},{"term":"bug","tf":1},{"term":"fix","tf":1},{"term":"find","tf":1},{"term":"enhanc","tf":1},{"term":"previous","tf":1},{"term":"jetti","tf":1},{"term":"agent","tf":1},{"term":"netti","tf":1},{"term":"tcnativ","tf":1},{"term":"requir","tf":1}]},{"filename":"blog/2020-04-02-eclipse-vert-x-3-9-0-released.mdx","date":"2020-04-02","slug":"eclipse-vert-x-3-9-0-released","meta":{"title":"Eclipse Vert.x 3.9.0 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"New features include fluent queries in SQL clients, a new Redis client, an updated Kafka client, an improved Future API, and many more things."},"readingTime":{"text":"3 min read","minutes":2.83,"time":169800,"words":566},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are ex\\xADtremely pleased to an\\xADnounce that the Eclipse Vert.x ver\\xADsion 3.9.0 has been re\\xADleased.\"), mdx(\"h2\", {\n    \"id\": \"sql-client-fluent-queries\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sql-client-fluent-queries\"\n  })), \"SQL Client fluent queries\"), mdx(\"p\", null, \"The query API be\\xADcomes flu\\xADent with the ad\\xADdi\\xADtion of a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" API for queries cre\\xADation and con\\xADfig\\xADu\\xADra\\xADtion.\"), mdx(\"p\", null, \"Col\\xADlec\\xADtors query now be\\xADcomes part of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Query\"), \" in\\xADter\\xADface.\"), mdx(\"p\", null, \"This is a break\\xADing API change done under the tech pre\\xADview sta\\xADtus given that SQL client is a Vert.x 4 fea\\xADture back-\\u200Bported to Vert.x 3.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"client.prepareQuery(sql).execute(tuple, ar -\u003e ...);\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// With a collector\"), \"\\nclient.preparedQuery(sql).collecting(Collectors.toList()).execute(tuple, ar -\u003e ...);\\n\")), mdx(\"p\", null, \"You can read more about this new fea\\xADture \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.0-Deprecations-and-breaking-changes#fluent-query-api\"\n  }), \"here\"), \".\"), mdx(\"h2\", {\n    \"id\": \"redis-client-backport\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#redis-client-backport\"\n  })), \"Redis client backport\"), mdx(\"p\", null, \"For Vert.x 4.0 we are doing a full re\\xADboot to the redis client. The func\\xADtion\\xADal\\xADity for the new client is ready to test on the mas\\xADter branch. In order to give users the op\\xADpor\\xADtu\\xADnity to test and make the up\\xADcom\\xADing client even bet\\xADter it has been back\\xADported to the 3.9.0 re\\xADlease. The new client will allow users to con\\xADnect to a sin\\xADgle node, sen\\xADtinel or clus\\xADter of redis nodes. The eas\\xADi\\xADest way to start is:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Redis.createClient(\\n      vertx,\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RedisOptions()\\n        .setConnectionString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"redis://localhost:7006\\\"\"), \"))\\n      .send(Request.cmd(Command.PING), send -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (send.succeeded()) {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Should have received a pong...\"), \"\\n        }\\n      });\\n\")), mdx(\"h2\", {\n    \"id\": \"same-site-cookies\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#same-site-cookies\"\n  })), \"Same-site cookies\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://tools.ietf.org/html/draft-west-first-party-cookies-07\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"SameSite\"), \" Cookie\"), \" pol\\xADicy has been added to the HTTP Server Cook\\xADies.\"), mdx(\"p\", null, \"This is also ap\\xADplic\\xADa\\xADble to web which al\\xADlows cookie ses\\xADsions to use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SameSite\"), \" cook\\xADies:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"SessionHandler.create(store)\\n  .setCookieSameSite(CookieSameSite.STRICT);\\n\")), mdx(\"p\", null, \"Same-\\u200Bsite cook\\xADies let servers re\\xADquire that a cookie shouldn\\u2019t be sent with cross-\\u200Bsite (where Site is de\\xADfined by the reg\\xADis\\xADtra\\xADble do\\xADmain) re\\xADquests,\\nwhich pro\\xADvides some pro\\xADtec\\xADtion against cross-\\u200Bsite re\\xADquest forgery at\\xADtacks (CSRF).\"), mdx(\"h2\", {\n    \"id\": \"kafka-client-upgrade\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#kafka-client-upgrade\"\n  })), \"Kafka client upgrade\"), mdx(\"p\", null, \"The Kafka client has been up\\xADgraded to Kafka 2.4.0 .\"), mdx(\"p\", null, \"Our re\\xADac\\xADtive client ex\\xADposes the Kafka Admin API. As of 2.4.0 this API has been re\\xADplaced by a new Kafka Admin API and there\\xADfore\\nthe Vert.x Kafka Admin API changes, e.g list\\xADing con\\xADsumers groups\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"adminClient.listConsumerGroups(ar -\u003e {\\n    System.out.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ConsumerGroups= \\\"\"), \" + ar.result());\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"future-api\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#future-api\"\n  })), \"Future API\"), mdx(\"p\", null, \"With the re\\xADcent ad\\xADdi\\xADtion of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Future#onComplete(...)\"), \" sup\\xADport\\xADing sev\\xADeral han\\xADdlers per \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Future\"), \" in 3.9 made the\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Future#setHandler(...)\"), \" method feel awk\\xADward. In\\xADdeed \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setHandler\"), \" con\\xADveys the mean\\xADing that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Future\"), \" man\\xADages\\na sin\\xADgle han\\xADdler. In 3.9 we dep\\xADre\\xADcate \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Future#setHandler\"), \" in favor of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Future#onComplete\"), \".\"), mdx(\"h2\", {\n    \"id\": \"edns-disabled-by-default\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#edns-disabled-by-default\"\n  })), \"EDNS disabled by default\"), mdx(\"p\", null, \"EDNS is an ex\\xADten\\xADsion mech\\xADa\\xADnism for DNS (\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://fr.wikipedia.org/wiki/EDNS\"\n  }), \"https://fr.wikipedia.org/wiki/EDNS\"), \") that should be dis\\xADabled by de\\xADfault. It might\\ncause un\\xADwanted issue and should be dis\\xADabled by de\\xADfault.\"), mdx(\"h2\", {\n    \"id\": \"auth-deprecation-warnings\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#auth-deprecation-warnings\"\n  })), \"Auth Deprecation warnings\"), mdx(\"p\", null, \"As of 3.9.0 many APIs will be start warn\\xADing about dep\\xADre\\xADca\\xADtions. There is a big refac\\xADtor\\xADing and some break\\xADing API changes com\\xADing\\non 4.0.0 and these warn\\xADings are just to give users a heads up that API will change on the up\\xADcom\\xADing ver\\xADsion.\"), mdx(\"p\", null, \"For more in\\xADfor\\xADma\\xADtion about the up\\xADcom\\xADing 4.0 changes you can read \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\n  }), \"4.0.0-\\u200BDeprecations-and-breaking-changes\")), mdx(\"h2\", {\n    \"id\": \"dependency-upgrades\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#dependency-upgrades\"\n  })), \"Dependency upgrades\"), mdx(\"p\", null, \"In 3.9 we up\\xADdate a few ver\\xADsions:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Netty 4.1.48.Final\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Jack\\xADson 2.10.2\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Guava 25.1-jre\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"GraphQL Java 14\")), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.0-Release-Notes\"\n  }), \"3.9.0 re\\xADlease notes\"), \" can be found on the wiki, as well as the\\nlist of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.9.0-Deprecations-and-breaking-changes\"\n  }), \"dep\\xADre\\xADca\\xADtions and break\\xADing changes\")), mdx(\"p\", null, \"Docker im\\xADages are avail\\xADable on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/u/vertx/\"\n  }), \"Docker Hub\"), \".\"), mdx(\"p\", null, \"The Vert.x dis\\xADtri\\xADb\\xADu\\xADtion can be down\\xADloaded on the web\\xADsite but is also avail\\xADable from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sdkman.io/index.html\"\n  }), \"SD\\xADKMan\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://brew.sh/\"\n  }), \"Home\\xADBrew\"), \".\"), mdx(\"p\", null, \"The event bus client using the SockJS bridge is avail\\xADable from:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-eventbus-client\"\n  }), \"NPM\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"Bower\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.webjars.org/\"\n  }), \"We\\xADb\\xADJars\"))), mdx(\"p\", null, \"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.9.0%22\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bintray.com/vertx/downloads/distribution/3.9.0/view\"\n  }), \"Bin\\xADtray\"), \".\"), mdx(\"p\", null, \"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/community\"\n  }), \"chan\\xADnels\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are ex­tremely pleased to an­nounce that the Eclipse Vert.x ver­sion 3.9.0 has been re­leased.\u003c/p\u003e\u003ch2 id=\"sql-client-fluent-queries\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sql-client-fluent-queries\"\u003e\u003c/a\u003eSQL Client fluent queries\u003c/h2\u003e\u003cp\u003eThe query API be­comes flu­ent with the ad­di­tion of a \u003ccode\u003eQuery\u003c/code\u003e API for queries cre­ation and con­fig­u­ra­tion.\u003c/p\u003e\u003cp\u003eCol­lec­tors query now be­comes part of the \u003ccode\u003eQuery\u003c/code\u003e in­ter­face.\u003c/p\u003e\u003cp\u003eThis is a break­ing API change done under the tech pre­view sta­tus given that SQL client is a Vert.x 4 fea­ture back-​ported to Vert.x 3.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eclient.prepareQuery(sql).execute(tuple, ar -\u0026gt; ...);\n\n\u003cspan class=\"hljs-comment\"\u003e// With a collector\u003c/span\u003e\nclient.preparedQuery(sql).collecting(Collectors.toList()).execute(tuple, ar -\u0026gt; ...);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can read more about this new fea­ture \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.0-Deprecations-and-breaking-changes#fluent-query-api\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"redis-client-backport\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#redis-client-backport\"\u003e\u003c/a\u003eRedis client backport\u003c/h2\u003e\u003cp\u003eFor Vert.x 4.0 we are doing a full re­boot to the redis client. The func­tion­al­ity for the new client is ready to test on the mas­ter branch. In order to give users the op­por­tu­nity to test and make the up­com­ing client even bet­ter it has been back­ported to the 3.9.0 re­lease. The new client will allow users to con­nect to a sin­gle node, sen­tinel or clus­ter of redis nodes. The eas­i­est way to start is:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRedis.createClient(\n      vertx,\n      \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RedisOptions()\n        .setConnectionString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;redis://localhost:7006\u0026quot;\u003c/span\u003e))\n      .send(Request.cmd(Command.PING), send -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (send.succeeded()) {\n          \u003cspan class=\"hljs-comment\"\u003e// Should have received a pong...\u003c/span\u003e\n        }\n      });\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"same-site-cookies\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#same-site-cookies\"\u003e\u003c/a\u003eSame-site cookies\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://tools.ietf.org/html/draft-west-first-party-cookies-07\"\u003e\u003ccode\u003eSameSite\u003c/code\u003e Cookie\u003c/a\u003e pol­icy has been added to the HTTP Server Cook­ies.\u003c/p\u003e\u003cp\u003eThis is also ap­plic­a­ble to web which al­lows cookie ses­sions to use \u003ccode\u003eSameSite\u003c/code\u003e cook­ies:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eSessionHandler.create(store)\n  .setCookieSameSite(CookieSameSite.STRICT);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSame-​site cook­ies let servers re­quire that a cookie shouldn’t be sent with cross-​site (where Site is de­fined by the reg­is­tra­ble do­main) re­quests,\nwhich pro­vides some pro­tec­tion against cross-​site re­quest forgery at­tacks (CSRF).\u003c/p\u003e\u003ch2 id=\"kafka-client-upgrade\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#kafka-client-upgrade\"\u003e\u003c/a\u003eKafka client upgrade\u003c/h2\u003e\u003cp\u003eThe Kafka client has been up­graded to Kafka 2.4.0 .\u003c/p\u003e\u003cp\u003eOur re­ac­tive client ex­poses the Kafka Admin API. As of 2.4.0 this API has been re­placed by a new Kafka Admin API and there­fore\nthe Vert.x Kafka Admin API changes, e.g list­ing con­sumers groups\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eadminClient.listConsumerGroups(ar -\u0026gt; {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;ConsumerGroups= \u0026quot;\u003c/span\u003e + ar.result());\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"future-api\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#future-api\"\u003e\u003c/a\u003eFuture API\u003c/h2\u003e\u003cp\u003eWith the re­cent ad­di­tion of \u003ccode\u003eFuture#onComplete(...)\u003c/code\u003e sup­port­ing sev­eral han­dlers per \u003ccode\u003eFuture\u003c/code\u003e in 3.9 made the\n\u003ccode\u003eFuture#setHandler(...)\u003c/code\u003e method feel awk­ward. In­deed \u003ccode\u003esetHandler\u003c/code\u003e con­veys the mean­ing that the \u003ccode\u003eFuture\u003c/code\u003e man­ages\na sin­gle han­dler. In 3.9 we dep­re­cate \u003ccode\u003eFuture#setHandler\u003c/code\u003e in favor of \u003ccode\u003eFuture#onComplete\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"edns-disabled-by-default\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#edns-disabled-by-default\"\u003e\u003c/a\u003eEDNS disabled by default\u003c/h2\u003e\u003cp\u003eEDNS is an ex­ten­sion mech­a­nism for DNS (\u003ca href=\"https://fr.wikipedia.org/wiki/EDNS\"\u003ehttps://fr.wikipedia.org/wiki/EDNS\u003c/a\u003e) that should be dis­abled by de­fault. It might\ncause un­wanted issue and should be dis­abled by de­fault.\u003c/p\u003e\u003ch2 id=\"auth-deprecation-warnings\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#auth-deprecation-warnings\"\u003e\u003c/a\u003eAuth Deprecation warnings\u003c/h2\u003e\u003cp\u003eAs of 3.9.0 many APIs will be start warn­ing about dep­re­ca­tions. There is a big refac­tor­ing and some break­ing API changes com­ing\non 4.0.0 and these warn­ings are just to give users a heads up that API will change on the up­com­ing ver­sion.\u003c/p\u003e\u003cp\u003eFor more in­for­ma­tion about the up­com­ing 4.0 changes you can read \u003ca href=\"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\u003e4.0.0-​Deprecations-and-breaking-changes\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"dependency-upgrades\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#dependency-upgrades\"\u003e\u003c/a\u003eDependency upgrades\u003c/h2\u003e\u003cp\u003eIn 3.9 we up­date a few ver­sions:\u003c/p\u003e\u003cul\u003e\u003cli\u003eNetty 4.1.48.Final\u003c/li\u003e\u003cli\u003eJack­son 2.10.2\u003c/li\u003e\u003cli\u003eGuava 25.1-jre\u003c/li\u003e\u003cli\u003eGraphQL Java 14\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.0-Release-Notes\"\u003e3.9.0 re­lease notes\u003c/a\u003e can be found on the wiki, as well as the\nlist of \u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.9.0-Deprecations-and-breaking-changes\"\u003edep­re­ca­tions and break­ing changes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eDocker im­ages are avail­able on \u003ca href=\"https://hub.docker.com/u/vertx/\"\u003eDocker Hub\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe Vert.x dis­tri­b­u­tion can be down­loaded on the web­site but is also avail­able from \u003ca href=\"http://sdkman.io/index.html\"\u003eSD­KMan\u003c/a\u003e and \u003ca href=\"http://brew.sh/\"\u003eHome­Brew\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe event bus client using the SockJS bridge is avail­able from:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.npmjs.com/package/vertx3-eventbus-client\"\u003eNPM\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-bus-bower\"\u003eBower\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://www.webjars.org/\"\u003eWe­b­Jars\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe re­lease ar­ti­facts have been de­ployed to \u003ca href=\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.9.0%22\"\u003eMaven Cen­tral\u003c/a\u003e and you can get the dis­tri­b­u­tion on \u003ca href=\"https://bintray.com/vertx/downloads/distribution/3.9.0/view\"\u003eBin­tray\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThat’s it! Happy cod­ing and see you soon on our user or dev \u003ca href=\"https://vertx.io/community\"\u003echan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"client","tf":11},{"term":"api","tf":11},{"term":"chang","tf":7},{"term":"cooki","tf":7},{"term":"kafka","tf":6},{"term":"site","tf":5},{"term":"deprec","tf":5},{"term":"releas","tf":4},{"term":"queri","tf":4},{"term":"break","tf":4},{"term":"new","tf":4},{"term":"user","tf":4},{"term":"version","tf":3},{"term":"redi","tf":3},{"term":"upcom","tf":3},{"term":"will","tf":3},{"term":"upgrad","tf":3},{"term":"admin","tf":3},{"term":"edn","tf":3},{"term":"disabl","tf":3},{"term":"default","tf":3},{"term":"warn","tf":3},{"term":"avail","tf":3},{"term":"sql","tf":2},{"term":"fluent","tf":2}]},{"filename":"blog/2020-03-16-easy-sso-for-vert-x-with-keycloak.mdx","date":"2020-03-16","slug":"easy-sso-for-vert-x-with-keycloak","meta":{"title":"Easy SSO for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x."},"readingTime":{"text":"11 min read","minutes":10.11,"time":606599.9999999999,"words":2022},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TL;DR:\")), mdx(\"p\", null, \"In this blog post you\\u2019ll learn:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to im\\xADple\\xADment Sin\\xADgle Sign-\\u200Bon with OpenID Con\\xADnect\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to use Key\\xADcloak\\u2019s OpenID Dis\\xADcov\\xADery to infer OpenID provider con\\xADfig\\xADu\\xADra\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to ob\\xADtain user in\\xADfor\\xADma\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to check for au\\xADtho\\xADriza\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to call a Bearer pro\\xADtected ser\\xADvice with an Ac\\xADcess Token\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"How to im\\xADple\\xADment a form based lo\\xADgout\")), mdx(\"h2\", {\n    \"id\": \"hello-blog\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#hello-blog\"\n  })), \"Hello Blog\"), mdx(\"p\", null, \"This is my first post in the Vert.x Blog and I must admit that up until now I have never used Vert.x in a real project.\\n\\u201CWhy are you here?\\u201D, you might ask\\u2026 Well I cur\\xADrently have two main hob\\xADbies, learn\\xADing new things and se\\xADcur\\xADing apps with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/\"\n  }), \"Key\\xADcloak\"), \".\\nSo a few days ago, I stum\\xADbled upon the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.youtube.com/watch?v=LsaXy7SRXMY\u0026list=PLkeCJDaCC2ZsnySdg04Aq9D9FpAZY6K5D\"\n  }), \"In\\xADtro\\xADduc\\xADtion to Vert.x video se\\xADries on youtube\"), \" by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/infosec812\"\n  }), \"Deven Phillips\"), \" and I was im\\xADme\\xADdi\\xADately hooked. Vert.x was a new thing for me, so the next log\\xADi\\xADcal step was to fig\\xADure out how to se\\xADcure a Vert.x app with Key\\xADcloak.\"), mdx(\"p\", null, \"For this ex\\xADam\\xADple I build a small web app with Vert.x that shows how to im\\xADple\\xADment Sin\\xADgle Sign-\\u200Bon (SSO) with Key\\xADcloak\\nand OpenID Con\\xADnect, ob\\xADtain in\\xADfor\\xADma\\xADtion about the cur\\xADrent user, check for roles, call bearer pro\\xADtected ser\\xADvices and prop\\xADerly han\\xADdling lo\\xADgout.\"), mdx(\"h2\", {\n    \"id\": \"keycloak\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#keycloak\"\n  })), \"Keycloak\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/\"\n  }), \"Key\\xADcloak\"), \" is a Open Source Iden\\xADtity and Ac\\xADcess Man\\xADage\\xADment so\\xADlu\\xADtion which pro\\xADvides sup\\xADport for OpenID Con\\xADnect\\nbased Singe-\\u200BSign on, among many other things. I briefly looked for ways to se\\xADcur\\xADing a Vert.x app with Key\\xADcloak\\nand quickly found an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/blog/vertx-3-and-keycloak-tutorial/\"\n  }), \"older Vert.x Key\\xADcloak in\\xADte\\xADgra\\xADtion ex\\xADam\\xADple\"), \" in this very blog.\\nWhilst this is a good start for be\\xADgin\\xADners, the ex\\xADam\\xADple con\\xADtains a few is\\xADsues, e.g.:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"It uses hard\\xADcoded OpenID provider con\\xADfig\\xADu\\xADra\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fea\\xADtures a very sim\\xADplis\\xADtic in\\xADte\\xADgra\\xADtion (for the sake of sim\\xADplic\\xADity)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No user in\\xADfor\\xADma\\xADtion used\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No lo\\xADgout func\\xADtion\\xADal\\xADity is shown\")), mdx(\"p\", null, \"That some\\xADhow nerd\\xADsniped me a bit and so it came that, after a long day of con\\xADsult\\xADing work, I sat down to cre\\xADate an ex\\xADam\\xADple for a com\\xADplete Key\\xADcloak in\\xADte\\xADgra\\xADtion based on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-auth-oauth2/java/\"\n  }), \"Vert.x OpenID Con\\xADnect / OAuth2 Sup\\xADport\"), \".\"), mdx(\"p\", null, \"So let\\u2019s get started!\"), mdx(\"h3\", {\n    \"id\": \"keycloak-setup\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#keycloak-setup\"\n  })), \"Keycloak Setup\"), mdx(\"p\", null, \"To se\\xADcure a Vert.x app with Key\\xADcloak we of course need a Key\\xADcloak in\\xADstance. Al\\xADthough \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/docs/latest/getting_started/\"\n  }), \"Key\\xADcloak has a great get\\xADting started guide\"), \" I wanted to make it a bit eas\\xADier to put every\\xADthing to\\xADgether, there\\xADfore I pre\\xADpared a local Key\\xADcloak docker con\\xADtainer \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx#start-keycloak-with-the-vertx-realm\"\n  }), \"as de\\xADscribed here\"), \" that you can start eas\\xADily, which comes with all the re\\xADquired con\\xADfig\\xADu\\xADra\\xADtion in place.\"), mdx(\"p\", null, \"The pre\\xADcon\\xADfig\\xADured Key\\xADcloak realm named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx\"), \" con\\xADtains a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"demo-client\"), \" for our Vert.x web app and a set\\nof users for test\\xADing.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-haml\"\n  }), \"docker run \\\\\\n  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"it \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"-name vertx-keycloak \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"-rm \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"e KEYCLOAK_USER=admin \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"e KEYCLOAK_PASSWORD=admin \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"e KEYCLOAK_IMPORT=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/tmp/vertx\"), \"-realm.json \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"v $PWD/vertx-realm.\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \"json:\"), \"/tmp/vertx-realm.json \\\\\\n\"), \"  -\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"ruby\"\n  }), \"p \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-symbol\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \" \\\\\\n\"), \"  quay.io/keycloak/keycloak:9.0.0\\n\")), mdx(\"h2\", {\n    \"id\": \"vertx-web-app\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-web-app\"\n  })), \"Vert.x Web App\"), mdx(\"p\", null, \"The sim\\xADple web app con\\xADsists of a sin\\xADgle \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Verticle\"), \", runs on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8090\"), \" and pro\\xADvides a few routes with pro\\xADtected re\\xADsources. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/thomasdarimont/vertx-playground/blob/master/keycloak-vertx/src/main/java/demo/MainVerticle.java\"\n  }), \"You can find the com\\xADplete ex\\xADam\\xADple here\"), \".\"), mdx(\"p\", null, \"The web app con\\xADtains the fol\\xADlow\\xADing routes with han\\xADdlers:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/\"), \" - The un\\xADpro\\xADtected index page\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected\"), \" - The pro\\xADtected page, which shows a greet\\xADing mes\\xADsage, users need to login to ac\\xADcess pages be\\xADneath this path.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected/user\"), \" - The pro\\xADtected user page, which shows some in\\xADfor\\xADma\\xADtion about the user.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected/admin\"), \" - The pro\\xADtected admin page, which shows some in\\xADfor\\xADma\\xADtion about the admin, only users with role \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"admin\"), \" can ac\\xADcess this page.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/protected/userinfo\"), \" - The pro\\xADtected user\\xADinfo page, ob\\xADtains user in\\xADfor\\xADma\\xADtion from the bearer token pro\\xADtected user\\xADinfo end\\xADpoint in Key\\xADcloak.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/logout\"), \" - The pro\\xADtected lo\\xADgout re\\xADsource, which trig\\xADgers the user lo\\xADgout.\")), mdx(\"h3\", {\n    \"id\": \"running-the-app\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#running-the-app\"\n  })), \"Running the app\"), mdx(\"p\", null, \"To run the app, we need to build our app via:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" keycloak-vertx\\nmvn clean package\\n\")), mdx(\"p\", null, \"This cre\\xADates a runnable jar, which we can run via:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -jar target/*.jar\\n\")), mdx(\"p\", null, \"Note, that you need to start Key\\xADcloak, since our app will try to fetch con\\xADfig\\xADu\\xADra\\xADtion from Key\\xADcloak.\"), mdx(\"p\", null, \"If the ap\\xADpli\\xADca\\xADtion is run\\xADning, just browse to: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8090/\"), \".\"), mdx(\"p\", null, \"An ex\\xADam\\xADple in\\xADter\\xADac\\xADtion with the app can be seen in the fol\\xADlow\\xADing gif:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx-keycloak-integration/2020-03-07-vertx-keycloak-integration.gif\",\n    \"alt\": \"Vert.x Keycloak Integration Demo\"\n  }))), mdx(\"h3\", {\n    \"id\": \"router-sessionstore-and-csrf-protection\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#router-sessionstore-and-csrf-protection\"\n  })), \"Router, SessionStore and CSRF Protection\"), mdx(\"p\", null, \"We start the con\\xADfig\\xADu\\xADra\\xADtion of our web app by cre\\xADat\\xADing a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \" where we can add cus\\xADtom han\\xADdler func\\xADtions for our routes.\\nTo prop\\xADerly han\\xADdle the au\\xADthen\\xADti\\xADca\\xADtion state we need to cre\\xADate a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" and at\\xADtach it to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \".\\nThe \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" is used by our OAuth2/OpenID Con\\xADnect in\\xADfra\\xADstruc\\xADture to as\\xADso\\xADciate au\\xADthen\\xADti\\xADca\\xADtion in\\xADfor\\xADma\\xADtion with a ses\\xADsion.\\nBy the way, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" can also be clus\\xADtered if you need to dis\\xADtrib\\xADute the server-\\u200Bside state.\"), mdx(\"p\", null, \"Note that if you want to keep your server state\\xADless but still want to sup\\xADport clus\\xADter\\xADing,\\nthen you could pro\\xADvide your own im\\xADple\\xADmen\\xADta\\xADtion of a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SessionStore\"), \" which stores the ses\\xADsion in\\xADfor\\xADma\\xADtion\\nas an en\\xADcrypted cookie on the Client.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Router router = Router.router(vertx);\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Store session information on the server side\"), \"\\nSessionStore sessionStore = LocalSessionStore.create(vertx);\\nSessionHandler sessionHandler = SessionHandler.create(sessionStore);\\nrouter.route().handler(sessionHandler);\\n\")), mdx(\"p\", null, \"In order to pro\\xADtected against CSRF at\\xADtacks it is good prac\\xADtice to pro\\xADtect HTML forms with a CSRF token.\\nWe need this for our lo\\xADgout form that we\\u2019ll see later.\"), mdx(\"p\", null, \"To do this we con\\xADfig\\xADure a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CSRFHandler\"), \" and add it to our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// CSRF handler setup required for logout form\"), \"\\nString csrfSecret = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"zwiebelfische\\\"\"), \";\\nCSRFHandler csrfHandler = CSRFHandler.create(csrfSecret);\\nrouter.route().handler(ctx -\u003e {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Ensures that the csrf token request parameter is available for the CsrfHandler\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// after the logout form was submitted.\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// See \\\"Handling HTML forms\\\" https://vertx.io/docs/vertx-core/java/#_handling_requests\"), \"\\n            ctx.request().setExpectMultipart(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\n            ctx.request().endHandler(v -\u003e csrfHandler.handle(ctx));\\n        }\\n);\\n\")), mdx(\"h3\", {\n    \"id\": \"keycloak-setup-via-openid-connect-discovery\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#keycloak-setup-via-openid-connect-discovery\"\n  })), \"Keycloak Setup via OpenID Connect Discovery\"), mdx(\"p\", null, \"Our app is reg\\xADis\\xADtered as a con\\xADfi\\xADden\\xADtial OpenID Con\\xADnect client with Au\\xADtho\\xADriza\\xADtion Code Flow in Key\\xADcloak,\\nthus we need to con\\xADfig\\xADure \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client_id\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client_secret\"), \". Con\\xADfi\\xADden\\xADtial clients are typ\\xADi\\xADcally used\\nfor server-\\u200Bside web ap\\xADpli\\xADca\\xADtions, where one can se\\xADcurely store the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client_secret\"), \". You can find out more\\nabout\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.keycloak.org/docs/latest/server_admin/index.html#_access-type\"\n  }), \"The dif\\xADfer\\xADent Client Ac\\xADcess Types\"), \" in the Key\\xADcloak doc\\xADu\\xADmen\\xADta\\xADtion.\"), mdx(\"p\", null, \"Since we don\\u2019t want to con\\xADfig\\xADure things like OAuth2 / OpenID Con\\xADnect End\\xADpoints our\\xADselves, we use Key\\xADcloak\\u2019s OpenID Con\\xADnect dis\\xADcov\\xADery end\\xADpoint to infer the nec\\xADes\\xADsary Oauth2 / OpenID Con\\xADnect end\\xADpoint URLs.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"String hostname = System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.host\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" port = Integer.getInteger(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8090\"), \");\\nString baseUrl = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://%s:%d\\\"\"), \", hostname, port);\\nString oauthCallbackPath = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/callback\\\"\"), \";\\n\\nOAuth2ClientOptions clientOptions = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" OAuth2ClientOptions()\\n    .setFlow(OAuth2FlowType.AUTH_CODE)\\n    .setSite(System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"oauth2.issuer\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost:8080/auth/realms/vertx\\\"\"), \"))\\n    .setClientID(System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"oauth2.client_id\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"demo-client\\\"\"), \"))\\n    .setClientSecret(System.getProperty(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"oauth2.client_secret\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1f88bd14-7e7f-45e7-be27-d680da6e48d8\\\"\"), \"));\\n\\nKeycloakAuth.discover(vertx, clientOptions, asyncResult -\u003e {\\n\\n    OAuth2Auth oauth2Auth = asyncResult.result();\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (oauth2Auth == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"throw\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RuntimeException(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Could not configure Keycloak integration via OpenID Connect Discovery Endpoint. Is Keycloak running?\\\"\"), \");\\n    }\\n\\n    AuthHandler oauth2 = OAuth2AuthHandler.create(oauth2Auth, baseUrl + oauthCallbackPath)\\n        .setupCallback(router.get(oauthCallbackPath))\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Additional scopes: openid for OpenID Connect\"), \"\\n        .addAuthority(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"openid\\\"\"), \");\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// session handler needs access to the authenticated user, otherwise we get an infinite redirect loop\"), \"\\n    sessionHandler.setAuthProvider(oauth2Auth);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// protect resources beneath /protected/* with oauth2 handler\"), \"\\n    router.route(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/*\\\"\"), \").handler(oauth2);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// configure route handlers\"), \"\\n    configureRoutes(router, webClient, oauth2Auth);\\n});\\n\\ngetVertx().createHttpServer().requestHandler(router).listen(port);\\n\")), mdx(\"h3\", {\n    \"id\": \"route-handlers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#route-handlers\"\n  })), \"Route handlers\"), mdx(\"p\", null, \"We con\\xADfig\\xADure our route han\\xADdlers via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"configureRoutes\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"configureRoutes\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Router router, WebClient webClient, OAuth2Auth oauth2Auth)\"), \" \"), \"{\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleIndex);\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleGreet);\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/user\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleUserPage);\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/admin\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleAdminPage);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// extract discovered userinfo endpoint url\"), \"\\n    String userInfoUrl =  ((OAuth2AuthProviderImpl)oauth2Auth).getConfig().getUserInfoPath();\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/protected/userinfo\\\"\"), \").handler(createUserInfoHandler(webClient, userInfoUrl));\\n\\n    router.post(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/logout\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::handleLogout);\\n}\\n\")), mdx(\"p\", null, \"The index han\\xADdler ex\\xADposes an un\\xADpro\\xADtected re\\xADsource:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleIndex\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eWelcome to Vert.x Keycloak Example\u003c/h1\u003e\u003cbr\u003e\u003ca href=\\\\\\\"/protected\\\\\\\"\u003eProtected\u003c/a\u003e\\\"\"), \");\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"extract-user-information-from-the-openid-connect-id-token\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#extract-user-information-from-the-openid-connect-id-token\"\n  })), \"Extract User Information from the OpenID Connect ID Token\"), mdx(\"p\", null, \"Our app ex\\xADposes a sim\\xADple greet\\xADing page which shows some in\\xADfor\\xADma\\xADtion about the user and pro\\xADvides links to other pages.\"), mdx(\"p\", null, \"The user greet\\xADing han\\xADdler is pro\\xADtected by the Key\\xADcloak OAuth2 / OpenID Con\\xADnect in\\xADte\\xADgra\\xADtion. To show in\\xADfor\\xADma\\xADtion about\\nthe cur\\xADrent user, we first need to call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ctx.user()\"), \" method to get an user ob\\xADject we can work with.\\nTo ac\\xADcess the OAuth2 token in\\xADfor\\xADma\\xADtion, we need to cast it to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth2TokenImpl\"), \".\"), mdx(\"p\", null, \"We can ex\\xADtract the user in\\xADfor\\xADma\\xADtion like the user\\xADname from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IDToken\"), \" ex\\xADposed by the user ob\\xADject via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user.idToken().getString(\\\"preferred_username\\\")\"), \".\\nNote, there are many more claims like (name, email, give\\xADnanme, fam\\xADi\\xADly\\xADname etc.) avail\\xADable. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://openid.net/specs/openid-connect-core-1_0.html#Claims\"\n  }), \"OpenID Con\\xADnect Core Spec\\xADi\\xADfi\\xADca\\xADtion\"), \" con\\xADtains a list of avail\\xADable claims.\"), mdx(\"p\", null, \"We also gen\\xADer\\xADate a list with links to the other pages which are sup\\xADported:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleGreet\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\\n\\n    String username = oAuth2Token.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"preferred_username\\\"\"), \");\\n\\n    String greeting = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eHi %s @%s\u003c/h1\u003e\u003cul\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cli\u003e\u003ca href=\\\\\\\"/protected/user\\\\\\\"\u003eUser Area\u003c/a\u003e\u003c/li\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cli\u003e\u003ca href=\\\\\\\"/protected/admin\\\\\\\"\u003eAdmin Area\u003c/a\u003e\u003c/li\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cli\u003e\u003ca href=\\\\\\\"/protected/userinfo\\\\\\\"\u003eUser Info (Remote Call)\u003c/a\u003e\u003c/li\u003e\\\"\"), \" +\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003c/ul\u003e\\\"\"), \", username, Instant.now());\\n\\n    String logoutForm = createLogoutForm(ctx);\\n\\n    respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", greeting + logoutForm);\\n}\\n\")), mdx(\"p\", null, \"The user page han\\xADdler shows in\\xADfor\\xADma\\xADtion about the cur\\xADrent user:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleUserPage\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\\n\\n    String username = user.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"preferred_username\\\"\"), \");\\n    String displayName = oAuth2Token.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \");\\n\\n    String content = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eUser Page: %s (%s) @%s\u003c/h1\u003e\u003ca href=\\\\\\\"/protected\\\\\\\"\u003eProtected Area\u003c/a\u003e\\\"\"), \",\\n                                   username, displayName, Instant.now());\\n    respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", content);\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"authorization-checking-for-required-roles\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#authorization-checking-for-required-roles\"\n  })), \"Authorization: Checking for Required Roles\"), mdx(\"p\", null, \"Our app ex\\xADposes a sim\\xADple admin page which shows some in\\xADfor\\xADma\\xADtion for ad\\xADmins, which should only be vis\\xADi\\xADble for ad\\xADmins. Thus we re\\xADquire that users must have the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" realm role in Key\\xADcloak to be able to ac\\xADcess the admin page.\"), mdx(\"p\", null, \"This is done via a call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user.isAuthorized(\\\"realm:admin\\\", cb)\"), \". The han\\xADdler func\\xADtion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cb\"), \" ex\\xADposes\\nthe re\\xADsult of the au\\xADtho\\xADriza\\xADtion check via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\u003cBoolean\u003e res\"), \". If the cur\\xADrent user has the\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" role then the re\\xADsult is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \" oth\\xADer\\xADwise \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"false\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleAdminPage\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// check for realm-role \\\"admin\\\"\"), \"\\n    user.isAuthorized(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"realm:admin\\\"\"), \", res -\u003e {\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!res.succeeded() || !res.result()) {\\n            respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"403\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eForbidden\u003c/h1\u003e\\\"\"), \");\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n\\n        String username = user.idToken().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"preferred_username\\\"\"), \");\\n\\n        String content = String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eAdmin Page: %s @%s\u003c/h1\u003e\u003ca href=\\\\\\\"/protected\\\\\\\"\u003eProtected Area\u003c/a\u003e\\\"\"), \",\\n                                        username, Instant.now());\\n        respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", content);\\n    });\\n}\\n\")), mdx(\"h4\", {\n    \"id\": \"call-services-protected-with-bearer-token\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#call-services-protected-with-bearer-token\"\n  })), \"Call Services protected with Bearer Token\"), mdx(\"p\", null, \"Often we need to call other ser\\xADvices from our web app that are pro\\xADtected via Bearer Au\\xADthen\\xADti\\xADca\\xADtion. This means\\nthat we need a valid \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"access token\"), \" to ac\\xADcess a re\\xADsource pro\\xADvided on an\\xADother server.\"), mdx(\"p\", null, \"To demon\\xADstrate this we use Key\\xADcloak\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/userinfo\"), \" end\\xADpoint as a straw man to demon\\xADstrate back\\xADend calls with a bearer token.\"), mdx(\"p\", null, \"We can ob\\xADtain the cur\\xADrent valid \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"access token\"), \" via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user.opaqueAccessToken()\"), \".\\nSince we use a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WebClient\"), \" to call the pro\\xADtected end\\xADpoint, we need to pass the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"access token\"), \"\\nvia the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \" header by call\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bearerTokenAuthentication(user.opaqueAccessToken())\"), \"\\nin the cur\\xADrent \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HttpRequest\"), \" ob\\xADject:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Handler\u003cRoutingContext\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createUserInfoHandler\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(WebClient webClient, String userInfoUrl)\"), \" \"), \"{\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" (RoutingContext ctx) -\u003e {\\n\\n        OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\\n\\n        URI userInfoEndpointUri = URI.create(userInfoUrl);\\n        webClient\\n            .get(userInfoEndpointUri.getPort(), userInfoEndpointUri.getHost(), userInfoEndpointUri.getPath())\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// use the access token for calls to other services protected via JWT Bearer authentication\"), \"\\n            .bearerTokenAuthentication(user.opaqueAccessToken())\\n            .as(BodyCodec.jsonObject())\\n            .send(ar -\u003e {\\n\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!ar.succeeded()) {\\n                    respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"{}\\\"\"), \");\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n                }\\n\\n                JsonObject body = ar.result().body();\\n                respondWithOk(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \", body.encode());\\n            });\\n    };\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"handle-logout\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#handle-logout\"\n  })), \"Handle logout\"), mdx(\"p\", null, \"Now that we got a work\\xADing SSO login with au\\xADtho\\xADriza\\xADtion, it would be great if we would allow users to lo\\xADgout again.\\nTo do this we can lever\\xADage the built-\\u200Bin OpenID Con\\xADnect lo\\xADgout func\\xADtion\\xADal\\xADity which can be called via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"oAuth2Token.logout(cb)\"), \".\"), mdx(\"p\", null, \"The han\\xADdler func\\xADtion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cb\"), \" ex\\xADposes the re\\xADsult of the lo\\xADgout ac\\xADtion via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\u003cVoid\u003e res\"), \".\\nIf the lo\\xADgout was suc\\xADcess\\xADfull we destory our ses\\xADsion via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ctx.session().destroy()\"), \" and redi\\xADrect the user to the index page.\"), mdx(\"p\", null, \"The lo\\xADgout form is gen\\xADer\\xADated via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"createLogoutForm\"), \" method.\"), mdx(\"p\", null, \"As men\\xADtioned ear\\xADlier, we need to pro\\xADtect our lo\\xADgout form with a CSRF token to pre\\xADvent \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://owasp.org/www-community/attacks/csrf\"\n  }), \"CSRF at\\xADtacks\"), \".\"), mdx(\"p\", null, \"Note: If we had end\\xADpoints that would ac\\xADcept data sent to the server, then we\\u2019d need to guard those end\\xADpoints with an CSRF token as well.\"), mdx(\"p\", null, \"We need to ob\\xADtain the gen\\xADer\\xADated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CSRFToken\"), \" and ren\\xADder it into a hid\\xADden form input field that\\u2019s trans\\xADfered via HTTP POST when the lo\\xADgout form is sub\\xADmit\\xADted:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleLogout\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\\n    oAuth2Token.logout(res -\u003e {\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!res.succeeded()) {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// the user might not have been logged out, to know why:\"), \"\\n            respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \", String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ch1\u003eLogout failed %s\u003c/h1\u003e\\\"\"), \", res.cause()));\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n\\n        ctx.session().destroy();\\n        ctx.response().putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"location\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/?logout=true\\\"\"), \").setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"302\"), \").end();\\n    });\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" String \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createLogoutForm\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n\\n    String csrfToken = ctx.get(CSRFHandler.DEFAULT_HEADER_NAME);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cform action=\\\\\\\"/logout\\\\\\\" method=\\\\\\\"post\\\\\\\"\u003e\\\"\"), \"\\n            + String.format(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cinput type=\\\\\\\"hidden\\\\\\\" name=\\\\\\\"%s\\\\\\\" value=\\\\\\\"%s\\\\\\\"\u003e\\\"\"), \", CSRFHandler.DEFAULT_HEADER_NAME, csrfToken)\\n            + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003cbutton\u003eLogout\u003c/button\u003e\u003c/form\u003e\\\"\"), \";\\n}\\n\")), mdx(\"p\", null, \"Some ad\\xADdi\\xADtional plumb\\xADing:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"respondWithOk\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx, String contentType, String content)\"), \" \"), \"{\\n    respondWith(ctx, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \", contentType, content);\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"respondWith\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx, \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" statusCode, String contentType, String content)\"), \" \"), \"{\\n    ctx.request().response() \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\"), \"\\n            .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", contentType) \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\"), \"\\n            .setStatusCode(statusCode)\\n            .end(content);\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"more-examples\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#more-examples\"\n  })), \"More examples\"), mdx(\"p\", null, \"This con\\xADcludes the Key\\xADcloak in\\xADte\\xADgra\\xADtion ex\\xADam\\xADple.\"), mdx(\"p\", null, \"Check out the com\\xADplete ex\\xADam\\xADple in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx\"\n  }), \"keycloak-\\u200Bvertx Ex\\xADam\\xADples Repo\"), \".\"), mdx(\"p\", null, \"Thank you for your time, stay tuned for more up\\xADdates! If you want to learn more about Key\\xADcloak, feel free to reach out to me. You can find me via \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/thomasdarimont\"\n  }), \"thomas\\xADda\\xADri\\xADmont on twit\\xADter\"), \".\"), mdx(\"p\", null, \"Happy Hack\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003e\u003cstrong\u003eTL;DR:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIn this blog post you’ll learn:\u003c/p\u003e\u003cul\u003e\u003cli\u003eHow to im­ple­ment Sin­gle Sign-​on with OpenID Con­nect\u003c/li\u003e\u003cli\u003eHow to use Key­cloak’s OpenID Dis­cov­ery to infer OpenID provider con­fig­u­ra­tion\u003c/li\u003e\u003cli\u003eHow to ob­tain user in­for­ma­tion\u003c/li\u003e\u003cli\u003eHow to check for au­tho­riza­tion\u003c/li\u003e\u003cli\u003eHow to call a Bearer pro­tected ser­vice with an Ac­cess Token\u003c/li\u003e\u003cli\u003eHow to im­ple­ment a form based lo­gout\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"hello-blog\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#hello-blog\"\u003e\u003c/a\u003eHello Blog\u003c/h2\u003e\u003cp\u003eThis is my first post in the Vert.x Blog and I must admit that up until now I have never used Vert.x in a real project.\n“Why are you here?”, you might ask… Well I cur­rently have two main hob­bies, learn­ing new things and se­cur­ing apps with \u003ca href=\"https://www.keycloak.org/\"\u003eKey­cloak\u003c/a\u003e.\nSo a few days ago, I stum­bled upon the \u003ca href=\"https://www.youtube.com/watch?v=LsaXy7SRXMY\u0026amp;list=PLkeCJDaCC2ZsnySdg04Aq9D9FpAZY6K5D\"\u003eIn­tro­duc­tion to Vert.x video se­ries on youtube\u003c/a\u003e by \u003ca href=\"https://twitter.com/infosec812\"\u003eDeven Phillips\u003c/a\u003e and I was im­me­di­ately hooked. Vert.x was a new thing for me, so the next log­i­cal step was to fig­ure out how to se­cure a Vert.x app with Key­cloak.\u003c/p\u003e\u003cp\u003eFor this ex­am­ple I build a small web app with Vert.x that shows how to im­ple­ment Sin­gle Sign-​on (SSO) with Key­cloak\nand OpenID Con­nect, ob­tain in­for­ma­tion about the cur­rent user, check for roles, call bearer pro­tected ser­vices and prop­erly han­dling lo­gout.\u003c/p\u003e\u003ch2 id=\"keycloak\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#keycloak\"\u003e\u003c/a\u003eKeycloak\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://www.keycloak.org/\"\u003eKey­cloak\u003c/a\u003e is a Open Source Iden­tity and Ac­cess Man­age­ment so­lu­tion which pro­vides sup­port for OpenID Con­nect\nbased Singe-​Sign on, among many other things. I briefly looked for ways to se­cur­ing a Vert.x app with Key­cloak\nand quickly found an \u003ca href=\"https://vertx.io/blog/vertx-3-and-keycloak-tutorial/\"\u003eolder Vert.x Key­cloak in­te­gra­tion ex­am­ple\u003c/a\u003e in this very blog.\nWhilst this is a good start for be­gin­ners, the ex­am­ple con­tains a few is­sues, e.g.:\u003c/p\u003e\u003cul\u003e\u003cli\u003eIt uses hard­coded OpenID provider con­fig­u­ra­tion\u003c/li\u003e\u003cli\u003eFea­tures a very sim­plis­tic in­te­gra­tion (for the sake of sim­plic­ity)\u003c/li\u003e\u003cli\u003eNo user in­for­ma­tion used\u003c/li\u003e\u003cli\u003eNo lo­gout func­tion­al­ity is shown\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThat some­how nerd­sniped me a bit and so it came that, after a long day of con­sult­ing work, I sat down to cre­ate an ex­am­ple for a com­plete Key­cloak in­te­gra­tion based on \u003ca href=\"https://vertx.io/docs/vertx-auth-oauth2/java/\"\u003eVert.x OpenID Con­nect / OAuth2 Sup­port\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eSo let’s get started!\u003c/p\u003e\u003ch3 id=\"keycloak-setup\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#keycloak-setup\"\u003e\u003c/a\u003eKeycloak Setup\u003c/h3\u003e\u003cp\u003eTo se­cure a Vert.x app with Key­cloak we of course need a Key­cloak in­stance. Al­though \u003ca href=\"https://www.keycloak.org/docs/latest/getting_started/\"\u003eKey­cloak has a great get­ting started guide\u003c/a\u003e I wanted to make it a bit eas­ier to put every­thing to­gether, there­fore I pre­pared a local Key­cloak docker con­tainer \u003ca href=\"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx#start-keycloak-with-the-vertx-realm\"\u003eas de­scribed here\u003c/a\u003e that you can start eas­ily, which comes with all the re­quired con­fig­u­ra­tion in place.\u003c/p\u003e\u003cp\u003eThe pre­con­fig­ured Key­cloak realm named \u003ccode\u003evertx\u003c/code\u003e con­tains a \u003ccode\u003edemo-client\u003c/code\u003e for our Vert.x web app and a set\nof users for test­ing.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-haml\"\u003edocker run \\\n  -\u003cspan class=\"ruby\"\u003eit \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003e-name vertx-keycloak \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003e-rm \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ee KEYCLOAK_USER=admin \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ee KEYCLOAK_PASSWORD=admin \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ee KEYCLOAK_IMPORT=\u003cspan class=\"hljs-regexp\"\u003e/tmp/vertx\u003c/span\u003e-realm.json \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ev $PWD/vertx-realm.\u003cspan class=\"hljs-symbol\"\u003ejson:\u003c/span\u003e/tmp/vertx-realm.json \\\n\u003c/span\u003e  -\u003cspan class=\"ruby\"\u003ep \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e\u003cspan class=\"hljs-symbol\"\u003e:\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e \\\n\u003c/span\u003e  quay.io/keycloak/keycloak:9.0.0\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"vertx-web-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-web-app\"\u003e\u003c/a\u003eVert.x Web App\u003c/h2\u003e\u003cp\u003eThe sim­ple web app con­sists of a sin­gle \u003ccode\u003eVerticle\u003c/code\u003e, runs on \u003ccode\u003ehttp://localhost:8090\u003c/code\u003e and pro­vides a few routes with pro­tected re­sources. \u003ca href=\"https://github.com/thomasdarimont/vertx-playground/blob/master/keycloak-vertx/src/main/java/demo/MainVerticle.java\"\u003eYou can find the com­plete ex­am­ple here\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe web app con­tains the fol­low­ing routes with han­dlers:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e/\u003c/code\u003e - The un­pro­tected index page\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected\u003c/code\u003e - The pro­tected page, which shows a greet­ing mes­sage, users need to login to ac­cess pages be­neath this path.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected/user\u003c/code\u003e - The pro­tected user page, which shows some in­for­ma­tion about the user.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected/admin\u003c/code\u003e - The pro­tected admin page, which shows some in­for­ma­tion about the admin, only users with role \u003ccode\u003eadmin\u003c/code\u003e can ac­cess this page.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/protected/userinfo\u003c/code\u003e - The pro­tected user­info page, ob­tains user in­for­ma­tion from the bearer token pro­tected user­info end­point in Key­cloak.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e/logout\u003c/code\u003e - The pro­tected lo­gout re­source, which trig­gers the user lo­gout.\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"running-the-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#running-the-app\"\u003e\u003c/a\u003eRunning the app\u003c/h3\u003e\u003cp\u003eTo run the app, we need to build our app via:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e keycloak-vertx\nmvn clean package\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis cre­ates a runnable jar, which we can run via:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ejava -jar target/*.jar\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNote, that you need to start Key­cloak, since our app will try to fetch con­fig­u­ra­tion from Key­cloak.\u003c/p\u003e\u003cp\u003eIf the ap­pli­ca­tion is run­ning, just browse to: \u003ccode\u003ehttp://localhost:8090/\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eAn ex­am­ple in­ter­ac­tion with the app can be seen in the fol­low­ing gif:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx-keycloak-integration/2020-03-07-vertx-keycloak-integration.gif\" alt=\"Vert.x Keycloak Integration Demo\"/\u003e\u003c/p\u003e\u003ch3 id=\"router-sessionstore-and-csrf-protection\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#router-sessionstore-and-csrf-protection\"\u003e\u003c/a\u003eRouter, SessionStore and CSRF Protection\u003c/h3\u003e\u003cp\u003eWe start the con­fig­u­ra­tion of our web app by cre­at­ing a \u003ccode\u003eRouter\u003c/code\u003e where we can add cus­tom han­dler func­tions for our routes.\nTo prop­erly han­dle the au­then­ti­ca­tion state we need to cre­ate a \u003ccode\u003eSessionStore\u003c/code\u003e and at­tach it to the \u003ccode\u003eRouter\u003c/code\u003e.\nThe \u003ccode\u003eSessionStore\u003c/code\u003e is used by our OAuth2/OpenID Con­nect in­fra­struc­ture to as­so­ciate au­then­ti­ca­tion in­for­ma­tion with a ses­sion.\nBy the way, the \u003ccode\u003eSessionStore\u003c/code\u003e can also be clus­tered if you need to dis­trib­ute the server-​side state.\u003c/p\u003e\u003cp\u003eNote that if you want to keep your server state­less but still want to sup­port clus­ter­ing,\nthen you could pro­vide your own im­ple­men­ta­tion of a \u003ccode\u003eSessionStore\u003c/code\u003e which stores the ses­sion in­for­ma­tion\nas an en­crypted cookie on the Client.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRouter router = Router.router(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Store session information on the server side\u003c/span\u003e\nSessionStore sessionStore = LocalSessionStore.create(vertx);\nSessionHandler sessionHandler = SessionHandler.create(sessionStore);\nrouter.route().handler(sessionHandler);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn order to pro­tected against CSRF at­tacks it is good prac­tice to pro­tect HTML forms with a CSRF token.\nWe need this for our lo­gout form that we’ll see later.\u003c/p\u003e\u003cp\u003eTo do this we con­fig­ure a \u003ccode\u003eCSRFHandler\u003c/code\u003e and add it to our \u003ccode\u003eRouter\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// CSRF handler setup required for logout form\u003c/span\u003e\nString csrfSecret = \u003cspan class=\"hljs-string\"\u003e\u0026quot;zwiebelfische\u0026quot;\u003c/span\u003e;\nCSRFHandler csrfHandler = CSRFHandler.create(csrfSecret);\nrouter.route().handler(ctx -\u0026gt; {\n            \u003cspan class=\"hljs-comment\"\u003e// Ensures that the csrf token request parameter is available for the CsrfHandler\u003c/span\u003e\n            \u003cspan class=\"hljs-comment\"\u003e// after the logout form was submitted.\u003c/span\u003e\n            \u003cspan class=\"hljs-comment\"\u003e// See \u0026quot;Handling HTML forms\u0026quot; https://vertx.io/docs/vertx-core/java/#_handling_requests\u003c/span\u003e\n            ctx.request().setExpectMultipart(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n            ctx.request().endHandler(v -\u0026gt; csrfHandler.handle(ctx));\n        }\n);\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"keycloak-setup-via-openid-connect-discovery\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#keycloak-setup-via-openid-connect-discovery\"\u003e\u003c/a\u003eKeycloak Setup via OpenID Connect Discovery\u003c/h3\u003e\u003cp\u003eOur app is reg­is­tered as a con­fi­den­tial OpenID Con­nect client with Au­tho­riza­tion Code Flow in Key­cloak,\nthus we need to con­fig­ure \u003ccode\u003eclient_id\u003c/code\u003e and \u003ccode\u003eclient_secret\u003c/code\u003e. Con­fi­den­tial clients are typ­i­cally used\nfor server-​side web ap­pli­ca­tions, where one can se­curely store the \u003ccode\u003eclient_secret\u003c/code\u003e. You can find out more\nabout\u003ca href=\"https://www.keycloak.org/docs/latest/server_admin/index.html#_access-type\"\u003eThe dif­fer­ent Client Ac­cess Types\u003c/a\u003e in the Key­cloak doc­u­men­ta­tion.\u003c/p\u003e\u003cp\u003eSince we don’t want to con­fig­ure things like OAuth2 / OpenID Con­nect End­points our­selves, we use Key­cloak’s OpenID Con­nect dis­cov­ery end­point to infer the nec­es­sary Oauth2 / OpenID Con­nect end­point URLs.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eString hostname = System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e port = Integer.getInteger(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8090\u003c/span\u003e);\nString baseUrl = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://%s:%d\u0026quot;\u003c/span\u003e, hostname, port);\nString oauthCallbackPath = \u003cspan class=\"hljs-string\"\u003e\u0026quot;/callback\u0026quot;\u003c/span\u003e;\n\nOAuth2ClientOptions clientOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OAuth2ClientOptions()\n    .setFlow(OAuth2FlowType.AUTH_CODE)\n    .setSite(System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;oauth2.issuer\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:8080/auth/realms/vertx\u0026quot;\u003c/span\u003e))\n    .setClientID(System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;oauth2.client_id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;demo-client\u0026quot;\u003c/span\u003e))\n    .setClientSecret(System.getProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;oauth2.client_secret\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1f88bd14-7e7f-45e7-be27-d680da6e48d8\u0026quot;\u003c/span\u003e));\n\nKeycloakAuth.discover(vertx, clientOptions, asyncResult -\u0026gt; {\n\n    OAuth2Auth oauth2Auth = asyncResult.result();\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (oauth2Auth == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RuntimeException(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Could not configure Keycloak integration via OpenID Connect Discovery Endpoint. Is Keycloak running?\u0026quot;\u003c/span\u003e);\n    }\n\n    AuthHandler oauth2 = OAuth2AuthHandler.create(oauth2Auth, baseUrl + oauthCallbackPath)\n        .setupCallback(router.get(oauthCallbackPath))\n        \u003cspan class=\"hljs-comment\"\u003e// Additional scopes: openid for OpenID Connect\u003c/span\u003e\n        .addAuthority(\u003cspan class=\"hljs-string\"\u003e\u0026quot;openid\u0026quot;\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-comment\"\u003e// session handler needs access to the authenticated user, otherwise we get an infinite redirect loop\u003c/span\u003e\n    sessionHandler.setAuthProvider(oauth2Auth);\n\n    \u003cspan class=\"hljs-comment\"\u003e// protect resources beneath /protected/* with oauth2 handler\u003c/span\u003e\n    router.route(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/*\u0026quot;\u003c/span\u003e).handler(oauth2);\n\n    \u003cspan class=\"hljs-comment\"\u003e// configure route handlers\u003c/span\u003e\n    configureRoutes(router, webClient, oauth2Auth);\n});\n\ngetVertx().createHttpServer().requestHandler(router).listen(port);\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"route-handlers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#route-handlers\"\u003e\u003c/a\u003eRoute handlers\u003c/h3\u003e\u003cp\u003eWe con­fig­ure our route han­dlers via \u003ccode\u003econfigureRoutes\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003econfigureRoutes\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Router router, WebClient webClient, OAuth2Auth oauth2Auth)\u003c/span\u003e \u003c/span\u003e{\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleIndex);\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleGreet);\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/user\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleUserPage);\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/admin\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleAdminPage);\n\n    \u003cspan class=\"hljs-comment\"\u003e// extract discovered userinfo endpoint url\u003c/span\u003e\n    String userInfoUrl =  ((OAuth2AuthProviderImpl)oauth2Auth).getConfig().getUserInfoPath();\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/protected/userinfo\u0026quot;\u003c/span\u003e).handler(createUserInfoHandler(webClient, userInfoUrl));\n\n    router.post(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/logout\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::handleLogout);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe index han­dler ex­poses an un­pro­tected re­source:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleIndex\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Welcome to Vert.x Keycloak Example\u0026lt;/h1\u0026gt;\u0026lt;br\u0026gt;\u0026lt;a href=\\\u0026quot;/protected\\\u0026quot;\u0026gt;Protected\u0026lt;/a\u0026gt;\u0026quot;\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"extract-user-information-from-the-openid-connect-id-token\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#extract-user-information-from-the-openid-connect-id-token\"\u003e\u003c/a\u003eExtract User Information from the OpenID Connect ID Token\u003c/h3\u003e\u003cp\u003eOur app ex­poses a sim­ple greet­ing page which shows some in­for­ma­tion about the user and pro­vides links to other pages.\u003c/p\u003e\u003cp\u003eThe user greet­ing han­dler is pro­tected by the Key­cloak OAuth2 / OpenID Con­nect in­te­gra­tion. To show in­for­ma­tion about\nthe cur­rent user, we first need to call the \u003ccode\u003ectx.user()\u003c/code\u003e method to get an user ob­ject we can work with.\nTo ac­cess the OAuth2 token in­for­ma­tion, we need to cast it to \u003ccode\u003eOAuth2TokenImpl\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eWe can ex­tract the user in­for­ma­tion like the user­name from the \u003ccode\u003eIDToken\u003c/code\u003e ex­posed by the user ob­ject via \u003ccode\u003euser.idToken().getString(\u0026quot;preferred_username\u0026quot;)\u003c/code\u003e.\nNote, there are many more claims like (name, email, give­nanme, fam­i­ly­name etc.) avail­able. The \u003ca href=\"https://openid.net/specs/openid-connect-core-1_0.html#Claims\"\u003eOpenID Con­nect Core Spec­i­fi­ca­tion\u003c/a\u003e con­tains a list of avail­able claims.\u003c/p\u003e\u003cp\u003eWe also gen­er­ate a list with links to the other pages which are sup­ported:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleGreet\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\n\n    String username = oAuth2Token.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;preferred_username\u0026quot;\u003c/span\u003e);\n\n    String greeting = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Hi %s @%s\u0026lt;/h1\u0026gt;\u0026lt;ul\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;li\u0026gt;\u0026lt;a href=\\\u0026quot;/protected/user\\\u0026quot;\u0026gt;User Area\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;li\u0026gt;\u0026lt;a href=\\\u0026quot;/protected/admin\\\u0026quot;\u0026gt;Admin Area\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;li\u0026gt;\u0026lt;a href=\\\u0026quot;/protected/userinfo\\\u0026quot;\u0026gt;User Info (Remote Call)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\u0026quot;\u003c/span\u003e +\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;/ul\u0026gt;\u0026quot;\u003c/span\u003e, username, Instant.now());\n\n    String logoutForm = createLogoutForm(ctx);\n\n    respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, greeting + logoutForm);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe user page han­dler shows in­for­ma­tion about the cur­rent user:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleUserPage\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\n\n    String username = user.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;preferred_username\u0026quot;\u003c/span\u003e);\n    String displayName = oAuth2Token.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e);\n\n    String content = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;User Page: %s (%s) @%s\u0026lt;/h1\u0026gt;\u0026lt;a href=\\\u0026quot;/protected\\\u0026quot;\u0026gt;Protected Area\u0026lt;/a\u0026gt;\u0026quot;\u003c/span\u003e,\n                                   username, displayName, Instant.now());\n    respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, content);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"authorization-checking-for-required-roles\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#authorization-checking-for-required-roles\"\u003e\u003c/a\u003eAuthorization: Checking for Required Roles\u003c/h3\u003e\u003cp\u003eOur app ex­poses a sim­ple admin page which shows some in­for­ma­tion for ad­mins, which should only be vis­i­ble for ad­mins. Thus we re­quire that users must have the \u003ccode\u003eadmin\u003c/code\u003e realm role in Key­cloak to be able to ac­cess the admin page.\u003c/p\u003e\u003cp\u003eThis is done via a call to \u003ccode\u003euser.isAuthorized(\u0026quot;realm:admin\u0026quot;, cb)\u003c/code\u003e. The han­dler func­tion \u003ccode\u003ecb\u003c/code\u003e ex­poses\nthe re­sult of the au­tho­riza­tion check via the \u003ccode\u003eAsyncResult\u0026lt;Boolean\u0026gt; res\u003c/code\u003e. If the cur­rent user has the\n\u003ccode\u003eadmin\u003c/code\u003e role then the re­sult is \u003ccode\u003etrue\u003c/code\u003e oth­er­wise \u003ccode\u003efalse\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleAdminPage\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\n\n    \u003cspan class=\"hljs-comment\"\u003e// check for realm-role \u0026quot;admin\u0026quot;\u003c/span\u003e\n    user.isAuthorized(\u003cspan class=\"hljs-string\"\u003e\u0026quot;realm:admin\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!res.succeeded() || !res.result()) {\n            respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Forbidden\u0026lt;/h1\u0026gt;\u0026quot;\u003c/span\u003e);\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n        }\n\n        String username = user.idToken().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;preferred_username\u0026quot;\u003c/span\u003e);\n\n        String content = String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Admin Page: %s @%s\u0026lt;/h1\u0026gt;\u0026lt;a href=\\\u0026quot;/protected\\\u0026quot;\u0026gt;Protected Area\u0026lt;/a\u0026gt;\u0026quot;\u003c/span\u003e,\n                                        username, Instant.now());\n        respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, content);\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"call-services-protected-with-bearer-token\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#call-services-protected-with-bearer-token\"\u003e\u003c/a\u003eCall Services protected with Bearer Token\u003c/h4\u003e\u003cp\u003eOften we need to call other ser­vices from our web app that are pro­tected via Bearer Au­then­ti­ca­tion. This means\nthat we need a valid \u003ccode\u003eaccess token\u003c/code\u003e to ac­cess a re­source pro­vided on an­other server.\u003c/p\u003e\u003cp\u003eTo demon­strate this we use Key­cloak’s \u003ccode\u003e/userinfo\u003c/code\u003e end­point as a straw man to demon­strate back­end calls with a bearer token.\u003c/p\u003e\u003cp\u003eWe can ob­tain the cur­rent valid \u003ccode\u003eaccess token\u003c/code\u003e via \u003ccode\u003euser.opaqueAccessToken()\u003c/code\u003e.\nSince we use a \u003ccode\u003eWebClient\u003c/code\u003e to call the pro­tected end­point, we need to pass the \u003ccode\u003eaccess token\u003c/code\u003e\nvia the \u003ccode\u003eAuthorization\u003c/code\u003e header by call­ing \u003ccode\u003ebearerTokenAuthentication(user.opaqueAccessToken())\u003c/code\u003e\nin the cur­rent \u003ccode\u003eHttpRequest\u003c/code\u003e ob­ject:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Handler\u0026lt;RoutingContext\u0026gt; \u003cspan class=\"hljs-title\"\u003ecreateUserInfoHandler\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(WebClient webClient, String userInfoUrl)\u003c/span\u003e \u003c/span\u003e{\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (RoutingContext ctx) -\u0026gt; {\n\n        OAuth2TokenImpl user = (OAuth2TokenImpl) ctx.user();\n\n        URI userInfoEndpointUri = URI.create(userInfoUrl);\n        webClient\n            .get(userInfoEndpointUri.getPort(), userInfoEndpointUri.getHost(), userInfoEndpointUri.getPath())\n            \u003cspan class=\"hljs-comment\"\u003e// use the access token for calls to other services protected via JWT Bearer authentication\u003c/span\u003e\n            .bearerTokenAuthentication(user.opaqueAccessToken())\n            .as(BodyCodec.jsonObject())\n            .send(ar -\u0026gt; {\n\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!ar.succeeded()) {\n                    respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;{}\u0026quot;\u003c/span\u003e);\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n                }\n\n                JsonObject body = ar.result().body();\n                respondWithOk(ctx, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e, body.encode());\n            });\n    };\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"handle-logout\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#handle-logout\"\u003e\u003c/a\u003eHandle logout\u003c/h3\u003e\u003cp\u003eNow that we got a work­ing SSO login with au­tho­riza­tion, it would be great if we would allow users to lo­gout again.\nTo do this we can lever­age the built-​in OpenID Con­nect lo­gout func­tion­al­ity which can be called via \u003ccode\u003eoAuth2Token.logout(cb)\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThe han­dler func­tion \u003ccode\u003ecb\u003c/code\u003e ex­poses the re­sult of the lo­gout ac­tion via the \u003ccode\u003eAsyncResult\u0026lt;Void\u0026gt; res\u003c/code\u003e.\nIf the lo­gout was suc­cess­full we destory our ses­sion via \u003ccode\u003ectx.session().destroy()\u003c/code\u003e and redi­rect the user to the index page.\u003c/p\u003e\u003cp\u003eThe lo­gout form is gen­er­ated via the \u003ccode\u003ecreateLogoutForm\u003c/code\u003e method.\u003c/p\u003e\u003cp\u003eAs men­tioned ear­lier, we need to pro­tect our lo­gout form with a CSRF token to pre­vent \u003ca href=\"https://owasp.org/www-community/attacks/csrf\"\u003eCSRF at­tacks\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eNote: If we had end­points that would ac­cept data sent to the server, then we’d need to guard those end­points with an CSRF token as well.\u003c/p\u003e\u003cp\u003eWe need to ob­tain the gen­er­ated \u003ccode\u003eCSRFToken\u003c/code\u003e and ren­der it into a hid­den form input field that’s trans­fered via HTTP POST when the lo­gout form is sub­mit­ted:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleLogout\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    OAuth2TokenImpl oAuth2Token = (OAuth2TokenImpl) ctx.user();\n    oAuth2Token.logout(res -\u0026gt; {\n\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!res.succeeded()) {\n            \u003cspan class=\"hljs-comment\"\u003e// the user might not have been logged out, to know why:\u003c/span\u003e\n            respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e, String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;h1\u0026gt;Logout failed %s\u0026lt;/h1\u0026gt;\u0026quot;\u003c/span\u003e, res.cause()));\n            \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n        }\n\n        ctx.session().destroy();\n        ctx.response().putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;location\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/?logout=true\u0026quot;\u003c/span\u003e).setStatusCode(\u003cspan class=\"hljs-number\"\u003e302\u003c/span\u003e).end();\n    });\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e String \u003cspan class=\"hljs-title\"\u003ecreateLogoutForm\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n\n    String csrfToken = ctx.get(CSRFHandler.DEFAULT_HEADER_NAME);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;form action=\\\u0026quot;/logout\\\u0026quot; method=\\\u0026quot;post\\\u0026quot;\u0026gt;\u0026quot;\u003c/span\u003e\n            + String.format(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;input type=\\\u0026quot;hidden\\\u0026quot; name=\\\u0026quot;%s\\\u0026quot; value=\\\u0026quot;%s\\\u0026quot;\u0026gt;\u0026quot;\u003c/span\u003e, CSRFHandler.DEFAULT_HEADER_NAME, csrfToken)\n            + \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;button\u0026gt;Logout\u0026lt;/button\u0026gt;\u0026lt;/form\u0026gt;\u0026quot;\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSome ad­di­tional plumb­ing:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erespondWithOk\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx, String contentType, String content)\u003c/span\u003e \u003c/span\u003e{\n    respondWith(ctx, \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, contentType, content);\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003erespondWith\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx, \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e statusCode, String contentType, String content)\u003c/span\u003e \u003c/span\u003e{\n    ctx.request().response() \u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n            .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, contentType) \u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n            .setStatusCode(statusCode)\n            .end(content);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"more-examples\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#more-examples\"\u003e\u003c/a\u003eMore examples\u003c/h2\u003e\u003cp\u003eThis con­cludes the Key­cloak in­te­gra­tion ex­am­ple.\u003c/p\u003e\u003cp\u003eCheck out the com­plete ex­am­ple in \u003ca href=\"https://github.com/thomasdarimont/vertx-playground/tree/master/keycloak-vertx\"\u003ekeycloak-​vertx Ex­am­ples Repo\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThank you for your time, stay tuned for more up­dates! If you want to learn more about Key­cloak, feel free to reach out to me. You can find me via \u003ca href=\"https://twitter.com/thomasdarimont\"\u003ethomas­da­ri­mont on twit­ter\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eHappy Hack­ing!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"keycloak","tf":28},{"term":"user","tf":23},{"term":"app","tf":19},{"term":"openid","tf":17},{"term":"protect","tf":17},{"term":"need","tf":16},{"term":"via","tf":16},{"term":"inform","tf":15},{"term":"connect","tf":14},{"term":"logout","tf":14},{"term":"page","tf":14},{"term":"call","tf":10},{"term":"exampl","tf":10},{"term":"us","tf":9},{"term":"configur","tf":9},{"term":"token","tf":9},{"term":"handler","tf":9},{"term":"access","tf":8},{"term":"web","tf":8},{"term":"show","tf":8},{"term":"endpoint","tf":8},{"term":"provid","tf":7},{"term":"form","tf":7},{"term":"current","tf":7},{"term":"bearer","tf":6}]}],"numPages":16},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{},"buildId":"C_I4gGOFTI-4fY_eV8SrD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.8577696c4e17514af975.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_buildManifest.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_ssgManifest.js" async=""></script></body></html>