<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Page 13 | Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.176b8cb6.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.176b8cb6.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.8577696c4e17514af975.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-entries"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">18 January 2016</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/using-hamcrest-matchers-with-vert-x-unit/">Using Hamcrest Matchers with Vert.x Unit</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Vert.x Unit is a very elegant library to test asynchronous applications developed with vert.x. However because of this asynchronous aspect, reporting test failures is not natural for JUnit users.</p><span class="read-more-link"><a href="/blog/using-hamcrest-matchers-with-vert-x-unit/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">15 January 2016</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/real-time-bidding-with-websockets-and-vert-x/">Real-time bidding with Websockets and Vert.x</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/mwarc.png?size=50"/><a href="https://github.com/mwarc" target="_blank" rel="noopener noreferrer">Marcin Warczyglowa</a></li></ul></span><p class="blog-entry-summary">The expectations of users for interactivity with web applications have changed over the past few years.
    Users during bidding in auction no longer want to press the refresh button.</p><span class="read-more-link"><a href="/blog/real-time-bidding-with-websockets-and-vert-x/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">3 January 2016</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/ecmascript-6-7-on-the-jvm-with-typescript-and-vert-x/">ECMAScript 6/7 on the JVM with TypeScript and Vert.x</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/michel-kraemer.png?size=50"/><a href="https://github.com/michel-kraemer" target="_blank" rel="noopener noreferrer">Michel Kr√§mer</a></li></ul></span><p class="blog-entry-summary">I figured it would be a good idea to give you a couple of examples how teaming
  Vert.x and TypeScript helps you use ECMAScript 6 and 7 features on the JVM today.</p><span class="read-more-link"><a href="/blog/ecmascript-6-7-on-the-jvm-with-typescript-and-vert-x/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">20 December 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/automatic-redeployment-in-eclipse-ide/">Automatic redeployment in Eclipse IDE</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Vert.x 3.1 has (re-)introduced the redeploy feature. This blog post explains how to use this feature in the Eclipse IDE. However, you can easily adapt the content to your IDE.</p><span class="read-more-link"><a href="/blog/automatic-redeployment-in-eclipse-ide/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">15 December 2015</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/vert-x-3-2-0-is-released/">Vert.x 3.2.0 is released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">We are pleased to announce the release of Vert.x 3.2.0!</p><span class="read-more-link"><a href="/blog/vert-x-3-2-0-is-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">30 November 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/combine-vert-x-and-mongo-to-build-a-giant/">Combine vert.x and mongo to build a giant</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">This blog post is part of the introduction to Vert.x series. We are now going to replace this JDBC client by the vertx-mongo-client, and thus connect to a Mongo database.</p><span class="read-more-link"><a href="/blog/combine-vert-x-and-mongo-to-build-a-giant/">Read more</a></span></div></div><div class="pagination"><div class="pagination-page"><a href="/blog/page/12/">¬´</a></div><div class="pagination-page"><a href="/blog/">1</a></div><div class="pagination-page disabled">‚Ä¶</div><div class="pagination-page"><a href="/blog/page/12/">12</a></div><div class="pagination-page active"><a href="/blog/page/13/">13</a></div><div class="pagination-page"><a href="/blog/page/14/">14</a></div><div class="pagination-page"><a href="/blog/page/15/">15</a></div><div class="pagination-page"><a href="/blog/page/16/">16</a></div><div class="pagination-page"><a href="/blog/page/14/">¬ª</a></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">¬© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Kr√§mer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"page":13,"posts":[{"filename":"blog/2016-01-18-using-hamcrest-matchers-with-vert-x-unit.mdx","date":"2016-01-18","slug":"using-hamcrest-matchers-with-vert-x-unit","meta":{"title":"Using Hamcrest Matchers with Vert.x Unit","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Vert.x Unit is a very elegant library to test asynchronous applications developed with vert.x. However because of this asynchronous aspect, reporting test failures is not natural for JUnit users."},"readingTime":{"text":"5 min read","minutes":4.205,"time":252300,"words":841},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Vert.x Unit is a very el\\xADe\\xADgant li\\xADbrary to test asyn\\xADchro\\xADnous ap\\xADpli\\xADca\\xADtions de\\xADvel\\xADoped with vert.x. How\\xADever be\\xADcause of this asyn\\xADchro\\xADnous as\\xADpect, re\\xADport\\xADing test fail\\xADures is not nat\\xADural for JUnit users.  This is be\\xADcause, the failed as\\xADser\\xADtions need to be re\\xADported to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"test con\\xADtext\"), \", con\\xADtrol\\xADling the ex\\xADe\\xADcu\\xADtion (and so the out\\xADcome) of the test. In other words, in a Vert.x Unit test you can\\xADnot use the reg\\xADu\\xADlar Junit as\\xADser\\xADtions and as\\xADser\\xADtion li\\xADbraries. In this blog post, we pro\\xADpose a way to let you using Ham\\xADcrest match\\xADers in Vert.x Unit tests.\"), mdx(\"h2\", {\n    \"id\": \"using-vertx-unit\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#using-vertx-unit\"\n  })), \"Using Vert.x Unit\"), mdx(\"p\", null, \"Vert.x Unit is a test li\\xADbrary made to en\\xADsure the be\\xADhav\\xADior of vert.x ap\\xADpli\\xADca\\xADtions. It lets you im\\xADple\\xADment tests check\\xADing asyn\\xADchro\\xADnous be\\xADhav\\xADior.\"), mdx(\"p\", null, \"Vert.x Unit can be used with Junit. For this, you just need to add the fol\\xADlow\\xADing de\\xADpen\\xADdency to your project:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-unit\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.2.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"If you are using Gra\\xADdle, the de\\xADpen\\xADdency is:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-gradle\"\n  }), \"testCompile \\u2018io.vertx:vertx-unit:\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"3.2\"), \".\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"\\u2019\\n\")), mdx(\"p\", null, \"If you are using an IDE, just add the vertx-\\u200Bunit jar to your project class\\xADpath.\"), mdx(\"p\", null, \"Ob\\xADvi\\xADously, you would need to add JUnit too.\"), mdx(\"p\", null, \"No\\xADtice that vertx-\\u200Bunit does not need JUnit, and can be used with\\xADout it. Check the Vert.x Unit \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx.io/docs/vertx-unit/java/\"\n  }), \"doc\\xADu\\xADmen\\xADta\\xADtion\"), \" for more de\\xADtails.\"), mdx(\"h2\", {\n    \"id\": \"vertx-unit-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-unit-example\"\n  })), \"Vert.x Unit example\"), mdx(\"p\", null, \"Let\\u2019s con\\xADsider this very sim\\xADple \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Verticle\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"MyFirstVerticle\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" Future future)\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"throws\"), \" Exception \"), \"{\\n    vertx.createHttpServer()\\n        .requestHandler(req -\u003e req.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hello vert.x\\\"\"), \"))\\n        .listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", done -\u003e {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (done.failed()) {\\n            future.fail(done.cause());\\n          } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            future.complete();\\n          }\\n        });\\n  }\\n}\\n\")), mdx(\"p\", null, \"It just cre\\xADates a new HTTP server and when launched it no\\xADti\\xADfies the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"future\"), \" of the com\\xADple\\xADtion.\"), mdx(\"p\", null, \"To test this ver\\xADti\\xADcle with Vert.x Unit you would write some\\xADthing like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@RunWith(VertxUnitRunner.class)\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"MyFirstVerticleTest\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Vertx vertx;\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Before\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"setUp\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n    vertx = Vertx.vertx();\\n    vertx.deployVerticle(MyFirstVerticle.class.getName(),\\n      context.asyncAssertSuccess());\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"test\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n    Async async = context.async();\\n    vertx.createHttpClient().get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \")\\n      .handler(response -\u003e {\\n        context.assertEquals(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \", response.statusCode());\\n        response.bodyHandler(buffer -\u003e {\\n          context.assertEquals(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hello vert.x\\\"\"), \", buffer.toString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"utf-8\\\"\"), \"));\\n          async.complete();\\n        });\\n      })\\n      .end();\\n  }\\n}\\n\")), mdx(\"p\", null, \"First, the test class is an\\xADno\\xADtated with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@RunWith(VertxUnitRunner.class)\"), \", in\\xADstruct\\xADing JUnit to use this spe\\xADcial run\\xADner. This run\\xADner lets you in\\xADject a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestContext\"), \" pa\\xADra\\xADme\\xADter into every test meth\\xADods (as well as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@Before\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@After\"), \") to han\\xADdle the asyn\\xADchro\\xADnous as\\xADpect of the test.\"), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setUp\"), \" method, it cre\\xADates a new in\\xADstance of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" and de\\xADploy the ver\\xADti\\xADcle. Thanks to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"context.asyncAssertSuccess()\"), \", it waits until the suc\\xADcess\\xADful com\\xADple\\xADtion of the ver\\xADti\\xADcle de\\xADploy\\xADment. In\\xADdeed, the de\\xADploy\\xADment is asyn\\xADchro\\xADnous, and we must be sure that the ver\\xADti\\xADcle has been de\\xADployed and has com\\xADpleted its ini\\xADtial\\xADiza\\xADtion be\\xADfore start\\xADing to test it.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"test()\"), \" method cre\\xADates an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Async\"), \" ob\\xADject that will be used to re\\xADport when the test has been com\\xADpleted. Then it cre\\xADates an HTTP client to emit a re\\xADquest on the server from our ver\\xADti\\xADcle and check that:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the HTTP code is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"200 (OK)\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the body is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"hello vert.x\"))), mdx(\"p\", null, \"As you can see, to im\\xADple\\xADment the checks, the as\\xADser\\xADtions method are called on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestContext\"), \" ob\\xADject, which con\\xADtrol the test ex\\xADe\\xADcu\\xADtion. When every\\xADthing has been tested, we call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async.complete()\"), \" to end the test. If an as\\xADser\\xADtion failed, the test is ob\\xADvi\\xADously stopped. This would not be the case if you would use reg\\xADu\\xADlar Junit as\\xADser\\xADtions.\"), mdx(\"h2\", {\n    \"id\": \"using-the-hamcrest-matchers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#using-the-hamcrest-matchers\"\n  })), \"Using the Hamcrest Matchers\"), mdx(\"p\", null, \"In the pre\\xADvi\\xADous ex\\xADam\\xADple, we used the the as\\xADser\\xADtions avail\\xADable from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestContext\"), \" in\\xADstance. How\\xADever it pro\\xADvides a lim\\xADited set of meth\\xADods. Ham\\xADcrest is a li\\xADbrary of match\\xADers, which can be com\\xADbined in to cre\\xADate flex\\xADi\\xADble ex\\xADpres\\xADsions of in\\xADtent in tests. It is very con\\xADve\\xADnient when test\\xADing com\\xADplex ap\\xADpli\\xADca\\xADtions.\"), mdx(\"p\", null, \"Ham\\xADcrest can\\xADnot be used di\\xADrectly as it would not re\\xADport the fail\\xADure on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestContext\"), \". For this pur\\xADpose we cre\\xADate a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"VertxMatcherAssert\"), \" class:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"VertxMatcherAssert\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \u003cT\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"assertThat\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context, T actual,\\n    Matcher\u003c? \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"super\"), \" T\u003e matcher)\"), \" \"), \"{\\n    assertThat(context, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\"\"), \", actual, matcher);\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \u003cT\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"assertThat\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context, String reason,\\n    T actual, Matcher\u003c? \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"super\"), \" T\u003e matcher)\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!matcher.matches(actual)) {\\n      Description description = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" StringDescription();\\n      description.appendText(reason)\\n          .appendText(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\\nExpected: \\\"\"), \")\\n          .appendDescriptionOf(matcher)\\n          .appendText(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\\n     but: \\\"\"), \");\\n      matcher.describeMismatch(actual, description);\\n      context.fail(description.toString());\\n    }\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"assertThat\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context, String reason,\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"boolean\"), \" assertion)\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!assertion) {\\n      context.fail(reason);\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"This class pro\\xADvides \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"assertThat\"), \" method that re\\xADports error on the given \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestContext\"), \". The com\\xADplete code is avail\\xADable \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gist.github.com/cescoffier/5cbf4c69aa094ac9b1a6\"\n  }), \"here\"), \".\"), mdx(\"p\", null, \"With this class, we can re-\\u200Bimplement our test as fol\\xADlows:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"testWithHamcrest\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n  Async async = context.async();\\n  vertx.createHttpClient().get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \").handler(response -\u003e {\\n    assertThat(context, response.statusCode(), is(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \"));\\n    response.bodyHandler(buffer -\u003e {\\n      assertThat(context, buffer.toString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"utf-8\\\"\"), \"), is(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hello vert.x\\\"\"), \"));\\n      async.complete();\\n    });\\n  }).end();\\n}\\n\")), mdx(\"p\", null, \"To ease the usage, I\\u2019ve added two \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"im\\xADport sta\\xADtic\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" io.vertx.unit.example.VertxMatcherAssert.assertThat;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" org.hamcrest.core.Is.is;\\n\")), mdx(\"p\", null, \"You can use any Ham\\xADcrest matcher, or even im\\xADple\\xADment your own as soon as you use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"assertThat\"), \" method pro\\xADvided by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"VertxMatcherAssert\"), \".\"), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"In this post we have seen how you can com\\xADbine Ham\\xADcrest and Vert.x Unit. So, you are not lim\\xADited any\\xADmore by the set of as\\xADsert meth\\xADods pro\\xADvided by Vert.x Unit, and can use the whole ex\\xADpres\\xADsive\\xADness of Ham\\xADcrest Match\\xADers.\"), mdx(\"p\", null, \"Don\\u2019t for\\xADget that you still can\\u2019t use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"assert\"), \" meth\\xADods from Junit, as they don\\u2019t re\\xADport on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TestContext\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eVert.x Unit is a very el¬≠e¬≠gant li¬≠brary to test asyn¬≠chro¬≠nous ap¬≠pli¬≠ca¬≠tions de¬≠vel¬≠oped with vert.x. How¬≠ever be¬≠cause of this asyn¬≠chro¬≠nous as¬≠pect, re¬≠port¬≠ing test fail¬≠ures is not nat¬≠ural for JUnit users.  This is be¬≠cause, the failed as¬≠ser¬≠tions need to be re¬≠ported to the \u003cem\u003etest con¬≠text\u003c/em\u003e, con¬≠trol¬≠ling the ex¬≠e¬≠cu¬≠tion (and so the out¬≠come) of the test. In other words, in a Vert.x Unit test you can¬≠not use the reg¬≠u¬≠lar Junit as¬≠ser¬≠tions and as¬≠ser¬≠tion li¬≠braries. In this blog post, we pro¬≠pose a way to let you using Ham¬≠crest match¬≠ers in Vert.x Unit tests.\u003c/p\u003e\u003ch2 id=\"using-vertx-unit\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#using-vertx-unit\"\u003e\u003c/a\u003eUsing Vert.x Unit\u003c/h2\u003e\u003cp\u003eVert.x Unit is a test li¬≠brary made to en¬≠sure the be¬≠hav¬≠ior of vert.x ap¬≠pli¬≠ca¬≠tions. It lets you im¬≠ple¬≠ment tests check¬≠ing asyn¬≠chro¬≠nous be¬≠hav¬≠ior.\u003c/p\u003e\u003cp\u003eVert.x Unit can be used with Junit. For this, you just need to add the fol¬≠low¬≠ing de¬≠pen¬≠dency to your project:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-unit\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.2.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003etest\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you are using Gra¬≠dle, the de¬≠pen¬≠dency is:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-gradle\"\u003etestCompile ‚Äòio.vertx:vertx-unit:\u003cspan class=\"hljs-number\"\u003e3.2\u003c/span\u003e.\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e‚Äô\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you are using an IDE, just add the vertx-‚Äãunit jar to your project class¬≠path.\u003c/p\u003e\u003cp\u003eOb¬≠vi¬≠ously, you would need to add JUnit too.\u003c/p\u003e\u003cp\u003eNo¬≠tice that vertx-‚Äãunit does not need JUnit, and can be used with¬≠out it. Check the Vert.x Unit \u003ca href=\"https://vertx.io/docs/vertx-unit/java/\"\u003edoc¬≠u¬≠men¬≠ta¬≠tion\u003c/a\u003e for more de¬≠tails.\u003c/p\u003e\u003ch2 id=\"vertx-unit-example\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-unit-example\"\u003e\u003c/a\u003eVert.x Unit example\u003c/h2\u003e\u003cp\u003eLet‚Äôs con¬≠sider this very sim¬≠ple \u003ccode\u003eVerticle\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMyFirstVerticle\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e Future future)\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethrows\u003c/span\u003e Exception \u003c/span\u003e{\n    vertx.createHttpServer()\n        .requestHandler(req -\u0026gt; req.response().end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello vert.x\u0026quot;\u003c/span\u003e))\n        .listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, done -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (done.failed()) {\n            future.fail(done.cause());\n          } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            future.complete();\n          }\n        });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIt just cre¬≠ates a new HTTP server and when launched it no¬≠ti¬≠fies the \u003ccode\u003efuture\u003c/code\u003e of the com¬≠ple¬≠tion.\u003c/p\u003e\u003cp\u003eTo test this ver¬≠ti¬≠cle with Vert.x Unit you would write some¬≠thing like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@RunWith(VertxUnitRunner.class)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMyFirstVerticleTest\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Vertx vertx;\n\n  \u003cspan class=\"hljs-meta\"\u003e@Before\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003esetUp\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n    vertx = Vertx.vertx();\n    vertx.deployVerticle(MyFirstVerticle.class.getName(),\n      context.asyncAssertSuccess());\n  }\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n    Async async = context.async();\n    vertx.createHttpClient().get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e)\n      .handler(response -\u0026gt; {\n        context.assertEquals(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, response.statusCode());\n        response.bodyHandler(buffer -\u0026gt; {\n          context.assertEquals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello vert.x\u0026quot;\u003c/span\u003e, buffer.toString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;utf-8\u0026quot;\u003c/span\u003e));\n          async.complete();\n        });\n      })\n      .end();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFirst, the test class is an¬≠no¬≠tated with \u003ccode\u003e@RunWith(VertxUnitRunner.class)\u003c/code\u003e, in¬≠struct¬≠ing JUnit to use this spe¬≠cial run¬≠ner. This run¬≠ner lets you in¬≠ject a \u003ccode\u003eTestContext\u003c/code\u003e pa¬≠ra¬≠me¬≠ter into every test meth¬≠ods (as well as \u003ccode\u003e@Before\u003c/code\u003e and \u003ccode\u003e@After\u003c/code\u003e) to han¬≠dle the asyn¬≠chro¬≠nous as¬≠pect of the test.\u003c/p\u003e\u003cp\u003eIn the \u003ccode\u003esetUp\u003c/code\u003e method, it cre¬≠ates a new in¬≠stance of \u003ccode\u003eVertx\u003c/code\u003e and de¬≠ploy the ver¬≠ti¬≠cle. Thanks to \u003ccode\u003econtext.asyncAssertSuccess()\u003c/code\u003e, it waits until the suc¬≠cess¬≠ful com¬≠ple¬≠tion of the ver¬≠ti¬≠cle de¬≠ploy¬≠ment. In¬≠deed, the de¬≠ploy¬≠ment is asyn¬≠chro¬≠nous, and we must be sure that the ver¬≠ti¬≠cle has been de¬≠ployed and has com¬≠pleted its ini¬≠tial¬≠iza¬≠tion be¬≠fore start¬≠ing to test it.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003etest()\u003c/code\u003e method cre¬≠ates an \u003ccode\u003eAsync\u003c/code\u003e ob¬≠ject that will be used to re¬≠port when the test has been com¬≠pleted. Then it cre¬≠ates an HTTP client to emit a re¬≠quest on the server from our ver¬≠ti¬≠cle and check that:\u003c/p\u003e\u003col\u003e\u003cli\u003ethe HTTP code is \u003ccode\u003e200 (OK)\u003c/code\u003e\u003c/li\u003e\u003cli\u003ethe body is \u003ccode\u003ehello vert.x\u003c/code\u003e\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eAs you can see, to im¬≠ple¬≠ment the checks, the as¬≠ser¬≠tions method are called on the \u003ccode\u003eTestContext\u003c/code\u003e ob¬≠ject, which con¬≠trol the test ex¬≠e¬≠cu¬≠tion. When every¬≠thing has been tested, we call \u003ccode\u003easync.complete()\u003c/code\u003e to end the test. If an as¬≠ser¬≠tion failed, the test is ob¬≠vi¬≠ously stopped. This would not be the case if you would use reg¬≠u¬≠lar Junit as¬≠ser¬≠tions.\u003c/p\u003e\u003ch2 id=\"using-the-hamcrest-matchers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#using-the-hamcrest-matchers\"\u003e\u003c/a\u003eUsing the Hamcrest Matchers\u003c/h2\u003e\u003cp\u003eIn the pre¬≠vi¬≠ous ex¬≠am¬≠ple, we used the the as¬≠ser¬≠tions avail¬≠able from the \u003ccode\u003eTestContext\u003c/code\u003e in¬≠stance. How¬≠ever it pro¬≠vides a lim¬≠ited set of meth¬≠ods. Ham¬≠crest is a li¬≠brary of match¬≠ers, which can be com¬≠bined in to cre¬≠ate flex¬≠i¬≠ble ex¬≠pres¬≠sions of in¬≠tent in tests. It is very con¬≠ve¬≠nient when test¬≠ing com¬≠plex ap¬≠pli¬≠ca¬≠tions.\u003c/p\u003e\u003cp\u003eHam¬≠crest can¬≠not be used di¬≠rectly as it would not re¬≠port the fail¬≠ure on the \u003ccode\u003eTestContext\u003c/code\u003e. For this pur¬≠pose we cre¬≠ate a \u003ccode\u003eVertxMatcherAssert\u003c/code\u003e class:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eVertxMatcherAssert\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u0026lt;T\u0026gt; \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eassertThat\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context, T actual,\n    Matcher\u0026lt;? \u003cspan class=\"hljs-keyword\"\u003esuper\u003c/span\u003e T\u0026gt; matcher)\u003c/span\u003e \u003c/span\u003e{\n    assertThat(context, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e, actual, matcher);\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u0026lt;T\u0026gt; \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eassertThat\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context, String reason,\n    T actual, Matcher\u0026lt;? \u003cspan class=\"hljs-keyword\"\u003esuper\u003c/span\u003e T\u0026gt; matcher)\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!matcher.matches(actual)) {\n      Description description = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e StringDescription();\n      description.appendText(reason)\n          .appendText(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\\nExpected: \u0026quot;\u003c/span\u003e)\n          .appendDescriptionOf(matcher)\n          .appendText(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\\n     but: \u0026quot;\u003c/span\u003e);\n      matcher.describeMismatch(actual, description);\n      context.fail(description.toString());\n    }\n  }\n\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eassertThat\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context, String reason,\n    \u003cspan class=\"hljs-keyword\"\u003eboolean\u003c/span\u003e assertion)\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!assertion) {\n      context.fail(reason);\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis class pro¬≠vides \u003ccode\u003eassertThat\u003c/code\u003e method that re¬≠ports error on the given \u003ccode\u003eTestContext\u003c/code\u003e. The com¬≠plete code is avail¬≠able \u003ca href=\"https://gist.github.com/cescoffier/5cbf4c69aa094ac9b1a6\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eWith this class, we can re-‚Äãimplement our test as fol¬≠lows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etestWithHamcrest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n  Async async = context.async();\n  vertx.createHttpClient().get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e).handler(response -\u0026gt; {\n    assertThat(context, response.statusCode(), is(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e));\n    response.bodyHandler(buffer -\u0026gt; {\n      assertThat(context, buffer.toString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;utf-8\u0026quot;\u003c/span\u003e), is(\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello vert.x\u0026quot;\u003c/span\u003e));\n      async.complete();\n    });\n  }).end();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo ease the usage, I‚Äôve added two \u003cem\u003eim¬≠port sta¬≠tic\u003c/em\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e io.vertx.unit.example.VertxMatcherAssert.assertThat;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e org.hamcrest.core.Is.is;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can use any Ham¬≠crest matcher, or even im¬≠ple¬≠ment your own as soon as you use the \u003ccode\u003eassertThat\u003c/code\u003e method pro¬≠vided by \u003ccode\u003eVertxMatcherAssert\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eIn this post we have seen how you can com¬≠bine Ham¬≠crest and Vert.x Unit. So, you are not lim¬≠ited any¬≠more by the set of as¬≠sert meth¬≠ods pro¬≠vided by Vert.x Unit, and can use the whole ex¬≠pres¬≠sive¬≠ness of Ham¬≠crest Match¬≠ers.\u003c/p\u003e\u003cp\u003eDon‚Äôt for¬≠get that you still can‚Äôt use the \u003ccode\u003eassert\u003c/code\u003e meth¬≠ods from Junit, as they don‚Äôt re¬≠port on the \u003ccode\u003eTestContext\u003c/code\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"test","tf":21},{"term":"us","tf":17},{"term":"unit","tf":13},{"term":"method","tf":9},{"term":"junit","tf":8},{"term":"assert","tf":8},{"term":"hamcrest","tf":7},{"term":"report","tf":6},{"term":"creat","tf":6},{"term":"asynchron","tf":5},{"term":"not","tf":5},{"term":"matcher","tf":5},{"term":"complet","tf":5},{"term":"verticl","tf":5},{"term":"librari","tf":4},{"term":"need","tf":4},{"term":"let","tf":4},{"term":"implement","tf":4},{"term":"check","tf":4},{"term":"class","tf":4},{"term":"provid","tf":4},{"term":"applic","tf":3},{"term":"just","tf":3},{"term":"add","tf":3},{"term":"http","tf":3}]},{"filename":"blog/2016-01-15-real-time-bidding-with-websockets-and-vert-x.mdx","date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x","meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"readingTime":{"text":"10 min read","minutes":9.485,"time":569099.9999999999,"words":1897},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The ex\\xADpec\\xADta\\xADtions of users for in\\xADter\\xADac\\xADtiv\\xADity with web ap\\xADpli\\xADca\\xADtions have changed over the past few years.\\nUsers dur\\xADing bid\\xADding in auc\\xADtion no longer want to press the re\\xADfresh but\\xADton to check if the price\\nhas changed or the auc\\xADtion is over. This made bid\\xADding dif\\xADfi\\xADcult and less fun.\\nIn\\xADstead, they ex\\xADpect to see the up\\xADdates in ap\\xADpli\\xADca\\xADtion in real-\\u200Btime.\"), mdx(\"p\", null, \"In this ar\\xADti\\xADcle I want to show how to cre\\xADate a sim\\xADple ap\\xADpli\\xADca\\xADtion that pro\\xADvides real-\\u200Btime bid\\xADding.\\nWe will use Web\\xADSock\\xADets, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sockjs/sockjs-client\"\n  }), \"SockJS\"), \" and Vert.x.\"), mdx(\"p\", null, \"We will cre\\xADate a front-\\u200Bend for fast bid\\xADding that com\\xADmu\\xADni\\xADcates with a micro-\\u200Bservice writ\\xADten in Java and based on Vert.x.\"), mdx(\"h2\", {\n    \"id\": \"what-are-websockets\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#what-are-websockets\"\n  })), \"What are Websockets?\"), mdx(\"p\", null, \"Web\\xADSocket is asyn\\xADchro\\xADnous, bidi\\xADrec\\xADtional, full-\\u200Bduplex pro\\xADto\\xADcol that pro\\xADvides a com\\xADmu\\xADni\\xADca\\xADtion chan\\xADnel over a sin\\xADgle TCP con\\xADnec\\xADtion.\\nWith the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.w3.org/TR/websockets/\"\n  }), \"Web\\xADSocket API\"), \" it pro\\xADvides bidi\\xADrec\\xADtional com\\xADmu\\xADni\\xADca\\xADtion be\\xADtween the web\\xADsite and a re\\xADmote server.\"), mdx(\"p\", null, \"Web\\xADSock\\xADets solve many prob\\xADlems which pre\\xADvented the HTTP pro\\xADto\\xADcol from being suit\\xADable for use in mod\\xADern,\\nreal-\\u200Btime ap\\xADpli\\xADca\\xADtions. Workarounds like polling are no longer needed, which sim\\xADpli\\xADfies ap\\xADpli\\xADca\\xADtion ar\\xADchi\\xADtec\\xADture.\\nWeb\\xADSock\\xADets do not need to open mul\\xADti\\xADple HTTP con\\xADnec\\xADtions, they pro\\xADvide a re\\xADduc\\xADtion of un\\xADnec\\xADes\\xADsary net\\xADwork traf\\xADfic and re\\xADduce la\\xADtency.\"), mdx(\"h2\", {\n    \"id\": \"websocket-api-vs-sockjs\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#websocket-api-vs-sockjs\"\n  })), \"Websocket API vs SockJS\"), mdx(\"p\", null, \"Un\\xADfor\\xADtu\\xADnately, Web\\xADSock\\xADets are not sup\\xADported by all web browsers. How\\xADever, there are li\\xADbraries that pro\\xADvide a fall\\xADback\\nwhen Web\\xADSock\\xADets are not avail\\xADable. One such li\\xADbrary is \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sockjs/sockjs-client\"\n  }), \"SockJS\"), \".\\nSockJS starts from try\\xADing to use the Web\\xADSocket pro\\xADto\\xADcol. How\\xADever, if this is not pos\\xADsi\\xADble,\\nit uses  a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/sockjs/sockjs-client#supported-transports-by-browser-html-served-from-http-or-https\"\n  }), \"va\\xADri\\xADety of browser-\\u200Bspecific trans\\xADport pro\\xADto\\xADcols\"), \".\\nSockJS is a li\\xADbrary de\\xADsigned to work in all mod\\xADern browsers and in en\\xADvi\\xADron\\xADments that do not sup\\xADport Web\\xADSocket pro\\xADto\\xADcol,\\nfor in\\xADstance be\\xADhind re\\xADstric\\xADtive cor\\xADpo\\xADrate proxy. SockJS pro\\xADvides an API sim\\xADi\\xADlar to the stan\\xADdard Web\\xADSocket API.\"), mdx(\"h2\", {\n    \"id\": \"frontend-to-fast-bidding\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#frontend-to-fast-bidding\"\n  })), \"Frontend to fast bidding\"), mdx(\"p\", null, \"Auc\\xADtion web page con\\xADtains the bid\\xADding form and some sim\\xADple JavaScript which loads cur\\xADrent price from the ser\\xADvice,\\nopens an event bus con\\xADnec\\xADtion to the SockJS server and of\\xADfers bid\\xADding.\\nHTML source code of sam\\xADple web page on which we bid might look like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-html\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"h3\"), \"\u003e\"), \"Auction 1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"h3\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"div\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"id\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"error_message\\\"\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"div\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"form\"), \"\u003e\"), \"\\n    Current price:\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"span\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"id\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"current_price\\\"\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"span\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"div\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"label\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"for\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my_bid_value\\\"\"), \"\u003e\"), \"Your offer:\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"label\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"input\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"id\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my_bid_value\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"type\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text\\\"\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"input\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"type\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"button\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"onclick\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bid();\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Bid\\\"\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"div\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"div\"), \"\u003e\"), \"\\n        Feed:\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"textarea\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"id\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"feed\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"rows\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"4\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"cols\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"50\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"readonly\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"textarea\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"div\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"form\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"We use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-eventbus.js\"), \" li\\xADbrary to cre\\xADate a con\\xADnec\\xADtion to the event bus.\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-eventbus.js\"), \" li\\xADbrary is a part of the Vert.x dis\\xADtri\\xADb\\xADu\\xADtion. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-eventbus.js\"), \" in\\xADter\\xADnally uses SockJS li\\xADbrary\\nto send the data to the SockJS server. In the code snip\\xADpet below we cre\\xADate an in\\xADstance of the event bus.\\nThe pa\\xADra\\xADme\\xADter to the con\\xADstruc\\xADtor is the URI where to con\\xADnect to the event bus.\\nThen we reg\\xADis\\xADter the han\\xADdler lis\\xADten\\xADing on ad\\xADdress \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auction.\u003cauction_id\u003e\"), \". Each client has a pos\\xADsi\\xADbil\\xADity of reg\\xADis\\xADter\\xADing\\nat mul\\xADti\\xADple ad\\xADdresses e.g. when bid\\xADding in the auc\\xADtion 1234, they reg\\xADis\\xADter on the ad\\xADdress \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auction.1234\"), \" etc.\\nWhen data ar\\xADrives in the han\\xADdler, we change the cur\\xADrent price and the bid\\xADding feed on the auc\\xADtion\\u2019s web page.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"registerHandlerForUpdateCurrentPriceAndFeed\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" eventBus = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" EventBus(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'http://localhost:8080/eventbus'\"), \");\\n    eventBus.onopen = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n        eventBus.registerHandler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'auction.'\"), \" + auction_id, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"error, message\"), \") \"), \"{\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"document\"), \".getElementById(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'current_price'\"), \").innerHTML = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"JSON\"), \".parse(message.body).price;\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"document\"), \".getElementById(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'feed'\"), \").value += \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'New offer: '\"), \" + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"JSON\"), \".parse(message.body).price + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'\\\\n'\"), \";\\n        });\\n    }\\n};\\n\")), mdx(\"p\", null, \"Any user at\\xADtempt to bid gen\\xADer\\xADates a PATCH Ajax re\\xADquest\\nto the ser\\xADvice with in\\xADfor\\xADma\\xADtion about the new offer made at auc\\xADtion (see \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bid()\"), \" func\\xADtion).\\nOn the server side we pub\\xADlish this in\\xADfor\\xADma\\xADtion on the event bus to all clients reg\\xADis\\xADtered to an ad\\xADdress.\\nIf you re\\xADceive an HTTP re\\xADsponse sta\\xADtus code other than \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"200 (OK)\"), \", an error mes\\xADsage is dis\\xADplayed on the web page.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"bid\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" newPrice = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"document\"), \".getElementById(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'my_bid_value'\"), \").value;\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" xmlhttp = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"window\"), \".XMLHttpRequest) ? \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" XMLHttpRequest() : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ActiveXObject(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Microsoft.XMLHTTP\\\"\"), \");\\n    xmlhttp.onreadystatechange = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (xmlhttp.readyState == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"4\"), \") {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (xmlhttp.status != \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \") {\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"document\"), \".getElementById(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'error_message'\"), \").innerHTML = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'Sorry, something went wrong.'\"), \";\\n            }\\n        }\\n    };\\n    xmlhttp.open(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"PATCH\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost:8080/api/auctions/\\\"\"), \" + auction_id);\\n    xmlhttp.setRequestHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Content-Type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \");\\n    xmlhttp.send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"JSON\"), \".stringify({\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"price\"), \": newPrice}));\\n};\\n\")), mdx(\"h2\", {\n    \"id\": \"auction-service\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#auction-service\"\n  })), \"Auction Service\"), mdx(\"p\", null, \"SockJS client re\\xADquires the server-\\u200Bside part. Now we are going to cre\\xADate a light-\\u200Bweight REST\\xADful auc\\xADtion ser\\xADvice.\\nWe will send and re\\xADtrieve data in JSON for\\xADmat. Let\\u2019s start by cre\\xADat\\xADing a ver\\xADti\\xADcle.\\nFirst we need to in\\xADherit from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/core/AbstractVerticle.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"AbstractVerticle\")), \"\\nand over\\xADride the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start\"), \" method.\\nEach ver\\xADti\\xADcle in\\xADstance has a mem\\xADber vari\\xADable called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx\"), \". This pro\\xADvides ac\\xADcess to the Vert.x core API.\\nFor ex\\xADam\\xADple, to cre\\xADate an HTTP server you call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"createHttpServer\"), \" method on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx\"), \" in\\xADstance.\\nTo tell the server to lis\\xADten on port 8080 for in\\xADcom\\xADing re\\xADquests you use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"listen\"), \" method.\"), mdx(\"p\", null, \"We need a router with routes. A router takes an HTTP re\\xADquest and finds the first match\\xADing route.\\nThe route can have a han\\xADdler as\\xADso\\xADci\\xADated with it, which re\\xADceives the re\\xADquest\\n(e.g. route that matches path \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/eventbus/*\"), \" is  as\\xADso\\xADci\\xADated with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"eventBusHandler\"), \").\"), mdx(\"p\", null, \"We can do some\\xADthing with the re\\xADquest, and then, end it or pass it to the next match\\xADing han\\xADdler.\"), mdx(\"p\", null, \"If you have a lot of han\\xADdlers it makes sense to split them up into mul\\xADti\\xADple routers.\"), mdx(\"p\", null, \"You can do this by mount\\xADing a router at a mount point in an\\xADother router\\n(see \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auctionApiRouter\"), \" that cor\\xADre\\xADsponds to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/api\"), \" mount point in code snip\\xADpet below).\"), mdx(\"p\", null, \"Here\\u2019s an ex\\xADam\\xADple ver\\xADti\\xADcle:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AuctionServiceVerticle\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n        Router router = Router.router(vertx);\\n\\n        router.route(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/eventbus/*\\\"\"), \").handler(eventBusHandler());\\n        router.mountSubRouter(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api\\\"\"), \", auctionApiRouter());\\n        router.route().failureHandler(errorHandler());\\n        router.route().handler(staticHandler());\\n\\n        vertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n    }\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\\u2026\"), \"\\n}\\n\")), mdx(\"p\", null, \"Now we\\u2019ll look at things in more de\\xADtail. We\\u2019ll dis\\xADcuss Vert.x fea\\xADtures used in ver\\xADti\\xADcle:\\nerror han\\xADdler, SockJS han\\xADdler, body han\\xADdler, shared data, sta\\xADtic han\\xADdler and rout\\xADing based on method, path etc.\"), mdx(\"h3\", {\n    \"id\": \"error-handler\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#error-handler\"\n  })), \"Error handler\"), mdx(\"p\", null, \"As well as set\\xADting han\\xADdlers to han\\xADdle re\\xADquests you can also set a han\\xADdler for fail\\xADures in rout\\xADing.\\nFail\\xADure in rout\\xADing oc\\xADcurs if a han\\xADdler throws an ex\\xADcep\\xADtion, or if a han\\xADdler calls \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/RoutingContext.html#fail-int-\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"fail\")), \" method.\\nTo ren\\xADder error pages we use error han\\xADdler pro\\xADvides by Vert.x:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" ErrorHandler \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"errorHandler\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" ErrorHandler.create();\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"sockjs-handler\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sockjs-handler\"\n  })), \"SockJS handler\"), mdx(\"p\", null, \"Vert.x pro\\xADvides SockJS han\\xADdler with the event bus bridge which ex\\xADtends\\nthe server-\\u200Bside Vert.x event bus into client side JavaScript.\"), mdx(\"p\", null, \"Con\\xADfig\\xADur\\xADing the bridge to tell it which mes\\xADsages should pass through is easy.\\nYou can spec\\xADify which matches you want to allow for in\\xADbound and out\\xADbound traf\\xADfic\\nusing the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/handler/sockjs/BridgeOptions.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"BridgeOptions\")), \".\\nIf a mes\\xADsage is out\\xADbound, be\\xADfore send\\xADing it from the server to the client side JavaScript,\\nVert.x will look through any out\\xADbound per\\xADmit\\xADted matches. In code snip\\xADpet below we allow any mes\\xADsages\\nfrom ad\\xADdresses start\\xADing with \\u201Cauc\\xADtion.\\u201D and end\\xADing with dig\\xADits (e.g. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auction.1\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auction.100\"), \" etc).\"), mdx(\"p\", null, \"If you want to be no\\xADti\\xADfied when an event oc\\xADcurs on the bridge you can pro\\xADvide a han\\xADdler when call\\xADing the bridge.\\nFor ex\\xADam\\xADple, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SOCKET_CREATED\"), \" event will occur when a new SockJS socket is cre\\xADated.\\nThe event is an in\\xADstance of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/core/Future.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"Future\")), \".\\nWhen you are fin\\xADished han\\xADdling the event you can com\\xADplete the fu\\xADture with \\u201Ctrue\\u201D to en\\xADable fur\\xADther pro\\xADcess\\xADing.\"), mdx(\"p\", null, \"To start the bridge sim\\xADply call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bridge\"), \" method on the SockJS han\\xADdler:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" SockJSHandler \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"eventBusHandler\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    BridgeOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" BridgeOptions()\\n            .addOutboundPermitted(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" PermittedOptions().setAddressRegex(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"auction\\\\\\\\.[0-9]+\\\"\"), \"));\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" SockJSHandler.create(vertx).bridge(options, event -\u003e {\\n         \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (event.type() == BridgeEventType.SOCKET_CREATED) {\\n            logger.info(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"A socket was created\\\"\"), \");\\n        }\\n        event.complete(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\n    });\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"body-handler\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#body-handler\"\n  })), \"Body handler\"), mdx(\"p\", null, \"The Body\\xADHan\\xADdler al\\xADlows you to re\\xADtrieve the re\\xADquest body, limit the body size and to han\\xADdle the file up\\xADload.\\nBody han\\xADdler should be on a match\\xADing route for any re\\xADquests that re\\xADquire this func\\xADtion\\xADal\\xADity.\\nWe need Body\\xADHan\\xADdler dur\\xADing the bid\\xADding process (PATCH method re\\xADquest \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/auctions/\u003cauction_id\u003e\"), \" con\\xADtains re\\xADquest body\\nwith in\\xADfor\\xADma\\xADtion about a new offer made at auc\\xADtion). Cre\\xADat\\xADing a new body han\\xADdler is sim\\xADple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"BodyHandler.create();\\n\")), mdx(\"p\", null, \"If re\\xADquest body is in JSON for\\xADmat, you can get it with\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/RoutingContext.html#getBodyAsJson--\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"getBodyAsJson\")), \" method.\"), mdx(\"h3\", {\n    \"id\": \"shared-data\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#shared-data\"\n  })), \"Shared data\"), mdx(\"p\", null, \"Shared data con\\xADtains func\\xADtion\\xADal\\xADity that al\\xADlows you to safely share the data be\\xADtween dif\\xADfer\\xADent ap\\xADpli\\xADca\\xADtions\\nin the same Vert.x in\\xADstance or across a clus\\xADter of Vert.x in\\xADstances.\\nShared data in\\xADcludes local shared maps, dis\\xADtrib\\xADuted, cluster-\\u200Bwide maps, asyn\\xADchro\\xADnous cluster-\\u200Bwide locks\\nand asyn\\xADchro\\xADnous cluster-\\u200Bwide coun\\xADters.\"), mdx(\"p\", null, \"To sim\\xADplify the ap\\xADpli\\xADca\\xADtion we use the local shared map to save in\\xADfor\\xADma\\xADtion about auc\\xADtions.\\nThe local shared map al\\xADlows you to share data be\\xADtween dif\\xADfer\\xADent ver\\xADti\\xADcles in the same Vert.x in\\xADstance.\\nHere\\u2019s an ex\\xADam\\xADple of using a shared local map in an auc\\xADtion ser\\xADvice:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AuctionRepository\"), \" \"), \"{\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\\u2026\"), \"\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" Optional\u003cAuction\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getById\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String auctionId)\"), \" \"), \"{\\n        LocalMap\u003cString, String\u003e auctionSharedData = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \".sharedData.getLocalMap(auctionId);\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Optional.of(auctionSharedData)\\n            .filter(m -\u003e !m.isEmpty())\\n            .map(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \"::convertToAuction);\\n    }\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"save\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Auction auction)\"), \" \"), \"{\\n        LocalMap\u003cString, String\u003e auctionSharedData = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \".sharedData.getLocalMap(auction.getId());\\n\\n        auctionSharedData.put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \", auction.getId());\\n        auctionSharedData.put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"price\\\"\"), \", auction.getPrice());\\n    }\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\\u2026\"), \"\\n}\\n\")), mdx(\"p\", null, \"If you want to store auc\\xADtion data in a data\\xADbase, Vert.x pro\\xADvides a few dif\\xADfer\\xADent asyn\\xADchro\\xADnous clients\\nfor ac\\xADcess\\xADing var\\xADi\\xADous data stor\\xADages (Mon\\xADgoDB, Redis or JDBC client).\"), mdx(\"h3\", {\n    \"id\": \"auction-api\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#auction-api\"\n  })), \"Auction API\"), mdx(\"p\", null, \"Vert.x lets you route HTTP re\\xADquests to dif\\xADfer\\xADent han\\xADdlers based on pat\\xADtern match\\xADing on the re\\xADquest path.\\nIt also en\\xADables you to ex\\xADtract val\\xADues from the path and use them as pa\\xADra\\xADme\\xADters in the re\\xADquest.\\nCor\\xADre\\xADspond\\xADing meth\\xADods exist for each HTTP method. The first match\\xADing one will re\\xADceive the re\\xADquest.\\nThis func\\xADtion\\xADal\\xADity is par\\xADtic\\xADu\\xADlarly use\\xADful when de\\xADvel\\xADop\\xADing REST-\\u200Bstyle web ap\\xADpli\\xADca\\xADtions.\"), mdx(\"p\", null, \"To ex\\xADtract pa\\xADra\\xADme\\xADters from the path, you can use the colon char\\xADac\\xADter to de\\xADnote the name of a pa\\xADra\\xADme\\xADter.\\nReg\\xADu\\xADlar ex\\xADpres\\xADsions can also be used to ex\\xADtract more com\\xADplex matches.\\nAny pa\\xADra\\xADme\\xADters ex\\xADtracted by pat\\xADtern match\\xADing are added to the map of re\\xADquest pa\\xADra\\xADme\\xADters.\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/Route.html#consumes-java.lang.String-\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"Consumes\")), \"\\nde\\xADscribes which MIME types the han\\xADdler can con\\xADsume.\\nBy using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/Route.html#produces-java.lang.String-\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"produces\")), \"\\nyou de\\xADfine which MIME types the route pro\\xADduces.\\nIn the code below the routes will match any re\\xADquest with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"content-type\"), \" header\\nand \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"accept\"), \" header that matches \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"application/json\"), \".\"), mdx(\"p\", null, \"Let\\u2019s look at an ex\\xADam\\xADple of a sub\\xADrouter mounted on the main router which was cre\\xADated in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start\"), \" method in ver\\xADti\\xADcle:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Router \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"auctionApiRouter\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    AuctionRepository repository = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" AuctionRepository(vertx.sharedData());\\n    AuctionValidator validator = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" AuctionValidator(repository);\\n    AuctionHandler handler = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" AuctionHandler(repository, validator);\\n\\n    Router router = Router.router(vertx);\\n    router.route().handler(BodyHandler.create());\\n\\n    router.route().consumes(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \");\\n    router.route().produces(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \");\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/auctions/:id\\\"\"), \").handler(handler::handleGetAuction);\\n    router.patch(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/auctions/:id\\\"\"), \").handler(handler::handleChangeAuctionPrice);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" router;\\n}\\n\")), mdx(\"p\", null, \"The GET re\\xADquest re\\xADturns auc\\xADtion data, while the PATCH method re\\xADquest al\\xADlows you to bid up in the auc\\xADtion.\\nLet\\u2019s focus on the more in\\xADter\\xADest\\xADing method, namely \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"handleChangeAuctionPrice\"), \".\\nIn the sim\\xADplest terms, the method might look like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"handleChangeAuctionPrice\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext context)\"), \" \"), \"{\\n    String auctionId = context.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \");\\n    Auction auction = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Auction(\\n        auctionId,\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" BigDecimal(context.getBodyAsJson().getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"price\\\"\"), \"))\\n    );\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"this\"), \".repository.save(auction);\\n    context.vertx().eventBus().publish(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"auction.\\\"\"), \" + auctionId, context.getBodyAsString());\\n\\n    context.response()\\n        .setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \")\\n        .end();\\n}\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PATCH\"), \" re\\xADquest to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/auctions/1\"), \" would re\\xADsult in vari\\xADable \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auctionId\"), \" get\\xADting the value 1.\\nWe save a new offer in the auc\\xADtion and then pub\\xADlish this in\\xADfor\\xADma\\xADtion on the event bus to all clients\\nreg\\xADis\\xADtered on the ad\\xADdress on the client side JavaScript.\\nAfter you have fin\\xADished with the HTTP re\\xADsponse you must call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"end\"), \" func\\xADtion on it.\"), mdx(\"h3\", {\n    \"id\": \"static-handler\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#static-handler\"\n  })), \"Static handler\"), mdx(\"p\", null, \"Vert.x pro\\xADvides the han\\xADdler for serv\\xADing sta\\xADtic web re\\xADsources.\\nThe de\\xADfault di\\xADrec\\xADtory from which sta\\xADtic files are served is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webroot\"), \", but this can be con\\xADfig\\xADured.\\nBy de\\xADfault the sta\\xADtic han\\xADdler will set cache head\\xADers to en\\xADable browsers to cache files.\\nSet\\xADting cache head\\xADers can be dis\\xADabled with\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/apidocs/io/vertx/ext/web/handler/StaticHandler.html#setCachingEnabled-boolean-\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"setCachingEnabled\")), \" method.\\nTo serve the auc\\xADtion HTML page, JS files (and other sta\\xADtic files) from auc\\xADtion ser\\xADvice, you can cre\\xADate a sta\\xADtic han\\xADdler like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" StaticHandler \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"staticHandler\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" StaticHandler.create()\\n        .setCachingEnabled(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"false\"), \");\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"lets-run\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#lets-run\"\n  })), \"Let\\u2019s run!\"), mdx(\"p\", null, \"Full ap\\xADpli\\xADca\\xADtion code is avail\\xADable on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/mwarc/simple-realtime-auctions-vertx3-example\"\n  }), \"github\"), \".\"), mdx(\"p\", null, \"Clone the repos\\xADi\\xADtory and run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./gradlew run\"), \".\"), mdx(\"p\", null, \"Open one or more browsers and point them to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8080\"), \". Now you can bid in auc\\xADtion:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/real-time-bidding-with-websockets-and-vertx/bidding_in_application.png\",\n    \"alt\": \"Real time bidding in application\"\n  }))), mdx(\"h2\", {\n    \"id\": \"summary\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#summary\"\n  })), \"Summary\"), mdx(\"p\", null, \"This ar\\xADti\\xADcle presents the out\\xADline of a sim\\xADple ap\\xADpli\\xADca\\xADtion that al\\xADlows real-\\u200Btime bid\\xADding.\\nWe cre\\xADated a light\\xADweight, high-\\u200Bperformance and scal\\xADable micro-\\u200Bservice writ\\xADten in Java and based on Vert.x.\\nWe dis\\xADcussed what Vert.x of\\xADfers, among oth\\xADers, a dis\\xADtrib\\xADuted event bus and an el\\xADe\\xADgant API that al\\xADlows you to cre\\xADate ap\\xADpli\\xADca\\xADtions in no time.\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eThe ex¬≠pec¬≠ta¬≠tions of users for in¬≠ter¬≠ac¬≠tiv¬≠ity with web ap¬≠pli¬≠ca¬≠tions have changed over the past few years.\nUsers dur¬≠ing bid¬≠ding in auc¬≠tion no longer want to press the re¬≠fresh but¬≠ton to check if the price\nhas changed or the auc¬≠tion is over. This made bid¬≠ding dif¬≠fi¬≠cult and less fun.\nIn¬≠stead, they ex¬≠pect to see the up¬≠dates in ap¬≠pli¬≠ca¬≠tion in real-‚Äãtime.\u003c/p\u003e\u003cp\u003eIn this ar¬≠ti¬≠cle I want to show how to cre¬≠ate a sim¬≠ple ap¬≠pli¬≠ca¬≠tion that pro¬≠vides real-‚Äãtime bid¬≠ding.\nWe will use Web¬≠Sock¬≠ets, \u003ca href=\"https://github.com/sockjs/sockjs-client\"\u003eSockJS\u003c/a\u003e and Vert.x.\u003c/p\u003e\u003cp\u003eWe will cre¬≠ate a front-‚Äãend for fast bid¬≠ding that com¬≠mu¬≠ni¬≠cates with a micro-‚Äãservice writ¬≠ten in Java and based on Vert.x.\u003c/p\u003e\u003ch2 id=\"what-are-websockets\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#what-are-websockets\"\u003e\u003c/a\u003eWhat are Websockets?\u003c/h2\u003e\u003cp\u003eWeb¬≠Socket is asyn¬≠chro¬≠nous, bidi¬≠rec¬≠tional, full-‚Äãduplex pro¬≠to¬≠col that pro¬≠vides a com¬≠mu¬≠ni¬≠ca¬≠tion chan¬≠nel over a sin¬≠gle TCP con¬≠nec¬≠tion.\nWith the \u003ca href=\"http://www.w3.org/TR/websockets/\"\u003eWeb¬≠Socket API\u003c/a\u003e it pro¬≠vides bidi¬≠rec¬≠tional com¬≠mu¬≠ni¬≠ca¬≠tion be¬≠tween the web¬≠site and a re¬≠mote server.\u003c/p\u003e\u003cp\u003eWeb¬≠Sock¬≠ets solve many prob¬≠lems which pre¬≠vented the HTTP pro¬≠to¬≠col from being suit¬≠able for use in mod¬≠ern,\nreal-‚Äãtime ap¬≠pli¬≠ca¬≠tions. Workarounds like polling are no longer needed, which sim¬≠pli¬≠fies ap¬≠pli¬≠ca¬≠tion ar¬≠chi¬≠tec¬≠ture.\nWeb¬≠Sock¬≠ets do not need to open mul¬≠ti¬≠ple HTTP con¬≠nec¬≠tions, they pro¬≠vide a re¬≠duc¬≠tion of un¬≠nec¬≠es¬≠sary net¬≠work traf¬≠fic and re¬≠duce la¬≠tency.\u003c/p\u003e\u003ch2 id=\"websocket-api-vs-sockjs\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#websocket-api-vs-sockjs\"\u003e\u003c/a\u003eWebsocket API vs SockJS\u003c/h2\u003e\u003cp\u003eUn¬≠for¬≠tu¬≠nately, Web¬≠Sock¬≠ets are not sup¬≠ported by all web browsers. How¬≠ever, there are li¬≠braries that pro¬≠vide a fall¬≠back\nwhen Web¬≠Sock¬≠ets are not avail¬≠able. One such li¬≠brary is \u003ca href=\"https://github.com/sockjs/sockjs-client\"\u003eSockJS\u003c/a\u003e.\nSockJS starts from try¬≠ing to use the Web¬≠Socket pro¬≠to¬≠col. How¬≠ever, if this is not pos¬≠si¬≠ble,\nit uses  a \u003ca href=\"https://github.com/sockjs/sockjs-client#supported-transports-by-browser-html-served-from-http-or-https\"\u003eva¬≠ri¬≠ety of browser-‚Äãspecific trans¬≠port pro¬≠to¬≠cols\u003c/a\u003e.\nSockJS is a li¬≠brary de¬≠signed to work in all mod¬≠ern browsers and in en¬≠vi¬≠ron¬≠ments that do not sup¬≠port Web¬≠Socket pro¬≠to¬≠col,\nfor in¬≠stance be¬≠hind re¬≠stric¬≠tive cor¬≠po¬≠rate proxy. SockJS pro¬≠vides an API sim¬≠i¬≠lar to the stan¬≠dard Web¬≠Socket API.\u003c/p\u003e\u003ch2 id=\"frontend-to-fast-bidding\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#frontend-to-fast-bidding\"\u003e\u003c/a\u003eFrontend to fast bidding\u003c/h2\u003e\u003cp\u003eAuc¬≠tion web page con¬≠tains the bid¬≠ding form and some sim¬≠ple JavaScript which loads cur¬≠rent price from the ser¬≠vice,\nopens an event bus con¬≠nec¬≠tion to the SockJS server and of¬≠fers bid¬≠ding.\nHTML source code of sam¬≠ple web page on which we bid might look like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003eAuction 1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh3\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;error_message\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    Current price:\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;current_price\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003efor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_bid_value\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eYour offer:\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_bid_value\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;button\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonclick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;bid();\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bid\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        Feed:\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etextarea\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;feed\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erows\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;4\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ecols\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;50\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ereadonly\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etextarea\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe use the \u003ccode\u003evertx-eventbus.js\u003c/code\u003e li¬≠brary to cre¬≠ate a con¬≠nec¬≠tion to the event bus.\n\u003ccode\u003evertx-eventbus.js\u003c/code\u003e li¬≠brary is a part of the Vert.x dis¬≠tri¬≠b¬≠u¬≠tion. \u003ccode\u003evertx-eventbus.js\u003c/code\u003e in¬≠ter¬≠nally uses SockJS li¬≠brary\nto send the data to the SockJS server. In the code snip¬≠pet below we cre¬≠ate an in¬≠stance of the event bus.\nThe pa¬≠ra¬≠me¬≠ter to the con¬≠struc¬≠tor is the URI where to con¬≠nect to the event bus.\nThen we reg¬≠is¬≠ter the han¬≠dler lis¬≠ten¬≠ing on ad¬≠dress \u003ccode\u003eauction.\u0026lt;auction_id\u0026gt;\u003c/code\u003e. Each client has a pos¬≠si¬≠bil¬≠ity of reg¬≠is¬≠ter¬≠ing\nat mul¬≠ti¬≠ple ad¬≠dresses e.g. when bid¬≠ding in the auc¬≠tion 1234, they reg¬≠is¬≠ter on the ad¬≠dress \u003ccode\u003eauction.1234\u003c/code\u003e etc.\nWhen data ar¬≠rives in the han¬≠dler, we change the cur¬≠rent price and the bid¬≠ding feed on the auc¬≠tion‚Äôs web page.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eregisterHandlerForUpdateCurrentPriceAndFeed\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e eventBus = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e EventBus(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;http://localhost:8080/eventbus\u0026#x27;\u003c/span\u003e);\n    eventBus.onopen = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n        eventBus.registerHandler(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;auction.\u0026#x27;\u003c/span\u003e + auction_id, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003eerror, message\u003c/span\u003e) \u003c/span\u003e{\n            \u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e.getElementById(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;current_price\u0026#x27;\u003c/span\u003e).innerHTML = \u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.parse(message.body).price;\n            \u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e.getElementById(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;feed\u0026#x27;\u003c/span\u003e).value += \u003cspan class=\"hljs-string\"\u003e\u0026#x27;New offer: \u0026#x27;\u003c/span\u003e + \u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.parse(message.body).price + \u003cspan class=\"hljs-string\"\u003e\u0026#x27;\\n\u0026#x27;\u003c/span\u003e;\n        });\n    }\n};\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAny user at¬≠tempt to bid gen¬≠er¬≠ates a PATCH Ajax re¬≠quest\nto the ser¬≠vice with in¬≠for¬≠ma¬≠tion about the new offer made at auc¬≠tion (see \u003ccode\u003ebid()\u003c/code\u003e func¬≠tion).\nOn the server side we pub¬≠lish this in¬≠for¬≠ma¬≠tion on the event bus to all clients reg¬≠is¬≠tered to an ad¬≠dress.\nIf you re¬≠ceive an HTTP re¬≠sponse sta¬≠tus code other than \u003ccode\u003e200 (OK)\u003c/code\u003e, an error mes¬≠sage is dis¬≠played on the web page.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ebid\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e newPrice = \u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e.getElementById(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;my_bid_value\u0026#x27;\u003c/span\u003e).value;\n\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e xmlhttp = (\u003cspan class=\"hljs-built_in\"\u003ewindow\u003c/span\u003e.XMLHttpRequest) ? \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e XMLHttpRequest() : \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ActiveXObject(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Microsoft.XMLHTTP\u0026quot;\u003c/span\u003e);\n    xmlhttp.onreadystatechange = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (xmlhttp.readyState == \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e) {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (xmlhttp.status != \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e) {\n                \u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e.getElementById(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;error_message\u0026#x27;\u003c/span\u003e).innerHTML = \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Sorry, something went wrong.\u0026#x27;\u003c/span\u003e;\n            }\n        }\n    };\n    xmlhttp.open(\u003cspan class=\"hljs-string\"\u003e\u0026quot;PATCH\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:8080/api/auctions/\u0026quot;\u003c/span\u003e + auction_id);\n    xmlhttp.setRequestHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Content-Type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e);\n    xmlhttp.send(\u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.stringify({\u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: newPrice}));\n};\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"auction-service\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#auction-service\"\u003e\u003c/a\u003eAuction Service\u003c/h2\u003e\u003cp\u003eSockJS client re¬≠quires the server-‚Äãside part. Now we are going to cre¬≠ate a light-‚Äãweight REST¬≠ful auc¬≠tion ser¬≠vice.\nWe will send and re¬≠trieve data in JSON for¬≠mat. Let‚Äôs start by cre¬≠at¬≠ing a ver¬≠ti¬≠cle.\nFirst we need to in¬≠herit from \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/core/AbstractVerticle.html\"\u003e\u003ccode\u003eAbstractVerticle\u003c/code\u003e\u003c/a\u003e\nand over¬≠ride the \u003ccode\u003estart\u003c/code\u003e method.\nEach ver¬≠ti¬≠cle in¬≠stance has a mem¬≠ber vari¬≠able called \u003ccode\u003evertx\u003c/code\u003e. This pro¬≠vides ac¬≠cess to the Vert.x core API.\nFor ex¬≠am¬≠ple, to cre¬≠ate an HTTP server you call the \u003ccode\u003ecreateHttpServer\u003c/code\u003e method on \u003ccode\u003evertx\u003c/code\u003e in¬≠stance.\nTo tell the server to lis¬≠ten on port 8080 for in¬≠com¬≠ing re¬≠quests you use the \u003ccode\u003elisten\u003c/code\u003e method.\u003c/p\u003e\u003cp\u003eWe need a router with routes. A router takes an HTTP re¬≠quest and finds the first match¬≠ing route.\nThe route can have a han¬≠dler as¬≠so¬≠ci¬≠ated with it, which re¬≠ceives the re¬≠quest\n(e.g. route that matches path \u003ccode\u003e/eventbus/*\u003c/code\u003e is  as¬≠so¬≠ci¬≠ated with \u003ccode\u003eeventBusHandler\u003c/code\u003e).\u003c/p\u003e\u003cp\u003eWe can do some¬≠thing with the re¬≠quest, and then, end it or pass it to the next match¬≠ing han¬≠dler.\u003c/p\u003e\u003cp\u003eIf you have a lot of han¬≠dlers it makes sense to split them up into mul¬≠ti¬≠ple routers.\u003c/p\u003e\u003cp\u003eYou can do this by mount¬≠ing a router at a mount point in an¬≠other router\n(see \u003ccode\u003eauctionApiRouter\u003c/code\u003e that cor¬≠re¬≠sponds to \u003ccode\u003e/api\u003c/code\u003e mount point in code snip¬≠pet below).\u003c/p\u003e\u003cp\u003eHere‚Äôs an ex¬≠am¬≠ple ver¬≠ti¬≠cle:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAuctionServiceVerticle\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n\n    \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n        Router router = Router.router(vertx);\n\n        router.route(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/eventbus/*\u0026quot;\u003c/span\u003e).handler(eventBusHandler());\n        router.mountSubRouter(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api\u0026quot;\u003c/span\u003e, auctionApiRouter());\n        router.route().failureHandler(errorHandler());\n        router.route().handler(staticHandler());\n\n        vertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e//‚Ä¶\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow we‚Äôll look at things in more de¬≠tail. We‚Äôll dis¬≠cuss Vert.x fea¬≠tures used in ver¬≠ti¬≠cle:\nerror han¬≠dler, SockJS han¬≠dler, body han¬≠dler, shared data, sta¬≠tic han¬≠dler and rout¬≠ing based on method, path etc.\u003c/p\u003e\u003ch3 id=\"error-handler\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#error-handler\"\u003e\u003c/a\u003eError handler\u003c/h3\u003e\u003cp\u003eAs well as set¬≠ting han¬≠dlers to han¬≠dle re¬≠quests you can also set a han¬≠dler for fail¬≠ures in rout¬≠ing.\nFail¬≠ure in rout¬≠ing oc¬≠curs if a han¬≠dler throws an ex¬≠cep¬≠tion, or if a han¬≠dler calls \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/RoutingContext.html#fail-int-\"\u003e\u003ccode\u003efail\u003c/code\u003e\u003c/a\u003e method.\nTo ren¬≠der error pages we use error han¬≠dler pro¬≠vides by Vert.x:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e ErrorHandler \u003cspan class=\"hljs-title\"\u003eerrorHandler\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e ErrorHandler.create();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"sockjs-handler\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sockjs-handler\"\u003e\u003c/a\u003eSockJS handler\u003c/h3\u003e\u003cp\u003eVert.x pro¬≠vides SockJS han¬≠dler with the event bus bridge which ex¬≠tends\nthe server-‚Äãside Vert.x event bus into client side JavaScript.\u003c/p\u003e\u003cp\u003eCon¬≠fig¬≠ur¬≠ing the bridge to tell it which mes¬≠sages should pass through is easy.\nYou can spec¬≠ify which matches you want to allow for in¬≠bound and out¬≠bound traf¬≠fic\nusing the \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/handler/sockjs/BridgeOptions.html\"\u003e\u003ccode\u003eBridgeOptions\u003c/code\u003e\u003c/a\u003e.\nIf a mes¬≠sage is out¬≠bound, be¬≠fore send¬≠ing it from the server to the client side JavaScript,\nVert.x will look through any out¬≠bound per¬≠mit¬≠ted matches. In code snip¬≠pet below we allow any mes¬≠sages\nfrom ad¬≠dresses start¬≠ing with ‚Äúauc¬≠tion.‚Äù and end¬≠ing with dig¬≠its (e.g. \u003ccode\u003eauction.1\u003c/code\u003e, \u003ccode\u003eauction.100\u003c/code\u003e etc).\u003c/p\u003e\u003cp\u003eIf you want to be no¬≠ti¬≠fied when an event oc¬≠curs on the bridge you can pro¬≠vide a han¬≠dler when call¬≠ing the bridge.\nFor ex¬≠am¬≠ple, \u003ccode\u003eSOCKET_CREATED\u003c/code\u003e event will occur when a new SockJS socket is cre¬≠ated.\nThe event is an in¬≠stance of \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/core/Future.html\"\u003e\u003ccode\u003eFuture\u003c/code\u003e\u003c/a\u003e.\nWhen you are fin¬≠ished han¬≠dling the event you can com¬≠plete the fu¬≠ture with ‚Äútrue‚Äù to en¬≠able fur¬≠ther pro¬≠cess¬≠ing.\u003c/p\u003e\u003cp\u003eTo start the bridge sim¬≠ply call \u003ccode\u003ebridge\u003c/code\u003e method on the SockJS han¬≠dler:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e SockJSHandler \u003cspan class=\"hljs-title\"\u003eeventBusHandler\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    BridgeOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e BridgeOptions()\n            .addOutboundPermitted(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PermittedOptions().setAddressRegex(\u003cspan class=\"hljs-string\"\u003e\u0026quot;auction\\\\.[0-9]+\u0026quot;\u003c/span\u003e));\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e SockJSHandler.create(vertx).bridge(options, event -\u0026gt; {\n         \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.type() == BridgeEventType.SOCKET_CREATED) {\n            logger.info(\u003cspan class=\"hljs-string\"\u003e\u0026quot;A socket was created\u0026quot;\u003c/span\u003e);\n        }\n        event.complete(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"body-handler\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#body-handler\"\u003e\u003c/a\u003eBody handler\u003c/h3\u003e\u003cp\u003eThe Body¬≠Han¬≠dler al¬≠lows you to re¬≠trieve the re¬≠quest body, limit the body size and to han¬≠dle the file up¬≠load.\nBody han¬≠dler should be on a match¬≠ing route for any re¬≠quests that re¬≠quire this func¬≠tion¬≠al¬≠ity.\nWe need Body¬≠Han¬≠dler dur¬≠ing the bid¬≠ding process (PATCH method re¬≠quest \u003ccode\u003e/auctions/\u0026lt;auction_id\u0026gt;\u003c/code\u003e con¬≠tains re¬≠quest body\nwith in¬≠for¬≠ma¬≠tion about a new offer made at auc¬≠tion). Cre¬≠at¬≠ing a new body han¬≠dler is sim¬≠ple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eBodyHandler.create();\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf re¬≠quest body is in JSON for¬≠mat, you can get it with\n\u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/RoutingContext.html#getBodyAsJson--\"\u003e\u003ccode\u003egetBodyAsJson\u003c/code\u003e\u003c/a\u003e method.\u003c/p\u003e\u003ch3 id=\"shared-data\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#shared-data\"\u003e\u003c/a\u003eShared data\u003c/h3\u003e\u003cp\u003eShared data con¬≠tains func¬≠tion¬≠al¬≠ity that al¬≠lows you to safely share the data be¬≠tween dif¬≠fer¬≠ent ap¬≠pli¬≠ca¬≠tions\nin the same Vert.x in¬≠stance or across a clus¬≠ter of Vert.x in¬≠stances.\nShared data in¬≠cludes local shared maps, dis¬≠trib¬≠uted, cluster-‚Äãwide maps, asyn¬≠chro¬≠nous cluster-‚Äãwide locks\nand asyn¬≠chro¬≠nous cluster-‚Äãwide coun¬≠ters.\u003c/p\u003e\u003cp\u003eTo sim¬≠plify the ap¬≠pli¬≠ca¬≠tion we use the local shared map to save in¬≠for¬≠ma¬≠tion about auc¬≠tions.\nThe local shared map al¬≠lows you to share data be¬≠tween dif¬≠fer¬≠ent ver¬≠ti¬≠cles in the same Vert.x in¬≠stance.\nHere‚Äôs an ex¬≠am¬≠ple of using a shared local map in an auc¬≠tion ser¬≠vice:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAuctionRepository\u003c/span\u003e \u003c/span\u003e{\n\n    \u003cspan class=\"hljs-comment\"\u003e//‚Ä¶\u003c/span\u003e\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e Optional\u0026lt;Auction\u0026gt; \u003cspan class=\"hljs-title\"\u003egetById\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String auctionId)\u003c/span\u003e \u003c/span\u003e{\n        LocalMap\u0026lt;String, String\u0026gt; auctionSharedData = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.sharedData.getLocalMap(auctionId);\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Optional.of(auctionSharedData)\n            .filter(m -\u0026gt; !m.isEmpty())\n            .map(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e::convertToAuction);\n    }\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003esave\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Auction auction)\u003c/span\u003e \u003c/span\u003e{\n        LocalMap\u0026lt;String, String\u0026gt; auctionSharedData = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.sharedData.getLocalMap(auction.getId());\n\n        auctionSharedData.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e, auction.getId());\n        auctionSharedData.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;price\u0026quot;\u003c/span\u003e, auction.getPrice());\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e//‚Ä¶\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you want to store auc¬≠tion data in a data¬≠base, Vert.x pro¬≠vides a few dif¬≠fer¬≠ent asyn¬≠chro¬≠nous clients\nfor ac¬≠cess¬≠ing var¬≠i¬≠ous data stor¬≠ages (Mon¬≠goDB, Redis or JDBC client).\u003c/p\u003e\u003ch3 id=\"auction-api\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#auction-api\"\u003e\u003c/a\u003eAuction API\u003c/h3\u003e\u003cp\u003eVert.x lets you route HTTP re¬≠quests to dif¬≠fer¬≠ent han¬≠dlers based on pat¬≠tern match¬≠ing on the re¬≠quest path.\nIt also en¬≠ables you to ex¬≠tract val¬≠ues from the path and use them as pa¬≠ra¬≠me¬≠ters in the re¬≠quest.\nCor¬≠re¬≠spond¬≠ing meth¬≠ods exist for each HTTP method. The first match¬≠ing one will re¬≠ceive the re¬≠quest.\nThis func¬≠tion¬≠al¬≠ity is par¬≠tic¬≠u¬≠larly use¬≠ful when de¬≠vel¬≠op¬≠ing REST-‚Äãstyle web ap¬≠pli¬≠ca¬≠tions.\u003c/p\u003e\u003cp\u003eTo ex¬≠tract pa¬≠ra¬≠me¬≠ters from the path, you can use the colon char¬≠ac¬≠ter to de¬≠note the name of a pa¬≠ra¬≠me¬≠ter.\nReg¬≠u¬≠lar ex¬≠pres¬≠sions can also be used to ex¬≠tract more com¬≠plex matches.\nAny pa¬≠ra¬≠me¬≠ters ex¬≠tracted by pat¬≠tern match¬≠ing are added to the map of re¬≠quest pa¬≠ra¬≠me¬≠ters.\u003c/p\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/Route.html#consumes-java.lang.String-\"\u003e\u003ccode\u003eConsumes\u003c/code\u003e\u003c/a\u003e\nde¬≠scribes which MIME types the han¬≠dler can con¬≠sume.\nBy using \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/Route.html#produces-java.lang.String-\"\u003e\u003ccode\u003eproduces\u003c/code\u003e\u003c/a\u003e\nyou de¬≠fine which MIME types the route pro¬≠duces.\nIn the code below the routes will match any re¬≠quest with \u003ccode\u003econtent-type\u003c/code\u003e header\nand \u003ccode\u003eaccept\u003c/code\u003e header that matches \u003ccode\u003eapplication/json\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eLet‚Äôs look at an ex¬≠am¬≠ple of a sub¬≠router mounted on the main router which was cre¬≠ated in \u003ccode\u003estart\u003c/code\u003e method in ver¬≠ti¬≠cle:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Router \u003cspan class=\"hljs-title\"\u003eauctionApiRouter\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    AuctionRepository repository = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e AuctionRepository(vertx.sharedData());\n    AuctionValidator validator = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e AuctionValidator(repository);\n    AuctionHandler handler = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e AuctionHandler(repository, validator);\n\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n\n    router.route().consumes(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e);\n    router.route().produces(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e);\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/auctions/:id\u0026quot;\u003c/span\u003e).handler(handler::handleGetAuction);\n    router.patch(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/auctions/:id\u0026quot;\u003c/span\u003e).handler(handler::handleChangeAuctionPrice);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e router;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe GET re¬≠quest re¬≠turns auc¬≠tion data, while the PATCH method re¬≠quest al¬≠lows you to bid up in the auc¬≠tion.\nLet‚Äôs focus on the more in¬≠ter¬≠est¬≠ing method, namely \u003ccode\u003ehandleChangeAuctionPrice\u003c/code\u003e.\nIn the sim¬≠plest terms, the method might look like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleChangeAuctionPrice\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext context)\u003c/span\u003e \u003c/span\u003e{\n    String auctionId = context.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e);\n    Auction auction = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Auction(\n        auctionId,\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e BigDecimal(context.getBodyAsJson().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;price\u0026quot;\u003c/span\u003e))\n    );\n\n    \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.repository.save(auction);\n    context.vertx().eventBus().publish(\u003cspan class=\"hljs-string\"\u003e\u0026quot;auction.\u0026quot;\u003c/span\u003e + auctionId, context.getBodyAsString());\n\n    context.response()\n        .setStatusCode(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n        .end();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ccode\u003ePATCH\u003c/code\u003e re¬≠quest to \u003ccode\u003e/auctions/1\u003c/code\u003e would re¬≠sult in vari¬≠able \u003ccode\u003eauctionId\u003c/code\u003e get¬≠ting the value 1.\nWe save a new offer in the auc¬≠tion and then pub¬≠lish this in¬≠for¬≠ma¬≠tion on the event bus to all clients\nreg¬≠is¬≠tered on the ad¬≠dress on the client side JavaScript.\nAfter you have fin¬≠ished with the HTTP re¬≠sponse you must call the \u003ccode\u003eend\u003c/code\u003e func¬≠tion on it.\u003c/p\u003e\u003ch3 id=\"static-handler\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#static-handler\"\u003e\u003c/a\u003eStatic handler\u003c/h3\u003e\u003cp\u003eVert.x pro¬≠vides the han¬≠dler for serv¬≠ing sta¬≠tic web re¬≠sources.\nThe de¬≠fault di¬≠rec¬≠tory from which sta¬≠tic files are served is \u003ccode\u003ewebroot\u003c/code\u003e, but this can be con¬≠fig¬≠ured.\nBy de¬≠fault the sta¬≠tic han¬≠dler will set cache head¬≠ers to en¬≠able browsers to cache files.\nSet¬≠ting cache head¬≠ers can be dis¬≠abled with\n\u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/ext/web/handler/StaticHandler.html#setCachingEnabled-boolean-\"\u003e\u003ccode\u003esetCachingEnabled\u003c/code\u003e\u003c/a\u003e method.\nTo serve the auc¬≠tion HTML page, JS files (and other sta¬≠tic files) from auc¬≠tion ser¬≠vice, you can cre¬≠ate a sta¬≠tic han¬≠dler like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e StaticHandler \u003cspan class=\"hljs-title\"\u003estaticHandler\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e StaticHandler.create()\n        .setCachingEnabled(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"lets-run\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#lets-run\"\u003e\u003c/a\u003eLet‚Äôs run!\u003c/h2\u003e\u003cp\u003eFull ap¬≠pli¬≠ca¬≠tion code is avail¬≠able on \u003ca href=\"https://github.com/mwarc/simple-realtime-auctions-vertx3-example\"\u003egithub\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eClone the repos¬≠i¬≠tory and run \u003ccode\u003e./gradlew run\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eOpen one or more browsers and point them to \u003ccode\u003ehttp://localhost:8080\u003c/code\u003e. Now you can bid in auc¬≠tion:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/real-time-bidding-with-websockets-and-vertx/bidding_in_application.png\" alt=\"Real time bidding in application\"/\u003e\u003c/p\u003e\u003ch2 id=\"summary\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#summary\"\u003e\u003c/a\u003eSummary\u003c/h2\u003e\u003cp\u003eThis ar¬≠ti¬≠cle presents the out¬≠line of a sim¬≠ple ap¬≠pli¬≠ca¬≠tion that al¬≠lows real-‚Äãtime bid¬≠ding.\nWe cre¬≠ated a light¬≠weight, high-‚Äãperformance and scal¬≠able micro-‚Äãservice writ¬≠ten in Java and based on Vert.x.\nWe dis¬≠cussed what Vert.x of¬≠fers, among oth¬≠ers, a dis¬≠trib¬≠uted event bus and an el¬≠e¬≠gant API that al¬≠lows you to cre¬≠ate ap¬≠pli¬≠ca¬≠tions in no time.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"handler","tf":28},{"term":"auction","tf":20},{"term":"request","tf":20},{"term":"us","tf":17},{"term":"bid","tf":15},{"term":"sockj","tf":15},{"term":"method","tf":15},{"term":"creat","tf":13},{"term":"event","tf":13},{"term":"provid","tf":12},{"term":"websocket","tf":12},{"term":"data","tf":12},{"term":"match","tf":12},{"term":"applic","tf":11},{"term":"rout","tf":11},{"term":"share","tf":10},{"term":"server","tf":9},{"term":"bu","tf":9},{"term":"client","tf":9},{"term":"web","tf":8},{"term":"will","tf":8},{"term":"servic","tf":8},{"term":"http","tf":8},{"term":"instanc","tf":8},{"term":"bodi","tf":8}]},{"filename":"blog/2016-01-03-ecmascript-6-7-on-the-jvm-with-typescript-and-vert-x.mdx","date":"2016-01-03","slug":"ecmascript-6-7-on-the-jvm-with-typescript-and-vert-x","meta":{"title":"ECMAScript 6/7 on the JVM with TypeScript and Vert.x","category":"guides","authors":[{"name":"Michel Kr√§mer","github_id":"michel-kraemer"}],"summary":"I figured it would be a good idea to give you a couple of examples how teaming\n  Vert.x and TypeScript helps you use ECMAScript 6 and 7 features on the JVM today."},"readingTime":{"text":"4 min read","minutes":3.775,"time":226500,"words":755},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Fol\\xADlow\\xADing the lat\\xADest re\\xADleases of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io\"\n  }), \"Vert.x 3.2\"), \" and\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/michel-kraemer/vertx-lang-typescript\"\n  }), \"vertx-\\u200Blang-typescript 1.1.0\"), \"\\nI fig\\xADured it would be a good idea to give you a cou\\xADple of ex\\xADam\\xADples how team\\xADing\\nVert.x and Type\\xADScript helps you use EC\\xADMAScript 6 and 7 fea\\xADtures on the JVM today.\"), mdx(\"p\", null, \"The vertx-\\u200Blang-typescript li\\xADbrary adds \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.typescriptlang.org/\"\n  }), \"Type\\xADScript\"), \" sup\\xADport to Vert.x 3.\\nType\\xADScript is a typed su\\xADper\\xADset of JavaScript that com\\xADpiles to plain JavaScript. It sup\\xADports the\\nEC\\xADMAScript 6 (EC\\xADMAScript 2015, ES6) stan\\xADdard and also a few parts of EC\\xADMAScript 7 (ES7) al\\xADready.\"), mdx(\"p\", null, \"The li\\xADbrary au\\xADto\\xADmat\\xADi\\xADcally com\\xADpiles Vert.x ver\\xADti\\xADcles writ\\xADten in\\nType\\xADScript to JavaScript and ex\\xADe\\xADcutes them on the JVM. vertx-\\u200Blang-typescript also pro\\xADvides\\ntype de\\xADf\\xADi\\xADn\\xADi\\xADtions for the Vert.x JavaScript API. Use them in your favourite\\nType\\xADScript ed\\xADi\\xADtor/IDE to get auto-\\u200Bcompletion, API doc\\xADu\\xADmen\\xADta\\xADtion and mean\\xADing\\xADful error\\nmes\\xADsages. See the fol\\xADlow\\xADing screen\\xADcast:\"), mdx(\"img\", {\n    src: \"https://raw.githubusercontent.com/michel-kraemer/vertx-lang-typescript/aaa67228c998bf9dc64b5f45fb407ef56169efec/screencast.gif\"\n  }), mdx(\"h2\", {\n    \"id\": \"ecmascript-67-and-vertx\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#ecmascript-67-and-vertx\"\n  })), \"ECMAScript 6/7 and Vert.x\"), mdx(\"p\", null, \"Below you find an ex\\xADam\\xADple ver\\xADti\\xADcle writ\\xADten in Type\\xADScript. Well, I left all\\nthe TypeScript-\\u200Bspecific parts out. In fact the ver\\xADti\\xADcle is valid EC\\xADMAScript 6\\n(ex\\xADcept for the last snip\\xADpet \", \"[9]\", \" which is EC\\xADMAScript 7).\"), mdx(\"p\", null, \"First, fol\\xADlow the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/michel-kraemer/vertx-lang-typescript/blob/master/README.md\"\n  }), \"vertx-\\u200Blang-typescript README\"), \"\\nto in\\xADstall the li\\xADbrary and to en\\xADable Type\\xADScript in Vert.x. Then ex\\xADtract the\\ntype de\\xADf\\xADi\\xADn\\xADi\\xADtions (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-lang-typescript-1.1.0-typings.zip\"), \") into a new di\\xADrec\\xADtory.\\nCre\\xADate a new file named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"es7verticle.ts\"), \" in this di\\xADrec\\xADtory and copy the code\\nbelow into it. Fi\\xADnally, open your com\\xADmand prompt and ex\\xADe\\xADcute\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"vertx run es7verticle.ts\\n\")), mdx(\"p\", null, \"This will run a small HTTP server that lis\\xADtens to re\\xADquests on port 8080. If you\\nopen your browser and go to http://lo\\xADcal\\xADhost:8080 you will see the fol\\xADlow\\xADing:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/ecmascript-6-7-on-the-jvm-with-typscript-and-vertx/output.png\",\n    \"alt\": \"Output of the verticle written in TypeScript\"\n  }))), mdx(\"p\", null, \"So far so good. Now let\\u2019s have a look at the code. I num\\xADbered the in\\xADdi\\xADvid\\xADual\\nEC\\xADMAScript fea\\xADtures used. Here\\u2019s a com\\xADplete list:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use an \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"arrow func\\xADtion\"), \" to cre\\xADate a re\\xADquest han\\xADdler (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Block-\\u200Bscoped vari\\xADables\"), \" do not pol\\xADlute your global name\\xADspace (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Spec\\xADify a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"de\\xADfault value\"), \" for a func\\xADtion pa\\xADra\\xADme\\xADter (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"rest pa\\xADra\\xADme\\xADters\"), \" to col\\xADlect mul\\xADti\\xADple pa\\xADra\\xADme\\xADters in an array (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Spread\"), \" the con\\xADtents of an array to func\\xADtion pa\\xADra\\xADme\\xADters (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"It\\xADer\\xADate over array con\\xADtents using the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"for\\u2026of loop\"), \" (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"tem\\xADplate strings\"), \" en\\xADable \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"string in\\xADter\\xADpo\\xADla\\xADtion\"), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"multi-\\u200Bline strings\"), \" (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"classes\"), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"in\\xADher\\xADi\\xADtance\"), \" (ES6)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use the new \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"ex\\xADpo\\xADnen\\xADti\\xADa\\xADtion op\\xADer\\xADa\\xADtor\"), \" as a short\\xADcut for \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Math.pow()\"), \" (ES7)\")), mdx(Gist, {\n    url: \"https://gist.github.com/michel-kraemer/892866038dabcb8376e6\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"The ex\\xADam\\xADple demon\\xADstrates very well how you can use EC\\xADMAScript 6 (and parts of\\n7) on the JVM today. In fact, there are a lot more\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://es6-features.org/\"\n  }), \"cool ES6 fea\\xADtures\"), \" not in\\xADcluded in the ex\\xADam\\xADple such\\nas con\\xADstants (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"const\"), \"), the prop\\xADerty short\\xADhand or method prop\\xADer\\xADties.\"), mdx(\"p\", null, \"Type\\xADScript is so much more than just ES6. It ac\\xADtu\\xADally has a\\nvery good sta\\xADtic type sys\\xADtem that al\\xADlows you to make compile-\\u200Btime type checks.\\nThis is makes it much eas\\xADier to write large Vert.x ap\\xADpli\\xADca\\xADtions with many\\nver\\xADti\\xADcles. Per\\xADson\\xADally I re\\xADally like the sup\\xADport that I get from my IDE when\\npro\\xADgram\\xADming Type\\xADScript. Since vertx-\\u200Blang-typescript comes with type de\\xADf\\xADi\\xADn\\xADi\\xADtions\\nfor the Vert.x JavaScript API I get auto-\\u200Bcompletion and ac\\xADcess to the doc\\xADu\\xADmen\\xADta\\xADtion\\nright in the ed\\xADi\\xADtor. I mostly use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.sublimetext.com/\"\n  }), \"Sub\\xADlime\"), \" by the\\nway, but I have tested it suc\\xADcess\\xADfully with\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://code.visualstudio.com/\"\n  }), \"Vi\\xADsual Stu\\xADdio Code\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.eclipse.org/\"\n  }), \"Eclipse\"), \"\\nand \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://atom.io/\"\n  }), \"Atom\"), \".\"), mdx(\"p\", null, \"Un\\xADfor\\xADtu\\xADnately, the only ES7 fea\\xADture that you can use at the mo\\xADment with\\nvertx-\\u200Blang-typescript is the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ex\\xADpo\\xADnen\\xADti\\xADa\\xADtion op\\xADer\\xADa\\xADtor\"), \". Type\\xADScript 1.7 also\\nsup\\xADports \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"dec\\xADo\\xADra\\xADtors\"), \" but this fea\\xADture is dis\\xADabled at the mo\\xADment in\\nvertx-\\u200Blang-typescript be\\xADcause it is ex\\xADper\\xADi\\xADmen\\xADtal and sub\\xADject to change. I\\u2019ll\\nkeep you up to date when new fea\\xADtures are in\\xADtro\\xADduced.\"), mdx(\"h2\", {\n    \"id\": \"alternatives\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#alternatives\"\n  })), \"Alternatives\"), mdx(\"p\", null, \"We\\u2019ve re\\xADcently \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/vert-x-es6-back-to-the-future/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"pub\\xADlished a post\")), \"\\non how to use EC\\xADMAScript 6 with Vert.x here on this blog. We used \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://babeljs.io/\"\n  }), \"Babel\"), \", a\\ncom\\xADpiler that trans\\xADlates ES6 to ES5.\"), mdx(\"p\", null, \"Al\\xADthough this ap\\xADproach works well it is a bit harder to set up and use than the\\none pre\\xADsented here. First, you need to wrap your Vert.x ap\\xADpli\\xADca\\xADtion in a NPM pack\\xADage.\\nSec\\xADond, in order to run your ap\\xADpli\\xADca\\xADtion, you need to ex\\xADe\\xADcute two com\\xADmands.\\nYou have to com\\xADpile it with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm run build\"), \" and then then call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm start\"), \".\\nWith vertx-\\u200Blang-typescript you only need one com\\xADmand. vertx-\\u200Blang-typescript\\nalso al\\xADlows you to embed the Type\\xADScript ver\\xADti\\xADcle in a larger Vert.x ap\\xADpli\\xADca\\xADtion\\nand also mix mul\\xADti\\xADple lan\\xADguages in one project. This is not pos\\xADsi\\xADble if you wrap\\nevery\\xADthing in a NPM pack\\xADage.\"), mdx(\"p\", null, \"Fi\\xADnally, the ap\\xADproach based on Babel only sup\\xADports EC\\xADMAScript 6 (2015), al\\xADthough\\nmore fea\\xADtures from ES7 will surely be in\\xADtro\\xADduced in Babel in the fu\\xADture.\\nType\\xADScript on the other hand gives you much more fea\\xADtures such as sta\\xADtic\\ntyp\\xADing that you will cer\\xADtainly find use\\xADful for any larger project.\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eFol¬≠low¬≠ing the lat¬≠est re¬≠leases of \u003ca href=\"http://vertx.io\"\u003eVert.x 3.2\u003c/a\u003e and\n\u003ca href=\"https://github.com/michel-kraemer/vertx-lang-typescript\"\u003evertx-‚Äãlang-typescript 1.1.0\u003c/a\u003e\nI fig¬≠ured it would be a good idea to give you a cou¬≠ple of ex¬≠am¬≠ples how team¬≠ing\nVert.x and Type¬≠Script helps you use EC¬≠MAScript 6 and 7 fea¬≠tures on the JVM today.\u003c/p\u003e\u003cp\u003eThe vertx-‚Äãlang-typescript li¬≠brary adds \u003ca href=\"http://www.typescriptlang.org/\"\u003eType¬≠Script\u003c/a\u003e sup¬≠port to Vert.x 3.\nType¬≠Script is a typed su¬≠per¬≠set of JavaScript that com¬≠piles to plain JavaScript. It sup¬≠ports the\nEC¬≠MAScript 6 (EC¬≠MAScript 2015, ES6) stan¬≠dard and also a few parts of EC¬≠MAScript 7 (ES7) al¬≠ready.\u003c/p\u003e\u003cp\u003eThe li¬≠brary au¬≠to¬≠mat¬≠i¬≠cally com¬≠piles Vert.x ver¬≠ti¬≠cles writ¬≠ten in\nType¬≠Script to JavaScript and ex¬≠e¬≠cutes them on the JVM. vertx-‚Äãlang-typescript also pro¬≠vides\ntype de¬≠f¬≠i¬≠n¬≠i¬≠tions for the Vert.x JavaScript API. Use them in your favourite\nType¬≠Script ed¬≠i¬≠tor/IDE to get auto-‚Äãcompletion, API doc¬≠u¬≠men¬≠ta¬≠tion and mean¬≠ing¬≠ful error\nmes¬≠sages. See the fol¬≠low¬≠ing screen¬≠cast:\u003c/p\u003e\u003cimg src=\"https://raw.githubusercontent.com/michel-kraemer/vertx-lang-typescript/aaa67228c998bf9dc64b5f45fb407ef56169efec/screencast.gif\"/\u003e\u003ch2 id=\"ecmascript-67-and-vertx\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#ecmascript-67-and-vertx\"\u003e\u003c/a\u003eECMAScript 6/7 and Vert.x\u003c/h2\u003e\u003cp\u003eBelow you find an ex¬≠am¬≠ple ver¬≠ti¬≠cle writ¬≠ten in Type¬≠Script. Well, I left all\nthe TypeScript-‚Äãspecific parts out. In fact the ver¬≠ti¬≠cle is valid EC¬≠MAScript 6\n(ex¬≠cept for the last snip¬≠pet \u003c!-- --\u003e[9]\u003c!-- --\u003e which is EC¬≠MAScript 7).\u003c/p\u003e\u003cp\u003eFirst, fol¬≠low the \u003ca href=\"https://github.com/michel-kraemer/vertx-lang-typescript/blob/master/README.md\"\u003evertx-‚Äãlang-typescript README\u003c/a\u003e\nto in¬≠stall the li¬≠brary and to en¬≠able Type¬≠Script in Vert.x. Then ex¬≠tract the\ntype de¬≠f¬≠i¬≠n¬≠i¬≠tions (\u003ccode\u003evertx-lang-typescript-1.1.0-typings.zip\u003c/code\u003e) into a new di¬≠rec¬≠tory.\nCre¬≠ate a new file named \u003ccode\u003ees7verticle.ts\u003c/code\u003e in this di¬≠rec¬≠tory and copy the code\nbelow into it. Fi¬≠nally, open your com¬≠mand prompt and ex¬≠e¬≠cute\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003evertx run es7verticle.ts\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis will run a small HTTP server that lis¬≠tens to re¬≠quests on port 8080. If you\nopen your browser and go to http://lo¬≠cal¬≠host:8080 you will see the fol¬≠low¬≠ing:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/ecmascript-6-7-on-the-jvm-with-typscript-and-vertx/output.png\" alt=\"Output of the verticle written in TypeScript\"/\u003e\u003c/p\u003e\u003cp\u003eSo far so good. Now let‚Äôs have a look at the code. I num¬≠bered the in¬≠di¬≠vid¬≠ual\nEC¬≠MAScript fea¬≠tures used. Here‚Äôs a com¬≠plete list:\u003c/p\u003e\u003col\u003e\u003cli\u003eUse an \u003cem\u003earrow func¬≠tion\u003c/em\u003e to cre¬≠ate a re¬≠quest han¬≠dler (ES6)\u003c/li\u003e\u003cli\u003e\u003cem\u003eBlock-‚Äãscoped vari¬≠ables\u003c/em\u003e do not pol¬≠lute your global name¬≠space (ES6)\u003c/li\u003e\u003cli\u003eSpec¬≠ify a \u003cem\u003ede¬≠fault value\u003c/em\u003e for a func¬≠tion pa¬≠ra¬≠me¬≠ter (ES6)\u003c/li\u003e\u003cli\u003eUse \u003cem\u003erest pa¬≠ra¬≠me¬≠ters\u003c/em\u003e to col¬≠lect mul¬≠ti¬≠ple pa¬≠ra¬≠me¬≠ters in an array (ES6)\u003c/li\u003e\u003cli\u003e\u003cem\u003eSpread\u003c/em\u003e the con¬≠tents of an array to func¬≠tion pa¬≠ra¬≠me¬≠ters (ES6)\u003c/li\u003e\u003cli\u003eIt¬≠er¬≠ate over array con¬≠tents using the \u003cem\u003efor‚Ä¶of loop\u003c/em\u003e (ES6)\u003c/li\u003e\u003cli\u003e\u003cem\u003etem¬≠plate strings\u003c/em\u003e en¬≠able \u003cem\u003estring in¬≠ter¬≠po¬≠la¬≠tion\u003c/em\u003e and \u003cem\u003emulti-‚Äãline strings\u003c/em\u003e (ES6)\u003c/li\u003e\u003cli\u003eUse \u003cem\u003eclasses\u003c/em\u003e and \u003cem\u003ein¬≠her¬≠i¬≠tance\u003c/em\u003e (ES6)\u003c/li\u003e\u003cli\u003eUse the new \u003cem\u003eex¬≠po¬≠nen¬≠ti¬≠a¬≠tion op¬≠er¬≠a¬≠tor\u003c/em\u003e as a short¬≠cut for \u003ccode\u003eMath.pow()\u003c/code\u003e (ES7)\u003c/li\u003e\u003c/ol\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eThe ex¬≠am¬≠ple demon¬≠strates very well how you can use EC¬≠MAScript 6 (and parts of\n7) on the JVM today. In fact, there are a lot more\n\u003ca href=\"http://es6-features.org/\"\u003ecool ES6 fea¬≠tures\u003c/a\u003e not in¬≠cluded in the ex¬≠am¬≠ple such\nas con¬≠stants (\u003ccode\u003econst\u003c/code\u003e), the prop¬≠erty short¬≠hand or method prop¬≠er¬≠ties.\u003c/p\u003e\u003cp\u003eType¬≠Script is so much more than just ES6. It ac¬≠tu¬≠ally has a\nvery good sta¬≠tic type sys¬≠tem that al¬≠lows you to make compile-‚Äãtime type checks.\nThis is makes it much eas¬≠ier to write large Vert.x ap¬≠pli¬≠ca¬≠tions with many\nver¬≠ti¬≠cles. Per¬≠son¬≠ally I re¬≠ally like the sup¬≠port that I get from my IDE when\npro¬≠gram¬≠ming Type¬≠Script. Since vertx-‚Äãlang-typescript comes with type de¬≠f¬≠i¬≠n¬≠i¬≠tions\nfor the Vert.x JavaScript API I get auto-‚Äãcompletion and ac¬≠cess to the doc¬≠u¬≠men¬≠ta¬≠tion\nright in the ed¬≠i¬≠tor. I mostly use \u003ca href=\"http://www.sublimetext.com/\"\u003eSub¬≠lime\u003c/a\u003e by the\nway, but I have tested it suc¬≠cess¬≠fully with\n\u003ca href=\"https://code.visualstudio.com/\"\u003eVi¬≠sual Stu¬≠dio Code\u003c/a\u003e, \u003ca href=\"http://www.eclipse.org/\"\u003eEclipse\u003c/a\u003e\nand \u003ca href=\"https://atom.io/\"\u003eAtom\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eUn¬≠for¬≠tu¬≠nately, the only ES7 fea¬≠ture that you can use at the mo¬≠ment with\nvertx-‚Äãlang-typescript is the \u003cem\u003eex¬≠po¬≠nen¬≠ti¬≠a¬≠tion op¬≠er¬≠a¬≠tor\u003c/em\u003e. Type¬≠Script 1.7 also\nsup¬≠ports \u003cem\u003edec¬≠o¬≠ra¬≠tors\u003c/em\u003e but this fea¬≠ture is dis¬≠abled at the mo¬≠ment in\nvertx-‚Äãlang-typescript be¬≠cause it is ex¬≠per¬≠i¬≠men¬≠tal and sub¬≠ject to change. I‚Äôll\nkeep you up to date when new fea¬≠tures are in¬≠tro¬≠duced.\u003c/p\u003e\u003ch2 id=\"alternatives\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#alternatives\"\u003e\u003c/a\u003eAlternatives\u003c/h2\u003e\u003cp\u003eWe‚Äôve re¬≠cently \u003ca href=\"/blog/vert-x-es6-back-to-the-future/\"\u003epub¬≠lished a post\u003c/a\u003e\non how to use EC¬≠MAScript 6 with Vert.x here on this blog. We used \u003ca href=\"https://babeljs.io/\"\u003eBabel\u003c/a\u003e, a\ncom¬≠piler that trans¬≠lates ES6 to ES5.\u003c/p\u003e\u003cp\u003eAl¬≠though this ap¬≠proach works well it is a bit harder to set up and use than the\none pre¬≠sented here. First, you need to wrap your Vert.x ap¬≠pli¬≠ca¬≠tion in a NPM pack¬≠age.\nSec¬≠ond, in order to run your ap¬≠pli¬≠ca¬≠tion, you need to ex¬≠e¬≠cute two com¬≠mands.\nYou have to com¬≠pile it with \u003ccode\u003enpm run build\u003c/code\u003e and then then call \u003ccode\u003enpm start\u003c/code\u003e.\nWith vertx-‚Äãlang-typescript you only need one com¬≠mand. vertx-‚Äãlang-typescript\nalso al¬≠lows you to embed the Type¬≠Script ver¬≠ti¬≠cle in a larger Vert.x ap¬≠pli¬≠ca¬≠tion\nand also mix mul¬≠ti¬≠ple lan¬≠guages in one project. This is not pos¬≠si¬≠ble if you wrap\nevery¬≠thing in a NPM pack¬≠age.\u003c/p\u003e\u003cp\u003eFi¬≠nally, the ap¬≠proach based on Babel only sup¬≠ports EC¬≠MAScript 6 (2015), al¬≠though\nmore fea¬≠tures from ES7 will surely be in¬≠tro¬≠duced in Babel in the fu¬≠ture.\nType¬≠Script on the other hand gives you much more fea¬≠tures such as sta¬≠tic\ntyp¬≠ing that you will cer¬≠tainly find use¬≠ful for any larger project.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"typescript","tf":22},{"term":"us","tf":15},{"term":"es6","tf":12},{"term":"ecmascript","tf":11},{"term":"lang","tf":9},{"term":"featur","tf":8},{"term":"type","tf":7},{"term":"support","tf":5},{"term":"javascript","tf":5},{"term":"compil","tf":5},{"term":"verticl","tf":5},{"term":"follow","tf":4},{"term":"exampl","tf":4},{"term":"es7","tf":4},{"term":"new","tf":4},{"term":"will","tf":4},{"term":"paramet","tf":4},{"term":"applic","tf":4},{"term":"good","tf":3},{"term":"jvm","tf":3},{"term":"librari","tf":3},{"term":"part","tf":3},{"term":"execut","tf":3},{"term":"definit","tf":3},{"term":"api","tf":3}]},{"filename":"blog/2015-12-20-automatic-redeployment-in-eclipse-ide.mdx","date":"2015-12-20","slug":"automatic-redeployment-in-eclipse-ide","meta":{"title":"Automatic redeployment in Eclipse IDE","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Vert.x 3.1 has (re-)introduced the redeploy feature. This blog post explains how to use this feature in the Eclipse IDE. However, you can easily adapt the content to your IDE."},"readingTime":{"text":"3 min read","minutes":2.035,"time":122100.00000000001,"words":407},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Vert.x 3.1 has (re-)in\\xADtro\\xADduced the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADde\\xADploy\"), \" fea\\xADture. This blog post ex\\xADplains how to use this fea\\xADture in the Eclipse IDE. How\\xADever, you can eas\\xADily adapt the con\\xADtent to your IDE.\"), mdx(\"h2\", {\n    \"id\": \"how-does-redeploy-work\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#how-does-redeploy-work\"\n  })), \"How does redeploy work\"), mdx(\"p\", null, \"How is im\\xADple\\xADmented the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"redeploy\"), \" is not as you may ex\\xADpect. First, the re\\xADde\\xADploy does not rely on a build tool, but is in\\xADte\\xADgrated in vert.x. How\\xADever you can plug your build tools with the re\\xADde\\xADploy fea\\xADture. This fea\\xADture is of\\xADfered by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"io.vertx.core.Launcher\"), \" class. The re\\xADde\\xADploy\\xADment process is ac\\xADtu\\xADally very sim\\xADple:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the ap\\xADpli\\xADca\\xADtion is launched in \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"re\\xADde\\xADploy mode\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"it lis\\xADtens for file changes\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"when a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"match\\xADing\"), \" file is changed, it stops the ap\\xADpli\\xADca\\xADtion\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"it ex\\xADe\\xADcutes the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"on-redeploy\"), \" ac\\xADtions if any\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"it restarts the ap\\xADpli\\xADca\\xADtion\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"back to (2)\")), mdx(\"p\", null, \"Ini\\xADtially the ap\\xADpli\\xADca\\xADtion is launched in \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADde\\xADploy mode\"), \". The ap\\xADpli\\xADca\\xADtion is ac\\xADtu\\xADally launched in back\\xADground, in a sep\\xADa\\xADrated process. Vert.x lis\\xADtens for file changes. You give it a set of (Ant-\\u200Bstyle) pat\\xADterns and every time a match\\xADing file changes, Vert.x stops the whole ap\\xADpli\\xADca\\xADtion and restarts it. Op\\xADtion\\xADally you can con\\xADfig\\xADure a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"on-redeploy\"), \" ac\\xADtion to plug in your build tools.\"), mdx(\"p\", null, \"To in\\xADte\\xADgrate this process in Eclipse (or in your IDE), you just need to con\\xADfig\\xADure the set of lis\\xADtened files, and let the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Launcher\"), \" class starts and stops your ap\\xADpli\\xADca\\xADtion.\"), mdx(\"h2\", {\n    \"id\": \"redeploy-in-eclipse\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#redeploy-in-eclipse\"\n  })), \"Redeploy in Eclipse\"), mdx(\"p\", null, \"The fol\\xADlow\\xADing screen\\xADcast ex\\xADplains how you con\\xADfig\\xADure a vert.x ap\\xADpli\\xADca\\xADtion to be run in Eclipse and how to con\\xADfig\\xADure the re\\xADde\\xADploy:\"), mdx(\"div\", {\n    className: \"youtube-embed\"\n  }, mdx(\"iframe\", {\n    src: \"https://www.youtube.com/embed/iyZwAzEVX-o\",\n    frameBorder: \"0\",\n    allowFullScreen: true\n  })), mdx(\"p\", null, \"To sum\\xADma\\xADrize the last con\\xADfig\\xADu\\xADra\\xADtion:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"it\\u2019s a Java ap\\xADpli\\xADca\\xADtion con\\xADfig\\xADu\\xADra\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"it uses \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"io.vertx.core.Launcher\"), \" as main class\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Pro\\xADgram ar\\xADgu\\xADments\"), \" (\", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Ar\\xADgu\\xADments\"), \" tab), write: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"run org.acme.verticle.MyMainVerticle --redeploy=\\\"src/**/*.java\\\" --launcher-class=io.vertx.core.Launcher\"))), mdx(\"h2\", {\n    \"id\": \"redeploy-with-your-own-main-class\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#redeploy-with-your-own-main-class\"\n  })), \"Redeploy with your own Main class\"), mdx(\"p\", null, \"Let\\u2019s now imag\\xADine that you have your own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Main\"), \" class, start\\xADing your ap\\xADpli\\xADca\\xADtion. For in\\xADstance, it can be some\\xADthing like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" org.acme.vertx;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.core.Vertx;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"Main\"), \" \"), \"{\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"main\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(String[] args)\"), \" \"), \"{\\n        Vertx vertx = Vertx.vertx();\\n        vertx.deployVerticle(MyMainVerticle.class.getName());\\n    }\\n\\n}\\n\")), mdx(\"p\", null, \"The re\\xADde\\xADploy fea\\xADture from vert.x lets you use your own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Main\"), \" class:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Cre\\xADate an\\xADother \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Run\"), \" con\\xADfig\\xADu\\xADra\\xADtion\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Set the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Main-Class\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"io.vertx.core.Launcher\"), \" (yes, the one from vert.x not yours)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In the ap\\xADpli\\xADca\\xADtion pa\\xADra\\xADme\\xADter add: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"run --redeploy=\\\"src/**/*.java\\\" --launcher-class=org.acme.vertx.Main\"))), mdx(\"p\", null, \"With this con\\xADfig\\xADu\\xADra\\xADtion, the ap\\xADpli\\xADca\\xADtion is launched in back\\xADground using your own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Main\"), \" class, and will restart the ap\\xADpli\\xADca\\xADtion every time you change your source code (you can even change the source code of your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Main\"), \" class).\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eVert.x 3.1 has (re-)in¬≠tro¬≠duced the \u003cem\u003ere¬≠de¬≠ploy\u003c/em\u003e fea¬≠ture. This blog post ex¬≠plains how to use this fea¬≠ture in the Eclipse IDE. How¬≠ever, you can eas¬≠ily adapt the con¬≠tent to your IDE.\u003c/p\u003e\u003ch2 id=\"how-does-redeploy-work\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#how-does-redeploy-work\"\u003e\u003c/a\u003eHow does redeploy work\u003c/h2\u003e\u003cp\u003eHow is im¬≠ple¬≠mented the \u003ccode\u003eredeploy\u003c/code\u003e is not as you may ex¬≠pect. First, the re¬≠de¬≠ploy does not rely on a build tool, but is in¬≠te¬≠grated in vert.x. How¬≠ever you can plug your build tools with the re¬≠de¬≠ploy fea¬≠ture. This fea¬≠ture is of¬≠fered by the \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e class. The re¬≠de¬≠ploy¬≠ment process is ac¬≠tu¬≠ally very sim¬≠ple:\u003c/p\u003e\u003col\u003e\u003cli\u003ethe ap¬≠pli¬≠ca¬≠tion is launched in \u003cem\u003ere¬≠de¬≠ploy mode\u003c/em\u003e.\u003c/li\u003e\u003cli\u003eit lis¬≠tens for file changes\u003c/li\u003e\u003cli\u003ewhen a \u003cem\u003ematch¬≠ing\u003c/em\u003e file is changed, it stops the ap¬≠pli¬≠ca¬≠tion\u003c/li\u003e\u003cli\u003eit ex¬≠e¬≠cutes the \u003ccode\u003eon-redeploy\u003c/code\u003e ac¬≠tions if any\u003c/li\u003e\u003cli\u003eit restarts the ap¬≠pli¬≠ca¬≠tion\u003c/li\u003e\u003cli\u003eback to (2)\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eIni¬≠tially the ap¬≠pli¬≠ca¬≠tion is launched in \u003cem\u003ere¬≠de¬≠ploy mode\u003c/em\u003e. The ap¬≠pli¬≠ca¬≠tion is ac¬≠tu¬≠ally launched in back¬≠ground, in a sep¬≠a¬≠rated process. Vert.x lis¬≠tens for file changes. You give it a set of (Ant-‚Äãstyle) pat¬≠terns and every time a match¬≠ing file changes, Vert.x stops the whole ap¬≠pli¬≠ca¬≠tion and restarts it. Op¬≠tion¬≠ally you can con¬≠fig¬≠ure a \u003ccode\u003eon-redeploy\u003c/code\u003e ac¬≠tion to plug in your build tools.\u003c/p\u003e\u003cp\u003eTo in¬≠te¬≠grate this process in Eclipse (or in your IDE), you just need to con¬≠fig¬≠ure the set of lis¬≠tened files, and let the \u003ccode\u003eLauncher\u003c/code\u003e class starts and stops your ap¬≠pli¬≠ca¬≠tion.\u003c/p\u003e\u003ch2 id=\"redeploy-in-eclipse\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#redeploy-in-eclipse\"\u003e\u003c/a\u003eRedeploy in Eclipse\u003c/h2\u003e\u003cp\u003eThe fol¬≠low¬≠ing screen¬≠cast ex¬≠plains how you con¬≠fig¬≠ure a vert.x ap¬≠pli¬≠ca¬≠tion to be run in Eclipse and how to con¬≠fig¬≠ure the re¬≠de¬≠ploy:\u003c/p\u003e\u003cdiv class=\"youtube-embed\"\u003e\u003ciframe src=\"https://www.youtube.com/embed/iyZwAzEVX-o\" frameBorder=\"0\" allowfullscreen=\"\"\u003e\u003c/iframe\u003e\u003c/div\u003e\u003cp\u003eTo sum¬≠ma¬≠rize the last con¬≠fig¬≠u¬≠ra¬≠tion:\u003c/p\u003e\u003cul\u003e\u003cli\u003eit‚Äôs a Java ap¬≠pli¬≠ca¬≠tion con¬≠fig¬≠u¬≠ra¬≠tion\u003c/li\u003e\u003cli\u003eit uses \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e as main class\u003c/li\u003e\u003cli\u003eIn the \u003cem\u003ePro¬≠gram ar¬≠gu¬≠ments\u003c/em\u003e (\u003cem\u003eAr¬≠gu¬≠ments\u003c/em\u003e tab), write: \u003ccode\u003erun org.acme.verticle.MyMainVerticle --redeploy=\u0026quot;src/**/*.java\u0026quot; --launcher-class=io.vertx.core.Launcher\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"redeploy-with-your-own-main-class\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#redeploy-with-your-own-main-class\"\u003e\u003c/a\u003eRedeploy with your own Main class\u003c/h2\u003e\u003cp\u003eLet‚Äôs now imag¬≠ine that you have your own \u003ccode\u003eMain\u003c/code\u003e class, start¬≠ing your ap¬≠pli¬≠ca¬≠tion. For in¬≠stance, it can be some¬≠thing like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e org.acme.vertx;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e io.vertx.core.Vertx;\n\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMain\u003c/span\u003e \u003c/span\u003e{\n\n    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String[] args)\u003c/span\u003e \u003c/span\u003e{\n        Vertx vertx = Vertx.vertx();\n        vertx.deployVerticle(MyMainVerticle.class.getName());\n    }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe re¬≠de¬≠ploy fea¬≠ture from vert.x lets you use your own \u003ccode\u003eMain\u003c/code\u003e class:\u003c/p\u003e\u003col\u003e\u003cli\u003eCre¬≠ate an¬≠other \u003ccode\u003eRun\u003c/code\u003e con¬≠fig¬≠u¬≠ra¬≠tion\u003c/li\u003e\u003cli\u003eSet the \u003ccode\u003eMain-Class\u003c/code\u003e to \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e (yes, the one from vert.x not yours)\u003c/li\u003e\u003cli\u003eIn the ap¬≠pli¬≠ca¬≠tion pa¬≠ra¬≠me¬≠ter add: \u003ccode\u003erun --redeploy=\u0026quot;src/**/*.java\u0026quot; --launcher-class=org.acme.vertx.Main\u003c/code\u003e\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eWith this con¬≠fig¬≠u¬≠ra¬≠tion, the ap¬≠pli¬≠ca¬≠tion is launched in back¬≠ground using your own \u003ccode\u003eMain\u003c/code\u003e class, and will restart the ap¬≠pli¬≠ca¬≠tion every time you change your source code (you can even change the source code of your \u003ccode\u003eMain\u003c/code\u003e class).\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"applic","tf":13},{"term":"redeploi","tf":10},{"term":"class","tf":8},{"term":"configur","tf":8},{"term":"chang","tf":6},{"term":"featur","tf":5},{"term":"file","tf":5},{"term":"us","tf":4},{"term":"launch","tf":4},{"term":"id","tf":3},{"term":"not","tf":3},{"term":"build","tf":3},{"term":"tool","tf":3},{"term":"process","tf":3},{"term":"listen","tf":3},{"term":"stop","tf":3},{"term":"restart","tf":3},{"term":"set","tf":3},{"term":"let","tf":3},{"term":"explain","tf":2},{"term":"howev","tf":2},{"term":"integr","tf":2},{"term":"plug","tf":2},{"term":"actual","tf":2},{"term":"mode","tf":2}]},{"filename":"blog/2015-12-15-vert-x-3-2-0-is-released.mdx","date":"2015-12-15","slug":"vert-x-3-2-0-is-released","meta":{"title":"Vert.x 3.2.0 is released!","category":"releases","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"We are pleased to announce the release of Vert.x 3.2.0!"},"readingTime":{"text":"2 min read","minutes":1.075,"time":64500,"words":215},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are pleased to an\\xADnounce the re\\xADlease of Vert.x 3.2.0!\"), mdx(\"p\", null, \"Some of the high\\xADlights of this re\\xADlease in\\xADclude:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-core/ceylon\"\n  }), \"vertx-\\u200Blang-ceylon\"), \": the sup\\xADport of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://ceylon-lang.org/\"\n  }), \"Cey\\xADlon lan\\xADguage\"), \"!\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-tcp-eventbus-bridge/java/\"\n  }), \"vertx-\\u200Btcp-bridge\"), \": an event bus bridge that lets any TCP-\\u200Bcapable ap\\xADpli\\xADca\\xADtion to in\\xADter\\xADact with vert.x ap\\xADpli\\xADca\\xADtions using the event bus.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-hawkular-metrics/java/\"\n  }), \"vertx-\\u200Bhawkular-metric\"), \": an im\\xADple\\xADmen\\xADta\\xADtion of the vert.x met\\xADrics for \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.hawkular.org/\"\n  }), \"Hawku\\xADlar\"), \". In ad\\xADdi\\xADtion, it lets you re\\xADport your own met\\xADrics to hawku\\xADlar.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"A new \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-stack-manager/stack-manager/\"\n  }), \"stack man\\xADager\"), \" to con\\xADfig\\xADure the vert.x dis\\xADtri\\xADb\\xADu\\xADtion with the con\\xADtent you want.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-shell/java/\"\n  }), \"vertx-\\u200Bshell\"), \" is now an of\\xADfi\\xADcial com\\xADpo\\xADnent.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-jgroups/java/\"\n  }), \"vertx-\\u200Bjgroups\"), \": an al\\xADter\\xADna\\xADtive im\\xADple\\xADmen\\xADta\\xADtion of the vert.x clus\\xADter man\\xADager using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://jgroups.org/\"\n  }), \"JGroups\"), \". This com\\xADpo\\xADnent is a tech\\xADni\\xADcal pre\\xADview.\"))), mdx(\"p\", null, \"The re\\xADlease also con\\xADtains many bug fixes and a ton of im\\xADprove\\xADments. Full re\\xADlease notes can be found here:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.2.0---Release-Notes\"\n  }), \"https://github.com/vert-\\u200Bx3/wiki/wiki/3.2.0-\\u200B\\u2014Release-Notes\")), mdx(\"p\", null, \"Break\\xADing changes are here:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.2.0-Breaking-changes\"\n  }), \"https://github.com/vert-\\u200Bx3/wiki/wiki/3.2.0-\\u200BBreaking-changes\")), mdx(\"p\", null, \"The event bus client using the SockJS bridge are avail\\xADable from NPM, Bower and as a We\\xADb\\xADJar:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-eventbus-client\"\n  }), \"https://www.npmjs.com/pack\\xADage/vertx3-\\u200Beventbus-client\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/vertx-bus-bower\"\n  }), \"https://github.com/vert-\\u200Bx3/vertx-\\u200Bbus-bower\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://www.webjars.org/\"\n  }), \"http://www.we\\xADb\\xADjars.org/\"))), mdx(\"p\", null, \"Dock\\xADers im\\xADages are also avail\\xADable on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/u/vertx/\"\n  }), \"Docker Hub\"), \"\\nThe vert.x dis\\xADtri\\xADb\\xADu\\xADtion is also avail\\xADable from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sdkman.io/index.html\"\n  }), \"SD\\xADKMan\"), \".\"), mdx(\"p\", null, \"Many thanks to all the com\\xADmit\\xADters and com\\xADmu\\xADnity whose con\\xADtri\\xADbu\\xADtions made this pos\\xADsi\\xADble.\"), mdx(\"p\", null, \"Next stop is Vert.x 3.3.0 which we hope to have out in March 2016.\"), mdx(\"p\", null, \"The ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.2.0%22\"\n  }), \"Maven Cen\\xADtral\"), \"\\nand you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bintray.com/vertx/downloads/distribution/3.2.0/view\"\n  }), \"Bin\\xADtray\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are pleased to an¬≠nounce the re¬≠lease of Vert.x 3.2.0!\u003c/p\u003e\u003cp\u003eSome of the high¬≠lights of this re¬≠lease in¬≠clude:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-core/ceylon\"\u003evertx-‚Äãlang-ceylon\u003c/a\u003e: the sup¬≠port of the \u003ca href=\"http://ceylon-lang.org/\"\u003eCey¬≠lon lan¬≠guage\u003c/a\u003e!\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-tcp-eventbus-bridge/java/\"\u003evertx-‚Äãtcp-bridge\u003c/a\u003e: an event bus bridge that lets any TCP-‚Äãcapable ap¬≠pli¬≠ca¬≠tion to in¬≠ter¬≠act with vert.x ap¬≠pli¬≠ca¬≠tions using the event bus.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-hawkular-metrics/java/\"\u003evertx-‚Äãhawkular-metric\u003c/a\u003e: an im¬≠ple¬≠men¬≠ta¬≠tion of the vert.x met¬≠rics for \u003ca href=\"http://www.hawkular.org/\"\u003eHawku¬≠lar\u003c/a\u003e. In ad¬≠di¬≠tion, it lets you re¬≠port your own met¬≠rics to hawku¬≠lar.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003eA new \u003ca href=\"http://vertx.io/docs/vertx-stack-manager/stack-manager/\"\u003estack man¬≠ager\u003c/a\u003e to con¬≠fig¬≠ure the vert.x dis¬≠tri¬≠b¬≠u¬≠tion with the con¬≠tent you want.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-shell/java/\"\u003evertx-‚Äãshell\u003c/a\u003e is now an of¬≠fi¬≠cial com¬≠po¬≠nent.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-jgroups/java/\"\u003evertx-‚Äãjgroups\u003c/a\u003e: an al¬≠ter¬≠na¬≠tive im¬≠ple¬≠men¬≠ta¬≠tion of the vert.x clus¬≠ter man¬≠ager using \u003ca href=\"http://jgroups.org/\"\u003eJGroups\u003c/a\u003e. This com¬≠po¬≠nent is a tech¬≠ni¬≠cal pre¬≠view.\u003c/p\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe re¬≠lease also con¬≠tains many bug fixes and a ton of im¬≠prove¬≠ments. Full re¬≠lease notes can be found here:\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.2.0---Release-Notes\"\u003ehttps://github.com/vert-‚Äãx3/wiki/wiki/3.2.0-‚Äã‚ÄîRelease-Notes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eBreak¬≠ing changes are here:\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.2.0-Breaking-changes\"\u003ehttps://github.com/vert-‚Äãx3/wiki/wiki/3.2.0-‚ÄãBreaking-changes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThe event bus client using the SockJS bridge are avail¬≠able from NPM, Bower and as a We¬≠b¬≠Jar:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.npmjs.com/package/vertx3-eventbus-client\"\u003ehttps://www.npmjs.com/pack¬≠age/vertx3-‚Äãeventbus-client\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/vert-x3/vertx-bus-bower\"\u003ehttps://github.com/vert-‚Äãx3/vertx-‚Äãbus-bower\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://www.webjars.org/\"\u003ehttp://www.we¬≠b¬≠jars.org/\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eDock¬≠ers im¬≠ages are also avail¬≠able on the \u003ca href=\"https://hub.docker.com/u/vertx/\"\u003eDocker Hub\u003c/a\u003e\nThe vert.x dis¬≠tri¬≠b¬≠u¬≠tion is also avail¬≠able from \u003ca href=\"http://sdkman.io/index.html\"\u003eSD¬≠KMan\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eMany thanks to all the com¬≠mit¬≠ters and com¬≠mu¬≠nity whose con¬≠tri¬≠bu¬≠tions made this pos¬≠si¬≠ble.\u003c/p\u003e\u003cp\u003eNext stop is Vert.x 3.3.0 which we hope to have out in March 2016.\u003c/p\u003e\u003cp\u003eThe ar¬≠ti¬≠facts have been de¬≠ployed to \u003ca href=\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.2.0%22\"\u003eMaven Cen¬≠tral\u003c/a\u003e\nand you can get the dis¬≠tri¬≠b¬≠u¬≠tion on \u003ca href=\"https://bintray.com/vertx/downloads/distribution/3.2.0/view\"\u003eBin¬≠tray\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"releas","tf":5},{"term":"http","tf":5},{"term":"bu","tf":4},{"term":"com","tf":4},{"term":"wiki","tf":4},{"term":"bridg","tf":3},{"term":"event","tf":3},{"term":"us","tf":3},{"term":"hawkular","tf":3},{"term":"metric","tf":3},{"term":"distribut","tf":3},{"term":"github","tf":3},{"term":"x3","tf":3},{"term":"avail","tf":3},{"term":"ceylon","tf":2},{"term":"tcp","tf":2},{"term":"let","tf":2},{"term":"applic","tf":2},{"term":"implement","tf":2},{"term":"manag","tf":2},{"term":"compon","tf":2},{"term":"jgroup","tf":2},{"term":"note","tf":2},{"term":"break","tf":2},{"term":"chang","tf":2}]},{"filename":"blog/2015-11-30-combine-vert-x-and-mongo-to-build-a-giant.mdx","date":"2015-11-30","slug":"combine-vert-x-and-mongo-to-build-a-giant","meta":{"title":"Combine vert.x and mongo to build a giant","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This blog post is part of the introduction to Vert.x series. We are now going to replace this JDBC client by the vertx-mongo-client, and thus connect to a Mongo database."},"readingTime":{"text":"10 min read","minutes":9.07,"time":544200,"words":1814},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This blog post is part of the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"in\\xADtro\\xADduc\\xADtion to vert.x\"), \" se\\xADries. Last time, we have seen how we can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-jdbc-client\"), \" to con\\xADnect to a data\\xADbase using a JDBC dri\\xADver. In this post, we are going to re\\xADplace this JDBC client by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-mongo-client\"), \", and thus con\\xADnect to a Mongo data\\xADbase.\"), mdx(\"p\", null, \"You don\\u2019t un\\xADder\\xADstand the title, check the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.mongodb.org\"\n  }), \"mon\\xADgoDB\"), \" web\\xADsite.\"), mdx(\"p\", null, \"But be\\xADfore going fur\\xADther, let\\u2019s recap.\"), mdx(\"h2\", {\n    \"id\": \"previously-in--introduction-to-vertx\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#previously-in--introduction-to-vertx\"\n  })), \"Previously in  \\u2018introduction to vert.x\\u2019\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/my-first-vert-x-3-application/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"first post\")), \" has de\\xADscribed how to build a vert.x ap\\xADpli\\xADca\\xADtion with Maven and ex\\xADe\\xADcute unit tests.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/vert-x-application-configuration/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"sec\\xADond post\")), \" has de\\xADscribed how this ap\\xADpli\\xADca\\xADtion can be\\xADcome con\\xADfig\\xADurable.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/some-rest-with-vert-x/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"third post\")), \" has in\\xADtro\\xADduced \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/\"\n  }), \"vertx-\\u200Bweb\"), \", and a small col\\xADlec\\xADtion man\\xADage\\xADment ap\\xADpli\\xADca\\xADtion has been de\\xADvel\\xADoped. This ap\\xADpli\\xADca\\xADtion of\\xADfers a REST API used by a HTML/JavaScript fron\\xADtend.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/unit-and-integration-tests/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"fourth post\")), \" has pre\\xADsented how you can run in\\xADte\\xADgra\\xADtion tests to en\\xADsure the be\\xADhav\\xADior of your ap\\xADpli\\xADca\\xADtion.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/using-the-asynchronous-sql-client/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"last post\")), \" has pre\\xADsented how you can in\\xADter\\xADact with a JDBC data\\xADbase using the vertx-\\u200Bjdbc-client.\")), mdx(\"p\", null, \"This post shows an\\xADother client that lets you use Mon\\xADgoDB in a vert.x ap\\xADpli\\xADca\\xADtion. This client pro\\xADvides an vert.x API to ac\\xADcess asyn\\xADchro\\xADnously to the Mongo data\\xADbase. We won\\u2019t com\\xADpare whether or not JDBC is su\\xADpe\\xADrior to Mongo, they have both pros and cons, and you should use the one that meet your re\\xADquire\\xADments. Vert.x lets you choose, that\\u2019s the point.\"), mdx(\"p\", null, \"The vertx-\\u200Bmongo-client doc\\xADu\\xADmen\\xADta\\xADtion is avail\\xADable \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-mongo-client/java/\"\n  }), \"here\"), \".\"), mdx(\"p\", null, \"The code de\\xADvel\\xADoped in this blog post is avail\\xADable in the branch \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/tree/post-6\"\n  }), \"post-6\"), \". Our start\\xADing point is the code from the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/tree/post-5\"\n  }), \"post-5 branch\"), \".\"), mdx(\"h2\", {\n    \"id\": \"asynchronous-data-access\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#asynchronous-data-access\"\n  })), \"Asynchronous data access\"), mdx(\"p\", null, \"One of the vert.x char\\xADac\\xADter\\xADis\\xADtics is being asyn\\xADchro\\xADnous. With an asyn\\xADchro\\xADnous API, you don\\u2019t wait for a re\\xADsult, but you are no\\xADti\\xADfied when this re\\xADsult is ready. Thanks to vert.x, this no\\xADti\\xADfi\\xADca\\xADtion hap\\xADpens in the same thread (un\\xADder\\xADstand event loop) as the ini\\xADtial re\\xADquest:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/intro-series/async-data.png\",\n    \"alt\": \"Asynchronous data access\"\n  }))), mdx(\"p\", null, \"Your code (on the left) is going to in\\xADvoke the mongo client and pass a call\\xADback that will be in\\xADvoked when the re\\xADsult is avail\\xADable. The in\\xADvo\\xADca\\xADtion to the mongo client is non block\\xADing and re\\xADturns im\\xADme\\xADdi\\xADately. The client is deal\\xADing with the mongo data\\xADbase and when the re\\xADsult has been com\\xADputed / re\\xADtrieved, it in\\xADvokes the call\\xADback in the same event loop as the re\\xADquest.\"), mdx(\"p\", null, \"This model is par\\xADtic\\xADu\\xADlarly pow\\xADer\\xADful as it avoids the syn\\xADchro\\xADniza\\xADtion pit\\xADfalls. In\\xADdeed, your code is only called by a sin\\xADgle thread, no need to syn\\xADchro\\xADnize any\\xADthing.\"), mdx(\"h2\", {\n    \"id\": \"as-with-every-maven-project\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#as-with-every-maven-project\"\n  })), \"As with every Maven project\\u2026\"), mdx(\"p\", null, \"\\u2026 we need to up\\xADdate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file first.\"), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file, re\\xADplace the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-jdbc-client\"), \" by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-mongo-client\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-mongo-client\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.1.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"Un\\xADlike JDBC where we were in\\xADstan\\xADti\\xADat\\xADing a data\\xADbase on the fly, here we need to ex\\xADplic\\xADitly starts a Mon\\xADgoDB server. In order to launch a Mongo server in our test, we are going to add an\\xADother de\\xADpen\\xADdency:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"de.flapdoodle.embed\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"de.flapdoodle.embed.mongo\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.50.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"This de\\xADpen\\xADdency will be used in our unit tests, as it lets us start a mongo server pro\\xADgram\\xADmat\\xADi\\xADcally. For our in\\xADte\\xADgra\\xADtion tests, we are going to use a Maven plug\\xADin start\\xADing and stop\\xADping the mongo server be\\xADfore and after our in\\xADte\\xADgra\\xADtion tests. Add this plug\\xADin to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003cplugins/\u003e\"), \" sec\\xADtion of your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"com.github.joelittlejohn.embedmongo\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"embedmongo-maven-plugin\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"0.2.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"start\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"start\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"port\"), \"\u003e\"), \"37017\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"port\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"stop\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"stop\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"No\\xADtice the port we use here (37017), we will use this port later.\"), mdx(\"h2\", {\n    \"id\": \"enough-xml-for-today\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#enough-xml-for-today\"\n  })), \"Enough XML for today\"), mdx(\"p\", null, \"Now that we have up\\xADdated our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file, it\\u2019s time to change our ver\\xADti\\xADcle. The first thing to do is to re\\xADplace the jdbc client by the mongo client:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"mongo = MongoClient.createShared(vertx, config());\\n\")), mdx(\"p\", null, \"This client is con\\xADfig\\xADured with the con\\xADfig\\xADu\\xADra\\xADtion given to the ver\\xADti\\xADcle (more on this below).\"), mdx(\"p\", null, \"Once done, we need to change how we start the ap\\xADpli\\xADca\\xADtion. With the mongo client, no need to ac\\xADquire a con\\xADnec\\xADtion, it han\\xADdles this in\\xADter\\xADnally. So our startup se\\xADquence is a bit more sim\\xADple:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"createSomeData(\\n    (nothing) -\u003e startWebApp(\\n        (http) -\u003e completeStartup(http, fut)\\n    ), fut);\\n\")), mdx(\"p\", null, \"As in the pre\\xADvi\\xADous post, we need to in\\xADsert some pre\\xADde\\xADfined data if the data\\xADbase is empty:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createSomeData\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Handler\u003cAsyncResult\u003cVoid\u003e\u003e next, Future\u003cVoid\u003e fut)\"), \" \"), \"{\\n  Whisky bowmore = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Bowmore 15 Years Laimrig\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Scotland, Islay\\\"\"), \");\\n  Whisky talisker = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Talisker 57\\xB0 North\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Scotland, Island\\\"\"), \");\\n  System.out.println(bowmore.toJson());\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Do we have data in the collection ?\"), \"\\n  mongo.count(COLLECTION, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject(), count -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (count.succeeded()) {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (count.result() == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \") {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// no whiskies, insert data\"), \"\\n        mongo.insert(COLLECTION, bowmore.toJson(), ar -\u003e {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.failed()) {\\n            fut.fail(ar.cause());\\n          } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            mongo.insert(COLLECTION, talisker.toJson(), ar2 -\u003e {\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar2.failed()) {\\n                fut.failed();\\n              } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                next.handle(Future.\u003cVoid\u003esucceededFuture());\\n              }\\n            });\\n          }\\n        });\\n      } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n        next.handle(Future.\u003cVoid\u003esucceededFuture());\\n      }\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// report the error\"), \"\\n      fut.fail(count.cause());\\n    }\\n  });\\n}\\n\")), mdx(\"p\", null, \"To de\\xADtect whether or not the data\\xADbase al\\xADready con\\xADtains some data, we re\\xADtrieve the num\\xADber of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"doc\\xADu\\xADments\"), \" from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"whiskies\"), \" col\\xADlec\\xADtion. This is done with : \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongo.count(COLLECTION, new JsonObject(), count -\u003e {})\"), \". The sec\\xADond pa\\xADra\\xADme\\xADter is the query. In our case, we want to count all doc\\xADu\\xADments. This is done using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"new JsonObject()\"), \" that would cre\\xADate a query ac\\xADcept\\xADing all doc\\xADu\\xADments from the col\\xADlec\\xADtion (it\\u2019s equiv\\xADa\\xADlent to a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SELECT * FROM ...\"), \").\"), mdx(\"p\", null, \"Also no\\xADtice the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insert\"), \" calls. Doc\\xADu\\xADments are passed as JSON ob\\xADject, so to in\\xADsert an ob\\xADject, just se\\xADri\\xADal\\xADize it to JSON and use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongo.insert(COLLECTION, json, completion handler)\"), \".\"), mdx(\"h2\", {\n    \"id\": \"mongo-ize-the-rest-handlers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#mongo-ize-the-rest-handlers\"\n  })), \"Mongo-ize the REST handlers\"), mdx(\"p\", null, \"Now that the ap\\xADpli\\xADca\\xADtion boot se\\xADquence has been mi\\xADgrated to mongo, it\\u2019s time to up\\xADdate the code han\\xADdling the REST re\\xADquests.\"), mdx(\"p\", null, \"Let\\u2019s start by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getAll\"), \" method that re\\xADturns all stored prod\\xADucts. To im\\xADple\\xADment this, we use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"find\"), \" method. As we saw for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"count\"), \" method, we pass an empty json ob\\xADject to de\\xADscribe a query ac\\xADcept\\xADing all doc\\xADu\\xADments:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getAll\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext routingContext)\"), \" \"), \"{\\n  mongo.find(COLLECTION, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject(), results -\u003e {\\n    List\u003cJsonObject\u003e objects = results.result();\\n    List\u003cWhisky\u003e whiskies = objects.stream().map(Whisky::\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \").collect(Collectors.toList());\\n    routingContext.response()\\n        .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json; charset=utf-8\\\"\"), \")\\n        .end(Json.encodePrettily(whiskies));\\n  });\\n}\\n\")), mdx(\"p\", null, \"The query re\\xADsults are passed as a list of JSON ob\\xADjects. From this list we can cre\\xADate our prod\\xADuct in\\xADstances, and fill the HTTP re\\xADsponse with this set.\"), mdx(\"p\", null, \"To delete a spe\\xADcific doc\\xADu\\xADment we need to se\\xADlect the doc\\xADu\\xADment using its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"deleteOne\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext routingContext)\"), \" \"), \"{\\n  String id = routingContext.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \");\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (id == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n    routingContext.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \").end();\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    mongo.removeOne(COLLECTION, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"_id\\\"\"), \", id),\\n        ar -\u003e routingContext.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"204\"), \").end());\\n  }\\n}\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"new JsonObject().put(\\\"_id\\\", id)\"), \" de\\xADscribes a query se\\xADlect\\xADing a sin\\xADgle doc\\xADu\\xADment (se\\xADlected by its unique \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \", so it\\u2019s the equiv\\xADa\\xADlent to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SELECT * WHERE id=...\"), \"). No\\xADtice the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"_id\"), \" which is a mongo trick to se\\xADlect a doc\\xADu\\xADment by id.\"), mdx(\"p\", null, \"Up\\xADdat\\xADing a doc\\xADu\\xADment is a less triv\\xADial:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"updateOne\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext routingContext)\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" String id = routingContext.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \");\\n  JsonObject json = routingContext.getBodyAsJson();\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (id == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \" || json == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n    routingContext.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \").end();\\n  } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n    mongo.update(COLLECTION,\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"_id\\\"\"), \", id), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Select a unique document\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// The update syntax: {$set, the json object containing the fields to update}\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n            .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"$set\\\"\"), \", json),\\n        v -\u003e {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (v.failed()) {\\n            routingContext.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"404\"), \").end();\\n          } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            routingContext.response()\\n                .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json; charset=utf-8\\\"\"), \")\\n                .end(Json.encodePrettily(\\n                  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(id, json.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \"),\\n                    json.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"origin\\\"\"), \"))));\\n          }\\n        });\\n  }\\n}\\n\")), mdx(\"p\", null, \"As we can see, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"update\"), \" method takes two JSON ob\\xADjects as pa\\xADra\\xADme\\xADter:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The first one de\\xADnotes the query (here we se\\xADlect a sin\\xADgle doc\\xADu\\xADment using its id).\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The sec\\xADond ob\\xADject ex\\xADpresses the change to apply to the se\\xADlected doc\\xADu\\xADment. It uses a mongo syn\\xADtax. In our case, we up\\xADdate the doc\\xADu\\xADment using the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"$set\"), \" op\\xADer\\xADa\\xADtor.\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"In this code we up\\xADdate the doc\\xADu\\xADment and re\\xADplace only a set of fields. You can also re\\xADplace the whole doc\\xADu\\xADment using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongo.replace(...)\"), \".\")), mdx(\"p\", null, \"I def\\xADi\\xADnitely rec\\xADom\\xADmend to have a look to the Mon\\xADgoDB doc\\xADu\\xADmen\\xADta\\xADtion, es\\xADpe\\xADcially:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://docs.mongodb.org/manual/tutorial/query-documents/\",\n    \"title\": \"MongoDB Query Documentation\"\n  }), \"Query syn\\xADtax doc\\xADu\\xADmen\\xADta\\xADtion\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://docs.mongodb.org/manual/tutorial/modify-documents/\",\n    \"title\": \"MongoDB Update Documentation\"\n  }), \"Up\\xADdate syn\\xADtax doc\\xADu\\xADmen\\xADta\\xADtion\"))), mdx(\"h2\", {\n    \"id\": \"time-for-configuration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#time-for-configuration\"\n  })), \"Time for configuration\"), mdx(\"p\", null, \"Well, the code is mi\\xADgrated, but we still need to up\\xADdate the con\\xADfig\\xADu\\xADra\\xADtion. With JDBC we passed the JDBC url and the dri\\xADver class in the con\\xADfig\\xADu\\xADra\\xADtion. With mongo, we need to con\\xADfig\\xADure the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"connection_string\"), \" - the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mongo://\"), \" url on which the ap\\xADpli\\xADca\\xADtion is con\\xADnected, and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"db_name\"), \" - a name for the data source.\"), mdx(\"p\", null, \"Let\\u2019s start by the unit test. Edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MyFirstVerticleTest\"), \" file and add the fol\\xADlow\\xADing code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" MongodProcess MONGO;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" MONGO_PORT = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"12345\"), \";\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@BeforeClass\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"initialize\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"throws\"), \" IOException \"), \"{\\n  MongodStarter starter = MongodStarter.getDefaultInstance();\\n  IMongodConfig mongodConfig = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" MongodConfigBuilder()\\n      .version(Version.Main.PRODUCTION)\\n      .net(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Net(MONGO_PORT, Network.localhostIsIPv6()))\\n      .build();\\n  MongodExecutable mongodExecutable =\\n      starter.prepare(mongodConfig);\\n  MONGO = mongodExecutable.start();\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@AfterClass\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"shutdown\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{  MONGO.stop(); }\\n\")), mdx(\"p\", null, \"Be\\xADfore our tests, we start (pro\\xADgram\\xADmat\\xADi\\xADcally) a mongo data\\xADbase on the port 12345. When all our tests have been ex\\xADe\\xADcuted, we shut\\xADdown the data\\xADbase.\"), mdx(\"p\", null, \"So now that the mongo server is man\\xADaged, we need to to give the right con\\xADfig\\xADu\\xADra\\xADtion to our ver\\xADti\\xADcle. Up\\xADdate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DeploymentOption\"), \" in\\xADstance with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"DeploymentOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" DeploymentOptions()\\n    .setConfig(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n        .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \", port)\\n        .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"db_name\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"whiskies-test\\\"\"), \")\\n        .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"connection_string\\\"\"), \",\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"mongodb://localhost:\\\"\"), \" + MONGO_PORT)\\n);\\n\")), mdx(\"p\", null, \"That\\u2019s all for the unit tests.\"), mdx(\"p\", null, \"For the integration-\\u200Btest, we are using an ex\\xADter\\xADnal\\xADized json file. Edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/test/resources/my-it-config.json\"), \" with the fol\\xADlow\\xADing con\\xADtent:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"http.port\\\"\"), \": ${http.port},\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"db_name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"whiskies-it\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"connection_string\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"mongodb://localhost:37017\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"No\\xADtice the port we are using for the mongo server. This port was con\\xADfig\\xADured in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file.\"), mdx(\"p\", null, \"Last but not least, we still have a con\\xADfig\\xADu\\xADra\\xADtion file to edit: the con\\xADfig\\xADu\\xADra\\xADtion you use to launch the ap\\xADpli\\xADca\\xADtion in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"production\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"http.port\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8082\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"db_name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"whiskies\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"connection_string\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"mongodb://localhost:27017\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"Here you would need to edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost:27017\"), \" with the right url for your mongo server.\"), mdx(Alert, {\n    info: true,\n    title: \"Some changes in the integration tests\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Be\\xADcause mongo doc\\xADu\\xADment id are String and not in\\xADte\\xADger, we have to slightly change doc\\xADu\\xADment se\\xADlec\\xADtion in the in\\xADte\\xADgra\\xADtion test.\")), mdx(\"h2\", {\n    \"id\": \"time-for-a-run\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#time-for-a-run\"\n  })), \"Time for a run\"), mdx(\"p\", null, \"It\\u2019s time to pack\\xADage and run the ap\\xADpli\\xADca\\xADtion and check that every\\xADthing works as ex\\xADpected. Let\\u2019s pack\\xADage the ap\\xADpli\\xADca\\xADtion using:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-text\"\n  }), \"mvn clean verify\\n\")), mdx(\"p\", null, \"And then to launch it, start your mongo server and launch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-text\"\n  }), \"java -jar target/my-first-app-1.0-SNAPSHOT-fat.jar \\\\\\n  -conf src/main/conf/my-application-conf.json\\n\")), mdx(\"p\", null, \"If you are, like me, using docker / docker-\\u200Bmachine for al\\xADmost every\\xADthing, edit the con\\xADfig\\xADu\\xADra\\xADtion file to refer to the right host (lo\\xADcal\\xADhost for docker, the docker-\\u200Bmachine ip if you use docker-\\u200Bmachine) and then launch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"docker run -d -p 27017:27017 mongo\\njava -jar target/my-first-app-1.0-SNAPSHOT-fat.jar \\\\\\n  -conf src/main/conf/my-application-conf.json\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"# or\"), \"\\njava -jar target/my-first-app-1.0-SNAPSHOT-fat.jar \\\\\\n  -conf src/main/conf/my-application-conf-docker-machine.json\\n\")), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/intro-series/whisky-mongo.png\",\n    \"alt\": \"The application live and running\"\n  }))), mdx(\"h2\", {\n    \"id\": \"thats-all-folks\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#thats-all-folks\"\n  })), \"That\\u2019s all folks!\"), mdx(\"p\", null, \"We are reach\\xADing the end of this post. We saw how you can use the vert-\\u200Bmongo-client to ac\\xADcess asyn\\xADchro\\xADnously data stored in\\xADside a mongo data\\xADbase as well as in\\xADsert\\xADing/up\\xADdat\\xADing this data. Now you have the choice be\\xADtween JDBC or Mongo. In ad\\xADdi\\xADtion, vert.x pro\\xADvides a client for Redis.\"), mdx(\"p\", null, \"Next time, we will see how the ver\\xADti\\xADcle class can be split in two ver\\xADti\\xADcles in order to bet\\xADter or\\xADga\\xADnize your code. The in\\xADter\\xADac\\xADtion be\\xADtween the two ver\\xADti\\xADcles will uses \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ser\\xADvices\"), \".\"), mdx(\"p\", null, \"Stay tuned \u0026 Happy cod\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eThis blog post is part of the \u003cem\u003ein¬≠tro¬≠duc¬≠tion to vert.x\u003c/em\u003e se¬≠ries. Last time, we have seen how we can use the \u003ccode\u003evertx-jdbc-client\u003c/code\u003e to con¬≠nect to a data¬≠base using a JDBC dri¬≠ver. In this post, we are going to re¬≠place this JDBC client by the \u003ccode\u003evertx-mongo-client\u003c/code\u003e, and thus con¬≠nect to a Mongo data¬≠base.\u003c/p\u003e\u003cp\u003eYou don‚Äôt un¬≠der¬≠stand the title, check the \u003ca href=\"https://www.mongodb.org\"\u003emon¬≠goDB\u003c/a\u003e web¬≠site.\u003c/p\u003e\u003cp\u003eBut be¬≠fore going fur¬≠ther, let‚Äôs recap.\u003c/p\u003e\u003ch2 id=\"previously-in--introduction-to-vertx\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#previously-in--introduction-to-vertx\"\u003e\u003c/a\u003ePreviously in  ‚Äòintroduction to vert.x‚Äô\u003c/h2\u003e\u003col\u003e\u003cli\u003eThe \u003ca href=\"/blog/my-first-vert-x-3-application/\"\u003efirst post\u003c/a\u003e has de¬≠scribed how to build a vert.x ap¬≠pli¬≠ca¬≠tion with Maven and ex¬≠e¬≠cute unit tests.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/vert-x-application-configuration/\"\u003esec¬≠ond post\u003c/a\u003e has de¬≠scribed how this ap¬≠pli¬≠ca¬≠tion can be¬≠come con¬≠fig¬≠urable.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/some-rest-with-vert-x/\"\u003ethird post\u003c/a\u003e has in¬≠tro¬≠duced \u003ca href=\"http://vertx.io/docs/vertx-web/java/\"\u003evertx-‚Äãweb\u003c/a\u003e, and a small col¬≠lec¬≠tion man¬≠age¬≠ment ap¬≠pli¬≠ca¬≠tion has been de¬≠vel¬≠oped. This ap¬≠pli¬≠ca¬≠tion of¬≠fers a REST API used by a HTML/JavaScript fron¬≠tend.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/unit-and-integration-tests/\"\u003efourth post\u003c/a\u003e has pre¬≠sented how you can run in¬≠te¬≠gra¬≠tion tests to en¬≠sure the be¬≠hav¬≠ior of your ap¬≠pli¬≠ca¬≠tion.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/using-the-asynchronous-sql-client/\"\u003elast post\u003c/a\u003e has pre¬≠sented how you can in¬≠ter¬≠act with a JDBC data¬≠base using the vertx-‚Äãjdbc-client.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eThis post shows an¬≠other client that lets you use Mon¬≠goDB in a vert.x ap¬≠pli¬≠ca¬≠tion. This client pro¬≠vides an vert.x API to ac¬≠cess asyn¬≠chro¬≠nously to the Mongo data¬≠base. We won‚Äôt com¬≠pare whether or not JDBC is su¬≠pe¬≠rior to Mongo, they have both pros and cons, and you should use the one that meet your re¬≠quire¬≠ments. Vert.x lets you choose, that‚Äôs the point.\u003c/p\u003e\u003cp\u003eThe vertx-‚Äãmongo-client doc¬≠u¬≠men¬≠ta¬≠tion is avail¬≠able \u003ca href=\"http://vertx.io/docs/vertx-mongo-client/java/\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe code de¬≠vel¬≠oped in this blog post is avail¬≠able in the branch \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/tree/post-6\"\u003epost-6\u003c/a\u003e. Our start¬≠ing point is the code from the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/tree/post-5\"\u003epost-5 branch\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"asynchronous-data-access\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#asynchronous-data-access\"\u003e\u003c/a\u003eAsynchronous data access\u003c/h2\u003e\u003cp\u003eOne of the vert.x char¬≠ac¬≠ter¬≠is¬≠tics is being asyn¬≠chro¬≠nous. With an asyn¬≠chro¬≠nous API, you don‚Äôt wait for a re¬≠sult, but you are no¬≠ti¬≠fied when this re¬≠sult is ready. Thanks to vert.x, this no¬≠ti¬≠fi¬≠ca¬≠tion hap¬≠pens in the same thread (un¬≠der¬≠stand event loop) as the ini¬≠tial re¬≠quest:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/intro-series/async-data.png\" alt=\"Asynchronous data access\"/\u003e\u003c/p\u003e\u003cp\u003eYour code (on the left) is going to in¬≠voke the mongo client and pass a call¬≠back that will be in¬≠voked when the re¬≠sult is avail¬≠able. The in¬≠vo¬≠ca¬≠tion to the mongo client is non block¬≠ing and re¬≠turns im¬≠me¬≠di¬≠ately. The client is deal¬≠ing with the mongo data¬≠base and when the re¬≠sult has been com¬≠puted / re¬≠trieved, it in¬≠vokes the call¬≠back in the same event loop as the re¬≠quest.\u003c/p\u003e\u003cp\u003eThis model is par¬≠tic¬≠u¬≠larly pow¬≠er¬≠ful as it avoids the syn¬≠chro¬≠niza¬≠tion pit¬≠falls. In¬≠deed, your code is only called by a sin¬≠gle thread, no need to syn¬≠chro¬≠nize any¬≠thing.\u003c/p\u003e\u003ch2 id=\"as-with-every-maven-project\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#as-with-every-maven-project\"\u003e\u003c/a\u003eAs with every Maven project‚Ä¶\u003c/h2\u003e\u003cp\u003e‚Ä¶ we need to up¬≠date the \u003ccode\u003epom.xml\u003c/code\u003e file first.\u003c/p\u003e\u003cp\u003eIn the \u003ccode\u003epom.xml\u003c/code\u003e file, re¬≠place the \u003ccode\u003evertx-jdbc-client\u003c/code\u003e by the \u003ccode\u003evertx-mongo-client\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-mongo-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.1.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eUn¬≠like JDBC where we were in¬≠stan¬≠ti¬≠at¬≠ing a data¬≠base on the fly, here we need to ex¬≠plic¬≠itly starts a Mon¬≠goDB server. In order to launch a Mongo server in our test, we are going to add an¬≠other de¬≠pen¬≠dency:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003ede.flapdoodle.embed\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003ede.flapdoodle.embed.mongo\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.50.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003etest\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis de¬≠pen¬≠dency will be used in our unit tests, as it lets us start a mongo server pro¬≠gram¬≠mat¬≠i¬≠cally. For our in¬≠te¬≠gra¬≠tion tests, we are going to use a Maven plug¬≠in start¬≠ing and stop¬≠ping the mongo server be¬≠fore and after our in¬≠te¬≠gra¬≠tion tests. Add this plug¬≠in to the \u003ccode\u003e\u0026lt;plugins/\u0026gt;\u003c/code\u003e sec¬≠tion of your \u003ccode\u003epom.xml\u003c/code\u003e file.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003ecom.github.joelittlejohn.embedmongo\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003eembedmongo-maven-plugin\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e0.2.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003estart\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003estart\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eport\u003c/span\u003e\u0026gt;\u003c/span\u003e37017\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eport\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003estop\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003estop\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNo¬≠tice the port we use here (37017), we will use this port later.\u003c/p\u003e\u003ch2 id=\"enough-xml-for-today\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#enough-xml-for-today\"\u003e\u003c/a\u003eEnough XML for today\u003c/h2\u003e\u003cp\u003eNow that we have up¬≠dated our \u003ccode\u003epom.xml\u003c/code\u003e file, it‚Äôs time to change our ver¬≠ti¬≠cle. The first thing to do is to re¬≠place the jdbc client by the mongo client:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003emongo = MongoClient.createShared(vertx, config());\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis client is con¬≠fig¬≠ured with the con¬≠fig¬≠u¬≠ra¬≠tion given to the ver¬≠ti¬≠cle (more on this below).\u003c/p\u003e\u003cp\u003eOnce done, we need to change how we start the ap¬≠pli¬≠ca¬≠tion. With the mongo client, no need to ac¬≠quire a con¬≠nec¬≠tion, it han¬≠dles this in¬≠ter¬≠nally. So our startup se¬≠quence is a bit more sim¬≠ple:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003ecreateSomeData(\n    (nothing) -\u0026gt; startWebApp(\n        (http) -\u0026gt; completeStartup(http, fut)\n    ), fut);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs in the pre¬≠vi¬≠ous post, we need to in¬≠sert some pre¬≠de¬≠fined data if the data¬≠base is empty:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ecreateSomeData\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Handler\u0026lt;AsyncResult\u0026lt;Void\u0026gt;\u0026gt; next, Future\u0026lt;Void\u0026gt; fut)\u003c/span\u003e \u003c/span\u003e{\n  Whisky bowmore = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bowmore 15 Years Laimrig\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Scotland, Islay\u0026quot;\u003c/span\u003e);\n  Whisky talisker = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Talisker 57¬∞ North\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Scotland, Island\u0026quot;\u003c/span\u003e);\n  System.out.println(bowmore.toJson());\n  \u003cspan class=\"hljs-comment\"\u003e// Do we have data in the collection ?\u003c/span\u003e\n  mongo.count(COLLECTION, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject(), count -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (count.succeeded()) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (count.result() == \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) {\n        \u003cspan class=\"hljs-comment\"\u003e// no whiskies, insert data\u003c/span\u003e\n        mongo.insert(COLLECTION, bowmore.toJson(), ar -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.failed()) {\n            fut.fail(ar.cause());\n          } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            mongo.insert(COLLECTION, talisker.toJson(), ar2 -\u0026gt; {\n              \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar2.failed()) {\n                fut.failed();\n              } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                next.handle(Future.\u0026lt;Void\u0026gt;succeededFuture());\n              }\n            });\n          }\n        });\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        next.handle(Future.\u0026lt;Void\u0026gt;succeededFuture());\n      }\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// report the error\u003c/span\u003e\n      fut.fail(count.cause());\n    }\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo de¬≠tect whether or not the data¬≠base al¬≠ready con¬≠tains some data, we re¬≠trieve the num¬≠ber of \u003cem\u003edoc¬≠u¬≠ments\u003c/em\u003e from the \u003ccode\u003ewhiskies\u003c/code\u003e col¬≠lec¬≠tion. This is done with : \u003ccode\u003emongo.count(COLLECTION, new JsonObject(), count -\u0026gt; {})\u003c/code\u003e. The sec¬≠ond pa¬≠ra¬≠me¬≠ter is the query. In our case, we want to count all doc¬≠u¬≠ments. This is done using \u003ccode\u003enew JsonObject()\u003c/code\u003e that would cre¬≠ate a query ac¬≠cept¬≠ing all doc¬≠u¬≠ments from the col¬≠lec¬≠tion (it‚Äôs equiv¬≠a¬≠lent to a \u003ccode\u003eSELECT * FROM ...\u003c/code\u003e).\u003c/p\u003e\u003cp\u003eAlso no¬≠tice the \u003ccode\u003einsert\u003c/code\u003e calls. Doc¬≠u¬≠ments are passed as JSON ob¬≠ject, so to in¬≠sert an ob¬≠ject, just se¬≠ri¬≠al¬≠ize it to JSON and use \u003ccode\u003emongo.insert(COLLECTION, json, completion handler)\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"mongo-ize-the-rest-handlers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#mongo-ize-the-rest-handlers\"\u003e\u003c/a\u003eMongo-ize the REST handlers\u003c/h2\u003e\u003cp\u003eNow that the ap¬≠pli¬≠ca¬≠tion boot se¬≠quence has been mi¬≠grated to mongo, it‚Äôs time to up¬≠date the code han¬≠dling the REST re¬≠quests.\u003c/p\u003e\u003cp\u003eLet‚Äôs start by the \u003ccode\u003egetAll\u003c/code\u003e method that re¬≠turns all stored prod¬≠ucts. To im¬≠ple¬≠ment this, we use the \u003ccode\u003efind\u003c/code\u003e method. As we saw for the \u003ccode\u003ecount\u003c/code\u003e method, we pass an empty json ob¬≠ject to de¬≠scribe a query ac¬≠cept¬≠ing all doc¬≠u¬≠ments:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetAll\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext routingContext)\u003c/span\u003e \u003c/span\u003e{\n  mongo.find(COLLECTION, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject(), results -\u0026gt; {\n    List\u0026lt;JsonObject\u0026gt; objects = results.result();\n    List\u0026lt;Whisky\u0026gt; whiskies = objects.stream().map(Whisky::\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e).collect(Collectors.toList());\n    routingContext.response()\n        .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json; charset=utf-8\u0026quot;\u003c/span\u003e)\n        .end(Json.encodePrettily(whiskies));\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe query re¬≠sults are passed as a list of JSON ob¬≠jects. From this list we can cre¬≠ate our prod¬≠uct in¬≠stances, and fill the HTTP re¬≠sponse with this set.\u003c/p\u003e\u003cp\u003eTo delete a spe¬≠cific doc¬≠u¬≠ment we need to se¬≠lect the doc¬≠u¬≠ment using its \u003ccode\u003eid\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edeleteOne\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext routingContext)\u003c/span\u003e \u003c/span\u003e{\n  String id = routingContext.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (id == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n    routingContext.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e).end();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    mongo.removeOne(COLLECTION, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, id),\n        ar -\u0026gt; routingContext.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e204\u003c/span\u003e).end());\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ccode\u003enew JsonObject().put(\u0026quot;_id\u0026quot;, id)\u003c/code\u003e de¬≠scribes a query se¬≠lect¬≠ing a sin¬≠gle doc¬≠u¬≠ment (se¬≠lected by its unique \u003ccode\u003eid\u003c/code\u003e, so it‚Äôs the equiv¬≠a¬≠lent to \u003ccode\u003eSELECT * WHERE id=...\u003c/code\u003e). No¬≠tice the \u003ccode\u003e_id\u003c/code\u003e which is a mongo trick to se¬≠lect a doc¬≠u¬≠ment by id.\u003c/p\u003e\u003cp\u003eUp¬≠dat¬≠ing a doc¬≠u¬≠ment is a less triv¬≠ial:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eupdateOne\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext routingContext)\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e String id = routingContext.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e);\n  JsonObject json = routingContext.getBodyAsJson();\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (id == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e || json == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n    routingContext.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e).end();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    mongo.update(COLLECTION,\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, id), \u003cspan class=\"hljs-comment\"\u003e// Select a unique document\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e// The update syntax: {$set, the json object containing the fields to update}\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n            .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$set\u0026quot;\u003c/span\u003e, json),\n        v -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (v.failed()) {\n            routingContext.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e).end();\n          } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            routingContext.response()\n                .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json; charset=utf-8\u0026quot;\u003c/span\u003e)\n                .end(Json.encodePrettily(\n                  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(id, json.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e),\n                    json.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;origin\u0026quot;\u003c/span\u003e))));\n          }\n        });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs we can see, the \u003ccode\u003eupdate\u003c/code\u003e method takes two JSON ob¬≠jects as pa¬≠ra¬≠me¬≠ter:\u003c/p\u003e\u003col\u003e\u003cli\u003eThe first one de¬≠notes the query (here we se¬≠lect a sin¬≠gle doc¬≠u¬≠ment using its id).\u003c/li\u003e\u003cli\u003eThe sec¬≠ond ob¬≠ject ex¬≠presses the change to apply to the se¬≠lected doc¬≠u¬≠ment. It uses a mongo syn¬≠tax. In our case, we up¬≠date the doc¬≠u¬≠ment using the \u003ccode\u003e$set\u003c/code\u003e op¬≠er¬≠a¬≠tor.\u003c/li\u003e\u003c/ol\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eIn this code we up¬≠date the doc¬≠u¬≠ment and re¬≠place only a set of fields. You can also re¬≠place the whole doc¬≠u¬≠ment using \u003ccode\u003emongo.replace(...)\u003c/code\u003e.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eI def¬≠i¬≠nitely rec¬≠om¬≠mend to have a look to the Mon¬≠goDB doc¬≠u¬≠men¬≠ta¬≠tion, es¬≠pe¬≠cially:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://docs.mongodb.org/manual/tutorial/query-documents/\" title=\"MongoDB Query Documentation\"\u003eQuery syn¬≠tax doc¬≠u¬≠men¬≠ta¬≠tion\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://docs.mongodb.org/manual/tutorial/modify-documents/\" title=\"MongoDB Update Documentation\"\u003eUp¬≠date syn¬≠tax doc¬≠u¬≠men¬≠ta¬≠tion\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"time-for-configuration\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#time-for-configuration\"\u003e\u003c/a\u003eTime for configuration\u003c/h2\u003e\u003cp\u003eWell, the code is mi¬≠grated, but we still need to up¬≠date the con¬≠fig¬≠u¬≠ra¬≠tion. With JDBC we passed the JDBC url and the dri¬≠ver class in the con¬≠fig¬≠u¬≠ra¬≠tion. With mongo, we need to con¬≠fig¬≠ure the \u003ccode\u003econnection_string\u003c/code\u003e - the \u003ccode\u003emongo://\u003c/code\u003e url on which the ap¬≠pli¬≠ca¬≠tion is con¬≠nected, and \u003ccode\u003edb_name\u003c/code\u003e - a name for the data source.\u003c/p\u003e\u003cp\u003eLet‚Äôs start by the unit test. Edit the \u003ccode\u003eMyFirstVerticleTest\u003c/code\u003e file and add the fol¬≠low¬≠ing code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e MongodProcess MONGO;\n\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e MONGO_PORT = \u003cspan class=\"hljs-number\"\u003e12345\u003c/span\u003e;\n\u003cspan class=\"hljs-meta\"\u003e@BeforeClass\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003einitialize\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethrows\u003c/span\u003e IOException \u003c/span\u003e{\n  MongodStarter starter = MongodStarter.getDefaultInstance();\n  IMongodConfig mongodConfig = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MongodConfigBuilder()\n      .version(Version.Main.PRODUCTION)\n      .net(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Net(MONGO_PORT, Network.localhostIsIPv6()))\n      .build();\n  MongodExecutable mongodExecutable =\n      starter.prepare(mongodConfig);\n  MONGO = mongodExecutable.start();\n}\n\n\u003cspan class=\"hljs-meta\"\u003e@AfterClass\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eshutdown\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{  MONGO.stop(); }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBe¬≠fore our tests, we start (pro¬≠gram¬≠mat¬≠i¬≠cally) a mongo data¬≠base on the port 12345. When all our tests have been ex¬≠e¬≠cuted, we shut¬≠down the data¬≠base.\u003c/p\u003e\u003cp\u003eSo now that the mongo server is man¬≠aged, we need to to give the right con¬≠fig¬≠u¬≠ra¬≠tion to our ver¬≠ti¬≠cle. Up¬≠date the \u003ccode\u003eDeploymentOption\u003c/code\u003e in¬≠stance with:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eDeploymentOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e DeploymentOptions()\n    .setConfig(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e, port)\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;db_name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;whiskies-test\u0026quot;\u003c/span\u003e)\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;connection_string\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\u0026quot;mongodb://localhost:\u0026quot;\u003c/span\u003e + MONGO_PORT)\n);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThat‚Äôs all for the unit tests.\u003c/p\u003e\u003cp\u003eFor the integration-‚Äãtest, we are using an ex¬≠ter¬≠nal¬≠ized json file. Edit the \u003ccode\u003esrc/test/resources/my-it-config.json\u003c/code\u003e with the fol¬≠low¬≠ing con¬≠tent:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e: ${http.port},\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;db_name\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;whiskies-it\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;connection_string\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;mongodb://localhost:37017\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNo¬≠tice the port we are using for the mongo server. This port was con¬≠fig¬≠ured in the \u003ccode\u003epom.xml\u003c/code\u003e file.\u003c/p\u003e\u003cp\u003eLast but not least, we still have a con¬≠fig¬≠u¬≠ra¬≠tion file to edit: the con¬≠fig¬≠u¬≠ra¬≠tion you use to launch the ap¬≠pli¬≠ca¬≠tion in \u003ccode\u003eproduction\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e8082\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;db_name\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;whiskies\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;connection_string\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;mongodb://localhost:27017\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere you would need to edit the \u003ccode\u003elocalhost:27017\u003c/code\u003e with the right url for your mongo server.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eSome changes in the integration tests\u003c/div\u003e\u003cp\u003eBe¬≠cause mongo doc¬≠u¬≠ment id are String and not in¬≠te¬≠ger, we have to slightly change doc¬≠u¬≠ment se¬≠lec¬≠tion in the in¬≠te¬≠gra¬≠tion test.\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"time-for-a-run\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#time-for-a-run\"\u003e\u003c/a\u003eTime for a run\u003c/h2\u003e\u003cp\u003eIt‚Äôs time to pack¬≠age and run the ap¬≠pli¬≠ca¬≠tion and check that every¬≠thing works as ex¬≠pected. Let‚Äôs pack¬≠age the ap¬≠pli¬≠ca¬≠tion using:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-text\"\u003emvn clean verify\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd then to launch it, start your mongo server and launch:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-text\"\u003ejava -jar target/my-first-app-1.0-SNAPSHOT-fat.jar \\\n  -conf src/main/conf/my-application-conf.json\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you are, like me, using docker / docker-‚Äãmachine for al¬≠most every¬≠thing, edit the con¬≠fig¬≠u¬≠ra¬≠tion file to refer to the right host (lo¬≠cal¬≠host for docker, the docker-‚Äãmachine ip if you use docker-‚Äãmachine) and then launch:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003edocker run -d -p 27017:27017 mongo\njava -jar target/my-first-app-1.0-SNAPSHOT-fat.jar \\\n  -conf src/main/conf/my-application-conf.json\n\u003cspan class=\"hljs-comment\"\u003e# or\u003c/span\u003e\njava -jar target/my-first-app-1.0-SNAPSHOT-fat.jar \\\n  -conf src/main/conf/my-application-conf-docker-machine.json\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cimg src=\"/images/blog/intro-series/whisky-mongo.png\" alt=\"The application live and running\"/\u003e\u003c/p\u003e\u003ch2 id=\"thats-all-folks\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#thats-all-folks\"\u003e\u003c/a\u003eThat‚Äôs all folks!\u003c/h2\u003e\u003cp\u003eWe are reach¬≠ing the end of this post. We saw how you can use the vert-‚Äãmongo-client to ac¬≠cess asyn¬≠chro¬≠nously data stored in¬≠side a mongo data¬≠base as well as in¬≠sert¬≠ing/up¬≠dat¬≠ing this data. Now you have the choice be¬≠tween JDBC or Mongo. In ad¬≠di¬≠tion, vert.x pro¬≠vides a client for Redis.\u003c/p\u003e\u003cp\u003eNext time, we will see how the ver¬≠ti¬≠cle class can be split in two ver¬≠ti¬≠cles in order to bet¬≠ter or¬≠ga¬≠nize your code. The in¬≠ter¬≠ac¬≠tion be¬≠tween the two ver¬≠ti¬≠cles will uses \u003cem\u003eser¬≠vices\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eStay tuned \u0026amp; Happy cod¬≠ing!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"us","tf":27},{"term":"mongo","tf":26},{"term":"document","tf":21},{"term":"client","tf":14},{"term":"post","tf":13},{"term":"applic","tf":12},{"term":"test","tf":12},{"term":"configur","tf":12},{"term":"databas","tf":11},{"term":"need","tf":11},{"term":"jdbc","tf":10},{"term":"code","tf":10},{"term":"updat","tf":10},{"term":"start","tf":9},{"term":"file","tf":9},{"term":"server","tf":8},{"term":"time","tf":7},{"term":"let","tf":7},{"term":"queri","tf":7},{"term":"select","tf":7},{"term":"data","tf":6},{"term":"verticl","tf":6},{"term":"json","tf":6},{"term":"object","tf":6},{"term":"go","tf":5}]}],"numPages":16},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["page","13"]},"buildId":"C_I4gGOFTI-4fY_eV8SrD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.8577696c4e17514af975.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_buildManifest.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_ssgManifest.js" async=""></script></body></html>