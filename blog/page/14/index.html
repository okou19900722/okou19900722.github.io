<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Page 14 | Blog | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.176b8cb6.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.176b8cb6.chunk.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-79fb140702e98d221643.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.7726cd762eacbba73350.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.8577696c4e17514af975.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><div class="dropdown"><a class="dropdown-title">v4.0.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/"><li class="dropdown-item active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.0<!-- -->)</li></a><a href="/docs/3.9.2"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M23.996 10.648l-6.153-5.644-.865.944 5.127 4.7H1.895l5.127-4.705L6.157 5 .004 10.648H0v3.72c0 1.682 1.62 3.052 3.61 3.052h3.794c1.99 0 3.61-1.37 3.61-3.051v-2.445h1.968v2.445c0 1.681 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.72z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link" title="Gitter" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Gitter"><title>Gitter</title><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul></div><div class="blog-entries"><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">25 November 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/vert-x-es6-back-to-the-future/">Vert.x ES6 back to the future</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/pmlopes.png?size=50"/><a href="https://github.com/pmlopes" target="_blank" rel="noopener noreferrer">Paulo Lopes</a></li></ul></span><p class="blog-entry-summary">On October 21th, 2015 we all rejoiced with the return from the past of Marty McFly with his flying car and so on, however in the Vert.x world we were quite sad about our rather old JavaScript support.</p><span class="read-more-link"><a href="/blog/vert-x-es6-back-to-the-future/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">19 October 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/using-the-asynchronous-sql-client/">Using the asynchronous SQL client</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Finally, back... This post is the fifth post of the introduction to vert.x blog series, after a not-that-small break. In this post we are going to see how we can use JDBC in a vert.x application.</p><span class="read-more-link"><a href="/blog/using-the-asynchronous-sql-client/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">8 October 2015</span><a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><h3><a href="/blog/vert-x-3-1-0-is-released/">Vert.x 3.1.0 is released!</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/purplefox.png?size=50"/><a href="https://github.com/purplefox" target="_blank" rel="noopener noreferrer">Tim Fox</a></li></ul></span><p class="blog-entry-summary">I&#x27;m pleased to announce the release of Vert.x 3.1!</p><span class="read-more-link"><a href="/blog/vert-x-3-1-0-is-released/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">17 September 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/contract-driven-rest-services-with-vert-x3/">Contract Driven REST Services with Vert.x3</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/pmlopes.png?size=50"/><a href="https://github.com/pmlopes" target="_blank" rel="noopener noreferrer">Paulo Lopes</a></li></ul></span><p class="blog-entry-summary">We see a new trend in development where we are shifting from developing applications to APIs. More and more we see services being offered as REST APIs that we are allowed to consume.</p><span class="read-more-link"><a href="/blog/contract-driven-rest-services-with-vert-x3/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">14 September 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/writing-secure-vert-x-web-apps/">Writing secure Vert.x Web apps</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/pmlopes.png?size=50"/><a href="https://github.com/pmlopes" target="_blank" rel="noopener noreferrer">Paulo Lopes</a></li></ul></span><p class="blog-entry-summary">This is a starting guide for securing Vert.x web applications. Standard rules and practices apply to Vert.x apps as if they would to any other web framework.</p><span class="read-more-link"><a href="/blog/writing-secure-vert-x-web-apps/">Read more</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><span class="blog-entry-date">31 August 2015</span><a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><h3><a href="/blog/vert-x3-real-time-web-apps/">Vert.x 3 real time web apps</a></h3><span class="blog-entry-authors"><ul><li><img src="https://github.com/pmlopes.png?size=50"/><a href="https://github.com/pmlopes" target="_blank" rel="noopener noreferrer">Paulo Lopes</a></li></ul></span><p class="blog-entry-summary">One of the interesting features of Vert.x is the SockJS event bus bridge. It allows external applications to communicate with Vert.x event bus using Websockets.</p><span class="read-more-link"><a href="/blog/vert-x3-real-time-web-apps/">Read more</a></span></div></div><div class="pagination"><div class="pagination-page"><a href="/blog/page/13/">«</a></div><div class="pagination-page"><a href="/blog/">1</a></div><div class="pagination-page disabled">…</div><div class="pagination-page"><a href="/blog/page/12/">12</a></div><div class="pagination-page"><a href="/blog/page/13/">13</a></div><div class="pagination-page active"><a href="/blog/page/14/">14</a></div><div class="pagination-page"><a href="/blog/page/15/">15</a></div><div class="pagination-page"><a href="/blog/page/16/">16</a></div><div class="pagination-page"><a href="/blog/page/15/">»</a></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"page":14,"posts":[{"filename":"blog/2015-11-25-vert-x-es6-back-to-the-future.mdx","date":"2015-11-25","slug":"vert-x-es6-back-to-the-future","meta":{"title":"Vert.x ES6 back to the future","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"On October 21th, 2015 we all rejoiced with the return from the past of Marty McFly with his flying car and so on, however in the Vert.x world we were quite sad about our rather old JavaScript support."},"readingTime":{"text":"3 min read","minutes":2.42,"time":145200,"words":484},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"On \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://backtothefuture.wikia.com/wiki/2015\"\n  }), \"Oc\\xADto\\xADber 21th, 2015\"), \" we all re\\xADjoiced with the re\\xADturn from the past of\\nMarty McFly with his fly\\xADing car and so on, how\\xADever in the Vert.x world we were quite sad that the JavaScript sup\\xADport we\\nhave was still using a tech\\xADnol\\xADogy re\\xADleased in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/ECMAScript#Versions\"\n  }), \"De\\xADcem\\xADber 2009\"), \". The\\nsup\\xADport for ES5 is not some\\xADthing that we Vert.x team con\\xADtrols but some\\xADthing that is in\\xADher\\xADited from run\\xADning on top of\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://openjdk.java.net/projects/nashorn/\"\n  }), \"Nashorn\"), \".\"), mdx(\"p\", null, \"With all these nos\\xADtal\\xADgic thoughts on my mind I\\u2019ve de\\xADcided to bring us back to the fu\\xADture and by fu\\xADture I mean, let\\u2019s\\nstart using a mod\\xADern JavaScript, or more cor\\xADrectly, let\\u2019s start using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://es6-features.org/\"\n  }), \"EC\\xADMAScript 6\"), \".\"), mdx(\"p\", null, \"It turned out to be quite sim\\xADple to achieve this so I\\u2019ll pick the hello world ex\\xADam\\xADple and write it in ES6 just to show\\nhow you can port your code to ES6 and still use the cur\\xADrent Vert.x APIs. Note that Vert.x in\\xADter\\xADnals still are ES5 and\\nhave not been touched or mod\\xADi\\xADfied to sup\\xADport any of ES6 fea\\xADtures.\"), mdx(\"h2\", {\n    \"id\": \"main\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#main\"\n  })), \"main\"), mdx(\"p\", null, \"Tra\\xADdi\\xADtion\\xADally your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"main.js\"), \" file would re\\xADside in the root of your mod\\xADule (this is where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NPM\"), \" will look for it by\\nde\\xADfault); how\\xADever as we are going to tran\\xADspile to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ES5\"), \" you\\u2019ll want to put your index file in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/src/main.js\"), \".\"), mdx(\"p\", null, \"How\\xADever, be\\xADcause we are tran\\xADspiling to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ES5\"), \", your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \"\\u2019s main block should point to the tran\\xADspiled \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \"\\nfile in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/lib\"), \" di\\xADrec\\xADtory.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx-es6\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"version\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0.0.1\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"private\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \",\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"main\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"lib/main.js\\\"\"), \",\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"scripts\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"build\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"rm -Rf lib \u0026\u0026 ./node_modules/.bin/babel --out-dir lib src\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"start\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"./node_modules/.bin/vertx run lib/main.js\\\"\"), \"\\n  },\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"dependencies\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"vertx3-full\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"3.1.0\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"babel-cli\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"6.2.0\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"babel-preset-es2015\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"6.1.18\\\"\"), \"\\n  }\\n}\\n\")), mdx(\"p\", null, \"As you can see, the main idea is to in\\xADvoke the tran\\xADspiler (Babel) when we are build\\xADing our project, and run it using the\\ngen\\xADer\\xADated files. This is slightly equiv\\xADa\\xADlent to a com\\xADpi\\xADla\\xADtion process you would have using com\\xADpiled lan\\xADguage.\"), mdx(\"h2\", {\n    \"id\": \"npmignore\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#npmignore\"\n  })), \".npmignore\"), mdx(\"p\", null, \"If you\\u2019re plan\\xADning to de\\xADploy your pack\\xADage to npm ei\\xADther local or pri\\xADvate you should be aware that npm will ex\\xADclude\\nany\\xADthing listed on your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".gitignore\"), \" since we should ig\\xADnore the gen\\xADer\\xADated code from git it need to in\\xADform npm to ig\\xADnore\\nthat rule and keep the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"lib\"), \" di\\xADrec\\xADtory. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".gitignore\"), \" should be some\\xADthing like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-text\"\n  }), \"/lib\\n/node_modules\\n\")), mdx(\"p\", null, \"And the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".npmignore\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-text\"\n  }), \"/.gitignore\\n\")), mdx(\"h2\", {\n    \"id\": \"hello-fat-arrows-and-let-keywords\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#hello-fat-arrows-and-let-keywords\"\n  })), \"Hello fat arrows and let keywords\"), mdx(\"p\", null, \"So all the heavy work has been done, in order to cre\\xADate our hello world we just need to code some \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ES6\"), \" in our\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main.js\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" Router = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"require\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx-web-js/router\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" server = vertx.createHttpServer();\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" router = Router.router(vertx);\\n\\nrouter.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \").handler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"ctx\"), \") =\u003e\"), \" {\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"let\"), \" response = ctx.response();\\n    response.putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/plain\\\"\"), \");\\n\\n    response.end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello ES6 World!\\\"\"), \");\\n});\\n\\nserver.requestHandler(router.accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n\")), mdx(\"p\", null, \"As you can see we\\u2019re using fat ar\\xADrows in\\xADstead of writ\\xADing a func\\xADtion clo\\xADsure and scoped vari\\xADables using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"let\"), \" key\\xADword. If\\nyou now com\\xADpile your project:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-dockerfile\"\n  }), \"npm \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"run\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" build\"), \"\\n\")), mdx(\"p\", null, \"And then start it:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-coffeescript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"npm\"), \" start\\n\")), mdx(\"p\", null, \"You have your first back to the fu\\xADture \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ES6\"), \" ver\\xADti\\xADcle!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eOn \u003ca href=\"http://backtothefuture.wikia.com/wiki/2015\"\u003eOc­to­ber 21th, 2015\u003c/a\u003e we all re­joiced with the re­turn from the past of\nMarty McFly with his fly­ing car and so on, how­ever in the Vert.x world we were quite sad that the JavaScript sup­port we\nhave was still using a tech­nol­ogy re­leased in \u003ca href=\"https://en.wikipedia.org/wiki/ECMAScript#Versions\"\u003eDe­cem­ber 2009\u003c/a\u003e. The\nsup­port for ES5 is not some­thing that we Vert.x team con­trols but some­thing that is in­her­ited from run­ning on top of\n\u003ca href=\"http://openjdk.java.net/projects/nashorn/\"\u003eNashorn\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eWith all these nos­tal­gic thoughts on my mind I’ve de­cided to bring us back to the fu­ture and by fu­ture I mean, let’s\nstart using a mod­ern JavaScript, or more cor­rectly, let’s start using \u003ca href=\"http://es6-features.org/\"\u003eEC­MAScript 6\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eIt turned out to be quite sim­ple to achieve this so I’ll pick the hello world ex­am­ple and write it in ES6 just to show\nhow you can port your code to ES6 and still use the cur­rent Vert.x APIs. Note that Vert.x in­ter­nals still are ES5 and\nhave not been touched or mod­i­fied to sup­port any of ES6 fea­tures.\u003c/p\u003e\u003ch2 id=\"main\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#main\"\u003e\u003c/a\u003emain\u003c/h2\u003e\u003cp\u003eTra­di­tion­ally your \u003ccode\u003emain.js\u003c/code\u003e file would re­side in the root of your mod­ule (this is where \u003ccode\u003eNPM\u003c/code\u003e will look for it by\nde­fault); how­ever as we are going to tran­spile to \u003ccode\u003eES5\u003c/code\u003e you’ll want to put your index file in \u003ccode\u003e/src/main.js\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eHow­ever, be­cause we are tran­spiling to \u003ccode\u003eES5\u003c/code\u003e, your \u003ccode\u003epackage.json\u003c/code\u003e’s main block should point to the tran­spiled \u003ccode\u003eindex.js\u003c/code\u003e\nfile in the \u003ccode\u003e/lib\u003c/code\u003e di­rec­tory.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx-es6\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;version\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;0.0.1\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;private\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;main\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;lib/main.js\u0026quot;\u003c/span\u003e,\n\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;scripts\u0026quot;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;build\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;rm -Rf lib \u0026amp;\u0026amp; ./node_modules/.bin/babel --out-dir lib src\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;start\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;./node_modules/.bin/vertx run lib/main.js\u0026quot;\u003c/span\u003e\n  },\n\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;dependencies\u0026quot;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;vertx3-full\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;3.1.0\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;babel-cli\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;6.2.0\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;babel-preset-es2015\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;6.1.18\u0026quot;\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see, the main idea is to in­voke the tran­spiler (Babel) when we are build­ing our project, and run it using the\ngen­er­ated files. This is slightly equiv­a­lent to a com­pi­la­tion process you would have using com­piled lan­guage.\u003c/p\u003e\u003ch2 id=\"npmignore\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#npmignore\"\u003e\u003c/a\u003e.npmignore\u003c/h2\u003e\u003cp\u003eIf you’re plan­ning to de­ploy your pack­age to npm ei­ther local or pri­vate you should be aware that npm will ex­clude\nany­thing listed on your \u003ccode\u003e.gitignore\u003c/code\u003e since we should ig­nore the gen­er­ated code from git it need to in­form npm to ig­nore\nthat rule and keep the \u003ccode\u003elib\u003c/code\u003e di­rec­tory. The \u003ccode\u003e.gitignore\u003c/code\u003e should be some­thing like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-text\"\u003e/lib\n/node_modules\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd the \u003ccode\u003e.npmignore\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-text\"\u003e/.gitignore\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"hello-fat-arrows-and-let-keywords\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#hello-fat-arrows-and-let-keywords\"\u003e\u003c/a\u003eHello fat arrows and let keywords\u003c/h2\u003e\u003cp\u003eSo all the heavy work has been done, in order to cre­ate our hello world we just need to code some \u003ccode\u003eES6\u003c/code\u003e in our\n\u003ccode\u003esrc/main.js\u003c/code\u003e file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e Router = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx-web-js/router\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e server = vertx.createHttpServer();\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e router = Router.router(vertx);\n\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e).handler(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ectx\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e response = ctx.response();\n    response.putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/plain\u0026quot;\u003c/span\u003e);\n\n    response.end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello ES6 World!\u0026quot;\u003c/span\u003e);\n});\n\nserver.requestHandler(router.accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see we’re using fat ar­rows in­stead of writ­ing a func­tion clo­sure and scoped vari­ables using \u003ccode\u003elet\u003c/code\u003e key­word. If\nyou now com­pile your project:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-dockerfile\"\u003enpm \u003cspan class=\"hljs-keyword\"\u003erun\u003c/span\u003e\u003cspan class=\"bash\"\u003e build\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd then start it:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-coffeescript\"\u003e\u003cspan class=\"hljs-built_in\"\u003enpm\u003c/span\u003e start\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou have your first back to the fu­ture \u003ccode\u003eES6\u003c/code\u003e ver­ti­cle!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"us","tf":9},{"term":"file","tf":5},{"term":"transpil","tf":4},{"term":"howev","tf":3},{"term":"world","tf":3},{"term":"support","tf":3},{"term":"someth","tf":3},{"term":"futur","tf":3},{"term":"let","tf":3},{"term":"start","tf":3},{"term":"hello","tf":3},{"term":"es6","tf":3},{"term":"code","tf":3},{"term":"main","tf":3},{"term":"compil","tf":3},{"term":"npm","tf":3},{"term":"quit","tf":2},{"term":"javascript","tf":2},{"term":"es5","tf":2},{"term":"not","tf":2},{"term":"run","tf":2},{"term":"back","tf":2},{"term":"ll","tf":2},{"term":"write","tf":2},{"term":"just","tf":2}]},{"filename":"blog/2015-10-19-using-the-asynchronous-sql-client.mdx","date":"2015-10-19","slug":"using-the-asynchronous-sql-client","meta":{"title":"Using the asynchronous SQL client","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Finally, back... This post is the fifth post of the introduction to vert.x blog series, after a not-that-small break. In this post we are going to see how we can use JDBC in a vert.x application."},"readingTime":{"text":"10 min read","minutes":9.095,"time":545700,"words":1819},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Fi\\xADnally, back\\u2026 This post is the fifth post of the in\\xADtro\\xADduc\\xADtion to vert.x blog se\\xADries, after a not-\\u200Bthat-small break. In this post we are going to see how we can use JDBC in a vert.x ap\\xADpli\\xADca\\xADtion, and this, using the asyn\\xADchro\\xADnous API pro\\xADvided by the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-jdbc-client/java/\"\n  }), \"vertx-\\u200Bjdbc-client\"), \".\"), mdx(\"h2\", {\n    \"id\": \"previously-in-the-introduction-to-vertx-series\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#previously-in-the-introduction-to-vertx-series\"\n  })), \"Previously in the introduction to vert.x series\"), mdx(\"p\", null, \"As it was quite some time since the last post, let\\u2019s start by re\\xADfresh\\xADing our mind about the four pre\\xADvi\\xADous posts:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/my-first-vert-x-3-application/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"first post\")), \" has de\\xADscribed how to build a vert.x ap\\xADpli\\xADca\\xADtion with Maven and ex\\xADe\\xADcute unit tests.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/vert-x-application-configuration/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"sec\\xADond post\")), \" has de\\xADscribed how this ap\\xADpli\\xADca\\xADtion can be\\xADcome con\\xADfig\\xADurable.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/some-rest-with-vert-x/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"third post\")), \" has in\\xADtro\\xADduced \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-web/java/\"\n  }), \"vertx-\\u200Bweb\"), \", and a small col\\xADlec\\xADtion man\\xADage\\xADment ap\\xADpli\\xADca\\xADtion has been de\\xADvel\\xADoped. This ap\\xADpli\\xADca\\xADtion of\\xADfers a REST API used by a HTML/JavaScript fron\\xADtend.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/unit-and-integration-tests/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"pre\\xADvi\\xADous post\")), \" has pre\\xADsented how you can run in\\xADte\\xADgra\\xADtion tests to en\\xADsure the be\\xADhav\\xADior of your ap\\xADpli\\xADca\\xADtion.\")), mdx(\"p\", null, \"In this post, back to code. The cur\\xADrent ap\\xADpli\\xADca\\xADtion uses an in-\\u200Bmemory map to store the prod\\xADucts. It\\u2019s time to use a data\\xADbase. In this post we are going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://hsqldb.org/\"\n  }), \"HSQL\"), \", but you can use any data\\xADbase pro\\xADvid\\xADing a JDBC dri\\xADver. In\\xADter\\xADac\\xADtions with the data\\xADbase will be asyn\\xADchro\\xADnous and made using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-jdbc-client/java/\"\n  }), \"vertx-\\u200Bjdbc-client\"), \".\"), mdx(\"p\", null, \"The code of this post are avail\\xADable on this Github \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app\"\n  }), \"project\"), \", in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/tree/post-5\"\n  }), \"post-5 branch\"), \" branch.\"), mdx(\"h2\", {\n    \"id\": \"asynchronous\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#asynchronous\"\n  })), \"Asynchronous?\"), mdx(\"p\", null, \"One of the vert.x char\\xADac\\xADter\\xADis\\xADtics is being asyn\\xADchro\\xADnous. With an asyn\\xADchro\\xADnous API, you don\\u2019t wait for a re\\xADsult, but you are no\\xADti\\xADfied when this re\\xADsult is ready. Just to il\\xADlus\\xADtrate this, let\\u2019s take a very sim\\xADple ex\\xADam\\xADple.\"), mdx(\"p\", null, \"Let\\u2019s imag\\xADine an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"add\"), \" method. Tra\\xADdi\\xADtion\\xADally, you would use it like this: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"int r = add(1, 1)\"), \". This is a syn\\xADchro\\xADnous API as you are wait\\xADing for the re\\xADsult. An asyn\\xADchro\\xADnous ver\\xADsion of this API would be: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"add(1, 1, r -\u003e { /* do something with the result */ })\"), \". In this ver\\xADsion, you pass a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Handler\"), \" called when the re\\xADsult has been com\\xADputed. The method does not re\\xADturn any\\xADthing, and could be im\\xADple\\xADmented as:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"add\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" a, \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" b, Handler\u003cInteger\u003e resultHandler)\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" r = a + b;\\n    resultHandler.handle(r);\\n}\\n\")), mdx(\"p\", null, \"Just to avoid mis\\xADcon\\xADcep\\xADtions, asyn\\xADchro\\xADnous API are not about threads. As we can see in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"add\"), \" ex\\xADam\\xADple, there are no threads in\\xADvolved.\"), mdx(\"h2\", {\n    \"id\": \"jdbc-yes-but-asynchronous\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#jdbc-yes-but-asynchronous\"\n  })), \"JDBC yes, but asynchronous\"), mdx(\"p\", null, \"So, now that we have seen some ba\\xADsics about asyn\\xADchro\\xADnous API, let\\u2019s have a look to the vertx-\\u200Bjdbc-client. This com\\xADpo\\xADnent lets us in\\xADter\\xADact with a data\\xADbase through a JDBC dri\\xADver. These in\\xADter\\xADac\\xADtions are asyn\\xADchro\\xADnous, so when you were doing:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"String sql = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM Products\\\"\"), \";\\nResultSet rs = stmt.executeQuery(sql);\\n\")), mdx(\"p\", null, \"it will be:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"connection.query(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM Products\\\"\"), \", result -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// do something with the result\"), \"\\n});\\n\")), mdx(\"p\", null, \"This model is more ef\\xADfi\\xADcient as it avoids wait\\xADing for the re\\xADsult. You are no\\xADti\\xADfied when the re\\xADsult is avail\\xADable.\"), mdx(\"p\", null, \"Let\\u2019s now mod\\xADify our ap\\xADpli\\xADca\\xADtion to use a data\\xADbase to store our prod\\xADucts.\"), mdx(\"h2\", {\n    \"id\": \"some-maven-dependencies\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#some-maven-dependencies\"\n  })), \"Some maven dependencies\"), mdx(\"p\", null, \"The first things we need to do it to de\\xADclare two new Maven de\\xADpen\\xADden\\xADcies in our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"io.vertx\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"vertx-jdbc-client\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"3.1.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"org.hsqldb\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"hsqldb\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"2.3.3\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"The first de\\xADpen\\xADdency pro\\xADvides the vertx-\\u200Bjdbc-client, while the sec\\xADond one pro\\xADvide the HSQL JDBC dri\\xADver. If you want to use an\\xADother data\\xADbase, change this de\\xADpen\\xADdency. You will also need to change the JDBC url and JDBC dri\\xADver class name later.\"), mdx(\"h2\", {\n    \"id\": \"initializing-the-jdbc-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#initializing-the-jdbc-client\"\n  })), \"Initializing the JDBC client\"), mdx(\"p\", null, \"Now that we have added these de\\xADpen\\xADden\\xADcies, it\\u2019s time to cre\\xADate our JDBC client:\"), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MyFirstVerticle\"), \" class, de\\xADclare a new field \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JDBCClient jdbc;\"), \", and add the fol\\xADlow\\xADing line at the be\\xADgin\\xADning of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"jdbc = JDBCClient.createShared(vertx, config(), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"My-Whisky-Collection\\\"\"), \");\\n\")), mdx(\"p\", null, \"This cre\\xADates an in\\xADstance of JDBC client, con\\xADfig\\xADured with the con\\xADfig\\xADu\\xADra\\xADtion pro\\xADvided to the ver\\xADti\\xADcle. To work cor\\xADrectly this con\\xADfig\\xADu\\xADra\\xADtion needs to pro\\xADvide:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"url\"), \" - the JDBC url such as \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"jdbc:hsqldb:mem:db?shutdown=true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"dri\\xADver_class\"), \" - the JDBC dri\\xADver class such as \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"org.hsqldb.jdbcDriver\"))), mdx(\"p\", null, \"Ok, we have the client, we need a con\\xADnec\\xADtion to the data\\xADbase. This is achieved using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jdbc.getConnection\"), \" that take a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Handler\u003cAsyncResult\u003cSQLConnection\u003e\u003e\"), \" as pa\\xADra\\xADme\\xADter. Let\\u2019s have a deeper look to this type. It\\u2019s a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Handler\"), \", so it is called when the re\\xADsult is ready. This re\\xADsult is an in\\xADstance of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\u003cSQLConnection\u003e\"), \". \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\"), \" is a struc\\xADture pro\\xADvided by vert.x that lets us know if the op\\xADer\\xADa\\xADtion was com\\xADpleted suc\\xADcess\\xADfully or failed. In case of suc\\xADcess, it pro\\xADvides the re\\xADsult, here an in\\xADstance of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SQLConnection\"), \".\"), mdx(\"p\", null, \"When you re\\xADceive an in\\xADstance of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\"), \", your code gen\\xADer\\xADally looks like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.failed()) {\\n  System.err.println(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"The operation has failed...: \\\"\"), \"\\n      + ar.cause().getMessage());\\n} \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Use the result:\"), \"\\n  result = ar.result();\\n }\\n\")), mdx(\"p\", null, \"So, let\\u2019s go back to our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SQLConnection\"), \". We need to re\\xADtrieve it, and then start the rest of the ap\\xADpli\\xADca\\xADtion. This changes how we start the ap\\xADpli\\xADca\\xADtion, as it will be\\xADcome asyn\\xADchro\\xADnous. So, if we di\\xADvide our startup se\\xADquence into small chunks it would be some\\xADthing like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"startBackend(\\n (connection) -\u003e createSomeData(connection,\\n     (nothing) -\u003e startWebApp(\\n         (http) -\u003e completeStartup(http, fut)\\n     ), fut\\n ), fut);\\n\")), mdx(\"p\", null, \"with:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"startBackend\"), \" - re\\xADtrieves a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"SQLConnection\"), \" and then calls the next step\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"createSomeData\"), \" - ini\\xADtial\\xADizes the data\\xADbase and in\\xADserts some data. When done, it calls the next step\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"startWebApp\"), \" - starts our web ap\\xADpli\\xADca\\xADtion\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"completeStartup\"), \" - fi\\xADnal\\xADizes our start se\\xADquence\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fut\"), \" is the com\\xADple\\xADtion fu\\xADture passed by vert.x that let us re\\xADport when we are started, or if an issue has been en\\xADcoun\\xADtered while start\\xADing.\"), mdx(\"p\", null, \"Let\\u2019s have a look to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"startBackend\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"startBackend\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Handler\u003cAsyncResult\u003cSQLConnection\u003e\u003e next, Future\u003cVoid\u003e fut)\"), \" \"), \"{\\n  jdbc.getConnection(ar -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.failed()) {\\n      fut.fail(ar.cause());\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n      next.handle(Future.succeededFuture(ar.result()));\\n    }\\n  });\\n}\\n\")), mdx(\"p\", null, \"This method re\\xADtrieves a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SQLConnection\"), \", check whether this op\\xADer\\xADa\\xADtion suc\\xADceeded. If so, it calls the next step. In case of fail\\xADure, it re\\xADports it.\"), mdx(\"p\", null, \"The other meth\\xADods fol\\xADlow the same pat\\xADtern: 1) check if the last op\\xADer\\xADa\\xADtion has suc\\xADceeded, 2) do the task, 3) call the next step.\"), mdx(\"h3\", {\n    \"id\": \"a-bit-of-sql\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#a-bit-of-sql\"\n  })), \"A bit of SQL\\u2026\"), mdx(\"p\", null, \"Our client is ready, let\\u2019s now write some SQL state\\xADments. Let\\u2019s start by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"createSomeData\"), \" method that is part of the startup se\\xADquence:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createSomeData\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(AsyncResult\u003cSQLConnection\u003e result,\\n    Handler\u003cAsyncResult\u003cVoid\u003e\u003e next, Future\u003cVoid\u003e fut)\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (result.failed()) {\\n      fut.fail(result.cause());\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n      SQLConnection connection = result.result();\\n      connection.execute(\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"CREATE TABLE IF NOT EXISTS Whisky (id INTEGER IDENTITY, name varchar(100), \\\"\"), \" +\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"origin varchar(100))\\\"\"), \",\\n          ar -\u003e {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.failed()) {\\n              fut.fail(ar.cause());\\n              connection.close();\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n            }\\n            connection.query(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM Whisky\\\"\"), \", select -\u003e {\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (select.failed()) {\\n                fut.fail(ar.cause());\\n                connection.close();\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n              }\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (select.result().getNumRows() == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \") {\\n                insert(\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Bowmore 15 Years Laimrig\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Scotland, Islay\\\"\"), \"),\\n                    connection,\\n                    (v) -\u003e insert(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Talisker 57\\xB0 North\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Scotland, Island\\\"\"), \"),\\n                        connection,\\n                        (r) -\u003e {\\n                          next.handle(Future.\u003cVoid\u003esucceededFuture());\\n                          connection.close();\\n                        }));                                                    \\n              } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                next.handle(Future.\u003cVoid\u003esucceededFuture());\\n                connection.close();\\n              }\\n            });\\n          });\\n    }\\n  }\\n\")), mdx(\"p\", null, \"This method checks that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SQLConnection\"), \" is avail\\xADable and then start ex\\xADe\\xADcut\\xADing some SQL state\\xADments. First, it cre\\xADates the ta\\xADbles if there are not there yet. As you can see, the method called is struc\\xADtured as fol\\xADlows:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"connection.execute(\\n    SQL statement,\\n    handler called when the statement has been executed\\n)\\n\")), mdx(\"p\", null, \"The han\\xADdler re\\xADceives an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncResult\u003cVoid\u003e\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"i.e.\"), \" a no\\xADti\\xADfi\\xADca\\xADtion of the com\\xADple\\xADtion with\\xADout an ac\\xADtual re\\xADsult.\"), mdx(Alert, {\n    info: true,\n    title: \"Closing connection\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Don\\u2019t for\\xADget to close the SQL con\\xADnec\\xADtion when you are done. The con\\xADnec\\xADtion will be given back to the con\\xADnec\\xADtion pool and be reused.\")), mdx(\"p\", null, \"In the code of this han\\xADdler, we check whether or not the state\\xADment has been ex\\xADe\\xADcuted cor\\xADrectly, and if so we check to see if the table al\\xADready con\\xADtains some data, if not, it in\\xADserts data using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insert\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"insert\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(Whisky whisky, SQLConnection connection, Handler\u003cAsyncResult\u003cWhisky\u003e\u003e next)\"), \" \"), \"{\\n  String sql = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO Whisky (name, origin) VALUES ?, ?\\\"\"), \";\\n  connection.updateWithParams(sql,\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonArray().add(whisky.getName()).add(whisky.getOrigin()),\\n      (ar) -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.failed()) {\\n          next.handle(Future.failedFuture(ar.cause()));\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \";\\n        }\\n        UpdateResult result = ar.result();\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Build a new whisky instance with the generated id.\"), \"\\n        Whisky w = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(result.getKeys().getInteger(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"), whisky.getName(), whisky.getOrigin());\\n        next.handle(Future.succeededFuture(w));\\n      });\\n}\\n\")), mdx(\"p\", null, \"This method uses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"updateWithParams\"), \" method with an \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"IN\\xADSERT\"), \" state\\xADment, and pass val\\xADues. This ap\\xADproach avoids SQL in\\xADjec\\xADtion. Once the the state\\xADment has been ex\\xADe\\xADcuted, we cre\\xADates a new \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Whisky\"), \" ob\\xADject with the cre\\xADated (auto-\\u200Bgenerated) id.\"), mdx(\"h2\", {\n    \"id\": \"some-rest-with-a-pinch-of-sql\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#some-rest-with-a-pinch-of-sql\"\n  })), \"Some REST with a pinch of SQL\"), mdx(\"p\", null, \"The method de\\xADscribed  above is part of our start se\\xADquence. But what about the method in\\xADvoked by our REST API. Let\\u2019s have a look to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getAll\"), \" method. This method is called by the web front-\\u200Bend to re\\xADtrieve all stored prod\\xADucts:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getAll\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext routingContext)\"), \" \"), \"{\\n    jdbc.getConnection(ar -\u003e {\\n      SQLConnection connection = ar.result();\\n      connection.query(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM Whisky\\\"\"), \", result -\u003e {\\n        List\u003cWhisky\u003e whiskies = result.result().getRows().stream().map(Whisky::\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \").collect(Collectors.toList());\\n        routingContext.response()\\n            .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json; charset=utf-8\\\"\"), \")\\n            .end(Json.encodePrettily(whiskies));\\n        connection.close(); \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Close the connection     \"), \"\\n      });\\n    });\\n  }\\n\")), mdx(\"p\", null, \"This method gets a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SQLConnection\"), \", and then issue a query. Once the re\\xADsult has been re\\xADtrieved it writes the HTTP re\\xADsponse as be\\xADfore. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getOne\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"deleteOne\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"updateOne\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"addOne\"), \" meth\\xADods fol\\xADlow the same pat\\xADtern. No\\xADtice that the con\\xADnec\\xADtion can be closed after the re\\xADsponse has been writ\\xADten.\"), mdx(\"p\", null, \"Let\\u2019s have a look to the re\\xADsult pro\\xADvided to the han\\xADdler passed to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"query\"), \" method. It gets a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ResultSet\"), \", which con\\xADtains the query re\\xADsult. Each row is a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JsonObject\"), \", so if your data ob\\xADject has a con\\xADstruc\\xADtor tak\\xADing a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JsonObject\"), \" as unique ar\\xADgu\\xADment, cre\\xADat\\xADing there ob\\xADjects is straight\\xADfor\\xADward.\"), mdx(\"h2\", {\n    \"id\": \"test-test-and-test-again\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#test-test-and-test-again\"\n  })), \"Test, test, and test again\"), mdx(\"p\", null, \"We need to slightly up\\xADdate our tests to con\\xADfig\\xADure the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JDBCClient\"), \". In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MyFirstVertilceTest\"), \" class, change the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DeploymentOption\"), \" ob\\xADject cre\\xADated in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setUp\"), \" method to be:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"DeploymentOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" DeploymentOptions()\\n    .setConfig(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n        .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \", port)\\n        .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"url\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"jdbc:hsqldb:mem:test?shutdown=true\\\"\"), \")\\n        .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"driver_class\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"org.hsqldb.jdbcDriver\\\"\"), \")\\n    );\\n\")), mdx(\"p\", null, \"In ad\\xADdi\\xADtion to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http.port\"), \", we also put the JDBC url and the class of the JDBC dri\\xADver. We use an in-\\u200Bmemory data\\xADbase for tests.\"), mdx(\"p\", null, \"The same mod\\xADi\\xADfi\\xADca\\xADtion needs to be done in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/test/resources/my-it-config.json\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"http.port\\\"\"), \": ${http.port},\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"url\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"jdbc:hsqldb:mem:it-test?shutdown=true\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"driver_class\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"org.hsqldb.jdbcDriver\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/conf/my-application-conf.json\"), \" file also needs to be up\\xADdated, not for the tests, but to run the ap\\xADpli\\xADca\\xADtion:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"http.port\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8082\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"url\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"jdbc:hsqldb:file:db/whiskies\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"driver_class\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"org.hsqldb.jdbcDriver\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"The JDBC url is a bit dif\\xADfer\\xADent in this last file, as we store the data\\xADbase on the file sys\\xADtem.\"), mdx(\"h2\", {\n    \"id\": \"show-time\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#show-time\"\n  })), \"Show time!\"), mdx(\"p\", null, \"Let\\u2019s now build our ap\\xADpli\\xADca\\xADtion:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mvn clean package\")), mdx(\"p\", null, \"As we didn\\u2019t change the API (nei\\xADther the pub\\xADlic java one nor the REST), test should run smoothly.\"), mdx(\"p\", null, \"Then launch the ap\\xADpli\\xADca\\xADtion with:\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"java -jar target/my-first-app-1.0-SNAPSHOT-fat.jar -conf src/main/conf/my-application-conf.json \")), mdx(\"p\", null, \"Open your browser to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8082/assets/index.html\"), \", and you should see the ap\\xADpli\\xADca\\xADtion using the data\\xADbase. This time the prod\\xADucts are stored in a data\\xADbase per\\xADsisted on the file sys\\xADtem. So, if we stop and restart the ap\\xADpli\\xADca\\xADtion, the data is re\\xADstored.\"), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"In this post, we saw how you can use JDBC data\\xADbase with vert.x, and thus with\\xADout too much bur\\xADden. You may have been sur\\xADprised by the asyn\\xADchro\\xADnous de\\xADvel\\xADop\\xADment model, but once you start using it, it\\u2019s hard to come back.\"), mdx(\"p\", null, \"In the \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/combine-vert-x-and-mongo-to-build-a-giant/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"next post\")), \", we see how the same ap\\xADpli\\xADca\\xADtion can use Mon\\xADgoDB in\\xADstead of HSQL.\"), mdx(\"p\", null, \"Stay tuned, and happy cod\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eFi­nally, back… This post is the fifth post of the in­tro­duc­tion to vert.x blog se­ries, after a not-​that-small break. In this post we are going to see how we can use JDBC in a vert.x ap­pli­ca­tion, and this, using the asyn­chro­nous API pro­vided by the \u003ca href=\"http://vertx.io/docs/vertx-jdbc-client/java/\"\u003evertx-​jdbc-client\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"previously-in-the-introduction-to-vertx-series\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#previously-in-the-introduction-to-vertx-series\"\u003e\u003c/a\u003ePreviously in the introduction to vert.x series\u003c/h2\u003e\u003cp\u003eAs it was quite some time since the last post, let’s start by re­fresh­ing our mind about the four pre­vi­ous posts:\u003c/p\u003e\u003col\u003e\u003cli\u003eThe \u003ca href=\"/blog/my-first-vert-x-3-application/\"\u003efirst post\u003c/a\u003e has de­scribed how to build a vert.x ap­pli­ca­tion with Maven and ex­e­cute unit tests.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/vert-x-application-configuration/\"\u003esec­ond post\u003c/a\u003e has de­scribed how this ap­pli­ca­tion can be­come con­fig­urable.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/some-rest-with-vert-x/\"\u003ethird post\u003c/a\u003e has in­tro­duced \u003ca href=\"http://vertx.io/docs/vertx-web/java/\"\u003evertx-​web\u003c/a\u003e, and a small col­lec­tion man­age­ment ap­pli­ca­tion has been de­vel­oped. This ap­pli­ca­tion of­fers a REST API used by a HTML/JavaScript fron­tend.\u003c/li\u003e\u003cli\u003eThe \u003ca href=\"/blog/unit-and-integration-tests/\"\u003epre­vi­ous post\u003c/a\u003e has pre­sented how you can run in­te­gra­tion tests to en­sure the be­hav­ior of your ap­pli­ca­tion.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eIn this post, back to code. The cur­rent ap­pli­ca­tion uses an in-​memory map to store the prod­ucts. It’s time to use a data­base. In this post we are going to use \u003ca href=\"http://hsqldb.org/\"\u003eHSQL\u003c/a\u003e, but you can use any data­base pro­vid­ing a JDBC dri­ver. In­ter­ac­tions with the data­base will be asyn­chro­nous and made using the \u003ca href=\"http://vertx.io/docs/vertx-jdbc-client/java/\"\u003evertx-​jdbc-client\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe code of this post are avail­able on this Github \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app\"\u003eproject\u003c/a\u003e, in the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/tree/post-5\"\u003epost-5 branch\u003c/a\u003e branch.\u003c/p\u003e\u003ch2 id=\"asynchronous\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#asynchronous\"\u003e\u003c/a\u003eAsynchronous?\u003c/h2\u003e\u003cp\u003eOne of the vert.x char­ac­ter­is­tics is being asyn­chro­nous. With an asyn­chro­nous API, you don’t wait for a re­sult, but you are no­ti­fied when this re­sult is ready. Just to il­lus­trate this, let’s take a very sim­ple ex­am­ple.\u003c/p\u003e\u003cp\u003eLet’s imag­ine an \u003ccode\u003eadd\u003c/code\u003e method. Tra­di­tion­ally, you would use it like this: \u003ccode\u003eint r = add(1, 1)\u003c/code\u003e. This is a syn­chro­nous API as you are wait­ing for the re­sult. An asyn­chro­nous ver­sion of this API would be: \u003ccode\u003eadd(1, 1, r -\u0026gt; { /* do something with the result */ })\u003c/code\u003e. In this ver­sion, you pass a \u003ccode\u003eHandler\u003c/code\u003e called when the re­sult has been com­puted. The method does not re­turn any­thing, and could be im­ple­mented as:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eadd\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e a, \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e b, Handler\u0026lt;Integer\u0026gt; resultHandler)\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e r = a + b;\n    resultHandler.handle(r);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eJust to avoid mis­con­cep­tions, asyn­chro­nous API are not about threads. As we can see in the \u003ccode\u003eadd\u003c/code\u003e ex­am­ple, there are no threads in­volved.\u003c/p\u003e\u003ch2 id=\"jdbc-yes-but-asynchronous\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#jdbc-yes-but-asynchronous\"\u003e\u003c/a\u003eJDBC yes, but asynchronous\u003c/h2\u003e\u003cp\u003eSo, now that we have seen some ba­sics about asyn­chro­nous API, let’s have a look to the vertx-​jdbc-client. This com­po­nent lets us in­ter­act with a data­base through a JDBC dri­ver. These in­ter­ac­tions are asyn­chro­nous, so when you were doing:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eString sql = \u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM Products\u0026quot;\u003c/span\u003e;\nResultSet rs = stmt.executeQuery(sql);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eit will be:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003econnection.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM Products\u0026quot;\u003c/span\u003e, result -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// do something with the result\u003c/span\u003e\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis model is more ef­fi­cient as it avoids wait­ing for the re­sult. You are no­ti­fied when the re­sult is avail­able.\u003c/p\u003e\u003cp\u003eLet’s now mod­ify our ap­pli­ca­tion to use a data­base to store our prod­ucts.\u003c/p\u003e\u003ch2 id=\"some-maven-dependencies\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#some-maven-dependencies\"\u003e\u003c/a\u003eSome maven dependencies\u003c/h2\u003e\u003cp\u003eThe first things we need to do it to de­clare two new Maven de­pen­den­cies in our \u003ccode\u003epom.xml\u003c/code\u003e file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-jdbc-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.1.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eorg.hsqldb\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003ehsqldb\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e2.3.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe first de­pen­dency pro­vides the vertx-​jdbc-client, while the sec­ond one pro­vide the HSQL JDBC dri­ver. If you want to use an­other data­base, change this de­pen­dency. You will also need to change the JDBC url and JDBC dri­ver class name later.\u003c/p\u003e\u003ch2 id=\"initializing-the-jdbc-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#initializing-the-jdbc-client\"\u003e\u003c/a\u003eInitializing the JDBC client\u003c/h2\u003e\u003cp\u003eNow that we have added these de­pen­den­cies, it’s time to cre­ate our JDBC client:\u003c/p\u003e\u003cp\u003eIn the \u003ccode\u003eMyFirstVerticle\u003c/code\u003e class, de­clare a new field \u003ccode\u003eJDBCClient jdbc;\u003c/code\u003e, and add the fol­low­ing line at the be­gin­ning of the \u003ccode\u003estart\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003ejdbc = JDBCClient.createShared(vertx, config(), \u003cspan class=\"hljs-string\"\u003e\u0026quot;My-Whisky-Collection\u0026quot;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis cre­ates an in­stance of JDBC client, con­fig­ured with the con­fig­u­ra­tion pro­vided to the ver­ti­cle. To work cor­rectly this con­fig­u­ra­tion needs to pro­vide:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cem\u003eurl\u003c/em\u003e - the JDBC url such as \u003ccode\u003ejdbc:hsqldb:mem:db?shutdown=true\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003cem\u003edri­ver_class\u003c/em\u003e - the JDBC dri­ver class such as \u003ccode\u003eorg.hsqldb.jdbcDriver\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eOk, we have the client, we need a con­nec­tion to the data­base. This is achieved using the \u003ccode\u003ejdbc.getConnection\u003c/code\u003e that take a \u003ccode\u003eHandler\u0026lt;AsyncResult\u0026lt;SQLConnection\u0026gt;\u0026gt;\u003c/code\u003e as pa­ra­me­ter. Let’s have a deeper look to this type. It’s a \u003ccode\u003eHandler\u003c/code\u003e, so it is called when the re­sult is ready. This re­sult is an in­stance of \u003ccode\u003eAsyncResult\u0026lt;SQLConnection\u0026gt;\u003c/code\u003e. \u003ccode\u003eAsyncResult\u003c/code\u003e is a struc­ture pro­vided by vert.x that lets us know if the op­er­a­tion was com­pleted suc­cess­fully or failed. In case of suc­cess, it pro­vides the re­sult, here an in­stance of \u003ccode\u003eSQLConnection\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eWhen you re­ceive an in­stance of \u003ccode\u003eAsyncResult\u003c/code\u003e, your code gen­er­ally looks like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.failed()) {\n  System.err.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;The operation has failed...: \u0026quot;\u003c/span\u003e\n      + ar.cause().getMessage());\n} \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// Use the result:\u003c/span\u003e\n  result = ar.result();\n }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo, let’s go back to our \u003ccode\u003eSQLConnection\u003c/code\u003e. We need to re­trieve it, and then start the rest of the ap­pli­ca­tion. This changes how we start the ap­pli­ca­tion, as it will be­come asyn­chro­nous. So, if we di­vide our startup se­quence into small chunks it would be some­thing like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003estartBackend(\n (connection) -\u0026gt; createSomeData(connection,\n     (nothing) -\u0026gt; startWebApp(\n         (http) -\u0026gt; completeStartup(http, fut)\n     ), fut\n ), fut);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ewith:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003ccode\u003estartBackend\u003c/code\u003e - re­trieves a \u003ccode\u003eSQLConnection\u003c/code\u003e and then calls the next step\u003c/li\u003e\u003cli\u003e\u003ccode\u003ecreateSomeData\u003c/code\u003e - ini­tial­izes the data­base and in­serts some data. When done, it calls the next step\u003c/li\u003e\u003cli\u003e\u003ccode\u003estartWebApp\u003c/code\u003e - starts our web ap­pli­ca­tion\u003c/li\u003e\u003cli\u003e\u003ccode\u003ecompleteStartup\u003c/code\u003e - fi­nal­izes our start se­quence\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003ccode\u003efut\u003c/code\u003e is the com­ple­tion fu­ture passed by vert.x that let us re­port when we are started, or if an issue has been en­coun­tered while start­ing.\u003c/p\u003e\u003cp\u003eLet’s have a look to \u003ccode\u003estartBackend\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estartBackend\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Handler\u0026lt;AsyncResult\u0026lt;SQLConnection\u0026gt;\u0026gt; next, Future\u0026lt;Void\u0026gt; fut)\u003c/span\u003e \u003c/span\u003e{\n  jdbc.getConnection(ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.failed()) {\n      fut.fail(ar.cause());\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      next.handle(Future.succeededFuture(ar.result()));\n    }\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis method re­trieves a \u003ccode\u003eSQLConnection\u003c/code\u003e, check whether this op­er­a­tion suc­ceeded. If so, it calls the next step. In case of fail­ure, it re­ports it.\u003c/p\u003e\u003cp\u003eThe other meth­ods fol­low the same pat­tern: 1) check if the last op­er­a­tion has suc­ceeded, 2) do the task, 3) call the next step.\u003c/p\u003e\u003ch3 id=\"a-bit-of-sql\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#a-bit-of-sql\"\u003e\u003c/a\u003eA bit of SQL…\u003c/h3\u003e\u003cp\u003eOur client is ready, let’s now write some SQL state­ments. Let’s start by the \u003ccode\u003ecreateSomeData\u003c/code\u003e method that is part of the startup se­quence:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ecreateSomeData\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(AsyncResult\u0026lt;SQLConnection\u0026gt; result,\n    Handler\u0026lt;AsyncResult\u0026lt;Void\u0026gt;\u0026gt; next, Future\u0026lt;Void\u0026gt; fut)\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (result.failed()) {\n      fut.fail(result.cause());\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      SQLConnection connection = result.result();\n      connection.execute(\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;CREATE TABLE IF NOT EXISTS Whisky (id INTEGER IDENTITY, name varchar(100), \u0026quot;\u003c/span\u003e +\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;origin varchar(100))\u0026quot;\u003c/span\u003e,\n          ar -\u0026gt; {\n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.failed()) {\n              fut.fail(ar.cause());\n              connection.close();\n              \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n            }\n            connection.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM Whisky\u0026quot;\u003c/span\u003e, select -\u0026gt; {\n              \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (select.failed()) {\n                fut.fail(ar.cause());\n                connection.close();\n                \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n              }\n              \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (select.result().getNumRows() == \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) {\n                insert(\n                    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bowmore 15 Years Laimrig\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Scotland, Islay\u0026quot;\u003c/span\u003e),\n                    connection,\n                    (v) -\u0026gt; insert(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Talisker 57° North\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Scotland, Island\u0026quot;\u003c/span\u003e),\n                        connection,\n                        (r) -\u0026gt; {\n                          next.handle(Future.\u0026lt;Void\u0026gt;succeededFuture());\n                          connection.close();\n                        }));                                                    \n              } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                next.handle(Future.\u0026lt;Void\u0026gt;succeededFuture());\n                connection.close();\n              }\n            });\n          });\n    }\n  }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis method checks that the \u003ccode\u003eSQLConnection\u003c/code\u003e is avail­able and then start ex­e­cut­ing some SQL state­ments. First, it cre­ates the ta­bles if there are not there yet. As you can see, the method called is struc­tured as fol­lows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003econnection.execute(\n    SQL statement,\n    handler called when the statement has been executed\n)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe han­dler re­ceives an \u003ccode\u003eAsyncResult\u0026lt;Void\u0026gt;\u003c/code\u003e, \u003cem\u003ei.e.\u003c/em\u003e a no­ti­fi­ca­tion of the com­ple­tion with­out an ac­tual re­sult.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eClosing connection\u003c/div\u003e\u003cp\u003eDon’t for­get to close the SQL con­nec­tion when you are done. The con­nec­tion will be given back to the con­nec­tion pool and be reused.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eIn the code of this han­dler, we check whether or not the state­ment has been ex­e­cuted cor­rectly, and if so we check to see if the table al­ready con­tains some data, if not, it in­serts data using the \u003ccode\u003einsert\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003einsert\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(Whisky whisky, SQLConnection connection, Handler\u0026lt;AsyncResult\u0026lt;Whisky\u0026gt;\u0026gt; next)\u003c/span\u003e \u003c/span\u003e{\n  String sql = \u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Whisky (name, origin) VALUES ?, ?\u0026quot;\u003c/span\u003e;\n  connection.updateWithParams(sql,\n      \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(whisky.getName()).add(whisky.getOrigin()),\n      (ar) -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.failed()) {\n          next.handle(Future.failedFuture(ar.cause()));\n          \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n        }\n        UpdateResult result = ar.result();\n        \u003cspan class=\"hljs-comment\"\u003e// Build a new whisky instance with the generated id.\u003c/span\u003e\n        Whisky w = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(result.getKeys().getInteger(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e), whisky.getName(), whisky.getOrigin());\n        next.handle(Future.succeededFuture(w));\n      });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis method uses the \u003ccode\u003eupdateWithParams\u003c/code\u003e method with an \u003cem\u003eIN­SERT\u003c/em\u003e state­ment, and pass val­ues. This ap­proach avoids SQL in­jec­tion. Once the the state­ment has been ex­e­cuted, we cre­ates a new \u003ccode\u003eWhisky\u003c/code\u003e ob­ject with the cre­ated (auto-​generated) id.\u003c/p\u003e\u003ch2 id=\"some-rest-with-a-pinch-of-sql\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#some-rest-with-a-pinch-of-sql\"\u003e\u003c/a\u003eSome REST with a pinch of SQL\u003c/h2\u003e\u003cp\u003eThe method de­scribed  above is part of our start se­quence. But what about the method in­voked by our REST API. Let’s have a look to the \u003ccode\u003egetAll\u003c/code\u003e method. This method is called by the web front-​end to re­trieve all stored prod­ucts:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egetAll\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext routingContext)\u003c/span\u003e \u003c/span\u003e{\n    jdbc.getConnection(ar -\u0026gt; {\n      SQLConnection connection = ar.result();\n      connection.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM Whisky\u0026quot;\u003c/span\u003e, result -\u0026gt; {\n        List\u0026lt;Whisky\u0026gt; whiskies = result.result().getRows().stream().map(Whisky::\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e).collect(Collectors.toList());\n        routingContext.response()\n            .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json; charset=utf-8\u0026quot;\u003c/span\u003e)\n            .end(Json.encodePrettily(whiskies));\n        connection.close(); \u003cspan class=\"hljs-comment\"\u003e// Close the connection     \u003c/span\u003e\n      });\n    });\n  }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis method gets a \u003ccode\u003eSQLConnection\u003c/code\u003e, and then issue a query. Once the re­sult has been re­trieved it writes the HTTP re­sponse as be­fore. The \u003ccode\u003egetOne\u003c/code\u003e, \u003ccode\u003edeleteOne\u003c/code\u003e, \u003ccode\u003eupdateOne\u003c/code\u003e and \u003ccode\u003eaddOne\u003c/code\u003e meth­ods fol­low the same pat­tern. No­tice that the con­nec­tion can be closed after the re­sponse has been writ­ten.\u003c/p\u003e\u003cp\u003eLet’s have a look to the re­sult pro­vided to the han­dler passed to the \u003ccode\u003equery\u003c/code\u003e method. It gets a \u003ccode\u003eResultSet\u003c/code\u003e, which con­tains the query re­sult. Each row is a \u003ccode\u003eJsonObject\u003c/code\u003e, so if your data ob­ject has a con­struc­tor tak­ing a \u003ccode\u003eJsonObject\u003c/code\u003e as unique ar­gu­ment, cre­at­ing there ob­jects is straight­for­ward.\u003c/p\u003e\u003ch2 id=\"test-test-and-test-again\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#test-test-and-test-again\"\u003e\u003c/a\u003eTest, test, and test again\u003c/h2\u003e\u003cp\u003eWe need to slightly up­date our tests to con­fig­ure the \u003ccode\u003eJDBCClient\u003c/code\u003e. In the \u003ccode\u003eMyFirstVertilceTest\u003c/code\u003e class, change the \u003ccode\u003eDeploymentOption\u003c/code\u003e ob­ject cre­ated in the \u003ccode\u003esetUp\u003c/code\u003e method to be:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eDeploymentOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e DeploymentOptions()\n    .setConfig(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e, port)\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;url\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;jdbc:hsqldb:mem:test?shutdown=true\u0026quot;\u003c/span\u003e)\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;driver_class\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;org.hsqldb.jdbcDriver\u0026quot;\u003c/span\u003e)\n    );\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn ad­di­tion to the \u003ccode\u003ehttp.port\u003c/code\u003e, we also put the JDBC url and the class of the JDBC dri­ver. We use an in-​memory data­base for tests.\u003c/p\u003e\u003cp\u003eThe same mod­i­fi­ca­tion needs to be done in the \u003ccode\u003esrc/test/resources/my-it-config.json\u003c/code\u003e file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e: ${http.port},\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;url\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;jdbc:hsqldb:mem:it-test?shutdown=true\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;driver_class\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;org.hsqldb.jdbcDriver\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ccode\u003esrc/main/conf/my-application-conf.json\u003c/code\u003e file also needs to be up­dated, not for the tests, but to run the ap­pli­ca­tion:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e8082\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;url\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;jdbc:hsqldb:file:db/whiskies\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;driver_class\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;org.hsqldb.jdbcDriver\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe JDBC url is a bit dif­fer­ent in this last file, as we store the data­base on the file sys­tem.\u003c/p\u003e\u003ch2 id=\"show-time\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#show-time\"\u003e\u003c/a\u003eShow time!\u003c/h2\u003e\u003cp\u003eLet’s now build our ap­pli­ca­tion:\u003c/p\u003e\u003cp\u003e\u003ccode\u003emvn clean package\u003c/code\u003e\u003c/p\u003e\u003cp\u003eAs we didn’t change the API (nei­ther the pub­lic java one nor the REST), test should run smoothly.\u003c/p\u003e\u003cp\u003eThen launch the ap­pli­ca­tion with:\u003c/p\u003e\u003cp\u003e\u003ccode\u003ejava -jar target/my-first-app-1.0-SNAPSHOT-fat.jar -conf src/main/conf/my-application-conf.json \u003c/code\u003e\u003c/p\u003e\u003cp\u003eOpen your browser to \u003ccode\u003ehttp://localhost:8082/assets/index.html\u003c/code\u003e, and you should see the ap­pli­ca­tion using the data­base. This time the prod­ucts are stored in a data­base per­sisted on the file sys­tem. So, if we stop and restart the ap­pli­ca­tion, the data is re­stored.\u003c/p\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eIn this post, we saw how you can use JDBC data­base with vert.x, and thus with­out too much bur­den. You may have been sur­prised by the asyn­chro­nous de­vel­op­ment model, but once you start using it, it’s hard to come back.\u003c/p\u003e\u003cp\u003eIn the \u003ca href=\"/blog/combine-vert-x-and-mongo-to-build-a-giant/\"\u003enext post\u003c/a\u003e, we see how the same ap­pli­ca­tion can use Mon­goDB in­stead of HSQL.\u003c/p\u003e\u003cp\u003eStay tuned, and happy cod­ing!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"us","tf":22},{"term":"jdbc","tf":20},{"term":"method","tf":19},{"term":"applic","tf":17},{"term":"let","tf":16},{"term":"post","tf":15},{"term":"databas","tf":13},{"term":"result","tf":13},{"term":"asynchron","tf":12},{"term":"start","tf":11},{"term":"api","tf":9},{"term":"provid","tf":9},{"term":"client","tf":9},{"term":"test","tf":9},{"term":"call","tf":8},{"term":"need","tf":8},{"term":"not","tf":7},{"term":"creat","tf":7},{"term":"driver","tf":6},{"term":"look","tf":6},{"term":"file","tf":6},{"term":"sql","tf":6},{"term":"back","tf":5},{"term":"time","tf":5},{"term":"configur","tf":5}]},{"filename":"blog/2015-10-08-vert-x-3-1-0-is-released.mdx","date":"2015-10-08","slug":"vert-x-3-1-0-is-released","meta":{"title":"Vert.x 3.1.0 is released!","category":"releases","authors":[{"name":"Tim Fox","github_id":"purplefox"}],"summary":"I'm pleased to announce the release of Vert.x 3.1!"},"readingTime":{"text":"2 min read","minutes":1.095,"time":65700,"words":219},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I\\u2019m pleased to an\\xADnounce the re\\xADlease of Vert.x 3.1!\"), mdx(\"p\", null, \"Some of the high\\xADlights of this re\\xADlease in\\xADclude:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-sync/java/\"\n  }), \"Vertx-\\u200Bsync\"), \" is a set of util\\xADi\\xADties that allow you to per\\xADform asyn\\xADchro\\xADnous\\nop\\xADer\\xADa\\xADtions and re\\xADceive events in a syn\\xADchro\\xADnous way, but with\\xADout block\\xADing ker\\xADnel threads.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-stomp/java/\"\n  }), \"Vertx-\\u200Bstomp\"), \" is an im\\xADple\\xADmen\\xADta\\xADtion of a STOMP server and client.\\nYou can use the STOMP server with other clients and use the STOMP client with other servers.\\nThe server and the client sup\\xADports the ver\\xADsion 1.0, 1.1 and 1.2 of the STOMP pro\\xADto\\xADcol.\\nThe STOMP server can also be used as a bridge with the\\nvert.x event bus.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/vertx-shell/java/\"\n  }), \"Vertx-\\u200Bshell\"), \" is a com\\xADmand line in\\xADter\\xADface for the Vert.x run\\xADtime avail\\xADable from\\nreg\\xADu\\xADlar ter\\xADmi\\xADnals using dif\\xADfer\\xADent pro\\xADto\\xADcols.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Re-\\u200Bimplementation of the Starter class and re\\xADlated func\\xADtion\\xADal\\xADity. And now re\\xADde\\xADploy is back!\"))), mdx(\"p\", null, \"Full re\\xADlease notes can be found here:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.1-Release-Notes\"\n  }), \"https://github.com/vert-\\u200Bx3/wiki/wiki/3.1-\\u200BRelease-Notes\")), mdx(\"p\", null, \"Break\\xADing changes here:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/3.1.0---Breaking-changes\"\n  }), \"https://github.com/vert-\\u200Bx3/wiki/wiki/3.1.0-\\u200B\\u2014Breaking-changes\")), mdx(\"p\", null, \"NPM for the event-\\u200Bbus client here:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-eventbus-client\"\n  }), \"https://www.npmjs.com/pack\\xADage/vertx3-\\u200Beventbus-client\")), mdx(\"p\", null, \"Many thanks to all the com\\xADmit\\xADters and com\\xADmu\\xADnity whose con\\xADtri\\xADbu\\xADtions made this pos\\xADsi\\xADble.\"), mdx(\"p\", null, \"A spe\\xADcial thanks to the full-\\u200Btime team - Clement, Julien and Paulo who put in a lot of work to get this out :)\"), mdx(\"p\", null, \"Next stop is Vert.x 3.2 which we hope to have out be\\xADfore Christ\\xADmas.\"), mdx(\"p\", null, \"The ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.1.0%22\"\n  }), \"Maven Cen\\xADtral\"), \"\\nand you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://bintray.com/vertx/downloads/distribution/3.1.0/view\"\n  }), \"Bin\\xADtray\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eI’m pleased to an­nounce the re­lease of Vert.x 3.1!\u003c/p\u003e\u003cp\u003eSome of the high­lights of this re­lease in­clude:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-sync/java/\"\u003eVertx-​sync\u003c/a\u003e is a set of util­i­ties that allow you to per­form asyn­chro­nous\nop­er­a­tions and re­ceive events in a syn­chro­nous way, but with­out block­ing ker­nel threads.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-stomp/java/\"\u003eVertx-​stomp\u003c/a\u003e is an im­ple­men­ta­tion of a STOMP server and client.\nYou can use the STOMP server with other clients and use the STOMP client with other servers.\nThe server and the client sup­ports the ver­sion 1.0, 1.1 and 1.2 of the STOMP pro­to­col.\nThe STOMP server can also be used as a bridge with the\nvert.x event bus.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e\u003ca href=\"http://vertx.io/docs/vertx-shell/java/\"\u003eVertx-​shell\u003c/a\u003e is a com­mand line in­ter­face for the Vert.x run­time avail­able from\nreg­u­lar ter­mi­nals using dif­fer­ent pro­to­cols.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003eRe-​implementation of the Starter class and re­lated func­tion­al­ity. And now re­de­ploy is back!\u003c/p\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eFull re­lease notes can be found here:\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.1-Release-Notes\"\u003ehttps://github.com/vert-​x3/wiki/wiki/3.1-​Release-Notes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eBreak­ing changes here:\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://github.com/vert-x3/wiki/wiki/3.1.0---Breaking-changes\"\u003ehttps://github.com/vert-​x3/wiki/wiki/3.1.0-​—Breaking-changes\u003c/a\u003e\u003c/p\u003e\u003cp\u003eNPM for the event-​bus client here:\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://www.npmjs.com/package/vertx3-eventbus-client\"\u003ehttps://www.npmjs.com/pack­age/vertx3-​eventbus-client\u003c/a\u003e\u003c/p\u003e\u003cp\u003eMany thanks to all the com­mit­ters and com­mu­nity whose con­tri­bu­tions made this pos­si­ble.\u003c/p\u003e\u003cp\u003eA spe­cial thanks to the full-​time team - Clement, Julien and Paulo who put in a lot of work to get this out :)\u003c/p\u003e\u003cp\u003eNext stop is Vert.x 3.2 which we hope to have out be­fore Christ­mas.\u003c/p\u003e\u003cp\u003eThe ar­ti­facts have been de­ployed to \u003ca href=\"http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.1.0%22\"\u003eMaven Cen­tral\u003c/a\u003e\nand you can get the dis­tri­b­u­tion on \u003ca href=\"https://bintray.com/vertx/downloads/distribution/3.1.0/view\"\u003eBin­tray\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"stomp","tf":6},{"term":"client","tf":6},{"term":"server","tf":5},{"term":"releas","tf":4},{"term":"us","tf":4},{"term":"wiki","tf":4},{"term":"event","tf":3},{"term":"http","tf":3},{"term":"com","tf":3},{"term":"implement","tf":2},{"term":"protocol","tf":2},{"term":"bu","tf":2},{"term":"full","tf":2},{"term":"note","tf":2},{"term":"github","tf":2},{"term":"x3","tf":2},{"term":"break","tf":2},{"term":"chang","tf":2},{"term":"thank","tf":2},{"term":"pleas","tf":1},{"term":"announc","tf":1},{"term":"highlight","tf":1},{"term":"includ","tf":1},{"term":"sync","tf":1},{"term":"set","tf":1}]},{"filename":"blog/2015-09-17-contract-driven-rest-services-with-vert-x3.mdx","date":"2015-09-17","slug":"contract-driven-rest-services-with-vert-x3","meta":{"title":"Contract Driven REST Services with Vert.x3","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"We see a new trend in development where we are shifting from developing applications to APIs. More and more we see services being offered as REST APIs that we are allowed to consume."},"readingTime":{"text":"8 min read","minutes":7.185,"time":431099.99999999994,"words":1437},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We see a new trend in de\\xADvel\\xADop\\xADment where we are shift\\xADing from de\\xADvel\\xADop\\xADing ap\\xADpli\\xADca\\xADtions to de\\xADvelop APIs. More and more we see ser\\xADvices being of\\xADfered as REST APIs that we are al\\xADlowed to con\\xADsume and we al\\xADready see this trend from the big names in the in\\xADdus\\xADtry, e.g.: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developers.facebook.com/\"\n  }), \"Face\\xADbook\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.mediawiki.org/wiki/API:Main_page\"\n  }), \"Wikipedia\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.amazon.com/public/apis\"\n  }), \"Ama\\xADzon\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://dev.twitter.com/overview/documentation\"\n  }), \"Twit\\xADter\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developers.google.com/apis-explorer/#p/\"\n  }), \"Google\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.reddit.com/dev/api\"\n  }), \"Red\\xADdit\"), \" they all offer APIs.\"), mdx(\"p\", null, \"Of course mak\\xADing an REST API using Vert.x is quite sim\\xADple, just use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://vertx.io/docs/#web\"\n  }), \"Vert.x Web\"), \" and you can start writ\\xADing your API in sec\\xADonds, how\\xADever an API with\\xADout doc\\xADu\\xADmen\\xADta\\xADtion is not an API since no de\\xADvel\\xADoper will know how to use it. How\\xADever this is one of the most sen\\xADsi\\xADtive is\\xADsues to tackle in soft\\xADware de\\xADvel\\xADop\\xADment, no\\xADbody likes to write doc\\xADu\\xADmen\\xADta\\xADtion. How\\xADever, in the REST age where REST-\\u200Bbased web-\\u200Bservices are ubiq\\xADui\\xADtous, doc\\xADu\\xADmen\\xADta\\xADtion for pub\\xADlic web-\\u200Bservices is a ne\\xADces\\xADsity. There are a lot of tools out there, two of the most pop\\xADu\\xADlar are with\\xADout a doubt:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://swagger.io\"\n  }), \"Swag\\xADger\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://raml.org\"\n  }), \"RAML\"))), mdx(\"p\", null, \"Both frame\\xADworks have a large ecosys\\xADtem of tools and tool\\xADing around but they tackle the doc\\xADu\\xADmen\\xADta\\xADtion from two dif\\xADfer\\xADent per\\xADspec\\xADtives. While Swag\\xADger is purely a doc\\xADu\\xADmen\\xADta\\xADtion tool it tack\\xADles the prob\\xADlem from bot\\xADtom up and RAML does doc\\xADu\\xADment top down. They both rely on a doc\\xADu\\xADment (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JSON\"), \" for Swag\\xADger, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"YAML\"), \" for RAML).\"), mdx(\"p\", null, \"I\\u2019ll now go over build\\xADing a sim\\xADple Hello World API, doc\\xADu\\xADment it and test it. For this ex\\xADam\\xADple I\\u2019ll choose RAML since it feels more nat\\xADural to the way we code with Vert.x Web.\"), mdx(\"h2\", {\n    \"id\": \"define-the-hello-world-api\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#define-the-hello-world-api\"\n  })), \"Define the Hello World API\"), mdx(\"p\", null, \"We need a con\\xADtract and as with any other de\\xADvel\\xADop\\xADment we need some spec\\xADi\\xADfi\\xADca\\xADtion, You can learn about RAML in its \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://raml.org\"\n  }), \"web\\xADsite\"), \" and quickly see how easy it is to get started. So we start with the fol\\xADlow\\xADing spec\\xADi\\xADfi\\xADca\\xADtion:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-yaml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"#%RAML 0.8\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"title:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"Hello\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"world\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"REST\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"API\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"baseUri:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"http://localhost:8080/\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"version:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"v1\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"/hello:\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"get:\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"responses:\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"200:\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"body:\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"application/json:\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"schema:\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"|\\n              { \\\"$schema\\\": \\\"http://json-schema.org/schema\\\",\\n                \\\"type\\\": \\\"object\\\",\\n                \\\"description\\\": \\\"Hello World Greeting\\\",\\n                \\\"properties\\\": {\\n                  \\\"greeting\\\":  { \\\"type\\\": \\\"string\\\" }\\n                },\\n                \\\"required\\\": [ \\\"greeting\\\" ]\\n              }\\n\"))), mdx(\"p\", null, \"So if you didn\\u2019t un\\xADder\\xADstood why I named RAML as a top down doc\\xADu\\xADmen\\xADta\\xADtion tool, I think it be\\xADcomes clear now. So there are some basic de\\xADf\\xADi\\xADn\\xADi\\xADtion on the top of the file like, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"title\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"baseUri\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"version\"), \" which should be self ex\\xADplana\\xADtory.\"), mdx(\"p\", null, \"And then we start with the API doc\\xADu\\xADmen\\xADta\\xADtion, so we spec\\xADify that at the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"URL\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/hello\"), \" using the HTTP verb \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" you are ex\\xADpected to get a re\\xADsponse with sta\\xADtus code \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"200\"), \" and the body of the re\\xADsponse should have con\\xADtent type \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"application/json\"), \". This is a very min\\xADi\\xADmal doc\\xADu\\xADment, one could go over and spec\\xADify the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://json-schema.org/\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"json schema\")), \" for the re\\xADsponse, input val\\xADues, etc\\u2026, how\\xADever lets just keep it sim\\xADple for this ex\\xADam\\xADple.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"If you do not like to write yaml in your ed\\xADi\\xADtor you can al\\xADways use the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://raml.org/projects.html\"\n  }), \"API De\\xADsigner\"), \" which gives you in\\xADstant feed\\xADback on your API doc\\xADu\\xADment and pro\\xADvides a test\\xADing plat\\xADform.\")), mdx(\"h2\", {\n    \"id\": \"implement-the-api\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implement-the-api\"\n  })), \"Implement the API\"), mdx(\"p\", null, \"So you got your con\\xADtract, time to im\\xADple\\xADment it, this is a very sim\\xADple API so I\\u2019ll jump to the code im\\xADme\\xADdi\\xADately:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Router router = Router.router(vertx);\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \").handler(rc -\u003e {\\n      rc.response()\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \")\\n          .end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"greeting\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello World!\\\"\"), \").encode());\\n    });\\n\\n    vertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n  }\\n}\\n\")), mdx(\"p\", null, \"As you can see the code re\\xADsem\\xADbles the con\\xADtract doc\\xADu\\xADment, when there is a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \" re\\xADquest to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/hello\"), \" we send to the client a empty \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JSON\"), \" doc\\xADu\\xADment \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{}\"), \".\"), mdx(\"h2\", {\n    \"id\": \"are-we-done\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#are-we-done\"\n  })), \"Are we done?\"), mdx(\"p\", null, \"The an\\xADswer is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO!!!\"), \" how can we be sure that our im\\xADple\\xADmen\\xADta\\xADtion does com\\xADply to the con\\xADtract? We need to test. As I wrote be\\xADfore there is no spe\\xADcific sup\\xADport for Vert.x from RAML or other tools how\\xADever in this case it is not a prob\\xADlem we can still test our code with\\xADout hav\\xADing the need to im\\xADple\\xADment a test frame\\xADwork from the ground up.\"), mdx(\"h2\", {\n    \"id\": \"testing-our-contract\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#testing-our-contract\"\n  })), \"Testing our contract\"), mdx(\"p\", null, \"The ini\\xADtial step is to setup a test, this should be triv\\xADial we are using Java (al\\xADthough we could test any of Vert.x\\nsup\\xADported lan\\xADguages using the same tech\\xADnique). We cre\\xADate a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://junit.org/\"\n  }), \"JUnit\"), \" unit test.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"For this ex\\xADam\\xADple, I will be using JUnit in\\xADstead of Vert.x Test mostly to let you know that Vert.x isn\\u2019t an opin\\xADion\\xADated frame\\xADwork, so you are free to choose the tool that best fits you.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"APITest\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@BeforeClass\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"bootApp\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Runner.run(App.class);\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"testHelloEndpoint\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n  }\\n}\\n\")), mdx(\"p\", null, \"So at this mo\\xADment you have a sim\\xADple test, I\\u2019ll share the code of the run\\xADner class (ba\\xADsi\\xADcally it just in\\xADstan\\xADti\\xADates a\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Vertx\"), \" in\\xADstance and load the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"verticle\"), \" we just im\\xADple\\xADmented above) and has a empty test \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"testHelloEndpoint\"), \".\"), mdx(\"h3\", {\n    \"id\": \"load-the-api-definition-into-the-test\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#load-the-api-definition-into-the-test\"\n  })), \"Load the API definition into the test\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"APITest\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" RamlDefinition api = RamlLoaders.fromClasspath()\\n        .load(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/hello.raml\\\"\"), \")\\n        .assumingBaseUri(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost:8080/\\\"\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" CheckingWebTarget checking;\\n\\n  ...\\n}\\n\")), mdx(\"p\", null, \"So the first step is to load the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"API\"), \" de\\xADf\\xADi\\xADn\\xADi\\xADtion into our test and have a ref\\xADer\\xADence to a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CheckingWebTarget\"), \" ob\\xADject. The check\\xADing ob\\xADject is where you can per\\xADform as\\xADser\\xADtions, but to do this we need some client make REST calls in order to test.\"), mdx(\"h3\", {\n    \"id\": \"create-a-rest-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#create-a-rest-client\"\n  })), \"Create a REST client\"), mdx(\"p\", null, \"There are many op\\xADtions for this, you could use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JAX-RS\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RestAssured\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RestEasy\"), \", etc\\u2026 so I\\u2019ll pick \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RestEasy\"), \" for now:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"APITest\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" RamlDefinition api = RamlLoaders.fromClasspath()\\n      .load(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/hello.raml\\\"\"), \")\\n      .assumingBaseUri(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost:8080/\\\"\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" ResteasyClient client = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ResteasyClientBuilder().build();\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" CheckingWebTarget checking;\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@BeforeClass\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"bootApp\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Runner.run(App.class);\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Before\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"createTarget\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    checking = api.createWebTarget(client.target(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost:8080\\\"\"), \"));\\n  }\\n\\n  ...\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"implement-the-test\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implement-the-test\"\n  })), \"Implement the test\"), mdx(\"p\", null, \"All of the boil\\xADer\\xADplate code is in place and if you look at the pre\\xADvi\\xADous sec\\xADtion you will see that it wasn\\u2019t that bad, just a few lines and you loaded the RAML con\\xADtract, cre\\xADated a REST client and started up your ap\\xADpli\\xADca\\xADtion and all this under ~10 lines of code.\"), mdx(\"p\", null, \"So lets fin\\xADish and im\\xADple\\xADment the ver\\xADi\\xADfi\\xADca\\xADtion of the con\\xADtract:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"APITest\"), \" \"), \"{\\n  ...\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"testHelloEndpoint\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    checking.path(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \").request().get();\\n    Assert.assertThat(checking.getLastReport(), RamlMatchers.hasNoViolations());\\n  }\\n}\\n\")), mdx(\"p\", null, \"Once you run your tests, you will see:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-css\"\n  }), \"13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.200\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"o\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".a\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".h\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".i\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".conn\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".DefaultClientConnection\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Sending\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"request\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"GET\"), \" /\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"hello\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"HTTP\"), \"/1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".1\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.201\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003e\u003e \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"GET\"), \" /\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"hello\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"HTTP\"), \"/1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".1\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.202\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003e\u003e \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Accept-Encoding\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"gzip\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"deflate\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.202\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003e\u003e \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Host\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"localhost\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":8080\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.202\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003e\u003e \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Connection\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Keep-Alive\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.202\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003e\u003e \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.202\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003e\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"GET\"), \" /\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"hello\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"HTTP\"), \"/1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".1\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.202\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003e\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Accept-Encoding\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"gzip\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"deflate\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.203\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003e\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Host\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"localhost\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":8080\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.203\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003e\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Connection\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Keep-Alive\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.412\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003c\u003c \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"HTTP\"), \"/1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".1\"), \" 200 \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"OK\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.413\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003c\u003c \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"content-type\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"application\"), \"/\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"json\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.413\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003c\u003c \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Content-Length\"), \": 2\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.413\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003c\u003c \\\"\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\r]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[\\\\n]\"), \"\\\"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.414\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"o\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".a\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".h\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".i\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".conn\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".DefaultClientConnection\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Receiving\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"response\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"HTTP\"), \"/1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".1\"), \" 200 \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"OK\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.414\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003c\u003c \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"HTTP\"), \"/1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".1\"), \" 200 \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"OK\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.415\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003c\u003c \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"content-type\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"application\"), \"/\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"json\"), \"\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.415\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".headers\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \" \u003c\u003c \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Content-Length\"), \": 2\\n13\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":09\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-pseudo\"\n  }), \":28.429\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-attr\"\n  }), \"[main]\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"DEBUG\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"org\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".apache\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".http\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".wire\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"-\"), \"  \u003c\u003c \\\"{}\\\"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Tests\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"run\"), \": 1, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Failures\"), \": 0, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Errors\"), \": 0, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Skipped\"), \": 0, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Time\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"elapsed\"), \": 1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-class\"\n  }), \".076\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"sec\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Results\"), \" :\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Tests\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"run\"), \": 1, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Failures\"), \": 0, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Errors\"), \": 0, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-selector-tag\"\n  }), \"Skipped\"), \": 0\\n\")), mdx(\"p\", null, \"And we are done, we now have a API that fol\\xADlow the con\\xADtract, you can now keep de\\xADvel\\xADop\\xADing your API and im\\xADple\\xADmen\\xADta\\xADtion and have a test dri\\xADven ap\\xADproach to be sure that the con\\xADtract is not bro\\xADken.\"), mdx(\"h2\", {\n    \"id\": \"next-steps\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#next-steps\"\n  })), \"Next steps\"), mdx(\"p\", null, \"Until now you have learn how to in\\xADte\\xADgrate RAML into Vert.x and CI, how\\xADever the users of your API will not be able to know much about the API yet since its doc\\xADu\\xADmen\\xADta\\xADtion is not pub\\xADlicly avail\\xADable. So lets pub\\xADlish on\\xADline the doc\\xADu\\xADmen\\xADta\\xADtion of your API, of course if your API is pri\\xADvate you do not need to fol\\xADlow these steps.\"), mdx(\"p\", null, \"In order to do this all we need it to in\\xADclude in our ap\\xADpli\\xADca\\xADtion the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/mulesoft/api-console\"\n  }), \"RAML con\\xADsole\"), \", the fastest way to do this is just down\\xADload a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/mulesoft/api-console/releases\"\n  }), \"re\\xADlease\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/resouces/webroot\"), \" and in the orig\\xADi\\xADnal ap\\xADpli\\xADca\\xADtion Vert.x Router we add a Sta\\xADtic Con\\xADtent Han\\xADdler to serve the con\\xADsole files. Your ap\\xADpli\\xADca\\xADtion source code should look like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Router router = Router.router(vertx);\\n\\n    router.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/hello\\\"\"), \").handler(rc -\u003e {\\n      rc.response()\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \")\\n          .end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"greeting\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello World!\\\"\"), \").encode());\\n    });\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// optionally enable the web console so users can play with your API\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// online from their web browsers\"), \"\\n    router.route().handler(StaticHandler.create());\\n\\n    vertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n  }\\n}\\n\")), mdx(\"p\", null, \"Once you start you ap\\xADpli\\xADca\\xADtion open a browser point\\xADing at the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080?raml=/api/hello.raml\"\n  }), \"con\\xADsole\"), \". Once you do that you should be pre\\xADsented with some\\xADthing sim\\xADi\\xADlar to this:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx3-contract-driven-rest-services/raml-console.png\",\n    \"alt\": \"apiconsole\"\n  }))), mdx(\"h2\", {\n    \"id\": \"article-source-code\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#article-source-code\"\n  })), \"Article source code\"), mdx(\"p\", null, \"You can get the full source code for this ar\\xADti\\xADcle \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/pmlopes/vert-x3-experiments/tree/experiments/raml\"\n  }), \"here\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe see a new trend in de­vel­op­ment where we are shift­ing from de­vel­op­ing ap­pli­ca­tions to de­velop APIs. More and more we see ser­vices being of­fered as REST APIs that we are al­lowed to con­sume and we al­ready see this trend from the big names in the in­dus­try, e.g.: \u003ca href=\"https://developers.facebook.com/\"\u003eFace­book\u003c/a\u003e, \u003ca href=\"https://www.mediawiki.org/wiki/API:Main_page\"\u003eWikipedia\u003c/a\u003e, \u003ca href=\"https://developer.amazon.com/public/apis\"\u003eAma­zon\u003c/a\u003e, \u003ca href=\"https://dev.twitter.com/overview/documentation\"\u003eTwit­ter\u003c/a\u003e, \u003ca href=\"https://developers.google.com/apis-explorer/#p/\"\u003eGoogle\u003c/a\u003e and \u003ca href=\"https://www.reddit.com/dev/api\"\u003eRed­dit\u003c/a\u003e they all offer APIs.\u003c/p\u003e\u003cp\u003eOf course mak­ing an REST API using Vert.x is quite sim­ple, just use \u003ca href=\"http://vertx.io/docs/#web\"\u003eVert.x Web\u003c/a\u003e and you can start writ­ing your API in sec­onds, how­ever an API with­out doc­u­men­ta­tion is not an API since no de­vel­oper will know how to use it. How­ever this is one of the most sen­si­tive is­sues to tackle in soft­ware de­vel­op­ment, no­body likes to write doc­u­men­ta­tion. How­ever, in the REST age where REST-​based web-​services are ubiq­ui­tous, doc­u­men­ta­tion for pub­lic web-​services is a ne­ces­sity. There are a lot of tools out there, two of the most pop­u­lar are with­out a doubt:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"http://swagger.io\"\u003eSwag­ger\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://raml.org\"\u003eRAML\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eBoth frame­works have a large ecosys­tem of tools and tool­ing around but they tackle the doc­u­men­ta­tion from two dif­fer­ent per­spec­tives. While Swag­ger is purely a doc­u­men­ta­tion tool it tack­les the prob­lem from bot­tom up and RAML does doc­u­ment top down. They both rely on a doc­u­ment (\u003ccode\u003eJSON\u003c/code\u003e for Swag­ger, \u003ccode\u003eYAML\u003c/code\u003e for RAML).\u003c/p\u003e\u003cp\u003eI’ll now go over build­ing a sim­ple Hello World API, doc­u­ment it and test it. For this ex­am­ple I’ll choose RAML since it feels more nat­ural to the way we code with Vert.x Web.\u003c/p\u003e\u003ch2 id=\"define-the-hello-world-api\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#define-the-hello-world-api\"\u003e\u003c/a\u003eDefine the Hello World API\u003c/h2\u003e\u003cp\u003eWe need a con­tract and as with any other de­vel­op­ment we need some spec­i­fi­ca­tion, You can learn about RAML in its \u003ca href=\"http://raml.org\"\u003eweb­site\u003c/a\u003e and quickly see how easy it is to get started. So we start with the fol­low­ing spec­i­fi­ca­tion:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e#%RAML 0.8\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003etitle:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eHello\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eworld\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eREST\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eAPI\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebaseUri:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehttp://localhost:8080/\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eversion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ev1\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e/hello:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eget:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eresponses:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e200:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ebody:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eapplication/json:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eschema:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n              { \u0026quot;$schema\u0026quot;: \u0026quot;http://json-schema.org/schema\u0026quot;,\n                \u0026quot;type\u0026quot;: \u0026quot;object\u0026quot;,\n                \u0026quot;description\u0026quot;: \u0026quot;Hello World Greeting\u0026quot;,\n                \u0026quot;properties\u0026quot;: {\n                  \u0026quot;greeting\u0026quot;:  { \u0026quot;type\u0026quot;: \u0026quot;string\u0026quot; }\n                },\n                \u0026quot;required\u0026quot;: [ \u0026quot;greeting\u0026quot; ]\n              }\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo if you didn’t un­der­stood why I named RAML as a top down doc­u­men­ta­tion tool, I think it be­comes clear now. So there are some basic de­f­i­n­i­tion on the top of the file like, \u003ccode\u003etitle\u003c/code\u003e, \u003ccode\u003ebaseUri\u003c/code\u003e and \u003ccode\u003eversion\u003c/code\u003e which should be self ex­plana­tory.\u003c/p\u003e\u003cp\u003eAnd then we start with the API doc­u­men­ta­tion, so we spec­ify that at the \u003ccode\u003eURL\u003c/code\u003e \u003ccode\u003e/hello\u003c/code\u003e using the HTTP verb \u003ccode\u003eGET\u003c/code\u003e you are ex­pected to get a re­sponse with sta­tus code \u003ccode\u003e200\u003c/code\u003e and the body of the re­sponse should have con­tent type \u003ccode\u003eapplication/json\u003c/code\u003e. This is a very min­i­mal doc­u­ment, one could go over and spec­ify the \u003ca href=\"http://json-schema.org/\"\u003e\u003ccode\u003ejson schema\u003c/code\u003e\u003c/a\u003e for the re­sponse, input val­ues, etc…, how­ever lets just keep it sim­ple for this ex­am­ple.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eIf you do not like to write yaml in your ed­i­tor you can al­ways use the \u003ca href=\"http://raml.org/projects.html\"\u003eAPI De­signer\u003c/a\u003e which gives you in­stant feed­back on your API doc­u­ment and pro­vides a test­ing plat­form.\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"implement-the-api\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implement-the-api\"\u003e\u003c/a\u003eImplement the API\u003c/h2\u003e\u003cp\u003eSo you got your con­tract, time to im­ple­ment it, this is a very sim­ple API so I’ll jump to the code im­me­di­ately:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Router router = Router.router(vertx);\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e).handler(rc -\u0026gt; {\n      rc.response()\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)\n          .end(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;greeting\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello World!\u0026quot;\u003c/span\u003e).encode());\n    });\n\n    vertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see the code re­sem­bles the con­tract doc­u­ment, when there is a \u003ccode\u003eGET\u003c/code\u003e re­quest to \u003ccode\u003e/hello\u003c/code\u003e we send to the client a empty \u003ccode\u003eJSON\u003c/code\u003e doc­u­ment \u003ccode\u003e{}\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"are-we-done\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#are-we-done\"\u003e\u003c/a\u003eAre we done?\u003c/h2\u003e\u003cp\u003eThe an­swer is \u003cstrong\u003eNO!!!\u003c/strong\u003e how can we be sure that our im­ple­men­ta­tion does com­ply to the con­tract? We need to test. As I wrote be­fore there is no spe­cific sup­port for Vert.x from RAML or other tools how­ever in this case it is not a prob­lem we can still test our code with­out hav­ing the need to im­ple­ment a test frame­work from the ground up.\u003c/p\u003e\u003ch2 id=\"testing-our-contract\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#testing-our-contract\"\u003e\u003c/a\u003eTesting our contract\u003c/h2\u003e\u003cp\u003eThe ini­tial step is to setup a test, this should be triv­ial we are using Java (al­though we could test any of Vert.x\nsup­ported lan­guages using the same tech­nique). We cre­ate a \u003ca href=\"http://junit.org/\"\u003eJUnit\u003c/a\u003e unit test.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eFor this ex­am­ple, I will be using JUnit in­stead of Vert.x Test mostly to let you know that Vert.x isn’t an opin­ion­ated frame­work, so you are free to choose the tool that best fits you.\u003c/p\u003e\u003c/div\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAPITest\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@BeforeClass\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ebootApp\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Runner.run(App.class);\n  }\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etestHelloEndpoint\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo at this mo­ment you have a sim­ple test, I’ll share the code of the run­ner class (ba­si­cally it just in­stan­ti­ates a\n\u003ccode\u003eVertx\u003c/code\u003e in­stance and load the \u003ccode\u003everticle\u003c/code\u003e we just im­ple­mented above) and has a empty test \u003ccode\u003etestHelloEndpoint\u003c/code\u003e.\u003c/p\u003e\u003ch3 id=\"load-the-api-definition-into-the-test\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#load-the-api-definition-into-the-test\"\u003e\u003c/a\u003eLoad the API definition into the test\u003c/h3\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAPITest\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e RamlDefinition api = RamlLoaders.fromClasspath()\n        .load(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/hello.raml\u0026quot;\u003c/span\u003e)\n        .assumingBaseUri(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:8080/\u0026quot;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e CheckingWebTarget checking;\n\n  ...\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo the first step is to load the \u003ccode\u003eAPI\u003c/code\u003e de­f­i­n­i­tion into our test and have a ref­er­ence to a \u003ccode\u003eCheckingWebTarget\u003c/code\u003e ob­ject. The check­ing ob­ject is where you can per­form as­ser­tions, but to do this we need some client make REST calls in order to test.\u003c/p\u003e\u003ch3 id=\"create-a-rest-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#create-a-rest-client\"\u003e\u003c/a\u003eCreate a REST client\u003c/h3\u003e\u003cp\u003eThere are many op­tions for this, you could use \u003ccode\u003eJAX-RS\u003c/code\u003e, \u003ccode\u003eRestAssured\u003c/code\u003e, \u003ccode\u003eRestEasy\u003c/code\u003e, etc… so I’ll pick \u003ccode\u003eRestEasy\u003c/code\u003e for now:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAPITest\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e RamlDefinition api = RamlLoaders.fromClasspath()\n      .load(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/hello.raml\u0026quot;\u003c/span\u003e)\n      .assumingBaseUri(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:8080/\u0026quot;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e ResteasyClient client = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ResteasyClientBuilder().build();\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e CheckingWebTarget checking;\n\n  \u003cspan class=\"hljs-meta\"\u003e@BeforeClass\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ebootApp\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Runner.run(App.class);\n  }\n\n  \u003cspan class=\"hljs-meta\"\u003e@Before\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ecreateTarget\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    checking = api.createWebTarget(client.target(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:8080\u0026quot;\u003c/span\u003e));\n  }\n\n  ...\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"implement-the-test\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implement-the-test\"\u003e\u003c/a\u003eImplement the test\u003c/h3\u003e\u003cp\u003eAll of the boil­er­plate code is in place and if you look at the pre­vi­ous sec­tion you will see that it wasn’t that bad, just a few lines and you loaded the RAML con­tract, cre­ated a REST client and started up your ap­pli­ca­tion and all this under ~10 lines of code.\u003c/p\u003e\u003cp\u003eSo lets fin­ish and im­ple­ment the ver­i­fi­ca­tion of the con­tract:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAPITest\u003c/span\u003e \u003c/span\u003e{\n  ...\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etestHelloEndpoint\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    checking.path(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e).request().get();\n    Assert.assertThat(checking.getLastReport(), RamlMatchers.hasNoViolations());\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOnce you run your tests, you will see:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-css\"\u003e13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.200\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eo\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.a\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.h\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.i\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.conn\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.DefaultClientConnection\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eSending\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003erequest\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003eGET\u003c/span\u003e /\u003cspan class=\"hljs-selector-tag\"\u003ehello\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eHTTP\u003c/span\u003e/1\u003cspan class=\"hljs-selector-class\"\u003e.1\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.201\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026gt;\u0026gt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003eGET\u003c/span\u003e /\u003cspan class=\"hljs-selector-tag\"\u003ehello\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eHTTP\u003c/span\u003e/1\u003cspan class=\"hljs-selector-class\"\u003e.1\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.202\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026gt;\u0026gt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003eAccept-Encoding\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003egzip\u003c/span\u003e, \u003cspan class=\"hljs-selector-tag\"\u003edeflate\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.202\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026gt;\u0026gt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003eHost\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003elocalhost\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:8080\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.202\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026gt;\u0026gt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003eConnection\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003eKeep-Alive\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.202\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026gt;\u0026gt; \u0026quot;\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.202\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003eGET\u003c/span\u003e /\u003cspan class=\"hljs-selector-tag\"\u003ehello\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eHTTP\u003c/span\u003e/1\u003cspan class=\"hljs-selector-class\"\u003e.1\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.202\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003eAccept-Encoding\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003egzip\u003c/span\u003e, \u003cspan class=\"hljs-selector-tag\"\u003edeflate\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.203\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003eHost\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003elocalhost\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:8080\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.203\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026gt;\u0026gt; \u003cspan class=\"hljs-selector-tag\"\u003eConnection\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003eKeep-Alive\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.412\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026lt;\u0026lt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003eHTTP\u003c/span\u003e/1\u003cspan class=\"hljs-selector-class\"\u003e.1\u003c/span\u003e 200 \u003cspan class=\"hljs-selector-tag\"\u003eOK\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.413\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026lt;\u0026lt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003econtent-type\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003eapplication\u003c/span\u003e/\u003cspan class=\"hljs-selector-tag\"\u003ejson\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.413\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026lt;\u0026lt; \u0026quot;\u003cspan class=\"hljs-selector-tag\"\u003eContent-Length\u003c/span\u003e: 2\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.413\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026lt;\u0026lt; \u0026quot;\u003cspan class=\"hljs-selector-attr\"\u003e[\\r]\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[\\n]\u003c/span\u003e\u0026quot;\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.414\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eo\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.a\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.h\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.i\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.conn\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.DefaultClientConnection\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eReceiving\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eresponse\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003eHTTP\u003c/span\u003e/1\u003cspan class=\"hljs-selector-class\"\u003e.1\u003c/span\u003e 200 \u003cspan class=\"hljs-selector-tag\"\u003eOK\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.414\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026lt;\u0026lt; \u003cspan class=\"hljs-selector-tag\"\u003eHTTP\u003c/span\u003e/1\u003cspan class=\"hljs-selector-class\"\u003e.1\u003c/span\u003e 200 \u003cspan class=\"hljs-selector-tag\"\u003eOK\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.415\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026lt;\u0026lt; \u003cspan class=\"hljs-selector-tag\"\u003econtent-type\u003c/span\u003e: \u003cspan class=\"hljs-selector-tag\"\u003eapplication\u003c/span\u003e/\u003cspan class=\"hljs-selector-tag\"\u003ejson\u003c/span\u003e\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.415\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.headers\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e \u0026lt;\u0026lt; \u003cspan class=\"hljs-selector-tag\"\u003eContent-Length\u003c/span\u003e: 2\n13\u003cspan class=\"hljs-selector-pseudo\"\u003e:09\u003c/span\u003e\u003cspan class=\"hljs-selector-pseudo\"\u003e:28.429\u003c/span\u003e \u003cspan class=\"hljs-selector-attr\"\u003e[main]\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eDEBUG\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eorg\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.apache\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.http\u003c/span\u003e\u003cspan class=\"hljs-selector-class\"\u003e.wire\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003e-\u003c/span\u003e  \u0026lt;\u0026lt; \u0026quot;{}\u0026quot;\n\u003cspan class=\"hljs-selector-tag\"\u003eTests\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003erun\u003c/span\u003e: 1, \u003cspan class=\"hljs-selector-tag\"\u003eFailures\u003c/span\u003e: 0, \u003cspan class=\"hljs-selector-tag\"\u003eErrors\u003c/span\u003e: 0, \u003cspan class=\"hljs-selector-tag\"\u003eSkipped\u003c/span\u003e: 0, \u003cspan class=\"hljs-selector-tag\"\u003eTime\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eelapsed\u003c/span\u003e: 1\u003cspan class=\"hljs-selector-class\"\u003e.076\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003esec\u003c/span\u003e\n\n\u003cspan class=\"hljs-selector-tag\"\u003eResults\u003c/span\u003e :\n\n\u003cspan class=\"hljs-selector-tag\"\u003eTests\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003erun\u003c/span\u003e: 1, \u003cspan class=\"hljs-selector-tag\"\u003eFailures\u003c/span\u003e: 0, \u003cspan class=\"hljs-selector-tag\"\u003eErrors\u003c/span\u003e: 0, \u003cspan class=\"hljs-selector-tag\"\u003eSkipped\u003c/span\u003e: 0\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd we are done, we now have a API that fol­low the con­tract, you can now keep de­vel­op­ing your API and im­ple­men­ta­tion and have a test dri­ven ap­proach to be sure that the con­tract is not bro­ken.\u003c/p\u003e\u003ch2 id=\"next-steps\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#next-steps\"\u003e\u003c/a\u003eNext steps\u003c/h2\u003e\u003cp\u003eUntil now you have learn how to in­te­grate RAML into Vert.x and CI, how­ever the users of your API will not be able to know much about the API yet since its doc­u­men­ta­tion is not pub­licly avail­able. So lets pub­lish on­line the doc­u­men­ta­tion of your API, of course if your API is pri­vate you do not need to fol­low these steps.\u003c/p\u003e\u003cp\u003eIn order to do this all we need it to in­clude in our ap­pli­ca­tion the \u003ca href=\"https://github.com/mulesoft/api-console\"\u003eRAML con­sole\u003c/a\u003e, the fastest way to do this is just down­load a \u003ca href=\"https://github.com/mulesoft/api-console/releases\"\u003ere­lease\u003c/a\u003e to \u003ccode\u003esrc/main/resouces/webroot\u003c/code\u003e and in the orig­i­nal ap­pli­ca­tion Vert.x Router we add a Sta­tic Con­tent Han­dler to serve the con­sole files. Your ap­pli­ca­tion source code should look like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Router router = Router.router(vertx);\n\n    router.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e).handler(rc -\u0026gt; {\n      rc.response()\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)\n          .end(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;greeting\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello World!\u0026quot;\u003c/span\u003e).encode());\n    });\n\n    \u003cspan class=\"hljs-comment\"\u003e// optionally enable the web console so users can play with your API\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// online from their web browsers\u003c/span\u003e\n    router.route().handler(StaticHandler.create());\n\n    vertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOnce you start you ap­pli­ca­tion open a browser point­ing at the \u003ca href=\"http://localhost:8080?raml=/api/hello.raml\"\u003econ­sole\u003c/a\u003e. Once you do that you should be pre­sented with some­thing sim­i­lar to this:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx3-contract-driven-rest-services/raml-console.png\" alt=\"apiconsole\"/\u003e\u003c/p\u003e\u003ch2 id=\"article-source-code\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#article-source-code\"\u003e\u003c/a\u003eArticle source code\u003c/h2\u003e\u003cp\u003eYou can get the full source code for this ar­ti­cle \u003ca href=\"https://github.com/pmlopes/vert-x3-experiments/tree/experiments/raml\"\u003ehere\u003c/a\u003e.\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"api","tf":21},{"term":"test","tf":18},{"term":"document","tf":16},{"term":"code","tf":11},{"term":"raml","tf":10},{"term":"us","tf":9},{"term":"contract","tf":9},{"term":"implement","tf":8},{"term":"develop","tf":7},{"term":"rest","tf":7},{"term":"not","tf":7},{"term":"tool","tf":7},{"term":"need","tf":7},{"term":"applic","tf":6},{"term":"just","tf":6},{"term":"start","tf":6},{"term":"howev","tf":6},{"term":"simpl","tf":5},{"term":"will","tf":5},{"term":"ll","tf":5},{"term":"web","tf":4},{"term":"let","tf":4},{"term":"client","tf":4},{"term":"step","tf":4},{"term":"load","tf":4}]},{"filename":"blog/2015-09-14-writing-secure-vert-x-web-apps.mdx","date":"2015-09-14","slug":"writing-secure-vert-x-web-apps","meta":{"title":"Writing secure Vert.x Web apps","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"This is a starting guide for securing Vert.x web applications. Standard rules and practices apply to Vert.x apps as if they would to any other web framework."},"readingTime":{"text":"5 min read","minutes":4.215,"time":252899.99999999997,"words":843},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This is a start\\xADing guide for se\\xADcur\\xADing vert.x web ap\\xADpli\\xADca\\xADtions. It is by no means a com\\xADpre\\xADhen\\xADsive guide on web ap\\xADpli\\xADca\\xADtion se\\xADcu\\xADrity such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.owasp.org\"\n  }), \"OWASP\"), \". Stan\\xADdard rules and prac\\xADtices apply to vert.x apps as if they would to any other web frame\\xADwork.\"), mdx(\"p\", null, \"The post will cover the items that al\\xADways seem to come up on fo\\xADrums.\"), mdx(\"h2\", {\n    \"id\": \"dont-run-as-root\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#dont-run-as-root\"\n  })), \"Don\\u2019t run as root\"), mdx(\"p\", null, \"It is a com\\xADmon prac\\xADtise that your de\\xADvops team mem\\xADber will con\\xADstantly say, one shall run a ser\\xADvice with the least amount of priv\\xADi\\xADleges nec\\xADes\\xADsary and no more. Al\\xADthough this might sound like folk\\xADlore to less ex\\xADpe\\xADri\\xADenced de\\xADvel\\xADop\\xADers that hit an issue when try\\xADing to run on priv\\xADi\\xADleged ports 80, 443, run\\xADning as root solves it quickly but open a door to big\\xADger prob\\xADlems. Lets look at this code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n\\n    Router router = Router.router(vertx);\\n\\n    router.route().handler(StaticHandler.create(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\"\"), \"));\\n\\n    vertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"80\"), \");\\n  }\\n}\\n\\n\")), mdx(\"p\", null, \"When started with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CWD\"), \" set to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"java -Dvertx.cwd=/ ...\"), \") you just cre\\xADated a sim\\xADple file server for all your server stor\\xADage. Now imag\\xADine that you want to start this ap\\xADpli\\xADca\\xADtion you will hit the error:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-text\"\n  }), \"Aug 26, 2015 2:02:18 PM io.vertx.core.http.impl.HttpServerImpl\\nSEVERE: java.net.SocketException: Permission denied\\n\")), mdx(\"p\", null, \"So if you do now run as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"root\"), \" it will start, how\\xADever in your browser now try to nav\\xADi\\xADgate to: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost/etc/shadow\"), \" con\\xADgrat\\xADu\\xADla\\xADtions you just ex\\xADposed your server \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"logins\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"and\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"passwords\"), \"!\"), mdx(\"p\", null, \"There are sev\\xADeral ways to run as a under priv\\xADi\\xADleged user, you can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"iptables\"), \" to for\\xADward re\\xADquests to higher ports, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"authbind\"), \", run be\\xADhind a proxy like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ngnix\"), \", etc\\u2026\"), mdx(\"h2\", {\n    \"id\": \"sessions\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#sessions\"\n  })), \"Sessions\"), mdx(\"p\", null, \"Many ap\\xADpli\\xADca\\xADtions are going to deal with user ses\\xADsions at some point.\"), mdx(\"p\", null, \"Ses\\xADsion cook\\xADies should have the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SECURE\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTTPOnly\"), \" flags set. This en\\xADsures that they can only be sent over \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTTPS\"), \" (you are using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTTPS\"), \" right?) and there is no script ac\\xADcess to the cookie client side:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Router router = Router.router(vertx);\\n\\nrouter.route().handler(CookieHandler.create());\\nrouter.route().handler(SessionHandler\\n    .create(LocalSessionStore.create(vertx))\\n    .setCookieHttpOnlyFlag(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \")\\n    .setCookieSecureFlag(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \")\\n);\\n\\nrouter.route().handler(routingContext -\u003e {\\n\\n  Session session = routingContext.session();\\n\\n  Integer cnt = session.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hitcount\\\"\"), \");\\n  cnt = (cnt == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \" ? \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \" : cnt) + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \";\\n\\n  session.put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hitcount\\\"\"), \", cnt);\\n\\n  routingContext.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hitcount: \\\"\"), \" + cnt);\\n});\\n\\nvertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n\")), mdx(\"p\", null, \"And in this case when in\\xADspect\\xADing your browser you should see:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx3-secure-webapps/nocookie.png\",\n    \"alt\": \"nocookie\"\n  }))), mdx(\"p\", null, \"Of course if you do not do that any script on your browser has the ca\\xADpa\\xADbil\\xADity of read\\xADing, sniff\\xADing hi\\xADjack\\xADing or tam\\xADper\\xADing your ses\\xADsions.\"), mdx(\"h2\", {\n    \"id\": \"security-headers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#security-headers\"\n  })), \"Security Headers\"), mdx(\"p\", null, \"There are plenty of se\\xADcu\\xADrity head\\xADers that help im\\xADprove se\\xADcu\\xADrity with just a cou\\xADple of lines of code. There is no need to ex\\xADplain them here since there are good \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://recxltd.blogspot.nl/2012/03/seven-web-server-http-headers-that.html\"\n  }), \"ar\\xADti\\xADcles\"), \" on\\xADline that will prob\\xADa\\xADbly do it bet\\xADter than me.\"), mdx(\"p\", null, \"Here is how one could im\\xADple\\xADment a cou\\xADple of them:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n\\n    Router router = Router.router(vertx);\\n    router.route().handler(ctx -\u003e {\\n      ctx.response()\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// do not allow proxies to cache the data\"), \"\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Cache-Control\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"no-store, no-cache\\\"\"), \")\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// prevents Internet Explorer from MIME - sniffing a\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// response away from the declared content-type\"), \"\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"X-Content-Type-Options\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"nosniff\\\"\"), \")\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Strict HTTPS (for about ~6Months)\"), \"\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Strict-Transport-Security\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"max-age=\\\"\"), \" + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"15768000\"), \")\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// IE8+ do not allow opening of attachments in the context of this resource\"), \"\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"X-Download-Options\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"noopen\\\"\"), \")\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// enable XSS for IE\"), \"\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"X-XSS-Protection\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1; mode=block\\\"\"), \")\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// deny frames\"), \"\\n          .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"X-FRAME-OPTIONS\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"DENY\\\"\"), \");\\n    });\\n\\n    vertx.createHttpServer().requestHandler(router::accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n  }\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"cross-site-request-forgery-csrf-protection\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#cross-site-request-forgery-csrf-protection\"\n  })), \"Cross-Site Request Forgery (CSRF) Protection\"), mdx(\"p\", null, \"Vert.x web pro\\xADvides CSRF pro\\xADtec\\xADtion using an in\\xADcluded han\\xADdler. To en\\xADable CSRF pro\\xADtec\\xADtions you need to add it to your router as you would add any other han\\xADdler:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n\\n    Router router = Router.router(vertx);\\n\\n    router.route().handler(CookieHandler.create());\\n    router.route().handler(SessionHandler\\n        .create(LocalSessionStore.create(vertx))\\n        .setCookieSecureFlag(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \")\\n    );\\n    router.route().handler(CSRFHandler.create(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"not a good secret\\\"\"), \"));\\n\\n    router.route().handler(ctx -\u003e {\\n      ...\\n    });\\n\")), mdx(\"p\", null, \"The han\\xADdler adds a CSRF token to re\\xADquests which mu\\xADtate state. In order change the state a (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"XSRF-TOKEN\"), \") cookie is set with a unique token, that is ex\\xADpected to be sent back in a (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"X-XSRF-TOKEN\"), \") header.\"), mdx(\"h2\", {\n    \"id\": \"limit-uploads\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#limit-uploads\"\n  })), \"Limit uploads\"), mdx(\"p\", null, \"When deal\\xADing with up\\xADloads \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"al\\xADways\"), \" de\\xADfine a upper bound, oth\\xADer\\xADwise you will be vul\\xADner\\xADa\\xADble to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DDoS\"), \" at\\xADtacks. For ex\\xADam\\xADple lets say that you have the fol\\xADlow\\xADing code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n\\n    Router router = Router.router(vertx);\\n\\n    router.route().handler(BodyHandler.create());\\n\\n    router.route().handler(ctx -\u003e {\\n      ...\\n\")), mdx(\"p\", null, \"Now a bad in\\xADten\\xADtioned per\\xADson could gen\\xADer\\xADate a ran\\xADdom file with 1GB of trash:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-routeros\"\n  }), \"dd \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"if\"), \"=/dev/urandom \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"of\"), \"=ddos \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"bs\"), \"=1G \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"count\"), \"=1\\n\")), mdx(\"p\", null, \"And then up\\xADload it to your server:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-nginx\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"curl\"), \" --data-binary \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-variable\"\n  }), \"@ddos\"), \"\\\"\"), \" -H \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Content-Type: application/octet-stream\\\"\"), \" -X POST http://localhost:8080/\\n\")), mdx(\"p\", null, \"Your ap\\xADpli\\xADca\\xADtion will hap\\xADpily try to han\\xADdle this until one of 2 things hap\\xADpens, it will run out of disk space or mem\\xADory. In order to mit\\xADi\\xADgate these kind of at\\xADtacks al\\xADways spec\\xADify the max\\xADi\\xADmum al\\xADlowed up\\xADload size:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"App\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"extends\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"AbstractVerticle\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" KB = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1024\"), \";\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" MB = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1024\"), \" * KB;\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Override\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"start\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n\\n    Router router = Router.router(vertx);\\n    router.route().handler(BodyHandler.create().setBodyLimit(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"50\"), \" * MB));\\n\")), mdx(\"h2\", {\n    \"id\": \"final-words\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#final-words\"\n  })), \"Final Words\"), mdx(\"p\", null, \"Al\\xADthough this is just a small list of things you should re\\xADmem\\xADber when im\\xADple\\xADment\\xADing your ap\\xADpli\\xADca\\xADtion there are more com\\xADpre\\xADhen\\xADsive check\\xADlists to check:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project\"\n  }), \"OWASP Top Ten Project\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java\"\n  }), \"Pre\\xADvent\\xADing SQL In\\xADjec\\xADtion in Java\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.owasp.org/index.php/Testing_for_NoSQL_injection\"\n  }), \"Test\\xADing for NoSQL in\\xADjec\\xADtion\"))));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eThis is a start­ing guide for se­cur­ing vert.x web ap­pli­ca­tions. It is by no means a com­pre­hen­sive guide on web ap­pli­ca­tion se­cu­rity such as \u003ca href=\"https://www.owasp.org\"\u003eOWASP\u003c/a\u003e. Stan­dard rules and prac­tices apply to vert.x apps as if they would to any other web frame­work.\u003c/p\u003e\u003cp\u003eThe post will cover the items that al­ways seem to come up on fo­rums.\u003c/p\u003e\u003ch2 id=\"dont-run-as-root\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#dont-run-as-root\"\u003e\u003c/a\u003eDon’t run as root\u003c/h2\u003e\u003cp\u003eIt is a com­mon prac­tise that your de­vops team mem­ber will con­stantly say, one shall run a ser­vice with the least amount of priv­i­leges nec­es­sary and no more. Al­though this might sound like folk­lore to less ex­pe­ri­enced de­vel­op­ers that hit an issue when try­ing to run on priv­i­leged ports 80, 443, run­ning as root solves it quickly but open a door to big­ger prob­lems. Lets look at this code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n\n    Router router = Router.router(vertx);\n\n    router.route().handler(StaticHandler.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e));\n\n    vertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e);\n  }\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhen started with the \u003ccode\u003eCWD\u003c/code\u003e set to \u003ccode\u003e/\u003c/code\u003e (\u003ccode\u003ejava -Dvertx.cwd=/ ...\u003c/code\u003e) you just cre­ated a sim­ple file server for all your server stor­age. Now imag­ine that you want to start this ap­pli­ca­tion you will hit the error:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-text\"\u003eAug 26, 2015 2:02:18 PM io.vertx.core.http.impl.HttpServerImpl\nSEVERE: java.net.SocketException: Permission denied\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo if you do now run as \u003ccode\u003eroot\u003c/code\u003e it will start, how­ever in your browser now try to nav­i­gate to: \u003ccode\u003ehttp://localhost/etc/shadow\u003c/code\u003e con­grat­u­la­tions you just ex­posed your server \u003ccode\u003elogins\u003c/code\u003e \u003cstrong\u003eand\u003c/strong\u003e \u003ccode\u003epasswords\u003c/code\u003e!\u003c/p\u003e\u003cp\u003eThere are sev­eral ways to run as a under priv­i­leged user, you can use \u003ccode\u003eiptables\u003c/code\u003e to for­ward re­quests to higher ports, use \u003ccode\u003eauthbind\u003c/code\u003e, run be­hind a proxy like \u003ccode\u003engnix\u003c/code\u003e, etc…\u003c/p\u003e\u003ch2 id=\"sessions\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#sessions\"\u003e\u003c/a\u003eSessions\u003c/h2\u003e\u003cp\u003eMany ap­pli­ca­tions are going to deal with user ses­sions at some point.\u003c/p\u003e\u003cp\u003eSes­sion cook­ies should have the \u003ccode\u003eSECURE\u003c/code\u003e and \u003ccode\u003eHTTPOnly\u003c/code\u003e flags set. This en­sures that they can only be sent over \u003ccode\u003eHTTPS\u003c/code\u003e (you are using \u003ccode\u003eHTTPS\u003c/code\u003e right?) and there is no script ac­cess to the cookie client side:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eRouter router = Router.router(vertx);\n\nrouter.route().handler(CookieHandler.create());\nrouter.route().handler(SessionHandler\n    .create(LocalSessionStore.create(vertx))\n    .setCookieHttpOnlyFlag(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n    .setCookieSecureFlag(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n);\n\nrouter.route().handler(routingContext -\u0026gt; {\n\n  Session session = routingContext.session();\n\n  Integer cnt = session.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;hitcount\u0026quot;\u003c/span\u003e);\n  cnt = (cnt == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e ? \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e : cnt) + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n\n  session.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;hitcount\u0026quot;\u003c/span\u003e, cnt);\n\n  routingContext.response().end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hitcount: \u0026quot;\u003c/span\u003e + cnt);\n});\n\nvertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd in this case when in­spect­ing your browser you should see:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx3-secure-webapps/nocookie.png\" alt=\"nocookie\"/\u003e\u003c/p\u003e\u003cp\u003eOf course if you do not do that any script on your browser has the ca­pa­bil­ity of read­ing, sniff­ing hi­jack­ing or tam­per­ing your ses­sions.\u003c/p\u003e\u003ch2 id=\"security-headers\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#security-headers\"\u003e\u003c/a\u003eSecurity Headers\u003c/h2\u003e\u003cp\u003eThere are plenty of se­cu­rity head­ers that help im­prove se­cu­rity with just a cou­ple of lines of code. There is no need to ex­plain them here since there are good \u003ca href=\"http://recxltd.blogspot.nl/2012/03/seven-web-server-http-headers-that.html\"\u003ear­ti­cles\u003c/a\u003e on­line that will prob­a­bly do it bet­ter than me.\u003c/p\u003e\u003cp\u003eHere is how one could im­ple­ment a cou­ple of them:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n\n    Router router = Router.router(vertx);\n    router.route().handler(ctx -\u0026gt; {\n      ctx.response()\n          \u003cspan class=\"hljs-comment\"\u003e// do not allow proxies to cache the data\u003c/span\u003e\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Cache-Control\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;no-store, no-cache\u0026quot;\u003c/span\u003e)\n          \u003cspan class=\"hljs-comment\"\u003e// prevents Internet Explorer from MIME - sniffing a\u003c/span\u003e\n          \u003cspan class=\"hljs-comment\"\u003e// response away from the declared content-type\u003c/span\u003e\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;X-Content-Type-Options\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;nosniff\u0026quot;\u003c/span\u003e)\n          \u003cspan class=\"hljs-comment\"\u003e// Strict HTTPS (for about ~6Months)\u003c/span\u003e\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Strict-Transport-Security\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;max-age=\u0026quot;\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e15768000\u003c/span\u003e)\n          \u003cspan class=\"hljs-comment\"\u003e// IE8+ do not allow opening of attachments in the context of this resource\u003c/span\u003e\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;X-Download-Options\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;noopen\u0026quot;\u003c/span\u003e)\n          \u003cspan class=\"hljs-comment\"\u003e// enable XSS for IE\u003c/span\u003e\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;X-XSS-Protection\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1; mode=block\u0026quot;\u003c/span\u003e)\n          \u003cspan class=\"hljs-comment\"\u003e// deny frames\u003c/span\u003e\n          .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;X-FRAME-OPTIONS\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;DENY\u0026quot;\u003c/span\u003e);\n    });\n\n    vertx.createHttpServer().requestHandler(router::accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"cross-site-request-forgery-csrf-protection\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#cross-site-request-forgery-csrf-protection\"\u003e\u003c/a\u003eCross-Site Request Forgery (CSRF) Protection\u003c/h2\u003e\u003cp\u003eVert.x web pro­vides CSRF pro­tec­tion using an in­cluded han­dler. To en­able CSRF pro­tec­tions you need to add it to your router as you would add any other han­dler:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n\n    Router router = Router.router(vertx);\n\n    router.route().handler(CookieHandler.create());\n    router.route().handler(SessionHandler\n        .create(LocalSessionStore.create(vertx))\n        .setCookieSecureFlag(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n    );\n    router.route().handler(CSRFHandler.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;not a good secret\u0026quot;\u003c/span\u003e));\n\n    router.route().handler(ctx -\u0026gt; {\n      ...\n    });\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe han­dler adds a CSRF token to re­quests which mu­tate state. In order change the state a (\u003ccode\u003eXSRF-TOKEN\u003c/code\u003e) cookie is set with a unique token, that is ex­pected to be sent back in a (\u003ccode\u003eX-XSRF-TOKEN\u003c/code\u003e) header.\u003c/p\u003e\u003ch2 id=\"limit-uploads\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#limit-uploads\"\u003e\u003c/a\u003eLimit uploads\u003c/h2\u003e\u003cp\u003eWhen deal­ing with up­loads \u003cstrong\u003eal­ways\u003c/strong\u003e de­fine a upper bound, oth­er­wise you will be vul­ner­a­ble to \u003ccode\u003eDDoS\u003c/code\u003e at­tacks. For ex­am­ple lets say that you have the fol­low­ing code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n\n    Router router = Router.router(vertx);\n\n    router.route().handler(BodyHandler.create());\n\n    router.route().handler(ctx -\u0026gt; {\n      ...\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow a bad in­ten­tioned per­son could gen­er­ate a ran­dom file with 1GB of trash:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-routeros\"\u003edd \u003cspan class=\"hljs-attribute\"\u003eif\u003c/span\u003e=/dev/urandom \u003cspan class=\"hljs-attribute\"\u003eof\u003c/span\u003e=ddos \u003cspan class=\"hljs-attribute\"\u003ebs\u003c/span\u003e=1G \u003cspan class=\"hljs-attribute\"\u003ecount\u003c/span\u003e=1\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd then up­load it to your server:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-nginx\"\u003e\u003cspan class=\"hljs-attribute\"\u003ecurl\u003c/span\u003e --data-binary \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u003cspan class=\"hljs-variable\"\u003e@ddos\u003c/span\u003e\u0026quot;\u003c/span\u003e -H \u003cspan class=\"hljs-string\"\u003e\u0026quot;Content-Type: application/octet-stream\u0026quot;\u003c/span\u003e -X POST http://localhost:8080/\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYour ap­pli­ca­tion will hap­pily try to han­dle this until one of 2 things hap­pens, it will run out of disk space or mem­ory. In order to mit­i­gate these kind of at­tacks al­ways spec­ify the max­i­mum al­lowed up­load size:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAbstractVerticle\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e KB = \u003cspan class=\"hljs-number\"\u003e1024\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e MB = \u003cspan class=\"hljs-number\"\u003e1024\u003c/span\u003e * KB;\n\n  \u003cspan class=\"hljs-meta\"\u003e@Override\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create().setBodyLimit(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e * MB));\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"final-words\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#final-words\"\u003e\u003c/a\u003eFinal Words\u003c/h2\u003e\u003cp\u003eAl­though this is just a small list of things you should re­mem­ber when im­ple­ment­ing your ap­pli­ca­tion there are more com­pre­hen­sive check­lists to check:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project\"\u003eOWASP Top Ten Project\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java\"\u003ePre­vent­ing SQL In­jec­tion in Java\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.owasp.org/index.php/Testing_for_NoSQL_injection\"\u003eTest­ing for NoSQL in­jec­tion\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e","scope":{}},"tfIdfTerms":[{"term":"will","tf":8},{"term":"run","tf":8},{"term":"applic","tf":6},{"term":"secur","tf":5},{"term":"start","tf":4},{"term":"web","tf":4},{"term":"no","tf":4},{"term":"just","tf":4},{"term":"server","tf":4},{"term":"us","tf":4},{"term":"session","tf":4},{"term":"csrf","tf":4},{"term":"upload","tf":4},{"term":"alwai","tf":3},{"term":"on","tf":3},{"term":"privileg","tf":3},{"term":"try","tf":3},{"term":"code","tf":3},{"term":"set","tf":3},{"term":"browser","tf":3},{"term":"request","tf":3},{"term":"cooki","tf":3},{"term":"header","tf":3},{"term":"protect","tf":3},{"term":"handler","tf":3}]},{"filename":"blog/2015-08-31-vert-x3-real-time-web-apps.mdx","date":"2015-08-31","slug":"vert-x3-real-time-web-apps","meta":{"title":"Vert.x 3 real time web apps","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"One of the interesting features of Vert.x is the SockJS event bus bridge. It allows external applications to communicate with Vert.x event bus using Websockets."},"readingTime":{"text":"7 min read","minutes":7.005,"time":420300,"words":1401},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"One of the in\\xADter\\xADest\\xADing fea\\xADtures of Vert.x is the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://sockjs.org\"\n  }), \"SockJS\"), \" event bus bridge. This piece of soft\\xADware\\nal\\xADlows ex\\xADter\\xADnal ap\\xADpli\\xADca\\xADtions to com\\xADmu\\xADni\\xADcate with Vert.x event bus using Web\\xADsock\\xADets and if your browser does not\\nsup\\xADport it then it grace\\xADfully de\\xADgrades to pool\\xADing AJAX calls.\"), mdx(\"p\", null, \"Web\\xADSock\\xADets bring a new level of in\\xADter\\xADac\\xADtion to the web, they re\\xADally bring real time to web ap\\xADpli\\xADca\\xADtions due to the\\nfact that its com\\xADmu\\xADni\\xADca\\xADtion model is bi-\\u200Bdirectional in con\\xADtrast to the tra\\xADdi\\xADtional HTTP model where a client can\\nini\\xADti\\xADate a data re\\xADquest to a server but not the other way around.\"), mdx(\"p\", null, \"In this small post I will demon\\xADstrate how you can cre\\xADate a sim\\xADple col\\xADlab\\xADo\\xADra\\xADtive draw\\xADing app. The idea is sim\\xADple, all\\nusers that open the app will be be pre\\xADsented with a empty can\\xADvas and what they draw or is drawn on other can\\xADvas is\\nshared in real time on their screen.\"), mdx(\"p\", null, \"For the sake of sim\\xADplic\\xADity and mak\\xADing this post light there is no se\\xADcu\\xADrity in\\xADvolved so, every\\xADone is free to lis\\xADten to\\nwhat is being drawn, how\\xADever the ex\\xADter\\xADnal ap\\xADpli\\xADca\\xADtion has lim\\xADited read write ac\\xADcess to a sin\\xADgle ad\\xADdress on Vert.x\\nevent bus, en\\xADsur\\xADing that other ser\\xADvices run\\xADning on the clus\\xADter will not be ex\\xADposed.\"), mdx(\"p\", null, \"This is what you should ex\\xADpect to see:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"/images/blog/vertx3-realtime-webapps/screencast.gif\",\n    \"alt\": \"Screencast\"\n  }))), mdx(\"h2\", {\n    \"id\": \"bootstrap-a-project\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#bootstrap-a-project\"\n  })), \"Bootstrap a project\"), mdx(\"p\", null, \"If you fol\\xADlowed the pre\\xADvi\\xADous \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/my-first-vert-x-3-application/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"se\\xADries\")), \" on Vert.x de\\xADvel\\xADop\\xADment, you saw\\nthat Java and Maven were the main topic, since Vert.x is poly\\xADglot I will focus on JavaScript and\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/\"\n  }), \"NPM\"), \" as my pro\\xADgram\\xADming lan\\xADguage and pack\\xADage man\\xADage\\xADment tool.\"), mdx(\"p\", null, \"With NPM start by cre\\xADat\\xADing a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \", in order to do this we should run:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"npm init\\n\")), mdx(\"p\", null, \"This will present a se\\xADlec\\xADtion of ques\\xADtions and in the end you should have a basic \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file. This\\ncon\\xADfig\\xADu\\xADra\\xADtion is very basic so you need to add a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/vertx3-full\"\n  }), \"de\\xADpen\\xADdency\"), \" to Vert.x so\\nyou can run the ap\\xADpli\\xADca\\xADtion. You can add it to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dependencies\"), \" prop\\xADerty and it should look more or less like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"draw\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"private\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"dependencies\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx3-full\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"3.0.0-1\\\"\"), \"\\n  },\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scripts\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"start\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx run server.js\\\"\"), \"\\n  },\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"version\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1.0.0\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"main\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"server.js\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"devDependencies\\\"\"), \": {},\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"author\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"license\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ISC\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"A Real Time Drawing App\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"If you do not know why there is the de\\xADpen\\xADdency on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx3-full\"), \" or why the added \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"scripts\"), \" prop\\xADerty please check the \", mdx(Link, {\n    href: \"/blog/[[...slug]]\",\n    as: \"/blog/vert-x3-says-hello-to-npm-users/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", null, \"older\")), \" blog post about it.\"), mdx(\"h2\", {\n    \"id\": \"project-structure\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#project-structure\"\n  })), \"Project Structure\"), mdx(\"p\", null, \"This post has no pref\\xADer\\xADence over project struc\\xADture, so if you do not agree with the struc\\xADture used here feel free to\\nuse what you feel best. For this ex\\xADam\\xADple I will keep it to:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-text\"\n  }), \"\\u251C\\u2500\\u2500 package.json\\n\\u251C\\u2500\\u2500 server.js\\n\\u2514\\u2500\\u2500 webroot\\n  \\u251C\\u2500\\u2500 assets\\n  \\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 js\\n  \\u2502\\xA0\\xA0   \\u251C\\u2500\\u2500 script.js\\n  \\u2502\\xA0\\xA0   \\u2514\\u2500\\u2500 vertxbus.js\\n  \\u2514\\u2500\\u2500 index.html\\n\\n3 directories, 5 files\\n\")), mdx(\"p\", null, \"As you can imag\\xADine \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"server.js\"), \" will be our Vert.x ap\\xADpli\\xADca\\xADtion and every\\xADthing under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webroot\"), \" will be the client\\nap\\xADpli\\xADca\\xADtion.\"), mdx(\"p\", null, \"The client ap\\xADpli\\xADca\\xADtion is not re\\xADally Vert.x spe\\xADcific and could in the\\xADory be used by any other frame\\xADwork so I will go\\nlightly over its code.\"), mdx(\"h3\", {\n    \"id\": \"client-application\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#client-application\"\n  })), \"Client Application\"), mdx(\"p\", null, \"Our ap\\xADpli\\xADca\\xADtion main entry point is as one can ex\\xADpect \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.html\"), \". In the index file de\\xADfine the fol\\xADlow\\xADing HTML:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-html\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"\u003c!DOCTYPE \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-meta-keyword\"\n  }), \"html\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"html\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"head\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"meta\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"charset\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"utf-8\\\"\"), \"/\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"title\"), \"\u003e\"), \"Real time drawing App\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"title\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"\u003c!--[if lt IE 9]\u003e\\n  \u003cscript src=\\\"http://html5shiv.googlecode.com/svn/trunk/html5.js\\\"\u003e\u003c/script\u003e\\n  \u003c![endif]--\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"head\"), \"\u003e\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"body\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"canvas\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"id\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"paper\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"width\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1900\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"height\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1000\\\"\"), \"\u003e\"), \"\\n  Your browser needs to support canvas for this to work!\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"canvas\"), \"\u003e\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"\u003c!-- JavaScript includes. --\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"src\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://code.jquery.com/jquery-1.8.0.min.js\\\"\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"src\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js\\\"\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"src\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'assets/js/vertxbus.js'\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"src\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"assets/js/script.js\\\"\"), \"\u003e\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"script\"), \"\u003e\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"body\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"html\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"As I pre\\xADvi\\xADously wrote, the idea is to keep it as sim\\xADple as pos\\xADsi\\xADble so it is all about hav\\xADing a can\\xADvas el\\xADe\\xADment and a\\nap\\xADpli\\xADca\\xADtion main script \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"script.js\"), \". All the rest are files served by CDNs that pro\\xADvide com\\xADmon web ap\\xADpli\\xADca\\xADtion\\nli\\xADbraries such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jQuery\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTML5\"), \" shim for older browsers, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SockJS\"), \" client and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertxbus\"), \" bridge.\"), mdx(\"p\", null, \"The main code is on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"script.js\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), \"$(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// This demo depends on the canvas element\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (!(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'getContext'\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"in\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"document\"), \".createElement(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'canvas'\"), \"))) {\\n    alert(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'Sorry, it looks like your browser does not support canvas!'\"), \");\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \";\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" doc = $(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"document\"), \"),\\n    canvas = $(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'#paper'\"), \"),\\n    ctx = canvas[\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"].getContext(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'2d'\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Generate an unique ID\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" id = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"Math\"), \".round($.now() * \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"Math\"), \".random());\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// A flag for drawing activity\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" drawing = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \";\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" clients = {};\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// create a event bus bridge to the server that served this file\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" eb = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" vertx.EventBus(\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"window\"), \".location.protocol + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'//'\"), \" + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"window\"), \".location.hostname + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"':'\"), \" + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"window\"), \".location.port + \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'/eventbus'\"), \");\\n\\n  eb.onopen = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// listen to draw events\"), \"\\n    eb.registerHandler(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'draw'\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"data\"), \") \"), \"{\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Is the user drawing?\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (data.drawing \u0026\u0026 clients[data.id]) {\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Draw a line on the canvas. clients[data.id] holds\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// the previous position of this user's mouse pointer\"), \"\\n\\n        drawLine(clients[data.id].x, clients[data.id].y, data.x, data.y);\\n      }\\n\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Saving the current client state\"), \"\\n      clients[data.id] = data;\\n      clients[data.id].updated = $.now();\\n    });\\n  };\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" prev = {};\\n\\n  canvas.on(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'mousedown'\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"e\"), \") \"), \"{\\n    e.preventDefault();\\n    drawing = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"true\"), \";\\n    prev.x = e.pageX;\\n    prev.y = e.pageY;\\n  });\\n\\n  doc.bind(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'mouseup mouseleave'\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n    drawing = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-literal\"\n  }), \"false\"), \";\\n  });\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" lastEmit = $.now();\\n\\n  doc.on(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'mousemove'\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"e\"), \") \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" ($.now() - lastEmit \u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"30\"), \") {\\n      eb.publish(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'draw'\"), \", {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'x'\"), \": e.pageX,\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'y'\"), \": e.pageY,\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'drawing'\"), \": drawing,\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"'id'\"), \": id\\n      });\\n      lastEmit = $.now();\\n    }\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Draw a line for the current user's movement, as it is\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// not received in the eventbus\"), \"\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (drawing) {\\n\\n      drawLine(prev.x, prev.y, e.pageX, e.pageY);\\n\\n      prev.x = e.pageX;\\n      prev.y = e.pageY;\\n    }\\n  });\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Remove inactive clients after 10 seconds of inactivity\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"setInterval\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  })), \") \"), \"{\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"for\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" ident \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"in\"), \" clients) {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (clients.hasOwnProperty(ident)) {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" ($.now() - clients[ident].updated \u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"10000\"), \") {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Last update was more than 10 seconds ago.\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// This user has probably closed the page\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"delete\"), \" clients[ident];\\n        }\\n      }\\n    }\\n\\n  }, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"10000\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"function\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"drawLine\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"fromx, fromy, tox, toy\"), \") \"), \"{\\n    ctx.moveTo(fromx, fromy);\\n    ctx.lineTo(tox, toy);\\n    ctx.stroke();\\n  }\\n\\n});\\n\")), mdx(\"p\", null, \"The most im\\xADpor\\xADtant part in this code is all the code re\\xADlated to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"eb\"), \". The vari\\xADable \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"eb\"), \" is our bridge to the event\\nbus, Start by cre\\xADat\\xADing a bridge using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.EventBus\"), \" ob\\xADject and de\\xADfine where to con\\xADnect, using the de\\xADtails\\nof the cur\\xADrent win\\xADdow lo\\xADca\\xADtion.\"), mdx(\"p\", null, \"Then add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"onopen\"), \" lis\\xADtener that will sub\\xADscribe to the ad\\xADdress \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"draw\"), \" on the event bus so it can lis\\xADten to all\\nmes\\xADsages re\\xADgard\\xADing draw\\xADing and per\\xADform the draw\\xADing ac\\xADtions. Since lis\\xADten\\xADing is not enough I also add a mouse lis\\xADtener\\nto the doc\\xADu\\xADment so when it moves it pub\\xADlishes events to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"draw\"), \" ad\\xADdress.\"), mdx(\"p\", null, \"Note that I am using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"publish\"), \" and not \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"send\"), \", the rea\\xADson should be ob\\xADvi\\xADous, I want every\\xADone to know this users mouse\\nmove\\xADments, I am not in\\xADter\\xADested on send\\xADing the events to just a sin\\xADgle user. You can see now that if you want to have\\na draw\\xADing app in a one on one user basis then in\\xADstead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"publish()\"), \" you should use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"send()\"), \".\"), mdx(\"h3\", {\n    \"id\": \"server-application\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#server-application\"\n  })), \"Server Application\"), mdx(\"p\", null, \"The server code is quite straight for\\xADward, all you need is:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" Router = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"require\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx-web-js/router\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" SockJSHandler = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"require\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx-web-js/sock_js_handler\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" StaticHandler = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"require\"), \"(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"vertx-web-js/static_handler\\\"\"), \");\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" router = Router.router(vertx);\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Allow outbound traffic to the draw address\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"var\"), \" options = {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"outboundPermitteds\\\"\"), \" : [{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"address\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"draw\\\"\"), \"}],\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"inboundPermitteds\\\"\"), \" :  [{\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"address\\\"\"), \" : \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"draw\\\"\"), \"}]\\n};\\n\\nrouter.route(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/eventbus/*\\\"\"), \").handler(SockJSHandler.create(vertx).bridge(options).handle);\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Serve the static resources\"), \"\\nrouter.route().handler(StaticHandler.create().handle);\\n\\nvertx.createHttpServer().requestHandler(router.accept).listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n\")), mdx(\"p\", null, \"We start with the usual im\\xADports, we im\\xADport a ref\\xADer\\xADence to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router\"), \" ob\\xADject and a cou\\xADple of helper han\\xADdlers\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SockJSHandler\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"StaticHandler\"), \". As their names should tell you one han\\xADdler will be re\\xADspon\\xADsi\\xADble to han\\xADdle all\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SockJS\"), \" data and the other all HTTP file serv\\xADing re\\xADquests.\"), mdx(\"p\", null, \"We then add then to a router and start a HTTP server that will han\\xADdle all in\\xADcom\\xADing re\\xADquest using the han\\xADdler ac\\xADcept\\nfunc\\xADtion. Fi\\xADnally we lis\\xADten on port \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"8080\"), \" and we are ready.\"), mdx(\"p\", null, \"Note that there is a op\\xADtions ob\\xADject where a cou\\xADple of prop\\xADer\\xADties are de\\xADfined \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"outbound/inbound\"), \" per\\xADmit\\xADted ad\\xADdresses.\\nWith\\xADout this con\\xADfig\\xADu\\xADra\\xADtion the ex\\xADter\\xADnal ap\\xADpli\\xADca\\xADtion will not be al\\xADlowed to con\\xADnect to the vert.x bus, in fact the\\nde\\xADfault con\\xADfig\\xADu\\xADra\\xADtion of the Sock\\xADJSHan\\xADdler is deny all. So you must spec\\xADify ex\\xADplic\\xADitly which ad\\xADdress are al\\xADlowed to\\nre\\xADceive mes\\xADsages from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SockJS\"), \" and which ones are al\\xADlowed to send/pub\\xADlish to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SockJS\"), \".\"), mdx(\"p\", null, \"Now you can start your ap\\xADpli\\xADca\\xADtion, don\\u2019t for\\xADget to in\\xADstall the de\\xADpen\\xADden\\xADcies for the first time:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"npm install\\n\")), mdx(\"p\", null, \"And then run the ap\\xADpli\\xADca\\xADtion:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"npm start\\n\")), mdx(\"p\", null, \"If you now open 2 browser win\\xADdows you will be able to draw nice pic\\xADtures and see the draw\\xADing show\\xADing in \\u201Creal time\\u201D\\non the other win\\xADdow, if you then draw on the sec\\xADond you should get the mir\\xADror ef\\xADfect on the first win\\xADdow.\"), mdx(\"p\", null, \"Have fun!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eOne of the in­ter­est­ing fea­tures of Vert.x is the \u003ca href=\"http://sockjs.org\"\u003eSockJS\u003c/a\u003e event bus bridge. This piece of soft­ware\nal­lows ex­ter­nal ap­pli­ca­tions to com­mu­ni­cate with Vert.x event bus using Web­sock­ets and if your browser does not\nsup­port it then it grace­fully de­grades to pool­ing AJAX calls.\u003c/p\u003e\u003cp\u003eWeb­Sock­ets bring a new level of in­ter­ac­tion to the web, they re­ally bring real time to web ap­pli­ca­tions due to the\nfact that its com­mu­ni­ca­tion model is bi-​directional in con­trast to the tra­di­tional HTTP model where a client can\nini­ti­ate a data re­quest to a server but not the other way around.\u003c/p\u003e\u003cp\u003eIn this small post I will demon­strate how you can cre­ate a sim­ple col­lab­o­ra­tive draw­ing app. The idea is sim­ple, all\nusers that open the app will be be pre­sented with a empty can­vas and what they draw or is drawn on other can­vas is\nshared in real time on their screen.\u003c/p\u003e\u003cp\u003eFor the sake of sim­plic­ity and mak­ing this post light there is no se­cu­rity in­volved so, every­one is free to lis­ten to\nwhat is being drawn, how­ever the ex­ter­nal ap­pli­ca­tion has lim­ited read write ac­cess to a sin­gle ad­dress on Vert.x\nevent bus, en­sur­ing that other ser­vices run­ning on the clus­ter will not be ex­posed.\u003c/p\u003e\u003cp\u003eThis is what you should ex­pect to see:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"/images/blog/vertx3-realtime-webapps/screencast.gif\" alt=\"Screencast\"/\u003e\u003c/p\u003e\u003ch2 id=\"bootstrap-a-project\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#bootstrap-a-project\"\u003e\u003c/a\u003eBootstrap a project\u003c/h2\u003e\u003cp\u003eIf you fol­lowed the pre­vi­ous \u003ca href=\"/blog/my-first-vert-x-3-application/\"\u003ese­ries\u003c/a\u003e on Vert.x de­vel­op­ment, you saw\nthat Java and Maven were the main topic, since Vert.x is poly­glot I will focus on JavaScript and\n\u003ca href=\"https://www.npmjs.com/\"\u003eNPM\u003c/a\u003e as my pro­gram­ming lan­guage and pack­age man­age­ment tool.\u003c/p\u003e\u003cp\u003eWith NPM start by cre­at­ing a \u003ccode\u003epackage.json\u003c/code\u003e, in order to do this we should run:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm init\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis will present a se­lec­tion of ques­tions and in the end you should have a basic \u003ccode\u003epackage.json\u003c/code\u003e file. This\ncon­fig­u­ra­tion is very basic so you need to add a \u003ca href=\"https://www.npmjs.com/package/vertx3-full\"\u003ede­pen­dency\u003c/a\u003e to Vert.x so\nyou can run the ap­pli­ca­tion. You can add it to the \u003ccode\u003edependencies\u003c/code\u003e prop­erty and it should look more or less like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e{\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;draw\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;private\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;dependencies\u0026quot;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx3-full\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;3.0.0-1\u0026quot;\u003c/span\u003e\n  },\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;scripts\u0026quot;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;start\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx run server.js\u0026quot;\u003c/span\u003e\n  },\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;version\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;1.0.0\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;main\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;server.js\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;devDependencies\u0026quot;\u003c/span\u003e: {},\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;license\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;ISC\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;description\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;A Real Time Drawing App\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you do not know why there is the de­pen­dency on \u003ccode\u003evertx3-full\u003c/code\u003e or why the added \u003ccode\u003escripts\u003c/code\u003e prop­erty please check the \u003ca href=\"/blog/vert-x3-says-hello-to-npm-users/\"\u003eolder\u003c/a\u003e blog post about it.\u003c/p\u003e\u003ch2 id=\"project-structure\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#project-structure\"\u003e\u003c/a\u003eProject Structure\u003c/h2\u003e\u003cp\u003eThis post has no pref­er­ence over project struc­ture, so if you do not agree with the struc­ture used here feel free to\nuse what you feel best. For this ex­am­ple I will keep it to:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-text\"\u003e├── package.json\n├── server.js\n└── webroot\n  ├── assets\n  │   └── js\n  │     ├── script.js\n  │     └── vertxbus.js\n  └── index.html\n\n3 directories, 5 files\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can imag­ine \u003ccode\u003eserver.js\u003c/code\u003e will be our Vert.x ap­pli­ca­tion and every­thing under \u003ccode\u003ewebroot\u003c/code\u003e will be the client\nap­pli­ca­tion.\u003c/p\u003e\u003cp\u003eThe client ap­pli­ca­tion is not re­ally Vert.x spe­cific and could in the­ory be used by any other frame­work so I will go\nlightly over its code.\u003c/p\u003e\u003ch3 id=\"client-application\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#client-application\"\u003e\u003c/a\u003eClient Application\u003c/h3\u003e\u003cp\u003eOur ap­pli­ca­tion main entry point is as one can ex­pect \u003ccode\u003eindex.html\u003c/code\u003e. In the index file de­fine the fol­low­ing HTML:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u0026lt;!DOCTYPE \u003cspan class=\"hljs-meta-keyword\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003echarset\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;utf-8\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003eReal time drawing App\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e\u0026lt;!--[if lt IE 9]\u0026gt;\n  \u0026lt;script src=\u0026quot;http://html5shiv.googlecode.com/svn/trunk/html5.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n  \u0026lt;![endif]--\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ecanvas\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;paper\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ewidth\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;1900\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eheight\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;1000\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  Your browser needs to support canvas for this to work!\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ecanvas\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e\u0026lt;!-- JavaScript includes. --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://code.jquery.com/jquery-1.8.0.min.js\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026#x27;assets/js/vertxbus.js\u0026#x27;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;assets/js/script.js\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs I pre­vi­ously wrote, the idea is to keep it as sim­ple as pos­si­ble so it is all about hav­ing a can­vas el­e­ment and a\nap­pli­ca­tion main script \u003ccode\u003escript.js\u003c/code\u003e. All the rest are files served by CDNs that pro­vide com­mon web ap­pli­ca­tion\nli­braries such as \u003ccode\u003ejQuery\u003c/code\u003e, \u003ccode\u003eHTML5\u003c/code\u003e shim for older browsers, \u003ccode\u003eSockJS\u003c/code\u003e client and \u003ccode\u003evertxbus\u003c/code\u003e bridge.\u003c/p\u003e\u003cp\u003eThe main code is on \u003ccode\u003escript.js\u003c/code\u003e file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e$(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-comment\"\u003e// This demo depends on the canvas element\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;getContext\u0026#x27;\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e.createElement(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;canvas\u0026#x27;\u003c/span\u003e))) {\n    alert(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Sorry, it looks like your browser does not support canvas!\u0026#x27;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e doc = $(\u003cspan class=\"hljs-built_in\"\u003edocument\u003c/span\u003e),\n    canvas = $(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;#paper\u0026#x27;\u003c/span\u003e),\n    ctx = canvas[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].getContext(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;2d\u0026#x27;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// Generate an unique ID\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e id = \u003cspan class=\"hljs-built_in\"\u003eMath\u003c/span\u003e.round($.now() * \u003cspan class=\"hljs-built_in\"\u003eMath\u003c/span\u003e.random());\n\n  \u003cspan class=\"hljs-comment\"\u003e// A flag for drawing activity\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e drawing = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e clients = {};\n  \u003cspan class=\"hljs-comment\"\u003e// create a event bus bridge to the server that served this file\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e eb = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e vertx.EventBus(\n      \u003cspan class=\"hljs-built_in\"\u003ewindow\u003c/span\u003e.location.protocol + \u003cspan class=\"hljs-string\"\u003e\u0026#x27;//\u0026#x27;\u003c/span\u003e + \u003cspan class=\"hljs-built_in\"\u003ewindow\u003c/span\u003e.location.hostname + \u003cspan class=\"hljs-string\"\u003e\u0026#x27;:\u0026#x27;\u003c/span\u003e + \u003cspan class=\"hljs-built_in\"\u003ewindow\u003c/span\u003e.location.port + \u003cspan class=\"hljs-string\"\u003e\u0026#x27;/eventbus\u0026#x27;\u003c/span\u003e);\n\n  eb.onopen = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-comment\"\u003e// listen to draw events\u003c/span\u003e\n    eb.registerHandler(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;draw\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003edata\u003c/span\u003e) \u003c/span\u003e{\n      \u003cspan class=\"hljs-comment\"\u003e// Is the user drawing?\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (data.drawing \u0026amp;\u0026amp; clients[data.id]) {\n\n        \u003cspan class=\"hljs-comment\"\u003e// Draw a line on the canvas. clients[data.id] holds\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e// the previous position of this user\u0026#x27;s mouse pointer\u003c/span\u003e\n\n        drawLine(clients[data.id].x, clients[data.id].y, data.x, data.y);\n      }\n\n      \u003cspan class=\"hljs-comment\"\u003e// Saving the current client state\u003c/span\u003e\n      clients[data.id] = data;\n      clients[data.id].updated = $.now();\n    });\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e prev = {};\n\n  canvas.on(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;mousedown\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) \u003c/span\u003e{\n    e.preventDefault();\n    drawing = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n    prev.x = e.pageX;\n    prev.y = e.pageY;\n  });\n\n  doc.bind(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;mouseup mouseleave\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n    drawing = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n  });\n\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e lastEmit = $.now();\n\n  doc.on(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;mousemove\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ee\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e ($.now() - lastEmit \u0026gt; \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e) {\n      eb.publish(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;draw\u0026#x27;\u003c/span\u003e, {\n        \u003cspan class=\"hljs-string\"\u003e\u0026#x27;x\u0026#x27;\u003c/span\u003e: e.pageX,\n        \u003cspan class=\"hljs-string\"\u003e\u0026#x27;y\u0026#x27;\u003c/span\u003e: e.pageY,\n        \u003cspan class=\"hljs-string\"\u003e\u0026#x27;drawing\u0026#x27;\u003c/span\u003e: drawing,\n        \u003cspan class=\"hljs-string\"\u003e\u0026#x27;id\u0026#x27;\u003c/span\u003e: id\n      });\n      lastEmit = $.now();\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e// Draw a line for the current user\u0026#x27;s movement, as it is\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// not received in the eventbus\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (drawing) {\n\n      drawLine(prev.x, prev.y, e.pageX, e.pageY);\n\n      prev.x = e.pageX;\n      prev.y = e.pageY;\n    }\n  });\n\n  \u003cspan class=\"hljs-comment\"\u003e// Remove inactive clients after 10 seconds of inactivity\u003c/span\u003e\n  \u003cspan class=\"hljs-built_in\"\u003esetInterval\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e ident \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e clients) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (clients.hasOwnProperty(ident)) {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e ($.now() - clients[ident].updated \u0026gt; \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e) {\n          \u003cspan class=\"hljs-comment\"\u003e// Last update was more than 10 seconds ago.\u003c/span\u003e\n          \u003cspan class=\"hljs-comment\"\u003e// This user has probably closed the page\u003c/span\u003e\n          \u003cspan class=\"hljs-keyword\"\u003edelete\u003c/span\u003e clients[ident];\n        }\n      }\n    }\n\n  }, \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edrawLine\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efromx, fromy, tox, toy\u003c/span\u003e) \u003c/span\u003e{\n    ctx.moveTo(fromx, fromy);\n    ctx.lineTo(tox, toy);\n    ctx.stroke();\n  }\n\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe most im­por­tant part in this code is all the code re­lated to \u003ccode\u003eeb\u003c/code\u003e. The vari­able \u003ccode\u003eeb\u003c/code\u003e is our bridge to the event\nbus, Start by cre­at­ing a bridge using the \u003ccode\u003evertx.EventBus\u003c/code\u003e ob­ject and de­fine where to con­nect, using the de­tails\nof the cur­rent win­dow lo­ca­tion.\u003c/p\u003e\u003cp\u003eThen add a \u003ccode\u003eonopen\u003c/code\u003e lis­tener that will sub­scribe to the ad­dress \u003ccode\u003edraw\u003c/code\u003e on the event bus so it can lis­ten to all\nmes­sages re­gard­ing draw­ing and per­form the draw­ing ac­tions. Since lis­ten­ing is not enough I also add a mouse lis­tener\nto the doc­u­ment so when it moves it pub­lishes events to the \u003ccode\u003edraw\u003c/code\u003e ad­dress.\u003c/p\u003e\u003cp\u003eNote that I am using \u003ccode\u003epublish\u003c/code\u003e and not \u003ccode\u003esend\u003c/code\u003e, the rea­son should be ob­vi­ous, I want every­one to know this users mouse\nmove­ments, I am not in­ter­ested on send­ing the events to just a sin­gle user. You can see now that if you want to have\na draw­ing app in a one on one user basis then in­stead of \u003ccode\u003epublish()\u003c/code\u003e you should use \u003ccode\u003esend()\u003c/code\u003e.\u003c/p\u003e\u003ch3 id=\"server-application\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#server-application\"\u003e\u003c/a\u003eServer Application\u003c/h3\u003e\u003cp\u003eThe server code is quite straight for­ward, all you need is:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e Router = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx-web-js/router\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e SockJSHandler = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx-web-js/sock_js_handler\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e StaticHandler = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;vertx-web-js/static_handler\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e router = Router.router(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Allow outbound traffic to the draw address\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e options = {\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;outboundPermitteds\u0026quot;\u003c/span\u003e : [{\u003cspan class=\"hljs-string\"\u003e\u0026quot;address\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;draw\u0026quot;\u003c/span\u003e}],\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;inboundPermitteds\u0026quot;\u003c/span\u003e :  [{\u003cspan class=\"hljs-string\"\u003e\u0026quot;address\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;draw\u0026quot;\u003c/span\u003e}]\n};\n\nrouter.route(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/eventbus/*\u0026quot;\u003c/span\u003e).handler(SockJSHandler.create(vertx).bridge(options).handle);\n\n\u003cspan class=\"hljs-comment\"\u003e// Serve the static resources\u003c/span\u003e\nrouter.route().handler(StaticHandler.create().handle);\n\nvertx.createHttpServer().requestHandler(router.accept).listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe start with the usual im­ports, we im­port a ref­er­ence to the \u003ccode\u003eRouter\u003c/code\u003e ob­ject and a cou­ple of helper han­dlers\n\u003ccode\u003eSockJSHandler\u003c/code\u003e and \u003ccode\u003eStaticHandler\u003c/code\u003e. As their names should tell you one han­dler will be re­spon­si­ble to han­dle all\n\u003ccode\u003eSockJS\u003c/code\u003e data and the other all HTTP file serv­ing re­quests.\u003c/p\u003e\u003cp\u003eWe then add then to a router and start a HTTP server that will han­dle all in­com­ing re­quest using the han­dler ac­cept\nfunc­tion. Fi­nally we lis­ten on port \u003ccode\u003e8080\u003c/code\u003e and we are ready.\u003c/p\u003e\u003cp\u003eNote that there is a op­tions ob­ject where a cou­ple of prop­er­ties are de­fined \u003ccode\u003eoutbound/inbound\u003c/code\u003e per­mit­ted ad­dresses.\nWith­out this con­fig­u­ra­tion the ex­ter­nal ap­pli­ca­tion will not be al­lowed to con­nect to the vert.x bus, in fact the\nde­fault con­fig­u­ra­tion of the Sock­JSHan­dler is deny all. So you must spec­ify ex­plic­itly which ad­dress are al­lowed to\nre­ceive mes­sages from \u003ccode\u003eSockJS\u003c/code\u003e and which ones are al­lowed to send/pub­lish to \u003ccode\u003eSockJS\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eNow you can start your ap­pli­ca­tion, don’t for­get to in­stall the de­pen­den­cies for the first time:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm install\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd then run the ap­pli­ca­tion:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm start\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you now open 2 browser win­dows you will be able to draw nice pic­tures and see the draw­ing show­ing in “real time”\non the other win­dow, if you then draw on the sec­ond you should get the mir­ror ef­fect on the first win­dow.\u003c/p\u003e\u003cp\u003eHave fun!\u003c/p\u003e","scope":{}},"tfIdfTerms":[{"term":"applic","tf":15},{"term":"will","tf":14},{"term":"not","tf":10},{"term":"us","tf":9},{"term":"draw","tf":8},{"term":"event","tf":7},{"term":"on","tf":6},{"term":"bu","tf":6},{"term":"listen","tf":6},{"term":"client","tf":5},{"term":"address","tf":5},{"term":"start","tf":5},{"term":"file","tf":5},{"term":"add","tf":5},{"term":"code","tf":5},{"term":"bridg","tf":4},{"term":"allow","tf":4},{"term":"time","tf":4},{"term":"server","tf":4},{"term":"post","tf":4},{"term":"user","tf":4},{"term":"run","tf":4},{"term":"main","tf":4},{"term":"window","tf":4},{"term":"extern","tf":3}]}],"numPages":16},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["page","14"]},"buildId":"C_I4gGOFTI-4fY_eV8SrD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-5a9a91c546a2d4fb4cc4.js"></script><script src="/_next/static/chunks/main-79fb140702e98d221643.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.4df82c4704a0136f6a4b.js" async=""></script><script src="/_next/static/chunks/commons.7726cd762eacbba73350.js" async=""></script><script src="/_next/static/chunks/styles.8577696c4e17514af975.js" async=""></script><script src="/_next/static/chunks/pages/_app-8beb549608891d89d2f4.js" async=""></script><script src="/_next/static/chunks/4f16b6dee4e09daf8bf4ac98169064eb9dcaeaf1.72e9236f86e8a2b5e7a0.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-3cd5466df6cee536d361.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_buildManifest.js" async=""></script><script src="/_next/static/C_I4gGOFTI-4fY_eV8SrD/_ssgManifest.js" async=""></script></body></html>