<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Vert.x Health Checks | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.065337ce.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.065337ce.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_vert_x_health_checks">Using Vert.x Health Checks</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_health_check_object">Creating the health check object.</a></li>
<li><a href="#_registering_the_vert_x_web_handler">Registering the Vert.x Web handler</a></li>
</ul>
</li>
<li><a href="#_procedures">Procedures</a></li>
<li><a href="#_http_responses_and_json_output">HTTP responses and JSON Output</a></li>
<li><a href="#_examples_of_procedures">Examples of procedures</a>
<ul class="sectlevel2">
<li><a href="#_jdbc">JDBC</a></li>
<li><a href="#_service_availability">Service availability</a></li>
<li><a href="#_event_bus">Event bus</a></li>
</ul>
</li>
<li><a href="#_authentication">Authentication</a></li>
<li><a href="#_exposing_health_checks_on_the_event_bus">Exposing health checks on the event bus</a></li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div><a href="/docs/apidocs/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">vundefined<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"></ul></div></span></div></div><div><h1>Vert.x Health Checks</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This component provides a simple way to expose health checks. Health checks are used to express the current state
of the application in very simple terms: <em>UP</em> or <em>DOWN</em>. The health checks can be used individually, or in
combination to Vert.x Web or the event bus.</p>
</div>
<div class="paragraph">
<p>This component provides a Vert.x Web handler on which you
can register procedure testing the health of the application. The handler computes the final state and returns the
result as JSON.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_vert_x_health_checks"><a class="anchor" href="#_using_vert_x_health_checks"></a>Using Vert.x Health Checks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Notice that you generally need Vert.x Web to use this component. In addition add the following dependency:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-health-check<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">'io.vertx:vertx-health-check:3.8.4'</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_health_check_object"><a class="anchor" href="#_creating_the_health_check_object"></a>Creating the health check object.</h3>
<div class="paragraph">
<p>The central object is <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html">HealthChecks</a></code>. You can create a new instance using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">Code not translatable</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have created this object you can register and unregister procedures. See more about this below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_the_vert_x_web_handler"><a class="anchor" href="#_registering_the_vert_x_web_handler"></a>Registering the Vert.x Web handler</h3>
<div class="paragraph">
<p>To create the Vert.x Web handler managing your health check you can either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>using an existing instance of <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html">HealthChecks</a></code></p>
</li>
<li>
<p>let the handler create one instance for you.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">var</span> healthCheckHandler1 = HealthCheckHandler.create(vertx)
<span class="hljs-keyword">var</span> healthCheckHandler2 = HealthCheckHandler.createWithHealthChecks(HealthChecks.create(vertx))

<span class="hljs-keyword">var</span> router = Router.router(vertx)
<span class="hljs-comment">// Populate the router with routes...</span>
<span class="hljs-comment">// Register the health check handler</span>
router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/health*"</span>).handler(healthCheckHandler1)
<span class="hljs-comment">// Or</span>
router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/ping*"</span>).handler(healthCheckHandler2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Procedure registration can be directly made on the <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html">HealthCheckHandler</a></code>
instance. Alternatively, if you have created the <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html">HealthChecks</a></code> instance
beforehand, you can register the procedure on this object directly. Registrations and unregistrations can be done at
anytime, even after the route registration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">Code not translatable</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_procedures"><a class="anchor" href="#_procedures"></a>Procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A procedure is a function checking some aspect of the system to deduce the current health. It reports a
<code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> indicating whether or not the test has passed or failed. This function
must not block and report to the given <code><a href="../../apidocs/io/vertx/core/Future.html">Future</a></code> whether or not it succeed.</p>
</div>
<div class="paragraph">
<p>When you register a procedure, you give a name, and the function (handler) executing the check.</p>
</div>
<div class="paragraph">
<p>Rules deducing the status are the following</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the future is mark as failed, the check is considered as <em>KO</em></p>
</li>
<li>
<p>if the future is completed successfully but without a <code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code>, the check
is considered as <em>OK</em>.</p>
</li>
<li>
<p>if the future is completed successfully with a <code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> marked as <em>OK</em>,
the check is considered as <em>OK</em>.</p>
</li>
<li>
<p>if the future is completed successfully with a <code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> marked as <em>KO</em>,
the check is considered as <em>KO</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> can also provide additional data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">Code not translatable</code></pre>
</div>
</div>
<div class="paragraph">
<p>Procedures can be organised by groups. The procedure name indicates the group. The procedures are organized as a
tree and the structure is mapped to HTTP urls (see below).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">var</span> healthCheckHandler = HealthCheckHandler.create(vertx)

<span class="hljs-comment">// Register procedures</span>
<span class="hljs-comment">// Procedure can be grouped. The group is deduced using a name with "/".</span>
<span class="hljs-comment">// Groups can contains other group</span>
healthCheckHandler.register(<span class="hljs-string">"a-group/my-procedure-name"</span>, { future -&gt;
  <span class="hljs-comment">//....</span>
})
healthCheckHandler.register(<span class="hljs-string">"a-group/a-second-group/my-second-procedure-name"</span>, { future -&gt;
  <span class="hljs-comment">//....</span>
})

router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/health"</span>).handler(healthCheckHandler)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_responses_and_json_output"><a class="anchor" href="#_http_responses_and_json_output"></a>HTTP responses and JSON Output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using the Vert.x web handler, the overall health check is retrieved using a HTTP GET or POST (depending on
the route you registered) on the route given when exposing the
<code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html">HealthCheckHandler</a></code>.</p>
</div>
<div class="paragraph">
<p>If no procedure are registered, the response is <code>204 - NO CONTENT</code>, indicating that the system is <em>UP</em> but no
procedures has been executed. The response does not contain a payload.</p>
</div>
<div class="paragraph">
<p>If there is at least one procedure registered, this procedure is executed and the outcome status is computed. The
response would use the following status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>200</code> : Everything is fine</p>
</li>
<li>
<p><code>503</code> : At least one procedure has reported a non-healthy state</p>
</li>
<li>
<p><code>500</code> : One procedure has thrown an error or has not reported a status in time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The content is a JSON document indicating the overall result (<code>outcome</code>). It&#8217;s either <code>UP</code> or <code>DOWN</code>. A <code>checks</code>
array is also given indicating the result of the different executed procedures. If the procedure has reported
additional data, the data is also given:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
"checks" : [
{
  "id" : "A",
  "status" : "UP"
},
{
  "id" : "B",
  "status" : "DOWN",
  "data" : {
    "some-data" : "some-value"
  }
}
],
"outcome" : "DOWN"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of groups/ hierarchy, the <code>checks</code> array depicts this structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
"checks" : [
{
  "id" : "my-group",
  "status" : "UP",
  "checks" : [
  {
    "id" : "check-2",
    "status" : "UP",
  },
  {
    "id" : "check-1",
    "status" : "UP"
  }]
}],
"outcome" : "UP"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a procedure throws an error, reports a failure (exception), the JSON document provides the <code>cause</code> in the
<code>data</code> section. If a procedure does not report back before a timeout, the indicated cause is <code>Timeout</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples_of_procedures"><a class="anchor" href="#_examples_of_procedures"></a>Examples of procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides example of common health checks.</p>
</div>
<div class="sect2">
<h3 id="_jdbc"><a class="anchor" href="#_jdbc"></a>JDBC</h3>
<div class="paragraph">
<p>This check reports whether or not a connection to the database can be established:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">Code not translatable</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_service_availability"><a class="anchor" href="#_service_availability"></a>Service availability</h3>
<div class="paragraph">
<p>This check reports whether or not a service (here a HTTP endpoint) is available in the service discovery:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">Code not translatable</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus"><a class="anchor" href="#_event_bus"></a>Event bus</h3>
<div class="paragraph">
<p>This check reports whether a consumer is ready on the event bus. The protocol, in this example, is a simple
ping/pong, but it can be more sophisticated. This check can be used to check whether or not a verticle is ready
if it&#8217;s listening on a specific event address.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">Code not translatable</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication"><a class="anchor" href="#_authentication"></a>Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using the Vert.x web handler, you can pass a <code><a href="../../apidocs/io/vertx/ext/auth/AuthProvider.html">AuthProvider</a></code> use to authenticate the
request. Check &lt;a href="http://vertx.io/docs/#authentication_and_authorisation"&gt;Vert.x Auth&lt;/a&gt; for more details
about available authentication providers.</p>
</div>
<div class="paragraph">
<p>The Vert.x Web handler creates a JSON object containing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the request headers</p>
</li>
<li>
<p>the request params</p>
</li>
<li>
<p>the form param if any</p>
</li>
<li>
<p>the content as JSON if any and if the request set the content type to <code>application/json</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting object is passed to the auth provider to authenticate the request. If the authentication failed, it
returns a <code>403 - FORBIDDEN</code> response.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exposing_health_checks_on_the_event_bus"><a class="anchor" href="#_exposing_health_checks_on_the_event_bus"></a>Exposing health checks on the event bus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While exposing the health checks using HTTP with the Vert.x web handler is convenient, it can be useful
to expose the data differently. This section gives an example to expose the data on the event bus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">vertx.eventBus().consumer&lt;Any&gt;(<span class="hljs-string">"health"</span>, { message -&gt;
  healthChecks.invoke({ message.reply(it) })
})</code></pre>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/download/">Download</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li><li><a href="/channels/">Channels</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.8.4/vertx-health-check/kotlin","title":"Vert.x Health Checks","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_vert_x_health_checks\"\u003eUsing Vert.x Health Checks\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_the_health_check_object\"\u003eCreating the health check object.\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_registering_the_vert_x_web_handler\"\u003eRegistering the Vert.x Web handler\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_procedures\"\u003eProcedures\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_responses_and_json_output\"\u003eHTTP responses and JSON Output\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_examples_of_procedures\"\u003eExamples of procedures\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_jdbc\"\u003eJDBC\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_availability\"\u003eService availability\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_event_bus\"\u003eEvent bus\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_authentication\"\u003eAuthentication\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_exposing_health_checks_on_the_event_bus\"\u003eExposing health checks on the event bus\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x Health Checks\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides a simple way to expose health checks. Health checks are used to express the current state\nof the application in very simple terms: \u003cem\u003eUP\u003c/em\u003e or \u003cem\u003eDOWN\u003c/em\u003e. The health checks can be used individually, or in\ncombination to Vert.x Web or the event bus.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides a Vert.x Web handler on which you\ncan register procedure testing the health of the application. The handler computes the final state and returns the\nresult as JSON.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_vert_x_health_checks\"\u003e\u003ca class=\"anchor\" href=\"#_using_vert_x_health_checks\"\u003e\u003c/a\u003eUsing Vert.x Health Checks\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNotice that you generally need Vert.x Web to use this component. In addition add the following dependency:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-health-check\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.8.4\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e'io.vertx:vertx-health-check:3.8.4'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_the_health_check_object\"\u003e\u003ca class=\"anchor\" href=\"#_creating_the_health_check_object\"\u003e\u003c/a\u003eCreating the health check object.\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe central object is \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html\"\u003eHealthChecks\u003c/a\u003e\u003c/code\u003e. You can create a new instance using:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003eCode not translatable\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you have created this object you can register and unregister procedures. See more about this below.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_registering_the_vert_x_web_handler\"\u003e\u003ca class=\"anchor\" href=\"#_registering_the_vert_x_web_handler\"\u003e\u003c/a\u003eRegistering the Vert.x Web handler\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo create the Vert.x Web handler managing your health check you can either:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eusing an existing instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html\"\u003eHealthChecks\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003elet the handler create one instance for you.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e healthCheckHandler1 = HealthCheckHandler.create(vertx)\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e healthCheckHandler2 = HealthCheckHandler.createWithHealthChecks(HealthChecks.create(vertx))\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e router = Router.router(vertx)\n\u003cspan class=\"hljs-comment\"\u003e// Populate the router with routes...\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Register the health check handler\u003c/span\u003e\nrouter.\u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/health*\"\u003c/span\u003e).handler(healthCheckHandler1)\n\u003cspan class=\"hljs-comment\"\u003e// Or\u003c/span\u003e\nrouter.\u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/ping*\"\u003c/span\u003e).handler(healthCheckHandler2)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProcedure registration can be directly made on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html\"\u003eHealthCheckHandler\u003c/a\u003e\u003c/code\u003e\ninstance. Alternatively, if you have created the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html\"\u003eHealthChecks\u003c/a\u003e\u003c/code\u003e instance\nbeforehand, you can register the procedure on this object directly. Registrations and unregistrations can be done at\nanytime, even after the route registration:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003eCode not translatable\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_procedures\"\u003e\u003ca class=\"anchor\" href=\"#_procedures\"\u003e\u003c/a\u003eProcedures\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA procedure is a function checking some aspect of the system to deduce the current health. It reports a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e indicating whether or not the test has passed or failed. This function\nmust not block and report to the given \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html\"\u003eFuture\u003c/a\u003e\u003c/code\u003e whether or not it succeed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you register a procedure, you give a name, and the function (handler) executing the check.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRules deducing the status are the following\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eif the future is mark as failed, the check is considered as \u003cem\u003eKO\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eif the future is completed successfully but without a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e, the check\nis considered as \u003cem\u003eOK\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eif the future is completed successfully with a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e marked as \u003cem\u003eOK\u003c/em\u003e,\nthe check is considered as \u003cem\u003eOK\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eif the future is completed successfully with a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e marked as \u003cem\u003eKO\u003c/em\u003e,\nthe check is considered as \u003cem\u003eKO\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e can also provide additional data:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003eCode not translatable\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProcedures can be organised by groups. The procedure name indicates the group. The procedures are organized as a\ntree and the structure is mapped to HTTP urls (see below).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e healthCheckHandler = HealthCheckHandler.create(vertx)\n\n\u003cspan class=\"hljs-comment\"\u003e// Register procedures\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Procedure can be grouped. The group is deduced using a name with \"/\".\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Groups can contains other group\u003c/span\u003e\nhealthCheckHandler.register(\u003cspan class=\"hljs-string\"\u003e\"a-group/my-procedure-name\"\u003c/span\u003e, { future -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e//....\u003c/span\u003e\n})\nhealthCheckHandler.register(\u003cspan class=\"hljs-string\"\u003e\"a-group/a-second-group/my-second-procedure-name\"\u003c/span\u003e, { future -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e//....\u003c/span\u003e\n})\n\nrouter.\u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/health\"\u003c/span\u003e).handler(healthCheckHandler)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_http_responses_and_json_output\"\u003e\u003ca class=\"anchor\" href=\"#_http_responses_and_json_output\"\u003e\u003c/a\u003eHTTP responses and JSON Output\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen using the Vert.x web handler, the overall health check is retrieved using a HTTP GET or POST (depending on\nthe route you registered) on the route given when exposing the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html\"\u003eHealthCheckHandler\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf no procedure are registered, the response is \u003ccode\u003e204 - NO CONTENT\u003c/code\u003e, indicating that the system is \u003cem\u003eUP\u003c/em\u003e but no\nprocedures has been executed. The response does not contain a payload.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf there is at least one procedure registered, this procedure is executed and the outcome status is computed. The\nresponse would use the following status code:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e200\u003c/code\u003e : Everything is fine\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e503\u003c/code\u003e : At least one procedure has reported a non-healthy state\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e500\u003c/code\u003e : One procedure has thrown an error or has not reported a status in time\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe content is a JSON document indicating the overall result (\u003ccode\u003eoutcome\u003c/code\u003e). It\u0026#8217;s either \u003ccode\u003eUP\u003c/code\u003e or \u003ccode\u003eDOWN\u003c/code\u003e. A \u003ccode\u003echecks\u003c/code\u003e\narray is also given indicating the result of the different executed procedures. If the procedure has reported\nadditional data, the data is also given:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n\"checks\" : [\n{\n  \"id\" : \"A\",\n  \"status\" : \"UP\"\n},\n{\n  \"id\" : \"B\",\n  \"status\" : \"DOWN\",\n  \"data\" : {\n    \"some-data\" : \"some-value\"\n  }\n}\n],\n\"outcome\" : \"DOWN\"\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn case of groups/ hierarchy, the \u003ccode\u003echecks\u003c/code\u003e array depicts this structure:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n\"checks\" : [\n{\n  \"id\" : \"my-group\",\n  \"status\" : \"UP\",\n  \"checks\" : [\n  {\n    \"id\" : \"check-2\",\n    \"status\" : \"UP\",\n  },\n  {\n    \"id\" : \"check-1\",\n    \"status\" : \"UP\"\n  }]\n}],\n\"outcome\" : \"UP\"\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf a procedure throws an error, reports a failure (exception), the JSON document provides the \u003ccode\u003ecause\u003c/code\u003e in the\n\u003ccode\u003edata\u003c/code\u003e section. If a procedure does not report back before a timeout, the indicated cause is \u003ccode\u003eTimeout\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_examples_of_procedures\"\u003e\u003ca class=\"anchor\" href=\"#_examples_of_procedures\"\u003e\u003c/a\u003eExamples of procedures\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis section provides example of common health checks.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_jdbc\"\u003e\u003ca class=\"anchor\" href=\"#_jdbc\"\u003e\u003c/a\u003eJDBC\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check reports whether or not a connection to the database can be established:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003eCode not translatable\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_availability\"\u003e\u003ca class=\"anchor\" href=\"#_service_availability\"\u003e\u003c/a\u003eService availability\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check reports whether or not a service (here a HTTP endpoint) is available in the service discovery:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003eCode not translatable\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_event_bus\"\u003e\u003ca class=\"anchor\" href=\"#_event_bus\"\u003e\u003c/a\u003eEvent bus\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check reports whether a consumer is ready on the event bus. The protocol, in this example, is a simple\nping/pong, but it can be more sophisticated. This check can be used to check whether or not a verticle is ready\nif it\u0026#8217;s listening on a specific event address.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003eCode not translatable\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_authentication\"\u003e\u003ca class=\"anchor\" href=\"#_authentication\"\u003e\u003c/a\u003eAuthentication\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen using the Vert.x web handler, you can pass a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/auth/AuthProvider.html\"\u003eAuthProvider\u003c/a\u003e\u003c/code\u003e use to authenticate the\nrequest. Check \u0026lt;a href=\"http://vertx.io/docs/#authentication_and_authorisation\"\u0026gt;Vert.x Auth\u0026lt;/a\u0026gt; for more details\nabout available authentication providers.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Vert.x Web handler creates a JSON object containing:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethe request headers\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe request params\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe form param if any\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe content as JSON if any and if the request set the content type to \u003ccode\u003eapplication/json\u003c/code\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe resulting object is passed to the auth provider to authenticate the request. If the authentication failed, it\nreturns a \u003ccode\u003e403 - FORBIDDEN\u003c/code\u003e response.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_exposing_health_checks_on_the_event_bus\"\u003e\u003ca class=\"anchor\" href=\"#_exposing_health_checks_on_the_event_bus\"\u003e\u003c/a\u003eExposing health checks on the event bus\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhile exposing the health checks using HTTP with the Vert.x web handler is convenient, it can be useful\nto expose the data differently. This section gives an example to expose the data on the event bus:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003evertx.eventBus().consumer\u0026lt;Any\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\"health\"\u003c/span\u003e, { message -\u0026gt;\n  healthChecks.invoke({ message.reply(it) })\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.8.4","vertx-health-check","kotlin"]},"buildId":"X7HrzfONgQ3zrJoHxk_7_","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7cde6f5ea12aaa40097b.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" async=""></script><script src="/_next/static/X7HrzfONgQ3zrJoHxk_7_/_buildManifest.js" async=""></script><script src="/_next/static/X7HrzfONgQ3zrJoHxk_7_/_ssgManifest.js" async=""></script></body></html>