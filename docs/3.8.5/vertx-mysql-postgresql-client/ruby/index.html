<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Vert.x MySQL / PostgreSQL client | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.065337ce.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.065337ce.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_the_mysql_and_postgresql_client">Using the MySQL and PostgreSQL client</a>
<ul class="sectlevel2">
<li><a href="#_in_a_regular_application">In a regular application</a></li>
<li><a href="#_in_an_application_packaged_in_a_fat_jar">In an application packaged in a fat jar</a></li>
<li><a href="#_in_an_application_using_a_vert_x_distributions">In an application using a vert.x distributions</a></li>
</ul>
</li>
<li><a href="#_creating_a_client">Creating a client</a>
<ul class="sectlevel2">
<li><a href="#_using_default_shared_pool">Using default shared pool</a></li>
<li><a href="#_specifying_a_pool_name">Specifying a pool name</a></li>
<li><a href="#_creating_a_client_with_a_non_shared_data_source">Creating a client with a non shared data source</a></li>
</ul>
</li>
<li><a href="#_closing_the_client">Closing the client</a></li>
<li><a href="#_getting_a_connection">Getting a connection</a>
<ul class="sectlevel2">
<li><a href="#_configuring_reconnections">Configuring reconnections</a></li>
<li><a href="#_note_about_date_and_timestamps">Note about date and timestamps</a></li>
<li><a href="#_note_about_last_inserted_ids">Note about last inserted ids</a></li>
<li><a href="#_note_about_stored_procedures">Note about stored procedures</a></li>
</ul>
</li>
<li><a href="#_configuration">Configuration</a></li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div><a href="/docs/apidocs/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">vundefined<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"></ul></div></span></div></div><div><h1>Vert.x MySQL / PostgreSQL client</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Async MySQL / PostgreSQL Client is responsible for providing an
interface for Vert.x applications that need to interact with a MySQL or PostgreSQL database.</p>
</div>
<div class="paragraph">
<p>It uses Mauricio Linhares <a href="https://github.com/mauricio/postgresql-async">async driver</a> to interact with the MySQL
or PostgreSQL databases in a non blocking way.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_mysql_and_postgresql_client"><a class="anchor" href="#_using_the_mysql_and_postgresql_client"></a>Using the MySQL and PostgreSQL client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure your project to be able to use the MySQL / PostgreSQL client in your
application.</p>
</div>
<div class="sect2">
<h3 id="_in_a_regular_application"><a class="anchor" href="#_in_a_regular_application"></a>In a regular application</h3>
<div class="paragraph">
<p>To use this client, you need to add the following jar to your <code>CLASSPATH</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vertx-lang-ruby 3.8.5 (the client)</p>
</li>
<li>
<p>scala-library 2.11.4</p>
</li>
<li>
<p>the postgress-async-2.11 and mysdql-async-2.11 from <a href="https://github.com/mauricio/postgresql-async" class="bare">https://github.com/mauricio/postgresql-async</a></p>
</li>
<li>
<p>joda time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All these jars are downloadable from Maven Central.</p>
</div>
</div>
<div class="sect2">
<h3 id="_in_an_application_packaged_in_a_fat_jar"><a class="anchor" href="#_in_an_application_packaged_in_a_fat_jar"></a>In an application packaged in a fat jar</h3>
<div class="paragraph">
<p>If you are building a <em>Fat-jar</em> using Maven or Gradle, just add the following dependencies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-mysql-postgresql-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">'io.vertx:vertx-mysql-postgresql-client:3.8.5'</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_in_an_application_using_a_vert_x_distributions"><a class="anchor" href="#_in_an_application_using_a_vert_x_distributions"></a>In an application using a vert.x distributions</h3>
<div class="paragraph">
<p>If you are using a vert.x distribution, add the jar files listed above to the <code>$VERTX_HOME/lib</code> directory.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can edit the <code>vertx-stack.json</code> file located in <code>$VERTX_HOME</code>, and set <code>"included": true</code>
for the <code>vertx-mysql-postgresql-client</code> dependency. Once done, launch: <code>vertx resolve --dir=lib --stack=
./vertx-stack.json</code>. It downloads the client and its dependencies.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_client"><a class="anchor" href="#_creating_a_client"></a>Creating a client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several ways to create a client. Let&#8217;s go through them all.</p>
</div>
<div class="sect2">
<h3 id="_using_default_shared_pool"><a class="anchor" href="#_using_default_shared_pool"></a>Using default shared pool</h3>
<div class="paragraph">
<p>In most cases you will want to share a pool between different client instances.</p>
</div>
<div class="paragraph">
<p>E.g. you scale your application by deploying multiple instances of your verticle and you want each verticle instance
to share the same pool so you don&#8217;t end up with multiple pools</p>
</div>
<div class="paragraph">
<p>You do this as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">require <span class="hljs-string">'vertx-mysql-postgresql/my_sql_client'</span>
require <span class="hljs-string">'vertx-mysql-postgresql/postgre_sql_client'</span>

# To create a MySQL client:

mySQLClientConfig = {
  <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">"mymysqldb.mycompany"</span>
}
mySQLClient = VertxMysqlPostgresql::MySQLClient.create_shared(vertx, mySQLClientConfig)

# To create a PostgreSQL client:

postgreSQLClientConfig = {
  <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">"mypostgresqldb.mycompany"</span>
}
postgreSQLClient = VertxMysqlPostgresql::PostgreSQLClient.create_shared(vertx, postgreSQLClientConfig)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first call to <code><a href="../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_shared-class_method">MySQLClient.createShared</a></code>
or <code><a href="../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_shared-class_method">PostgreSQLClient.createShared</a></code>
will actually create the data source, and the specified config will be used.</p>
</div>
<div class="paragraph">
<p>Subsequent calls will return a new client instance that uses the same data source, so the configuration won&#8217;t be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_a_pool_name"><a class="anchor" href="#_specifying_a_pool_name"></a>Specifying a pool name</h3>
<div class="paragraph">
<p>You can create a client specifying a pool name as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">require <span class="hljs-string">'vertx-mysql-postgresql/my_sql_client'</span>
require <span class="hljs-string">'vertx-mysql-postgresql/postgre_sql_client'</span>

# To create a MySQL client:

mySQLClientConfig = {
  <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">"mymysqldb.mycompany"</span>
}
mySQLClient = VertxMysqlPostgresql::MySQLClient.create_shared(vertx, mySQLClientConfig, <span class="hljs-string">"MySQLPool1"</span>)

# To create a PostgreSQL client:

postgreSQLClientConfig = {
  <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">"mypostgresqldb.mycompany"</span>
}
postgreSQLClient = VertxMysqlPostgresql::PostgreSQLClient.create_shared(vertx, postgreSQLClientConfig, <span class="hljs-string">"PostgreSQLPool1"</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If different clients are created using the same Vert.x instance and specifying the same pool name, they will
share the same data source.</p>
</div>
<div class="paragraph">
<p>The first call to <code><a href="../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_shared-class_method">MySQLClient.createShared</a></code>
or <code><a href="../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_shared-class_method">PostgreSQLClient.createShared</a></code>
will actually create the data source, and the specified config will be used.</p>
</div>
<div class="paragraph">
<p>Subsequent calls will return a new client instance that uses the same pool, so the configuration won&#8217;t be used.</p>
</div>
<div class="paragraph">
<p>Use this way of creating if you wish different groups of clients to have different pools, e.g. they&#8217;re
interacting with different databases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_client_with_a_non_shared_data_source"><a class="anchor" href="#_creating_a_client_with_a_non_shared_data_source"></a>Creating a client with a non shared data source</h3>
<div class="paragraph">
<p>In most cases you will want to share a pool between different client instances.
However, it&#8217;s possible you want to create a client instance that doesn&#8217;t share its pool with any other client.</p>
</div>
<div class="paragraph">
<p>In that case you can use <code><a href="../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_non_shared-class_method">MySQLClient.createNonShared</a></code>
or <code><a href="../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_non_shared-class_method">PostgreSQLClient.createNonShared</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">require <span class="hljs-string">'vertx-mysql-postgresql/my_sql_client'</span>
require <span class="hljs-string">'vertx-mysql-postgresql/postgre_sql_client'</span>

# To create a MySQL client:

mySQLClientConfig = {
  <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">"mymysqldb.mycompany"</span>
}
mySQLClient = VertxMysqlPostgresql::MySQLClient.create_non_shared(vertx, mySQLClientConfig)

# To create a PostgreSQL client:

postgreSQLClientConfig = {
  <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">"mypostgresqldb.mycompany"</span>
}
postgreSQLClient = VertxMysqlPostgresql::PostgreSQLClient.create_non_shared(vertx, postgreSQLClientConfig)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to calling <code><a href="../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_shared-class_method">MySQLClient.createShared</a></code>
or <code><a href="../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_shared-class_method">PostgreSQLClient.createShared</a></code>
with a unique pool name each time.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_closing_the_client"><a class="anchor" href="#_closing_the_client"></a>Closing the client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can hold on to the client for a long time (e.g. the life-time of your verticle), but once you have finished with
it, you should close it using <code><a href="../../yardoc/VertxSql/SQLClient.html#close-instance_method">close</a></code> or
<code><a href="../../yardoc/VertxSql/SQLClient.html#close-instance_method">close</a></code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_a_connection"><a class="anchor" href="#_getting_a_connection"></a>Getting a connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use <code><a href="../../yardoc/VertxSql/SQLClient.html#get_connection-instance_method">getConnection</a></code> to get a connection.</p>
</div>
<div class="paragraph">
<p>This will return the connection in the handler when one is ready from the pool.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"># Now <span class="hljs-keyword">do</span> stuff with it:

client.get_connection() { |res_err,res|
  <span class="hljs-keyword">if</span> (res_err == nil)

    connection = res

    # Got a connection

  <span class="hljs-keyword">else</span>
    # Failed to get connection - deal with it
  end
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you&#8217;ve finished with the connection make sure you close it afterwards.</p>
</div>
<div class="paragraph">
<p>The connection is an instance of <code><a href="../../yardoc/VertxSql/SQLConnection.html">SQLConnection</a></code> which is a common interface used by
other SQL clients.</p>
</div>
<div class="paragraph">
<p>You can learn how to use it in the <a href="http://vertx.io/docs/vertx-sql-common/ruby/">common sql interface</a> documentation.</p>
</div>
<div class="sect2">
<h3 id="_configuring_reconnections"><a class="anchor" href="#_configuring_reconnections"></a>Configuring reconnections</h3>
<div class="paragraph">
<p>This service is able to recover from temporary database outages, such as those which occur during a database restart or
brief loss of network connectivity. You can configure the expected behaviour when acquiring connections via the
following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>maxConnectionRetries</code></p>
</li>
<li>
<p><code>connectionRetryDelay</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the internal connection pool attempts to acquire an open connection and fails, it will retry up to
<code>maxConnectionRetries</code> times, with a delay of <code>connectionRetryDelay</code> milliseconds between each attempt.
If all attempts fail, any clients waiting for connections from the pool will be notified with an Error, indicating that
a Connection could not be acquired. Note that clients will not be notified with an Error until a full round of attempts
fail, which may be some time after the initial connection attempt.</p>
</div>
<div class="paragraph">
<p>If <code>maxConnectionRetries</code> is set to <code>0</code>, the internal connection pool will not perform any reconnection (default). If
<code>maxConnectionRetries</code> is set to <code>-1</code>, the internal connection pool will attempt to acquire new connections indefinitely,
so any call to <code><a href="../../yardoc/VertxSql/SQLClient.html#get_connection-instance_method">getConnection</a></code>
may be indefinitely waiting for a successful acquisition.</p>
</div>
<div class="paragraph">
<p>Once a full round of acquisition attempts fails, the internal connection pool will remain active, and will try
again to acquire connections in response to future requests for connections.</p>
</div>
<div class="paragraph">
<p>Note that if a database restart occurs, a pool may contain previously acquired but now stale Connections that will only be
detected and purged lazily, when the pool attempts to reuse them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_note_about_date_and_timestamps"><a class="anchor" href="#_note_about_date_and_timestamps"></a>Note about date and timestamps</h3>
<div class="paragraph">
<p>Whenever you get dates back from the database, this service will implicitly convert them into ISO 8601
(<code>yyyy-MM-ddTHH:mm:ss.SSS</code>) formatted strings. MySQL usually discards milliseconds, so you will regularly see <code>.000</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_note_about_last_inserted_ids"><a class="anchor" href="#_note_about_last_inserted_ids"></a>Note about last inserted ids</h3>
<div class="paragraph">
<p>When inserting new rows into a table, you might want to retrieve auto-incremented ids from the database. The JDBC API
usually lets you retrieve the last inserted id from a connection. If you use MySQL, it will work the way it does like
the JDBC API. In PostgreSQL you can add the
<a href="http://www.postgresql.org/docs/current/static/sql-insert.html">"RETURNING" clause</a> to get the latest inserted ids. Use
one of the <code>query</code> methods to get access to the returned columns.</p>
</div>
</div>
<div class="sect2">
<h3 id="_note_about_stored_procedures"><a class="anchor" href="#_note_about_stored_procedures"></a>Note about stored procedures</h3>
<div class="paragraph">
<p>The <code>call</code> and <code>callWithParams</code> methods are not implemented currently.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Both the PostgreSql and MySql clients take the same configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
 "host" : &lt;your-host&gt;,
 "port" : &lt;your-port&gt;,
 "maxPoolSize" : &lt;maximum-number-of-open-connections&gt;,
 "username" : &lt;your-username&gt;,
 "password" : &lt;your-password&gt;,
 "database" : &lt;name-of-your-database&gt;,
 "charset" : &lt;name-of-the-character-set&gt;,
 "connectTimeout" : &lt;timeout-in-milliseconds&gt;,
 "testTimeout" : &lt;timeout-in-milliseconds&gt;,
 "queryTimeout" : &lt;timeout-in-milliseconds&gt;,
 "maxConnectionRetries" : &lt;maximum-number-of-connection-retries&gt;,
 "connectionRetryDelay" : &lt;delay-in-milliseconds&gt;,
 "sslMode" : &lt;"disable"|"prefer"|"require"|"verify-ca"|"verify-full"&gt;,
 "sslRootCert" : &lt;path to file with certificate&gt;
}</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>The host of the database. Defaults to <code>localhost</code>.</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>The port of the database. Defaults to <code>5432</code> for PostgreSQL and <code>3306</code> for MySQL.</p>
</dd>
<dt class="hdlist1"><code>maxPoolSize</code></dt>
<dd>
<p>The number of connections that may be kept open. Defaults to <code>10</code>.</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>The username to connect to the database. Defaults to <code>vertx</code>.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>The password to connect to the database. Defaults to <code>password</code>.</p>
</dd>
<dt class="hdlist1"><code>database</code></dt>
<dd>
<p>The name of the database you want to connect to. Defaults to <code>testdb</code>.</p>
</dd>
<dt class="hdlist1"><code>charset</code></dt>
<dd>
<p>The name of the character set you want to use for the connection. Defaults to <code>UTF-8</code>.</p>
</dd>
<dt class="hdlist1"><code>connectTimeout</code></dt>
<dd>
<p>The timeout to wait for connecting to the database. Defaults to <code>10000</code> (= 10 seconds).</p>
</dd>
<dt class="hdlist1"><code>testTimeout</code></dt>
<dd>
<p>The timeout for connection tests performed by pools. Defaults to <code>10000</code> (= 10 seconds).</p>
</dd>
<dt class="hdlist1"><code>queryTimeout</code></dt>
<dd>
<p>The timeout to wait for a query in milliseconds. Default is not set.</p>
</dd>
<dt class="hdlist1"><code>maxConnectionRetries</code></dt>
<dd>
<p>Maximum number of connection retries. Defaults to <code>0</code> (no retries).<br>
Special values:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">-1 </dt>
<dd>
<p>Unlimited number of connection retries</p>
</dd>
<dt class="hdlist1">0  </dt>
<dd>
<p>No connection retries will be done</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>connectionRetryDelay</code></dt>
<dd>
<p>Delay in milliseconds between each retry attempt. Defaults to <code>5000</code> (= 5 seconds).</p>
</dd>
<dt class="hdlist1"><code>sslMode</code> </dt>
<dd>
<p>If you want to enable SSL support you should enable this parameter.
For example to connect Heroku you will need to use <strong>prefer</strong>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">"disable" </dt>
<dd>
<p>only try a non-SSL connection</p>
</dd>
<dt class="hdlist1">"prefer"  </dt>
<dd>
<p>first try an SSL connection; if that fails, try a non-SSL connection</p>
</dd>
<dt class="hdlist1">"require"  </dt>
<dd>
<p>only try an SSL connection, but don&#8217;t verify Certificate Authority</p>
</dd>
<dt class="hdlist1">"verify-ca"  </dt>
<dd>
<p>only try an SSL connection, and verify that the server certificate is issued by a trusted
certificate authority (CA)</p>
</dd>
<dt class="hdlist1">"verify-full"  </dt>
<dd>
<p>only try an SSL connection, verify that the server certificate is issued by a trusted CA and
that the server host name matches that in the certificate</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>sslRootCert</code> </dt>
<dd>
<p>Path to SSL root certificate file. Is used if you want to verify privately issued certificate.
Refer to <a href="https://github.com/mauricio/postgresql-async">postgresql-async</a> documentation for more details.</p>
</dd>
</dl>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/download/">Download</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li><li><a href="/channels/">Channels</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.8.5/vertx-mysql-postgresql-client/ruby","title":"Vert.x MySQL / PostgreSQL client","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_mysql_and_postgresql_client\"\u003eUsing the MySQL and PostgreSQL client\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_in_a_regular_application\"\u003eIn a regular application\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_in_an_application_packaged_in_a_fat_jar\"\u003eIn an application packaged in a fat jar\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_in_an_application_using_a_vert_x_distributions\"\u003eIn an application using a vert.x distributions\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_client\"\u003eCreating a client\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_default_shared_pool\"\u003eUsing default shared pool\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_specifying_a_pool_name\"\u003eSpecifying a pool name\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_client_with_a_non_shared_data_source\"\u003eCreating a client with a non shared data source\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_closing_the_client\"\u003eClosing the client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_a_connection\"\u003eGetting a connection\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_configuring_reconnections\"\u003eConfiguring reconnections\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_note_about_date_and_timestamps\"\u003eNote about date and timestamps\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_note_about_last_inserted_ids\"\u003eNote about last inserted ids\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_note_about_stored_procedures\"\u003eNote about stored procedures\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configuration\"\u003eConfiguration\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x MySQL / PostgreSQL client\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Async MySQL / PostgreSQL Client is responsible for providing an\ninterface for Vert.x applications that need to interact with a MySQL or PostgreSQL database.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt uses Mauricio Linhares \u003ca href=\"https://github.com/mauricio/postgresql-async\"\u003easync driver\u003c/a\u003e to interact with the MySQL\nor PostgreSQL databases in a non blocking way.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_mysql_and_postgresql_client\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_mysql_and_postgresql_client\"\u003e\u003c/a\u003eUsing the MySQL and PostgreSQL client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis section describes how to configure your project to be able to use the MySQL / PostgreSQL client in your\napplication.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_in_a_regular_application\"\u003e\u003ca class=\"anchor\" href=\"#_in_a_regular_application\"\u003e\u003c/a\u003eIn a regular application\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this client, you need to add the following jar to your \u003ccode\u003eCLASSPATH\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003evertx-lang-ruby 3.8.5 (the client)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003escala-library 2.11.4\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe postgress-async-2.11 and mysdql-async-2.11 from \u003ca href=\"https://github.com/mauricio/postgresql-async\" class=\"bare\"\u003ehttps://github.com/mauricio/postgresql-async\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ejoda time\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAll these jars are downloadable from Maven Central.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_in_an_application_packaged_in_a_fat_jar\"\u003e\u003ca class=\"anchor\" href=\"#_in_an_application_packaged_in_a_fat_jar\"\u003e\u003c/a\u003eIn an application packaged in a fat jar\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you are building a \u003cem\u003eFat-jar\u003c/em\u003e using Maven or Gradle, just add the following dependencies:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-mysql-postgresql-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.8.5\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e'io.vertx:vertx-mysql-postgresql-client:3.8.5'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_in_an_application_using_a_vert_x_distributions\"\u003e\u003ca class=\"anchor\" href=\"#_in_an_application_using_a_vert_x_distributions\"\u003e\u003c/a\u003eIn an application using a vert.x distributions\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you are using a vert.x distribution, add the jar files listed above to the \u003ccode\u003e$VERTX_HOME/lib\u003c/code\u003e directory.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlternatively, you can edit the \u003ccode\u003evertx-stack.json\u003c/code\u003e file located in \u003ccode\u003e$VERTX_HOME\u003c/code\u003e, and set \u003ccode\u003e\"included\": true\u003c/code\u003e\nfor the \u003ccode\u003evertx-mysql-postgresql-client\u003c/code\u003e dependency. Once done, launch: \u003ccode\u003evertx resolve --dir=lib --stack=\n./vertx-stack.json\u003c/code\u003e. It downloads the client and its dependencies.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_creating_a_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client\"\u003e\u003c/a\u003eCreating a client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThere are several ways to create a client. Let\u0026#8217;s go through them all.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_default_shared_pool\"\u003e\u003ca class=\"anchor\" href=\"#_using_default_shared_pool\"\u003e\u003c/a\u003eUsing default shared pool\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn most cases you will want to share a pool between different client instances.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eE.g. you scale your application by deploying multiple instances of your verticle and you want each verticle instance\nto share the same pool so you don\u0026#8217;t end up with multiple pools\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou do this as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003erequire \u003cspan class=\"hljs-string\"\u003e'vertx-mysql-postgresql/my_sql_client'\u003c/span\u003e\nrequire \u003cspan class=\"hljs-string\"\u003e'vertx-mysql-postgresql/postgre_sql_client'\u003c/span\u003e\n\n# To create a MySQL client:\n\nmySQLClientConfig = {\n  \u003cspan class=\"hljs-string\"\u003e'host'\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"mymysqldb.mycompany\"\u003c/span\u003e\n}\nmySQLClient = VertxMysqlPostgresql::MySQLClient.create_shared(vertx, mySQLClientConfig)\n\n# To create a PostgreSQL client:\n\npostgreSQLClientConfig = {\n  \u003cspan class=\"hljs-string\"\u003e'host'\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"mypostgresqldb.mycompany\"\u003c/span\u003e\n}\npostgreSQLClient = VertxMysqlPostgresql::PostgreSQLClient.create_shared(vertx, postgreSQLClientConfig)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe first call to \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_shared-class_method\"\u003eMySQLClient.createShared\u003c/a\u003e\u003c/code\u003e\nor \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_shared-class_method\"\u003ePostgreSQLClient.createShared\u003c/a\u003e\u003c/code\u003e\nwill actually create the data source, and the specified config will be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSubsequent calls will return a new client instance that uses the same data source, so the configuration won\u0026#8217;t be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_specifying_a_pool_name\"\u003e\u003ca class=\"anchor\" href=\"#_specifying_a_pool_name\"\u003e\u003c/a\u003eSpecifying a pool name\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can create a client specifying a pool name as follows\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003erequire \u003cspan class=\"hljs-string\"\u003e'vertx-mysql-postgresql/my_sql_client'\u003c/span\u003e\nrequire \u003cspan class=\"hljs-string\"\u003e'vertx-mysql-postgresql/postgre_sql_client'\u003c/span\u003e\n\n# To create a MySQL client:\n\nmySQLClientConfig = {\n  \u003cspan class=\"hljs-string\"\u003e'host'\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"mymysqldb.mycompany\"\u003c/span\u003e\n}\nmySQLClient = VertxMysqlPostgresql::MySQLClient.create_shared(vertx, mySQLClientConfig, \u003cspan class=\"hljs-string\"\u003e\"MySQLPool1\"\u003c/span\u003e)\n\n# To create a PostgreSQL client:\n\npostgreSQLClientConfig = {\n  \u003cspan class=\"hljs-string\"\u003e'host'\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"mypostgresqldb.mycompany\"\u003c/span\u003e\n}\npostgreSQLClient = VertxMysqlPostgresql::PostgreSQLClient.create_shared(vertx, postgreSQLClientConfig, \u003cspan class=\"hljs-string\"\u003e\"PostgreSQLPool1\"\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf different clients are created using the same Vert.x instance and specifying the same pool name, they will\nshare the same data source.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe first call to \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_shared-class_method\"\u003eMySQLClient.createShared\u003c/a\u003e\u003c/code\u003e\nor \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_shared-class_method\"\u003ePostgreSQLClient.createShared\u003c/a\u003e\u003c/code\u003e\nwill actually create the data source, and the specified config will be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSubsequent calls will return a new client instance that uses the same pool, so the configuration won\u0026#8217;t be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUse this way of creating if you wish different groups of clients to have different pools, e.g. they\u0026#8217;re\ninteracting with different databases.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_client_with_a_non_shared_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client_with_a_non_shared_data_source\"\u003e\u003c/a\u003eCreating a client with a non shared data source\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn most cases you will want to share a pool between different client instances.\nHowever, it\u0026#8217;s possible you want to create a client instance that doesn\u0026#8217;t share its pool with any other client.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn that case you can use \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_non_shared-class_method\"\u003eMySQLClient.createNonShared\u003c/a\u003e\u003c/code\u003e\nor \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_non_shared-class_method\"\u003ePostgreSQLClient.createNonShared\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003erequire \u003cspan class=\"hljs-string\"\u003e'vertx-mysql-postgresql/my_sql_client'\u003c/span\u003e\nrequire \u003cspan class=\"hljs-string\"\u003e'vertx-mysql-postgresql/postgre_sql_client'\u003c/span\u003e\n\n# To create a MySQL client:\n\nmySQLClientConfig = {\n  \u003cspan class=\"hljs-string\"\u003e'host'\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"mymysqldb.mycompany\"\u003c/span\u003e\n}\nmySQLClient = VertxMysqlPostgresql::MySQLClient.create_non_shared(vertx, mySQLClientConfig)\n\n# To create a PostgreSQL client:\n\npostgreSQLClientConfig = {\n  \u003cspan class=\"hljs-string\"\u003e'host'\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\"mypostgresqldb.mycompany\"\u003c/span\u003e\n}\npostgreSQLClient = VertxMysqlPostgresql::PostgreSQLClient.create_non_shared(vertx, postgreSQLClientConfig)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is equivalent to calling \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/MySQLClient.html#create_shared-class_method\"\u003eMySQLClient.createShared\u003c/a\u003e\u003c/code\u003e\nor \u003ccode\u003e\u003ca href=\"../../yardoc/VertxMysqlPostgresql/PostgreSQLClient.html#create_shared-class_method\"\u003ePostgreSQLClient.createShared\u003c/a\u003e\u003c/code\u003e\nwith a unique pool name each time.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_closing_the_client\"\u003e\u003ca class=\"anchor\" href=\"#_closing_the_client\"\u003e\u003c/a\u003eClosing the client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can hold on to the client for a long time (e.g. the life-time of your verticle), but once you have finished with\nit, you should close it using \u003ccode\u003e\u003ca href=\"../../yardoc/VertxSql/SQLClient.html#close-instance_method\"\u003eclose\u003c/a\u003e\u003c/code\u003e or\n\u003ccode\u003e\u003ca href=\"../../yardoc/VertxSql/SQLClient.html#close-instance_method\"\u003eclose\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_a_connection\"\u003e\u003ca class=\"anchor\" href=\"#_getting_a_connection\"\u003e\u003c/a\u003eGetting a connection\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../yardoc/VertxSql/SQLClient.html#get_connection-instance_method\"\u003egetConnection\u003c/a\u003e\u003c/code\u003e to get a connection.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis will return the connection in the handler when one is ready from the pool.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e# Now \u003cspan class=\"hljs-keyword\"\u003edo\u003c/span\u003e stuff with it:\n\nclient.get_connection() { |res_err,res|\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res_err == nil)\n\n    connection = res\n\n    # Got a connection\n\n  \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n    # Failed to get connection - deal with it\n  end\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you\u0026#8217;ve finished with the connection make sure you close it afterwards.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe connection is an instance of \u003ccode\u003e\u003ca href=\"../../yardoc/VertxSql/SQLConnection.html\"\u003eSQLConnection\u003c/a\u003e\u003c/code\u003e which is a common interface used by\nother SQL clients.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can learn how to use it in the \u003ca href=\"http://vertx.io/docs/vertx-sql-common/ruby/\"\u003ecommon sql interface\u003c/a\u003e documentation.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_configuring_reconnections\"\u003e\u003ca class=\"anchor\" href=\"#_configuring_reconnections\"\u003e\u003c/a\u003eConfiguring reconnections\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis service is able to recover from temporary database outages, such as those which occur during a database restart or\nbrief loss of network connectivity. You can configure the expected behaviour when acquiring connections via the\nfollowing properties:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003emaxConnectionRetries\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003econnectionRetryDelay\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen the internal connection pool attempts to acquire an open connection and fails, it will retry up to\n\u003ccode\u003emaxConnectionRetries\u003c/code\u003e times, with a delay of \u003ccode\u003econnectionRetryDelay\u003c/code\u003e milliseconds between each attempt.\nIf all attempts fail, any clients waiting for connections from the pool will be notified with an Error, indicating that\na Connection could not be acquired. Note that clients will not be notified with an Error until a full round of attempts\nfail, which may be some time after the initial connection attempt.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf \u003ccode\u003emaxConnectionRetries\u003c/code\u003e is set to \u003ccode\u003e0\u003c/code\u003e, the internal connection pool will not perform any reconnection (default). If\n\u003ccode\u003emaxConnectionRetries\u003c/code\u003e is set to \u003ccode\u003e-1\u003c/code\u003e, the internal connection pool will attempt to acquire new connections indefinitely,\nso any call to \u003ccode\u003e\u003ca href=\"../../yardoc/VertxSql/SQLClient.html#get_connection-instance_method\"\u003egetConnection\u003c/a\u003e\u003c/code\u003e\nmay be indefinitely waiting for a successful acquisition.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce a full round of acquisition attempts fails, the internal connection pool will remain active, and will try\nagain to acquire connections in response to future requests for connections.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote that if a database restart occurs, a pool may contain previously acquired but now stale Connections that will only be\ndetected and purged lazily, when the pool attempts to reuse them.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_note_about_date_and_timestamps\"\u003e\u003ca class=\"anchor\" href=\"#_note_about_date_and_timestamps\"\u003e\u003c/a\u003eNote about date and timestamps\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhenever you get dates back from the database, this service will implicitly convert them into ISO 8601\n(\u003ccode\u003eyyyy-MM-ddTHH:mm:ss.SSS\u003c/code\u003e) formatted strings. MySQL usually discards milliseconds, so you will regularly see \u003ccode\u003e.000\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_note_about_last_inserted_ids\"\u003e\u003ca class=\"anchor\" href=\"#_note_about_last_inserted_ids\"\u003e\u003c/a\u003eNote about last inserted ids\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen inserting new rows into a table, you might want to retrieve auto-incremented ids from the database. The JDBC API\nusually lets you retrieve the last inserted id from a connection. If you use MySQL, it will work the way it does like\nthe JDBC API. In PostgreSQL you can add the\n\u003ca href=\"http://www.postgresql.org/docs/current/static/sql-insert.html\"\u003e\"RETURNING\" clause\u003c/a\u003e to get the latest inserted ids. Use\none of the \u003ccode\u003equery\u003c/code\u003e methods to get access to the returned columns.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_note_about_stored_procedures\"\u003e\u003ca class=\"anchor\" href=\"#_note_about_stored_procedures\"\u003e\u003c/a\u003eNote about stored procedures\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003ecall\u003c/code\u003e and \u003ccode\u003ecallWithParams\u003c/code\u003e methods are not implemented currently.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_configuration\"\u003e\u003c/a\u003eConfiguration\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBoth the PostgreSql and MySql clients take the same configuration:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e{\n \"host\" : \u0026lt;your-host\u0026gt;,\n \"port\" : \u0026lt;your-port\u0026gt;,\n \"maxPoolSize\" : \u0026lt;maximum-number-of-open-connections\u0026gt;,\n \"username\" : \u0026lt;your-username\u0026gt;,\n \"password\" : \u0026lt;your-password\u0026gt;,\n \"database\" : \u0026lt;name-of-your-database\u0026gt;,\n \"charset\" : \u0026lt;name-of-the-character-set\u0026gt;,\n \"connectTimeout\" : \u0026lt;timeout-in-milliseconds\u0026gt;,\n \"testTimeout\" : \u0026lt;timeout-in-milliseconds\u0026gt;,\n \"queryTimeout\" : \u0026lt;timeout-in-milliseconds\u0026gt;,\n \"maxConnectionRetries\" : \u0026lt;maximum-number-of-connection-retries\u0026gt;,\n \"connectionRetryDelay\" : \u0026lt;delay-in-milliseconds\u0026gt;,\n \"sslMode\" : \u0026lt;\"disable\"|\"prefer\"|\"require\"|\"verify-ca\"|\"verify-full\"\u0026gt;,\n \"sslRootCert\" : \u0026lt;path to file with certificate\u0026gt;\n}\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehost\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe host of the database. Defaults to \u003ccode\u003elocalhost\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eport\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe port of the database. Defaults to \u003ccode\u003e5432\u003c/code\u003e for PostgreSQL and \u003ccode\u003e3306\u003c/code\u003e for MySQL.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxPoolSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe number of connections that may be kept open. Defaults to \u003ccode\u003e10\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eusername\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe username to connect to the database. Defaults to \u003ccode\u003evertx\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003epassword\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe password to connect to the database. Defaults to \u003ccode\u003epassword\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003edatabase\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe name of the database you want to connect to. Defaults to \u003ccode\u003etestdb\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003echarset\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe name of the character set you want to use for the connection. Defaults to \u003ccode\u003eUTF-8\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003econnectTimeout\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe timeout to wait for connecting to the database. Defaults to \u003ccode\u003e10000\u003c/code\u003e (= 10 seconds).\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003etestTimeout\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe timeout for connection tests performed by pools. Defaults to \u003ccode\u003e10000\u003c/code\u003e (= 10 seconds).\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003equeryTimeout\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe timeout to wait for a query in milliseconds. Default is not set.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxConnectionRetries\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eMaximum number of connection retries. Defaults to \u003ccode\u003e0\u003c/code\u003e (no retries).\u003cbr\u003e\nSpecial values:\u003c/p\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e-1 \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eUnlimited number of connection retries\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e0  \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eNo connection retries will be done\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003econnectionRetryDelay\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eDelay in milliseconds between each retry attempt. Defaults to \u003ccode\u003e5000\u003c/code\u003e (= 5 seconds).\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esslMode\u003c/code\u003e \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eIf you want to enable SSL support you should enable this parameter.\nFor example to connect Heroku you will need to use \u003cstrong\u003eprefer\u003c/strong\u003e.\u003c/p\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\"disable\" \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eonly try a non-SSL connection\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\"prefer\"  \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003efirst try an SSL connection; if that fails, try a non-SSL connection\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\"require\"  \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eonly try an SSL connection, but don\u0026#8217;t verify Certificate Authority\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\"verify-ca\"  \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eonly try an SSL connection, and verify that the server certificate is issued by a trusted\ncertificate authority (CA)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\"verify-full\"  \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eonly try an SSL connection, verify that the server certificate is issued by a trusted CA and\nthat the server host name matches that in the certificate\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esslRootCert\u003c/code\u003e \u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003ePath to SSL root certificate file. Is used if you want to verify privately issued certificate.\nRefer to \u003ca href=\"https://github.com/mauricio/postgresql-async\"\u003epostgresql-async\u003c/a\u003e documentation for more details.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.8.5","vertx-mysql-postgresql-client","ruby"]},"buildId":"D20Fcx-FR9X8CwgKxXrRx","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7cde6f5ea12aaa40097b.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" async=""></script><script src="/_next/static/D20Fcx-FR9X8CwgKxXrRx/_buildManifest.js" async=""></script><script src="/_next/static/D20Fcx-FR9X8CwgKxXrRx/_ssgManifest.js" async=""></script></body></html>