<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>Vert.x for RxGroovy | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/styles.065337ce.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.065337ce.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_read_stream_support">Read stream support</a></li>
<li><a href="#_handler_support">Handler support</a></li>
<li><a href="#_async_result_support">Async result support</a></li>
<li><a href="#_scheduler_support">Scheduler support</a></li>
<li><a href="#_json_unmarshalling">Json unmarshalling</a></li>
<li><a href="#_marshall_other_dataformats">Marshall other dataformats</a></li>
<li><a href="#_api_examples">Api examples</a>
<ul class="sectlevel2">
<li><a href="#_eventbus_message_stream">EventBus message stream</a></li>
<li><a href="#_timers">Timers</a></li>
<li><a href="#_http_client_requests">Http client requests</a></li>
<li><a href="#_http_server_requests">Http server requests</a></li>
<li><a href="#_websocket_client">Websocket client</a></li>
<li><a href="#_websocket_server">Websocket server</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div><a href="/docs/apidocs/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">vundefined<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"></ul></div></span></div></div><div><h1>Vert.x for RxGroovy</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/ReactiveX/RxJava">RxJava</a> is a popular library for composing asynchronous and event
based programs using observable sequences for the Java VM. <a href="https://github.com/ReactiveX/RxGroovy">RxGroovy</a>
is the Reactive Extensions for Groovy. This adaptor allows <code>groovy.lang.Closure</code> functions to be used
and RxJava will know how to invoke them.</p>
</div>
<div class="paragraph">
<p>Vert.x integrates naturally with RxGroovy, allowing to use observable wherever you can use streams or asynchronous results.</p>
</div>
<div class="paragraph">
<p>To use vert.x API for RxGroovy, add the following dependency to the <em>dependencies</em> section of your build descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>{maven-groupId}<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>{maven-artifactId}<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{maven-version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile {maven-groupId}:{maven-artifactId}:{maven-version}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_read_stream_support"><a class="anchor" href="#_read_stream_support"></a>Read stream support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RxJava observable is a perfect match for Vert.x <code>ReadStream</code> class : both provide a flow of items.</p>
</div>
<div class="paragraph">
<p>Vert.x API for Groovy provides <code>io.vertx.groovy.core.stream.ReadStream</code> objects, the RxGroovy provides a
Groovy extension module that adds the <code>toObservable</code> method to the read stream class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> fs = vertx.fileSystem()
fs.open(<span class="hljs-string">"/data.txt"</span>, [:], { result -&gt;
  <span class="hljs-keyword">def</span> file = result.result()
  <span class="hljs-keyword">def</span> observable = file.toObservable()
  observable.forEach({ data -&gt; println(<span class="hljs-string">"Read data: ${data.toString("</span>UTF<span class="hljs-number">-8</span><span class="hljs-string">")}"</span>) })
})</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handler_support"><a class="anchor" href="#_handler_support"></a>Handler support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The RxJava <code>io.vertx.ext.rx.java.RxHelper</code> should be used to:
- create an <code>io.vertx.ext.rx.java.ObservableHandler</code>,
- transform actions to an handler</p>
</div>
<div class="paragraph">
<p>The RxGroovy extension module adds the <code>toHandler</code> method on the <code>rx.Observer</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observer&lt;Long&gt; observer = Observers.create({ item -&gt; println(<span class="hljs-string">"Timer fired!"</span>) })
Handler&lt;Long&gt; handler = observer.toHandler()
vertx.setTimer(<span class="hljs-number">1000</span>, handler)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_async_result_support"><a class="anchor" href="#_async_result_support"></a>Async result support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Vert.x future objects are modelled as async result handlers and occur as last parameter of asynchronous methods.</p>
</div>
<div class="paragraph">
<p>The RxGroovy extension module adds the <code>toFuture</code> method on the <code>rx.Observer</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observer&lt;HttpServer&gt; observer = Observers.create({ server -&gt; println(<span class="hljs-string">"Server started"</span>) })
Handler&lt;AsyncResult&lt;HttpServer&gt;&gt; handler = observer.toFuture()
vertx.createHttpServer([<span class="hljs-string">port:</span><span class="hljs-number">1234</span>,<span class="hljs-string">host:</span><span class="hljs-string">"localhost"</span>]).listen(handler)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scheduler_support"><a class="anchor" href="#_scheduler_support"></a>Scheduler support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The reactive extension sometimes needs to schedule actions, for instance <code>Observable#timer</code> create and returns
a timer that emit periodic events. By default, scheduled actions are managed by RxJava, it means that the
timer thread are not Vert.x threads and therefore not executing in a Vert.x event loop.</p>
</div>
<div class="paragraph">
<p>When an RxJava method deals with a scheduler, it accepts an overloaded method accepting an extra <code>Rx.Scheduler</code>,
the RxGroovy extension module adds to the <code>Vertx</code> class the <code>scheduler()</code> method will return a scheduler that can be used in such places.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;Long&gt; timer = Observable.timer(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, TimeUnit.MILLISECONDS, vertx.scheduler())</code></pre>
</div>
</div>
<div class="paragraph">
<p>For blocking scheduled actions, a scheduler can be created with the <code>blockingScheduler</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Scheduler scheduler = vertx.blockingScheduler();
Observable&lt;Integer&gt; obs = blockingObservable.observeOn(scheduler);</code></pre>
</div>
</div>
<div class="paragraph">
<p>RxJava can also be configured to use a scheduler by default, the returned scheduler hook uses a blocking
scheduler for IO actions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">RxJavaSchedulersHook hook = RxHelper.schedulerHook(vertx)
RxJavaPlugins.getInstance().registerSchedulersHook(hook)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_json_unmarshalling"><a class="anchor" href="#_json_unmarshalling"></a>Json unmarshalling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>io.vertx.rx.groovy.RxHelper#unmarshaller(java.lang.Class)}</code> creates an <code>rx.Observable.Operator</code> that
transforms an <code>Observable&lt;Buffer&gt;</code> in json format into an object observable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> fileSystem = vertx.fileSystem()
fileSystem.open(<span class="hljs-string">"/data.txt"</span>, [:], { result -&gt;
  AsyncFile file = result.result()
  Observable&lt;Buffer&gt; observable = file.toObservable()
  observable.lift(RxHelper.unmarshaller(MyPojo<span class="hljs-class">.<span class="hljs-keyword">class</span>)).<span class="hljs-title">subscribe</span>({</span> mypojo -&gt;
      <span class="hljs-comment">// Process the object</span>
  })
})</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_marshall_other_dataformats"><a class="anchor" href="#_marshall_other_dataformats"></a>Marshall other dataformats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>io.vertx.rx.groovy.RxHelper#unmarshaller(java.lang.Class, ObjectMapper)}</code> creates an <code>rx.Observable.Operator</code> that
transforms an <code>Observable&lt;Buffer&gt;</code> in a format the mapper can parse  into an object observable.</p>
</div>
<div class="paragraph">
<p>Include the appropriate dependency from here: <a href="https://github.com/FasterXML/jackson-dataformats-text">jackson-dataformats-text</a></p>
</div>
<div class="paragraph">
<p>In order to use it to parse YAML you can do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Unresolved directive <span class="hljs-keyword">in</span> index.adoc - <span class="hljs-string">include:</span>:unmarhsallYaml.groovy[tags=example]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_examples"><a class="anchor" href="#_api_examples"></a>Api examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s study now a few examples of using Vert.x with RxJava.</p>
</div>
<div class="sect2">
<h3 id="_eventbus_message_stream"><a class="anchor" href="#_eventbus_message_stream"></a>EventBus message stream</h3>
<div class="paragraph">
<p>The event bus <code>MessageConsumer</code> provides naturally an <code>Observable&lt;Message&lt;T&gt;&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">EventBus eb = vertx.eventBus()
MessageConsumer&lt;String&gt; consumer = eb.&lt;String&gt;consumer(<span class="hljs-string">"the-address"</span>)
Observable&lt;Message&lt;String&gt;&gt; observable = consumer.toObservable()
Subscription sub = observable.subscribe({ msg -&gt;
  <span class="hljs-comment">// Got message</span>
});

<span class="hljs-comment">// Unregisters the stream after 10 seconds</span>
vertx.setTimer(<span class="hljs-number">10000</span>, { id -&gt;
  sub.unsubscribe()
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MessageConsumer</code> provides a stream of <code>Message</code>.
The <code>Message#body()</code> gives access to a new stream of message bodies if needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">EventBus eb = vertx.eventBus()
MessageConsumer&lt;String&gt; consumer = eb.&lt;String&gt;consumer(<span class="hljs-string">"the-address"</span>)
Observable&lt;String&gt; observable = consumer.bodyStream().toObservable()</code></pre>
</div>
</div>
<div class="paragraph">
<p>RxJava map/reduce composition style can be then be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;Double&gt; observable = vertx.eventBus().
&lt;Double&gt;consumer(<span class="hljs-string">"heat-sensor"</span>).
    bodyStream().
    toObservable()

observable.
    buffer(<span class="hljs-number">1</span>, TimeUnit.SECONDS).
    map({ samples -&gt; samples.sum() }).
    subscribe({ heat -&gt;
      vertx.eventBus().send(<span class="hljs-string">"news-feed"</span>, <span class="hljs-string">"Current heat is "</span> + heat)
    });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timers"><a class="anchor" href="#_timers"></a>Timers</h3>
<div class="paragraph">
<p>Timer task can be created with <code>Vertx#timerStream(long)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">vertx.timerStream(<span class="hljs-number">1000</span>).
    toObservable().
    subscribe({ id -&gt;
          println(<span class="hljs-string">"Callback after 1 second"</span>)
        }
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p>Periodic task can be created with <code>Vertx#periodicStream(long)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">vertx.periodicStream(<span class="hljs-number">1000</span>).
    toObservable().
    subscribe({ id -&gt;
          println(<span class="hljs-string">"Callback every second"</span>)
        }
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The observable can be cancelled with an unsubscription:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">vertx.periodicStream(<span class="hljs-number">1000</span>).
    toObservable().
    subscribe(<span class="hljs-keyword">new</span> Subscriber&lt;Long&gt;() {
      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onNext(Long aLong) {
        <span class="hljs-comment">// Callback</span>
        unsubscribe()
      }
      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onError(Throwable e) {}
      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onCompleted() {}
    })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_client_requests"><a class="anchor" href="#_http_client_requests"></a>Http client requests</h3>
<div class="paragraph">
<p><code>HttpClientRequest#toObservable()</code> provides a one shot callback with the <code>HttpClientResponse</code>}
 object. The observable reports a request failure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">HttpClientRequest request = client.request(HttpMethod.GET, <span class="hljs-number">8080</span>, <span class="hljs-string">"localhost"</span>, <span class="hljs-string">"/the_uri"</span>)
request.toObservable().subscribe({ response -&gt;
  <span class="hljs-comment">// Process the response</span>
}, { error -&gt;
  <span class="hljs-comment">// Could not connect</span>
})
request.end()</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> The response can be processed as an `Observable&lt;Buffer&gt;` with the
`HttpClientResponse#toObservable()` method:</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">HttpClientRequest request = client.request(HttpMethod.GET, <span class="hljs-number">8080</span>, <span class="hljs-string">"localhost"</span>, <span class="hljs-string">"/the_uri"</span>)
request.toObservable().
    subscribe(
        { response -&gt;
          Observable&lt;Buffer&gt; observable = response.toObservable()
          observable.forEach(
              { buffer -&gt;
                <span class="hljs-comment">// Process buffer</span>
              })
        })</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same flow can be achieved with the <code>flatMap</code> operation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">request.toObservable().
    flatMap({resp -&gt; resp.&amp;toObservable}).
    forEach(
        { buffer -&gt;
      <span class="hljs-comment">// Process buffer</span>
    })</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also unmarshall the <code>Observable&lt;Buffer&gt;</code> into an object using the {@link io.vertx.rx.groovy.RxHelpe.RxHelper#unmarshaller(java.lang.Class)}
static method. This method creates an <code>Rx.Observable.Operator</code> unmarshalling buffers to an object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">request.toObservable().
    flatMap({ resp -&gt; resp.&amp;toObservable }).
    lift(RxHelper.unmarshaller(MyPojo<span class="hljs-class">.<span class="hljs-keyword">class</span>)).
    <span class="hljs-title">forEach</span>({</span> pojo -&gt;
      <span class="hljs-comment">// Process pojo</span>
    })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_server_requests"><a class="anchor" href="#_http_server_requests"></a>Http server requests</h3>
<div class="paragraph">
<p>The <code>HttpServer#requestStream()</code> provides a callback for each incoming request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;HttpServerRequest&gt; requestObservable = server.requestStream().toObservable()
requestObservable.subscribe({ request -&gt;
  <span class="hljs-comment">// Process request</span>
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>HttpServerRequest</code> can then be adapted to an <code>Observable&lt;Buffer&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;HttpServerRequest&gt; requestObservable = server.requestStream().toObservable()
requestObservable.subscribe({ request -&gt;
  Observable&lt;Buffer&gt; observable = request.toObservable()
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>io.vertx.rx.groovy.RxHelpe.RxHelper#unmarshaller(java.lang.Class)}</code> can be used to parse and map a json request to an object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;HttpServerRequest&gt; requestObservable = server.requestStream().toObservable()
requestObservable.subscribe({ request -&gt;
  Observable&lt;MyPojo&gt; observable = request.
      toObservable().
      lift(RxHelper.unmarshaller(MyPojo<span class="hljs-class">.<span class="hljs-keyword">class</span>))
})</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_websocket_client"><a class="anchor" href="#_websocket_client"></a>Websocket client</h3>
<div class="paragraph">
<p>The`HttpClient#websocketStream`} provides a single callback when the websocket connects, otherwise a failure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">HttpClient client = vertx.createHttpClient()
WebSocketStream stream = client.websocketStream(<span class="hljs-number">8080</span>, <span class="hljs-string">"localhost"</span>, <span class="hljs-string">"/the_uri"</span>)
Observable&lt;WebSocket&gt; socketObservable = stream.toObservable()
socketObservable.subscribe(
    { ws -&gt;
      <span class="hljs-comment">// Use the websocket</span>
    }, { error -&gt;
  <span class="hljs-comment">// Could not connect</span>
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>WebSocket</code> can then be turned into an <code>Observable&lt;Buffer&gt;</code> easily</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">socketObservable.subscribe(
    { socket -&gt;
      Observable&lt;Buffer&gt; dataObs = socket.toObservable()
      dataObs.subscribe({ buffer -&gt;
        println(<span class="hljs-string">"Got message ${buffer.toString("</span>UTF<span class="hljs-number">-8</span><span class="hljs-string">")}"</span>)
      })
    })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_websocket_server"><a class="anchor" href="#_websocket_server"></a>Websocket server</h3>
<div class="paragraph">
<p>The <code>HttpServer#websocketStream()</code> provides a callback for each incoming connection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;ServerWebSocket&gt; socketObservable = server.websocketStream().toObservable()
socketObservable.subscribe(
    { socket -&gt; println(<span class="hljs-string">"Web socket connect"</span>) },
    { failure -&gt; println(<span class="hljs-string">"Should never be called"</span>) },
    { println(<span class="hljs-string">"Subscription ended or server closed"</span>) }
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ServerWebSocket</code> can be turned into an <code>Observable&lt;Buffer&gt;</code> easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Observable&lt;ServerWebSocket&gt; socketObservable = server.websocketStream().toObservable()
socketObservable.subscribe({ socket -&gt;
  Observable&lt;Buffer&gt; dataObs = socket.toObservable()
  dataObs.subscribe({ buffer -&gt;
    println(<span class="hljs-string">"Got message ${buffer.toString("</span>UTF<span class="hljs-number">-8</span><span class="hljs-string">")}"</span>)
  })
})</code></pre>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/download/">Download</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li><li><a href="/channels/">Channels</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.0/vertx-rx/groovy","title":"Vert.x for RxGroovy","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_read_stream_support\"\u003eRead stream support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handler_support\"\u003eHandler support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_async_result_support\"\u003eAsync result support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_scheduler_support\"\u003eScheduler support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_json_unmarshalling\"\u003eJson unmarshalling\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_marshall_other_dataformats\"\u003eMarshall other dataformats\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_api_examples\"\u003eApi examples\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_eventbus_message_stream\"\u003eEventBus message stream\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_timers\"\u003eTimers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_client_requests\"\u003eHttp client requests\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_server_requests\"\u003eHttp server requests\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_websocket_client\"\u003eWebsocket client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_websocket_server\"\u003eWebsocket server\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x for RxGroovy\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/ReactiveX/RxJava\"\u003eRxJava\u003c/a\u003e is a popular library for composing asynchronous and event\nbased programs using observable sequences for the Java VM. \u003ca href=\"https://github.com/ReactiveX/RxGroovy\"\u003eRxGroovy\u003c/a\u003e\nis the Reactive Extensions for Groovy. This adaptor allows \u003ccode\u003egroovy.lang.Closure\u003c/code\u003e functions to be used\nand RxJava will know how to invoke them.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x integrates naturally with RxGroovy, allowing to use observable wherever you can use streams or asynchronous results.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use vert.x API for RxGroovy, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build descriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e{maven-groupId}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e{maven-artifactId}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e{maven-version}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile {maven-groupId}:{maven-artifactId}:{maven-version}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_read_stream_support\"\u003e\u003ca class=\"anchor\" href=\"#_read_stream_support\"\u003e\u003c/a\u003eRead stream support\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRxJava observable is a perfect match for Vert.x \u003ccode\u003eReadStream\u003c/code\u003e class : both provide a flow of items.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x API for Groovy provides \u003ccode\u003eio.vertx.groovy.core.stream.ReadStream\u003c/code\u003e objects, the RxGroovy provides a\nGroovy extension module that adds the \u003ccode\u003etoObservable\u003c/code\u003e method to the read stream class.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e fs = vertx.fileSystem()\nfs.open(\u003cspan class=\"hljs-string\"\u003e\"/data.txt\"\u003c/span\u003e, [:], { result -\u0026gt;\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e file = result.result()\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e observable = file.toObservable()\n  observable.forEach({ data -\u0026gt; println(\u003cspan class=\"hljs-string\"\u003e\"Read data: ${data.toString(\"\u003c/span\u003eUTF\u003cspan class=\"hljs-number\"\u003e-8\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\")}\"\u003c/span\u003e) })\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_handler_support\"\u003e\u003ca class=\"anchor\" href=\"#_handler_support\"\u003e\u003c/a\u003eHandler support\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RxJava \u003ccode\u003eio.vertx.ext.rx.java.RxHelper\u003c/code\u003e should be used to:\n- create an \u003ccode\u003eio.vertx.ext.rx.java.ObservableHandler\u003c/code\u003e,\n- transform actions to an handler\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RxGroovy extension module adds the \u003ccode\u003etoHandler\u003c/code\u003e method on the \u003ccode\u003erx.Observer\u003c/code\u003e class:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObserver\u0026lt;Long\u0026gt; observer = Observers.create({ item -\u0026gt; println(\u003cspan class=\"hljs-string\"\u003e\"Timer fired!\"\u003c/span\u003e) })\nHandler\u0026lt;Long\u0026gt; handler = observer.toHandler()\nvertx.setTimer(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, handler)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_async_result_support\"\u003e\u003ca class=\"anchor\" href=\"#_async_result_support\"\u003e\u003c/a\u003eAsync result support\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn Vert.x future objects are modelled as async result handlers and occur as last parameter of asynchronous methods.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RxGroovy extension module adds the \u003ccode\u003etoFuture\u003c/code\u003e method on the \u003ccode\u003erx.Observer\u003c/code\u003e class:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObserver\u0026lt;HttpServer\u0026gt; observer = Observers.create({ server -\u0026gt; println(\u003cspan class=\"hljs-string\"\u003e\"Server started\"\u003c/span\u003e) })\nHandler\u0026lt;AsyncResult\u0026lt;HttpServer\u0026gt;\u0026gt; handler = observer.toFuture()\nvertx.createHttpServer([\u003cspan class=\"hljs-string\"\u003eport:\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003ehost:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e]).listen(handler)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_scheduler_support\"\u003e\u003ca class=\"anchor\" href=\"#_scheduler_support\"\u003e\u003c/a\u003eScheduler support\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe reactive extension sometimes needs to schedule actions, for instance \u003ccode\u003eObservable#timer\u003c/code\u003e create and returns\na timer that emit periodic events. By default, scheduled actions are managed by RxJava, it means that the\ntimer thread are not Vert.x threads and therefore not executing in a Vert.x event loop.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen an RxJava method deals with a scheduler, it accepts an overloaded method accepting an extra \u003ccode\u003eRx.Scheduler\u003c/code\u003e,\nthe RxGroovy extension module adds to the \u003ccode\u003eVertx\u003c/code\u003e class the \u003ccode\u003escheduler()\u003c/code\u003e method will return a scheduler that can be used in such places.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;Long\u0026gt; timer = Observable.timer(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e, TimeUnit.MILLISECONDS, vertx.scheduler())\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor blocking scheduled actions, a scheduler can be created with the \u003ccode\u003eblockingScheduler\u003c/code\u003e method:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eScheduler scheduler = vertx.blockingScheduler();\nObservable\u0026lt;Integer\u0026gt; obs = blockingObservable.observeOn(scheduler);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRxJava can also be configured to use a scheduler by default, the returned scheduler hook uses a blocking\nscheduler for IO actions:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eRxJavaSchedulersHook hook = RxHelper.schedulerHook(vertx)\nRxJavaPlugins.getInstance().registerSchedulersHook(hook)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_json_unmarshalling\"\u003e\u003ca class=\"anchor\" href=\"#_json_unmarshalling\"\u003e\u003c/a\u003eJson unmarshalling\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eio.vertx.rx.groovy.RxHelper#unmarshaller(java.lang.Class)}\u003c/code\u003e creates an \u003ccode\u003erx.Observable.Operator\u003c/code\u003e that\ntransforms an \u003ccode\u003eObservable\u0026lt;Buffer\u0026gt;\u003c/code\u003e in json format into an object observable:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e fileSystem = vertx.fileSystem()\nfileSystem.open(\u003cspan class=\"hljs-string\"\u003e\"/data.txt\"\u003c/span\u003e, [:], { result -\u0026gt;\n  AsyncFile file = result.result()\n  Observable\u0026lt;Buffer\u0026gt; observable = file.toObservable()\n  observable.lift(RxHelper.unmarshaller(MyPojo\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e)).\u003cspan class=\"hljs-title\"\u003esubscribe\u003c/span\u003e({\u003c/span\u003e mypojo -\u0026gt;\n      \u003cspan class=\"hljs-comment\"\u003e// Process the object\u003c/span\u003e\n  })\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_marshall_other_dataformats\"\u003e\u003ca class=\"anchor\" href=\"#_marshall_other_dataformats\"\u003e\u003c/a\u003eMarshall other dataformats\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eio.vertx.rx.groovy.RxHelper#unmarshaller(java.lang.Class, ObjectMapper)}\u003c/code\u003e creates an \u003ccode\u003erx.Observable.Operator\u003c/code\u003e that\ntransforms an \u003ccode\u003eObservable\u0026lt;Buffer\u0026gt;\u003c/code\u003e in a format the mapper can parse  into an object observable.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eInclude the appropriate dependency from here: \u003ca href=\"https://github.com/FasterXML/jackson-dataformats-text\"\u003ejackson-dataformats-text\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to use it to parse YAML you can do the following:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eUnresolved directive \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e index.adoc - \u003cspan class=\"hljs-string\"\u003einclude:\u003c/span\u003e:unmarhsallYaml.groovy[tags=example]\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_api_examples\"\u003e\u003ca class=\"anchor\" href=\"#_api_examples\"\u003e\u003c/a\u003eApi examples\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eLet\u0026#8217;s study now a few examples of using Vert.x with RxJava.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_eventbus_message_stream\"\u003e\u003ca class=\"anchor\" href=\"#_eventbus_message_stream\"\u003e\u003c/a\u003eEventBus message stream\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe event bus \u003ccode\u003eMessageConsumer\u003c/code\u003e provides naturally an \u003ccode\u003eObservable\u0026lt;Message\u0026lt;T\u0026gt;\u0026gt;\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eEventBus eb = vertx.eventBus()\nMessageConsumer\u0026lt;String\u0026gt; consumer = eb.\u0026lt;String\u0026gt;consumer(\u003cspan class=\"hljs-string\"\u003e\"the-address\"\u003c/span\u003e)\nObservable\u0026lt;Message\u0026lt;String\u0026gt;\u0026gt; observable = consumer.toObservable()\nSubscription sub = observable.subscribe({ msg -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Got message\u003c/span\u003e\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Unregisters the stream after 10 seconds\u003c/span\u003e\nvertx.setTimer(\u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e, { id -\u0026gt;\n  sub.unsubscribe()\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eMessageConsumer\u003c/code\u003e provides a stream of \u003ccode\u003eMessage\u003c/code\u003e.\nThe \u003ccode\u003eMessage#body()\u003c/code\u003e gives access to a new stream of message bodies if needed:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eEventBus eb = vertx.eventBus()\nMessageConsumer\u0026lt;String\u0026gt; consumer = eb.\u0026lt;String\u0026gt;consumer(\u003cspan class=\"hljs-string\"\u003e\"the-address\"\u003c/span\u003e)\nObservable\u0026lt;String\u0026gt; observable = consumer.bodyStream().toObservable()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRxJava map/reduce composition style can be then be used:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;Double\u0026gt; observable = vertx.eventBus().\n\u0026lt;Double\u0026gt;consumer(\u003cspan class=\"hljs-string\"\u003e\"heat-sensor\"\u003c/span\u003e).\n    bodyStream().\n    toObservable()\n\nobservable.\n    buffer(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, TimeUnit.SECONDS).\n    map({ samples -\u0026gt; samples.sum() }).\n    subscribe({ heat -\u0026gt;\n      vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\"news-feed\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"Current heat is \"\u003c/span\u003e + heat)\n    });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_timers\"\u003e\u003ca class=\"anchor\" href=\"#_timers\"\u003e\u003c/a\u003eTimers\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTimer task can be created with \u003ccode\u003eVertx#timerStream(long)\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003evertx.timerStream(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e).\n    toObservable().\n    subscribe({ id -\u0026gt;\n          println(\u003cspan class=\"hljs-string\"\u003e\"Callback after 1 second\"\u003c/span\u003e)\n        }\n    )\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePeriodic task can be created with \u003ccode\u003eVertx#periodicStream(long)\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003evertx.periodicStream(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e).\n    toObservable().\n    subscribe({ id -\u0026gt;\n          println(\u003cspan class=\"hljs-string\"\u003e\"Callback every second\"\u003c/span\u003e)\n        }\n    )\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe observable can be cancelled with an unsubscription:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003evertx.periodicStream(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e).\n    toObservable().\n    subscribe(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Subscriber\u0026lt;Long\u0026gt;() {\n      \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e onNext(Long aLong) {\n        \u003cspan class=\"hljs-comment\"\u003e// Callback\u003c/span\u003e\n        unsubscribe()\n      }\n      \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e onError(Throwable e) {}\n      \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e onCompleted() {}\n    })\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_http_client_requests\"\u003e\u003ca class=\"anchor\" href=\"#_http_client_requests\"\u003e\u003c/a\u003eHttp client requests\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003eHttpClientRequest#toObservable()\u003c/code\u003e provides a one shot callback with the \u003ccode\u003eHttpClientResponse\u003c/code\u003e}\n object. The observable reports a request failure.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eHttpClientRequest request = client.request(HttpMethod.GET, \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"/the_uri\"\u003c/span\u003e)\nrequest.toObservable().subscribe({ response -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Process the response\u003c/span\u003e\n}, { error -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Could not connect\u003c/span\u003e\n})\nrequest.end()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"literalblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e The response can be processed as an `Observable\u0026lt;Buffer\u0026gt;` with the\n`HttpClientResponse#toObservable()` method:\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eHttpClientRequest request = client.request(HttpMethod.GET, \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"/the_uri\"\u003c/span\u003e)\nrequest.toObservable().\n    subscribe(\n        { response -\u0026gt;\n          Observable\u0026lt;Buffer\u0026gt; observable = response.toObservable()\n          observable.forEach(\n              { buffer -\u0026gt;\n                \u003cspan class=\"hljs-comment\"\u003e// Process buffer\u003c/span\u003e\n              })\n        })\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe same flow can be achieved with the \u003ccode\u003eflatMap\u003c/code\u003e operation:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003erequest.toObservable().\n    flatMap({resp -\u0026gt; resp.\u0026amp;toObservable}).\n    forEach(\n        { buffer -\u0026gt;\n      \u003cspan class=\"hljs-comment\"\u003e// Process buffer\u003c/span\u003e\n    })\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWe can also unmarshall the \u003ccode\u003eObservable\u0026lt;Buffer\u0026gt;\u003c/code\u003e into an object using the {@link io.vertx.rx.groovy.RxHelpe.RxHelper#unmarshaller(java.lang.Class)}\nstatic method. This method creates an \u003ccode\u003eRx.Observable.Operator\u003c/code\u003e unmarshalling buffers to an object:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003erequest.toObservable().\n    flatMap({ resp -\u0026gt; resp.\u0026amp;toObservable }).\n    lift(RxHelper.unmarshaller(MyPojo\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e)).\n    \u003cspan class=\"hljs-title\"\u003eforEach\u003c/span\u003e({\u003c/span\u003e pojo -\u0026gt;\n      \u003cspan class=\"hljs-comment\"\u003e// Process pojo\u003c/span\u003e\n    })\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_http_server_requests\"\u003e\u003ca class=\"anchor\" href=\"#_http_server_requests\"\u003e\u003c/a\u003eHttp server requests\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eHttpServer#requestStream()\u003c/code\u003e provides a callback for each incoming request:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;HttpServerRequest\u0026gt; requestObservable = server.requestStream().toObservable()\nrequestObservable.subscribe({ request -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Process request\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eHttpServerRequest\u003c/code\u003e can then be adapted to an \u003ccode\u003eObservable\u0026lt;Buffer\u0026gt;\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;HttpServerRequest\u0026gt; requestObservable = server.requestStream().toObservable()\nrequestObservable.subscribe({ request -\u0026gt;\n  Observable\u0026lt;Buffer\u0026gt; observable = request.toObservable()\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eio.vertx.rx.groovy.RxHelpe.RxHelper#unmarshaller(java.lang.Class)}\u003c/code\u003e can be used to parse and map a json request to an object:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;HttpServerRequest\u0026gt; requestObservable = server.requestStream().toObservable()\nrequestObservable.subscribe({ request -\u0026gt;\n  Observable\u0026lt;MyPojo\u0026gt; observable = request.\n      toObservable().\n      lift(RxHelper.unmarshaller(MyPojo\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e))\n})\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_websocket_client\"\u003e\u003ca class=\"anchor\" href=\"#_websocket_client\"\u003e\u003c/a\u003eWebsocket client\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe`HttpClient#websocketStream`} provides a single callback when the websocket connects, otherwise a failure:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eHttpClient client = vertx.createHttpClient()\nWebSocketStream stream = client.websocketStream(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"/the_uri\"\u003c/span\u003e)\nObservable\u0026lt;WebSocket\u0026gt; socketObservable = stream.toObservable()\nsocketObservable.subscribe(\n    { ws -\u0026gt;\n      \u003cspan class=\"hljs-comment\"\u003e// Use the websocket\u003c/span\u003e\n    }, { error -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Could not connect\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eWebSocket\u003c/code\u003e can then be turned into an \u003ccode\u003eObservable\u0026lt;Buffer\u0026gt;\u003c/code\u003e easily\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003esocketObservable.subscribe(\n    { socket -\u0026gt;\n      Observable\u0026lt;Buffer\u0026gt; dataObs = socket.toObservable()\n      dataObs.subscribe({ buffer -\u0026gt;\n        println(\u003cspan class=\"hljs-string\"\u003e\"Got message ${buffer.toString(\"\u003c/span\u003eUTF\u003cspan class=\"hljs-number\"\u003e-8\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\")}\"\u003c/span\u003e)\n      })\n    })\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_websocket_server\"\u003e\u003ca class=\"anchor\" href=\"#_websocket_server\"\u003e\u003c/a\u003eWebsocket server\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eHttpServer#websocketStream()\u003c/code\u003e provides a callback for each incoming connection:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;ServerWebSocket\u0026gt; socketObservable = server.websocketStream().toObservable()\nsocketObservable.subscribe(\n    { socket -\u0026gt; println(\u003cspan class=\"hljs-string\"\u003e\"Web socket connect\"\u003c/span\u003e) },\n    { failure -\u0026gt; println(\u003cspan class=\"hljs-string\"\u003e\"Should never be called\"\u003c/span\u003e) },\n    { println(\u003cspan class=\"hljs-string\"\u003e\"Subscription ended or server closed\"\u003c/span\u003e) }\n)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eServerWebSocket\u003c/code\u003e can be turned into an \u003ccode\u003eObservable\u0026lt;Buffer\u0026gt;\u003c/code\u003e easily:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eObservable\u0026lt;ServerWebSocket\u0026gt; socketObservable = server.websocketStream().toObservable()\nsocketObservable.subscribe({ socket -\u0026gt;\n  Observable\u0026lt;Buffer\u0026gt; dataObs = socket.toObservable()\n  dataObs.subscribe({ buffer -\u0026gt;\n    println(\u003cspan class=\"hljs-string\"\u003e\"Got message ${buffer.toString(\"\u003c/span\u003eUTF\u003cspan class=\"hljs-number\"\u003e-8\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\")}\"\u003c/span\u003e)\n  })\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.0"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.0","vertx-rx","groovy"]},"buildId":"X7HrzfONgQ3zrJoHxk_7_","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7cde6f5ea12aaa40097b.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" async=""></script><script src="/_next/static/X7HrzfONgQ3zrJoHxk_7_/_buildManifest.js" async=""></script><script src="/_next/static/X7HrzfONgQ3zrJoHxk_7_/_ssgManifest.js" async=""></script></body></html>