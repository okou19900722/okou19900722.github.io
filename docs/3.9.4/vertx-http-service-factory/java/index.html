<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><title>HTTP Service Factory | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-http-service-factory" as="fetch" crossorigin="anonymous"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/styles.065337ce.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.065337ce.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/introduction-to-vertx-and-reactive/">Intro</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/faq/">FAQ</a><a class="navbar-menu-item" href="/blog/">Blog</a><a class="navbar-menu-item" href="/community/">Community</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_deploying_a_java_service_packaged_as_a_fatjar">Deploying a Java service packaged as a fatjar</a></li>
<li><a href="#_http_client_configuration">Http client configuration</a>
<ul class="sectlevel2">
<li><a href="#_client_authentication">Client authentication</a></li>
<li><a href="#_proxy_server_configuration">Proxy server configuration</a></li>
</ul>
</li>
<li><a href="#_public_key_servers">Public key servers</a></li>
<li><a href="#_validation_policy">Validation policy</a></li>
<li><a href="#_cache_directory">Cache directory</a></li>
<li><a href="#_examples">Examples</a>
<ul class="sectlevel2">
<li><a href="#_bintray">Bintray</a></li>
<li><a href="#_service_zip">Service zip</a></li>
<li><a href="#_bintray_hosting">Bintray hosting</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div class="docs-content-metadata-repo"><div class="github-stars"><a href="https://github.com/vert-x3/vertx-http-service-factory"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>8 stars</a></div></div><div><a href="/docs/apidocs/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="docs-content-metadata-edit"><a href="https://github.com/vert-x3/vertx-http-service-factory/tree/master/src/main/asciidoc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> Edit</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">v3.9.4<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/docs/3.9.4/vertx-http-service-factory/java/"><li class="dropdown-item">v<!-- -->3.9.4</li></a><a href="/docs/3.9.3/vertx-http-service-factory/java/"><li class="dropdown-item">v<!-- -->3.9.3</li></a><a href="/docs/3.9.2/vertx-http-service-factory/java/"><li class="dropdown-item">v<!-- -->3.9.2</li></a><a href="/docs/3.9.1/vertx-http-service-factory/java/"><li class="dropdown-item">v<!-- -->3.9.1</li></a><a href="/docs/3.9.0/vertx-http-service-factory/java/"><li class="dropdown-item">v<!-- -->3.9.0</li></a></ul></div></span></div></div><div><h1>Vert.x Http Service Factory</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The http service factory is a Vert.x service factory for deploying services from an http server. It it an alternative
to the Maven Service Factory for using services hosted on a plain http server, e.g a JavaScript service zipped
and hosted somewhere. Unlike the Maven Service Factory, the Http Service Factory does not provide any kind of
classpath dependency resolution. To use this feature be sure that <code>io.vertx:vertx-http-service-factory:3.9.4</code> is in your classpath.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run https://myserver.net/myverticle.zip::my-service</pre>
</div>
</div>
<div class="paragraph">
<p>Although it looks like an http URL, it is a verticle identifier with a factory bound to the <em>https</em> prefix (<em>http</em>
also supported).</p>
</div>
<div class="paragraph">
<p>The service identifier is made up of the suffix to form an <em>http</em> URL or the archive that contains the service,
followed by a double colon <code>::</code> and a service name.</p>
</div>
<div class="paragraph">
<p>The service name is used to find the service descriptor file inside the artifact which is named by the service name with
a <code>.json</code> extension. This is explained in the <a href="http://vertx.io/docs/vertx-service-factory/java">Service Verticle Factory</a>
documentation.</p>
</div>
<div class="paragraph">
<p>For example, to deploy a service that exists in an hosted at <code><a href="https://myserver.net/myverticle.zip" class="bare">https://myserver.net/myverticle.zip</a></code> called <code>my-service</code>
you would use the string <code><a href="https://myserver.net/myverticle.zip::my-service" class="bare">https://myserver.net/myverticle.zip::my-service</a></code>.</p>
</div>
<div class="paragraph">
<p>Given this string, the verticle factory will use the Vert.x http client try and download the resource
<code><a href="https://myserver.net/myverticle.zip" class="bare">https://myserver.net/myverticle.zip</a></code>.</p>
</div>
<div class="paragraph">
<p>It then constructs a classpath including this archive and creates a classloader with that classpath in order
to load the service using the standard <a href="http://vertx.io/docs/vertx-service-factory/java">Service Verticle Factory</a>.</p>
</div>
<div class="paragraph">
<p>The Service Verticle Factory will look for a descriptor file called `my-service.json on the constructed classpath to
actually load the service.</p>
</div>
<div class="paragraph">
<p>Given a service identifier the service can be deployed programmatically e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx.deployVerticle("https://myserver.net/myverticle.zip::my-service", ...)</pre>
</div>
</div>
<div class="paragraph">
<p>Or can be deployed on the command line with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run https://myserver.net/myverticle.zip::my-service</pre>
</div>
</div>
<div class="paragraph">
<p>The service name can be omitted when the service jar <code>META-INF/MANIFEST</code> contains a `Main-Verticle`entry that
declares the verticle to run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx.deployVerticle("https://myserver.net/myverticle.zip", ...)</pre>
</div>
</div>
<div class="paragraph">
<p>And the manifest contains:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Main-Verticle: service:my.service</pre>
</div>
</div>
<div class="paragraph">
<p>Of course it can be deployed on the command line with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run https://myserver.net/myverticle.zip</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_a_java_service_packaged_as_a_fatjar"><a class="anchor" href="#_deploying_a_java_service_packaged_as_a_fatjar"></a>Deploying a Java service packaged as a fatjar</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The deployer factory can also deploy a Java service packaged as a fatjar, i.e a jar that contains a Java service and all the classes needed
to run, for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the jar manifest contains the <code>Main-Verticle:myservice.json</code></p>
</li>
<li>
<p><code>myservice.json</code> declares the service via <code>main:my.Verticle</code></p>
</li>
<li>
<p>the class <code>my.Verticle</code></p>
</li>
<li>
<p>all the classes needed by the verticle to run, for example Google Guava jar, etc&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_client_configuration"><a class="anchor" href="#_http_client_configuration"></a>Http client configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Files are downloaded using Vert.x http client, by default the https client is configured with the <code>ssl=true</code>
and <code>trustAll=true</code>. The default client options can be overriden to use specific configurations with the
<em>vertx.httpServiceFactory.httpClientOptions</em> system property and the <em>vertx.httpServiceFactory.httpsClientOptions</em>
system property, these properties are valid for any http resource.</p>
</div>
<div class="sect2">
<h3 id="_client_authentication"><a class="anchor" href="#_client_authentication"></a>Client authentication</h3>
<div class="paragraph">
<p>The client supports basic authentication via the <em>vertx.httpServiceFactory.authUsername</em> and
<em>vertx.httpServiceFactory.authPassword</em> system properties.</p>
</div>
<div class="paragraph">
<p>Authentication is done only for services (i.e basic authentication will not be done for key servers) and only using
an https connection.</p>
</div>
</div>
<div class="sect2">
<h3 id="_proxy_server_configuration"><a class="anchor" href="#_proxy_server_configuration"></a>Proxy server configuration</h3>
<div class="paragraph">
<p>The http client can be configured to support a proxy server with the <em>vertx.httpServiceFactory.proxyHost</em> and
<em>vertx.httpServiceFactory.proxyPort</em> system properties.</p>
</div>
<div class="paragraph">
<p>If you need more proxy configuration such as support for SOCKS or proxy authentication, you can use specify them
in the <em>vertx.httpServiceFactory.httpClientOptions</em> instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run https://myserver.net/myverticle.zip \
  -Dvertx.httpServiceFactory.httpClientOptions="{\"proxyOptions\":{ \
     \"host\":\"proxy-host\", \
     \"port\":1234 \
     \"type\":\"SOCKS4\"
  } }"</pre>
</div>
</div>
<div class="paragraph">
<p>Please see read the <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html">HttpClientOptions</a></code> configuration for all the details;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_public_key_servers"><a class="anchor" href="#_public_key_servers"></a>Public key servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Signed artifacts signatures are verifed using a public key, public key are retrieved from a public key server.</p>
</div>
<div class="paragraph">
<p>The public key server uri can be configured with the <em>vertx.httpServiceFactory.keyserverURITemplate</em> system property.
The URI template is used to create the public key URI this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String.format(keyserverURITemplate, signature.getKeyID())</pre>
</div>
</div>
<div class="paragraph">
<p>When the property is not set, the default public key server is the <em>SKS OpenPGP Public Key Server</em> server used and
the uri template used is : <code><a href="http://pool.sks-keyservers.net:11371/pks/lookup?op=get&amp;options=mr&amp;search=0x%016X" class="bare">http://pool.sks-keyservers.net:11371/pks/lookup?op=get&amp;options=mr&amp;search=0x%016X</a></code>
this server will server public key resources with the <em>application/pgp-keys</em> media type.</p>
</div>
<div class="paragraph">
<p>The Json <a href="https://keybase.io/docs/api/1.0/call/key/fetch">format</a> sent by Keybase.io is also support. Keybase.io
can be used as a public key server with <code><a href="https://keybase.io/_/api/1.0/key/fetch.json?pgp_key_ids=%016X" class="bare">https://keybase.io/_/api/1.0/key/fetch.json?pgp_key_ids=%016X</a></code> URI template.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation_policy"><a class="anchor" href="#_validation_policy"></a>Validation policy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The validation policy governs how downloaded services are validated, the <em>vertx.httpServiceFactory.validationPolicy</em>
system property configures the behavior of the verticle factory when it attemps to deploy a downloaded service file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>none</em> : the service file is just deployed as is</p>
</li>
<li>
<p><em>verify</em> : the service file is verified when there is a corresponding <em>.asc</em> signature file, otherwise it is
not verified. If the signature cannot be verified, the deployment fails.</p>
</li>
<li>
<p><em>mandatory</em>: the service file must have a corresponding <em>.asc</em> signature file and the signature must be verified.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default validation policy is_verify_*.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cache_directory"><a class="anchor" href="#_cache_directory"></a>Cache directory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The cache directory stores the files used by the http service factory after download:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>deployed services</p>
</li>
<li>
<p>service signatures</p>
</li>
<li>
<p>public keys</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The cached files are named after the percent encoded download URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-rw-r--r--  1 julien  staff   270 May  3 21:44 http%3A%2F%2Flocalhost%3A8080%2Fthe_verticle.zip
-rw-r--r--  1 julien  staff   473 May  3 21:44 http%3A%2F%2Flocalhost%3A8080%2Fthe_verticle.zip.asc
-rw-r--r--  1 julien  staff  1768 May  3 21:44 http%3A%2F%2Flocalhost%3A8081%2Fpks%2Flookup%3Fop%3Dget%26options%3Dmr%26search%3D0x9F9358A769793D09</pre>
</div>
</div>
<div class="paragraph">
<p>The default cache directory <em>.vertx</em> can be set to a specific location with the <em>vertx.httpServiceFactory.cacheDir</em>
system property.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bintray"><a class="anchor" href="#_bintray"></a>Bintray</h3>
<div class="paragraph">
<p>Bintray is a distribution platform that can be used for hosting files.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_zip"><a class="anchor" href="#_service_zip"></a>Service zip</h3>
<div class="listingblock">
<div class="content">
<pre>&gt; echo 'console.log("hello world")' &gt; helloworld.js
&gt; echo '{"main":"helloworld.js"}' &gt; helloworld.json
&gt; zip helloworld.zip helloworld.json helloworld.js</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bintray_hosting"><a class="anchor" href="#_bintray_hosting"></a>Bintray hosting</h3>
<div class="paragraph">
<p>Assuming you have a Bintray account:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a Bintray repository with the <em>generic</em> type, for instance <em>testgenrepo</em></p>
</li>
<li>
<p>in this repository create a package, for instance <em>testpkg</em></p>
</li>
<li>
<p>optionally edit the package and check the <em>GPG sign uploaded files using Bintray&#8217;s public /private key pair.</em></p>
</li>
<li>
<p>in this package create a version, for instance <em>1.0</em></p>
</li>
<li>
<p>now upload the <em>helloworld.zip</em> file</p>
</li>
<li>
<p>publish the files</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The file are now hosted with an URL like : <em><a href="https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip" class="bare">https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip</a></em></p>
</div>
<div class="paragraph">
<p>If you have configured the GPG signature, you will have also the signature file <em><a href="https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip.asc" class="bare">https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip.asc</a></em>.
It will be by default downloaded and validated with <a href="http://pool.sks-keyservers.net:11371/pks/lookup?op=vindex&amp;fingerprint=on&amp;search=0x379CE192D401AB61">Bintray&#8217;s public key</a></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Of course you can use your own keys for signing the files.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>We can run this service with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip::helloworld
% Hello World
Succeeded in deploying verticle</pre>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">Docs</a></li><li><a href="/download/">Download</a></li><li><a href="/faq/">FAQ</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li><li><a href="/channels/">Channels</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2020<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.4/vertx-http-service-factory/java","title":"Vert.x Http Service Factory","fallbackGitHubStars":8,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_deploying_a_java_service_packaged_as_a_fatjar\"\u003eDeploying a Java service packaged as a fatjar\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_client_configuration\"\u003eHttp client configuration\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_client_authentication\"\u003eClient authentication\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_proxy_server_configuration\"\u003eProxy server configuration\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_public_key_servers\"\u003ePublic key servers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_validation_policy\"\u003eValidation policy\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_cache_directory\"\u003eCache directory\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_examples\"\u003eExamples\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_bintray\"\u003eBintray\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_zip\"\u003eService zip\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_bintray_hosting\"\u003eBintray hosting\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x Http Service Factory\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe http service factory is a Vert.x service factory for deploying services from an http server. It it an alternative\nto the Maven Service Factory for using services hosted on a plain http server, e.g a JavaScript service zipped\nand hosted somewhere. Unlike the Maven Service Factory, the Http Service Factory does not provide any kind of\nclasspath dependency resolution. To use this feature be sure that \u003ccode\u003eio.vertx:vertx-http-service-factory:3.9.4\u003c/code\u003e is in your classpath.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx run https://myserver.net/myverticle.zip::my-service\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlthough it looks like an http URL, it is a verticle identifier with a factory bound to the \u003cem\u003ehttps\u003c/em\u003e prefix (\u003cem\u003ehttp\u003c/em\u003e\nalso supported).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service identifier is made up of the suffix to form an \u003cem\u003ehttp\u003c/em\u003e URL or the archive that contains the service,\nfollowed by a double colon \u003ccode\u003e::\u003c/code\u003e and a service name.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service name is used to find the service descriptor file inside the artifact which is named by the service name with\na \u003ccode\u003e.json\u003c/code\u003e extension. This is explained in the \u003ca href=\"http://vertx.io/docs/vertx-service-factory/java\"\u003eService Verticle Factory\u003c/a\u003e\ndocumentation.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor example, to deploy a service that exists in an hosted at \u003ccode\u003e\u003ca href=\"https://myserver.net/myverticle.zip\" class=\"bare\"\u003ehttps://myserver.net/myverticle.zip\u003c/a\u003e\u003c/code\u003e called \u003ccode\u003emy-service\u003c/code\u003e\nyou would use the string \u003ccode\u003e\u003ca href=\"https://myserver.net/myverticle.zip::my-service\" class=\"bare\"\u003ehttps://myserver.net/myverticle.zip::my-service\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGiven this string, the verticle factory will use the Vert.x http client try and download the resource\n\u003ccode\u003e\u003ca href=\"https://myserver.net/myverticle.zip\" class=\"bare\"\u003ehttps://myserver.net/myverticle.zip\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt then constructs a classpath including this archive and creates a classloader with that classpath in order\nto load the service using the standard \u003ca href=\"http://vertx.io/docs/vertx-service-factory/java\"\u003eService Verticle Factory\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Service Verticle Factory will look for a descriptor file called `my-service.json on the constructed classpath to\nactually load the service.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGiven a service identifier the service can be deployed programmatically e.g.:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx.deployVerticle(\"https://myserver.net/myverticle.zip::my-service\", ...)\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOr can be deployed on the command line with:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx run https://myserver.net/myverticle.zip::my-service\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service name can be omitted when the service jar \u003ccode\u003eMETA-INF/MANIFEST\u003c/code\u003e contains a `Main-Verticle`entry that\ndeclares the verticle to run:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx.deployVerticle(\"https://myserver.net/myverticle.zip\", ...)\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAnd the manifest contains:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003eMain-Verticle: service:my.service\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOf course it can be deployed on the command line with:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx run https://myserver.net/myverticle.zip\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_deploying_a_java_service_packaged_as_a_fatjar\"\u003e\u003ca class=\"anchor\" href=\"#_deploying_a_java_service_packaged_as_a_fatjar\"\u003e\u003c/a\u003eDeploying a Java service packaged as a fatjar\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe deployer factory can also deploy a Java service packaged as a fatjar, i.e a jar that contains a Java service and all the classes needed\nto run, for example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethe jar manifest contains the \u003ccode\u003eMain-Verticle:myservice.json\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003emyservice.json\u003c/code\u003e declares the service via \u003ccode\u003emain:my.Verticle\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe class \u003ccode\u003emy.Verticle\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eall the classes needed by the verticle to run, for example Google Guava jar, etc\u0026#8230;\u0026#8203;\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_http_client_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_http_client_configuration\"\u003e\u003c/a\u003eHttp client configuration\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFiles are downloaded using Vert.x http client, by default the https client is configured with the \u003ccode\u003essl=true\u003c/code\u003e\nand \u003ccode\u003etrustAll=true\u003c/code\u003e. The default client options can be overriden to use specific configurations with the\n\u003cem\u003evertx.httpServiceFactory.httpClientOptions\u003c/em\u003e system property and the \u003cem\u003evertx.httpServiceFactory.httpsClientOptions\u003c/em\u003e\nsystem property, these properties are valid for any http resource.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_client_authentication\"\u003e\u003ca class=\"anchor\" href=\"#_client_authentication\"\u003e\u003c/a\u003eClient authentication\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe client supports basic authentication via the \u003cem\u003evertx.httpServiceFactory.authUsername\u003c/em\u003e and\n\u003cem\u003evertx.httpServiceFactory.authPassword\u003c/em\u003e system properties.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAuthentication is done only for services (i.e basic authentication will not be done for key servers) and only using\nan https connection.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_proxy_server_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_proxy_server_configuration\"\u003e\u003c/a\u003eProxy server configuration\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe http client can be configured to support a proxy server with the \u003cem\u003evertx.httpServiceFactory.proxyHost\u003c/em\u003e and\n\u003cem\u003evertx.httpServiceFactory.proxyPort\u003c/em\u003e system properties.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you need more proxy configuration such as support for SOCKS or proxy authentication, you can use specify them\nin the \u003cem\u003evertx.httpServiceFactory.httpClientOptions\u003c/em\u003e instead.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx run https://myserver.net/myverticle.zip \\\n  -Dvertx.httpServiceFactory.httpClientOptions=\"{\\\"proxyOptions\\\":{ \\\n     \\\"host\\\":\\\"proxy-host\\\", \\\n     \\\"port\\\":1234 \\\n     \\\"type\\\":\\\"SOCKS4\\\"\n  } }\"\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePlease see read the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html\"\u003eHttpClientOptions\u003c/a\u003e\u003c/code\u003e configuration for all the details;\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_public_key_servers\"\u003e\u003ca class=\"anchor\" href=\"#_public_key_servers\"\u003e\u003c/a\u003ePublic key servers\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSigned artifacts signatures are verifed using a public key, public key are retrieved from a public key server.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe public key server uri can be configured with the \u003cem\u003evertx.httpServiceFactory.keyserverURITemplate\u003c/em\u003e system property.\nThe URI template is used to create the public key URI this way:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003eString.format(keyserverURITemplate, signature.getKeyID())\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen the property is not set, the default public key server is the \u003cem\u003eSKS OpenPGP Public Key Server\u003c/em\u003e server used and\nthe uri template used is : \u003ccode\u003e\u003ca href=\"http://pool.sks-keyservers.net:11371/pks/lookup?op=get\u0026amp;options=mr\u0026amp;search=0x%016X\" class=\"bare\"\u003ehttp://pool.sks-keyservers.net:11371/pks/lookup?op=get\u0026amp;options=mr\u0026amp;search=0x%016X\u003c/a\u003e\u003c/code\u003e\nthis server will server public key resources with the \u003cem\u003eapplication/pgp-keys\u003c/em\u003e media type.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Json \u003ca href=\"https://keybase.io/docs/api/1.0/call/key/fetch\"\u003eformat\u003c/a\u003e sent by Keybase.io is also support. Keybase.io\ncan be used as a public key server with \u003ccode\u003e\u003ca href=\"https://keybase.io/_/api/1.0/key/fetch.json?pgp_key_ids=%016X\" class=\"bare\"\u003ehttps://keybase.io/_/api/1.0/key/fetch.json?pgp_key_ids=%016X\u003c/a\u003e\u003c/code\u003e URI template.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_validation_policy\"\u003e\u003ca class=\"anchor\" href=\"#_validation_policy\"\u003e\u003c/a\u003eValidation policy\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe validation policy governs how downloaded services are validated, the \u003cem\u003evertx.httpServiceFactory.validationPolicy\u003c/em\u003e\nsystem property configures the behavior of the verticle factory when it attemps to deploy a downloaded service file:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cem\u003enone\u003c/em\u003e : the service file is just deployed as is\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cem\u003everify\u003c/em\u003e : the service file is verified when there is a corresponding \u003cem\u003e.asc\u003c/em\u003e signature file, otherwise it is\nnot verified. If the signature cannot be verified, the deployment fails.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cem\u003emandatory\u003c/em\u003e: the service file must have a corresponding \u003cem\u003e.asc\u003c/em\u003e signature file and the signature must be verified.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe default validation policy is_verify_*.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_cache_directory\"\u003e\u003ca class=\"anchor\" href=\"#_cache_directory\"\u003e\u003c/a\u003eCache directory\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe cache directory stores the files used by the http service factory after download:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003edeployed services\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eservice signatures\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublic keys\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe cached files are named after the percent encoded download URL:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e-rw-r--r--  1 julien  staff   270 May  3 21:44 http%3A%2F%2Flocalhost%3A8080%2Fthe_verticle.zip\n-rw-r--r--  1 julien  staff   473 May  3 21:44 http%3A%2F%2Flocalhost%3A8080%2Fthe_verticle.zip.asc\n-rw-r--r--  1 julien  staff  1768 May  3 21:44 http%3A%2F%2Flocalhost%3A8081%2Fpks%2Flookup%3Fop%3Dget%26options%3Dmr%26search%3D0x9F9358A769793D09\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe default cache directory \u003cem\u003e.vertx\u003c/em\u003e can be set to a specific location with the \u003cem\u003evertx.httpServiceFactory.cacheDir\u003c/em\u003e\nsystem property.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_examples\"\u003e\u003ca class=\"anchor\" href=\"#_examples\"\u003e\u003c/a\u003eExamples\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_bintray\"\u003e\u003ca class=\"anchor\" href=\"#_bintray\"\u003e\u003c/a\u003eBintray\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBintray is a distribution platform that can be used for hosting files.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_zip\"\u003e\u003ca class=\"anchor\" href=\"#_service_zip\"\u003e\u003c/a\u003eService zip\u003c/h3\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e\u0026gt; echo 'console.log(\"hello world\")' \u0026gt; helloworld.js\n\u0026gt; echo '{\"main\":\"helloworld.js\"}' \u0026gt; helloworld.json\n\u0026gt; zip helloworld.zip helloworld.json helloworld.js\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_bintray_hosting\"\u003e\u003ca class=\"anchor\" href=\"#_bintray_hosting\"\u003e\u003c/a\u003eBintray hosting\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAssuming you have a Bintray account:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ecreate a Bintray repository with the \u003cem\u003egeneric\u003c/em\u003e type, for instance \u003cem\u003etestgenrepo\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ein this repository create a package, for instance \u003cem\u003etestpkg\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eoptionally edit the package and check the \u003cem\u003eGPG sign uploaded files using Bintray\u0026#8217;s public /private key pair.\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ein this package create a version, for instance \u003cem\u003e1.0\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003enow upload the \u003cem\u003ehelloworld.zip\u003c/em\u003e file\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublish the files\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe file are now hosted with an URL like : \u003cem\u003e\u003ca href=\"https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip\" class=\"bare\"\u003ehttps://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip\u003c/a\u003e\u003c/em\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you have configured the GPG signature, you will have also the signature file \u003cem\u003e\u003ca href=\"https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip.asc\" class=\"bare\"\u003ehttps://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip.asc\u003c/a\u003e\u003c/em\u003e.\nIt will be by default downloaded and validated with \u003ca href=\"http://pool.sks-keyservers.net:11371/pks/lookup?op=vindex\u0026amp;fingerprint=on\u0026amp;search=0x379CE192D401AB61\"\u003eBintray\u0026#8217;s public key\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sidebarblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOf course you can use your own keys for signing the files.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWe can run this service with:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx run https://bintray.com/artifact/download/vietj/testgenrepo/helloworld.zip::helloworld\n% Hello World\nSucceeded in deploying verticle\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.4"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.4","vertx-http-service-factory","java"]},"buildId":"uAPvaJZQJ2AfmLz5qbNV3","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7cde6f5ea12aaa40097b.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.6a5cc0a07ce13c54adf1.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5e2acbba0c73eb7c5c0e969bcd552d3808de9969.4d0eb9c3d4239c66cc89.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.46f4cf2c4741679ce3eb.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a0e26e250e9304ae7812.js" async=""></script><script src="/_next/static/uAPvaJZQJ2AfmLz5qbNV3/_buildManifest.js" async=""></script><script src="/_next/static/uAPvaJZQJ2AfmLz5qbNV3/_ssgManifest.js" async=""></script></body></html>