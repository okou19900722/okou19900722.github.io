<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><title>Apache Ignite Cluster Manager for Vert.x</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/styles.9a6ebcf2.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.9a6ebcf2.chunk.css"/><link rel="preload" href="/_next/static/KJl23CUTg6SxIXzsvS5RS/pages/docs/%5B...slug%5D.js" as="script"/><link rel="preload" href="/_next/static/KJl23CUTg6SxIXzsvS5RS/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2452a08f25aa09397355.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5e3e47f192c8968126d4.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.a536770b8a7efd3f31c6.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-82853df24da4e8dbe047.js" as="script"/><link rel="preload" href="/_next/static/chunks/5e791559a9a12799b7c8380cc031d13dc3b616ba.c1ef14f95bc9470df0df.js" as="script"/></head><body><div id="__next"><main><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4="/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/">Ecosystem</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/">FAQ</a><a class="navbar-menu-item" href="/">Blog</a><a class="navbar-menu-item" href="/">Community</a></div><div class="navbar-social"><a href="/" class="navbar-social-link navbar-social-version">v4.0.0</a><a href="/" class="navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="/" class="navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="/" class="navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page"><div class="container"><div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is a cluster manager implementation for Vert.x that uses <a href="http://ignite.apache.org/index.html">Apache Ignite</a>.</p>
</div>
<div class="paragraph">
<p>In Vert.x a cluster manager is used for various functions including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Discovery and group membership of Vert.x nodes in a cluster</p>
</li>
<li>
<p>Maintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus
addresses)</p>
</li>
<li>
<p>Distributed Map support</p>
</li>
<li>
<p>Distributed Locks</p>
</li>
<li>
<p>Distributed Counters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cluster managersdo not* handle the event bus inter-node transport, this is done directly by Vert.x with TCP
connections.</p>
</div>
<div class="paragraph">
<p>Vert.x cluster manager is a pluggable component, so you can pick the one you want, or the one that is the most
adapted to your environment. So you can replace default Vert.x cluster manager by this implementation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_ignite_cluster_manager">Using Ignite cluster manager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the jar is on your classpath then Vert.x will automatically detect this and use it as the cluster manager.
Please make sure you donâ€™t have any other cluster managers on your classpath or Vert.x might choose the wrong one.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can configure the following system property to instruct vert.x to use this cluster manager:
<code>-Dvertx.clusterManagerFactory=io.vertx.spi.cluster.ignite.IgniteClusterManager</code></p>
</div>
<div class="sect2">
<h3 id="_using_vert_x_from_command_line">Using Vert.x from command line</h3>
<div class="paragraph">
<p><code>vertx-ignite-4.0.0-milestone4.jar</code> should be in the <code>lib</code> directory of the Vert.x installation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_vert_x_in_maven_or_gradle_project">Using Vert.x in Maven or Gradle project</h3>
<div class="paragraph">
<p>Add a dependency to the artifact.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-ignite<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.0-milestone4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">'io.vertx:vertx-ignite:4.0.0-milestone4'</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_programmatically_specifying_cluster_manager">Programmatically specifying cluster manager</h3>
<div class="paragraph">
<p>You can also specify the cluster manager programmatically. In order to do this just specify it on the options
when you are creating your Vert.x instance, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ClusterManager clusterManager = <span class="hljs-keyword">new</span> IgniteClusterManager();

VertxOptions options = <span class="hljs-keyword">new</span> VertxOptions().setClusterManager(clusterManager);
Vertx.clusteredVertx(options, res -&gt; {
 <span class="hljs-keyword">if</span> (res.succeeded()) {
   Vertx vertx = res.result();
 } <span class="hljs-keyword">else</span> {
   <span class="hljs-comment">// failed!</span>
 }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_cluster_manager">Configuring cluster manager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Note: Starting with version 2.0, Apache Ignite has introduced a new off-heap memory architecture. All caches use
off-heap memory by default. New memory architecture is described in
<a href="https://apacheignite.readme.io/docs/page-memory">Ignite Virtual Memory</a> article.</p>
</div>
<div class="sect2">
<h3 id="_using_configuration_file">Using configuration file</h3>
<div class="paragraph">
<p>The cluster manager is configured by a file <code>default-ignite.xml</code> which is packaged inside the jar.</p>
</div>
<div class="paragraph">
<p>If you want to override this configuration you can provide <code>ignite.xml</code> file on your classpath and this will be
used instead.</p>
</div>
<div class="paragraph">
<p>The xml file is a Ignite configuration file and is described in details in
<a href="https://apacheignite.readme.io/docs">Apache Ignite documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_programmatically">Configuring programmatically</h3>
<div class="paragraph">
<p>You can also specify configuration programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">IgniteConfiguration cfg = <span class="hljs-keyword">new</span> IgniteConfiguration();
<span class="hljs-comment">// Configuration code (omitted)</span>

ClusterManager clusterManager = <span class="hljs-keyword">new</span> IgniteClusterManager(cfg);

VertxOptions options = <span class="hljs-keyword">new</span> VertxOptions().setClusterManager(clusterManager);
Vertx.clusteredVertx(options, res -&gt; {
 <span class="hljs-keyword">if</span> (res.succeeded()) {
   Vertx vertx = res.result();
 } <span class="hljs-keyword">else</span> {
   <span class="hljs-comment">// failed!</span>
 }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_discovery_and_network_transport_configuration">Discovery and network transport configuration</h3>
<div class="paragraph">
<p>The default configuration uses <code>TcpDiscoveryMulticastIpFinder</code> so you must have multicast enabled on your network.
For cases when multicast is disabled <code>TcpDiscoveryVmIpFinder</code> should be used with pre-configured list of IP addresses.
Please see <a href="http://apacheignite.readme.io/docs/cluster-config">Cluster Configuration</a> section
at Apache Ignite documentation for details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trouble_shooting_clustering">Trouble shooting clustering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the default multicast configuration is not working here are some common causes:</p>
</div>
<div class="sect2">
<h3 id="_multicast_not_enabled_on_the_machine">Multicast not enabled on the machine.</h3>
<div class="paragraph">
<p>By default the cluster manager is using <code>TcpDiscoveryMulticastIpFinder</code>, so IP multicasting is required,
on some systems, multicast route(s) need to be added to the routing table otherwise, the default route will be used.</p>
</div>
<div class="paragraph">
<p>Note that some systems don&#8217;t consult the routing table for IP multicast routing, only for unicast routing</p>
</div>
<div class="paragraph">
<p>MacOS example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Adds a multicast route for 224.0.0.1-231.255.255.254
sudo route add -net 224.0.0.0/5 127.0.0.1

# Adds a multicast route for 232.0.0.1-239.255.255.254
sudo route add -net 232.0.0.0/5 192.168.1.3</pre>
</div>
</div>
<div class="paragraph">
<p>Please google for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_wrong_network_interface">Using wrong network interface</h3>
<div class="paragraph">
<p>If you have more than one network interface on your machine (and this can also be the case if you are running
VPN software on your machine), then Apache Ignite may be using the wrong one.</p>
</div>
<div class="paragraph">
<p>To tell Ignite to use a specific interface you can provide the IP address of the interface to the
bean of <code>IgniteConfiguration</code> type using <code>localHost</code> property. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;bean class="org.apache.ignite.configuration.IgniteConfiguration"&gt;
 &lt;property name="localHost" value="192.168.1.20"/&gt;
&lt;/bean&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>When running Vert.x is in clustered mode, you should also make sure that Vert.x knows about the correct interface.
When running at the command line this is done by specifying the <code>cluster-host</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run myverticle.js -cluster -cluster-host your-ip-address</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>your-ip-address</code> is the same IP address you specified in the Apache Ignite configuration.</p>
</div>
<div class="paragraph">
<p>If using Vert.x programmatically you can specify this using <code><a href="../../apidocs/io/vertx/core/VertxOptions.html#setClusterHost-java.lang.String-">setClusterHost</a></code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_vpn">Using a VPN</h3>
<div class="paragraph">
<p>This is a variation of the above case. VPN software often works by creating a virtual network interface which often
doesn&#8217;t support multicast. If you have a VPN running and you do not specify the correct interface to use in both the
Ignite configuration and to Vert.x then the VPN interface may be chosen instead of the correct interface.</p>
</div>
<div class="paragraph">
<p>So, if you have a VPN running you may have to configure both the Ignite and Vert.x to use the correct interface as
described in the previous section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_when_multicast_is_not_available">When multicast is not available</h3>
<div class="paragraph">
<p>In some cases you may not be able to use multicast as it might not be available in your environment. In that case
you should configure another transport using corresponding IP finder, e.g. <code>TcpDiscoveryVmIpFinder</code> to use TCP sockets,
or <code>TcpDiscoveryS3IpFinder</code> to use Amazon S3.</p>
</div>
<div class="paragraph">
<p>For more information on available Ignite transports and how to configure them please consult the
<a href="https://apacheignite.readme.io/docs/clustering">Ignite Clustering</a> documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_logging">Enabling logging</h3>
<div class="paragraph">
<p>When trouble-shooting clustering issues it&#8217;s often useful to get some logging output from Ignite
to see if it&#8217;s forming a cluster properly. You can do this (when using the default JUL logging) by adding a file
called <code>vertx-default-jul-logging.properties</code> on your classpath. This is a standard java.util.loging (JUL)
configuration file. Inside it set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.apache.ignite.level=INFO</pre>
</div>
</div>
<div class="paragraph">
<p>and also</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.util.logging.ConsoleHandler.level=INFO
java.util.logging.FileHandler.level=INFO</pre>
</div>
</div>
</div>
</div>
</div></div></div></div><footer></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Apache Ignite Cluster Manager for Vert.x","contents":"\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is a cluster manager implementation for Vert.x that uses \u003ca href=\"http://ignite.apache.org/index.html\"\u003eApache Ignite\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn Vert.x a cluster manager is used for various functions including:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eDiscovery and group membership of Vert.x nodes in a cluster\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMaintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus\naddresses)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDistributed Map support\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDistributed Locks\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDistributed Counters\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCluster managersdo not* handle the event bus inter-node transport, this is done directly by Vert.x with TCP\nconnections.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x cluster manager is a pluggable component, so you can pick the one you want, or the one that is the most\nadapted to your environment. So you can replace default Vert.x cluster manager by this implementation.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_ignite_cluster_manager\"\u003eUsing Ignite cluster manager\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf the jar is on your classpath then Vert.x will automatically detect this and use it as the cluster manager.\nPlease make sure you donâ€™t have any other cluster managers on your classpath or Vert.x might choose the wrong one.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlternatively, you can configure the following system property to instruct vert.x to use this cluster manager:\n\u003ccode\u003e-Dvertx.clusterManagerFactory=io.vertx.spi.cluster.ignite.IgniteClusterManager\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_vert_x_from_command_line\"\u003eUsing Vert.x from command line\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003evertx-ignite-4.0.0-milestone4.jar\u003c/code\u003e should be in the \u003ccode\u003elib\u003c/code\u003e directory of the Vert.x installation.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_vert_x_in_maven_or_gradle_project\"\u003eUsing Vert.x in Maven or Gradle project\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAdd a dependency to the artifact.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-ignite\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.0.0-milestone4\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e'io.vertx:vertx-ignite:4.0.0-milestone4'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_programmatically_specifying_cluster_manager\"\u003eProgrammatically specifying cluster manager\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also specify the cluster manager programmatically. In order to do this just specify it on the options\nwhen you are creating your Vert.x instance, for example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eClusterManager clusterManager = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e IgniteClusterManager();\n\nVertxOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxOptions().setClusterManager(clusterManager);\nVertx.clusteredVertx(options, res -\u0026gt; {\n \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n   Vertx vertx = res.result();\n } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n   \u003cspan class=\"hljs-comment\"\u003e// failed!\u003c/span\u003e\n }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuring_cluster_manager\"\u003eConfiguring cluster manager\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote: Starting with version 2.0, Apache Ignite has introduced a new off-heap memory architecture. All caches use\noff-heap memory by default. New memory architecture is described in\n\u003ca href=\"https://apacheignite.readme.io/docs/page-memory\"\u003eIgnite Virtual Memory\u003c/a\u003e article.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_configuration_file\"\u003eUsing configuration file\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe cluster manager is configured by a file \u003ccode\u003edefault-ignite.xml\u003c/code\u003e which is packaged inside the jar.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you want to override this configuration you can provide \u003ccode\u003eignite.xml\u003c/code\u003e file on your classpath and this will be\nused instead.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe xml file is a Ignite configuration file and is described in details in\n\u003ca href=\"https://apacheignite.readme.io/docs\"\u003eApache Ignite documentation\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_configuring_programmatically\"\u003eConfiguring programmatically\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also specify configuration programmatically:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eIgniteConfiguration cfg = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e IgniteConfiguration();\n\u003cspan class=\"hljs-comment\"\u003e// Configuration code (omitted)\u003c/span\u003e\n\nClusterManager clusterManager = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e IgniteClusterManager(cfg);\n\nVertxOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e VertxOptions().setClusterManager(clusterManager);\nVertx.clusteredVertx(options, res -\u0026gt; {\n \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n   Vertx vertx = res.result();\n } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n   \u003cspan class=\"hljs-comment\"\u003e// failed!\u003c/span\u003e\n }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_discovery_and_network_transport_configuration\"\u003eDiscovery and network transport configuration\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe default configuration uses \u003ccode\u003eTcpDiscoveryMulticastIpFinder\u003c/code\u003e so you must have multicast enabled on your network.\nFor cases when multicast is disabled \u003ccode\u003eTcpDiscoveryVmIpFinder\u003c/code\u003e should be used with pre-configured list of IP addresses.\nPlease see \u003ca href=\"http://apacheignite.readme.io/docs/cluster-config\"\u003eCluster Configuration\u003c/a\u003e section\nat Apache Ignite documentation for details.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_trouble_shooting_clustering\"\u003eTrouble shooting clustering\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf the default multicast configuration is not working here are some common causes:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_multicast_not_enabled_on_the_machine\"\u003eMulticast not enabled on the machine.\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default the cluster manager is using \u003ccode\u003eTcpDiscoveryMulticastIpFinder\u003c/code\u003e, so IP multicasting is required,\non some systems, multicast route(s) need to be added to the routing table otherwise, the default route will be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote that some systems don\u0026#8217;t consult the routing table for IP multicast routing, only for unicast routing\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMacOS example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e# Adds a multicast route for 224.0.0.1-231.255.255.254\nsudo route add -net 224.0.0.0/5 127.0.0.1\n\n# Adds a multicast route for 232.0.0.1-239.255.255.254\nsudo route add -net 232.0.0.0/5 192.168.1.3\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePlease google for more information.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_wrong_network_interface\"\u003eUsing wrong network interface\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you have more than one network interface on your machine (and this can also be the case if you are running\nVPN software on your machine), then Apache Ignite may be using the wrong one.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo tell Ignite to use a specific interface you can provide the IP address of the interface to the\nbean of \u003ccode\u003eIgniteConfiguration\u003c/code\u003e type using \u003ccode\u003elocalHost\u003c/code\u003e property. For example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e\u0026lt;bean class=\"org.apache.ignite.configuration.IgniteConfiguration\"\u0026gt;\n \u0026lt;property name=\"localHost\" value=\"192.168.1.20\"/\u0026gt;\n\u0026lt;/bean\u0026gt;\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen running Vert.x is in clustered mode, you should also make sure that Vert.x knows about the correct interface.\nWhen running at the command line this is done by specifying the \u003ccode\u003ecluster-host\u003c/code\u003e option:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003evertx run myverticle.js -cluster -cluster-host your-ip-address\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhere \u003ccode\u003eyour-ip-address\u003c/code\u003e is the same IP address you specified in the Apache Ignite configuration.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf using Vert.x programmatically you can specify this using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/VertxOptions.html#setClusterHost-java.lang.String-\"\u003esetClusterHost\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_a_vpn\"\u003eUsing a VPN\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is a variation of the above case. VPN software often works by creating a virtual network interface which often\ndoesn\u0026#8217;t support multicast. If you have a VPN running and you do not specify the correct interface to use in both the\nIgnite configuration and to Vert.x then the VPN interface may be chosen instead of the correct interface.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSo, if you have a VPN running you may have to configure both the Ignite and Vert.x to use the correct interface as\ndescribed in the previous section.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_when_multicast_is_not_available\"\u003eWhen multicast is not available\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn some cases you may not be able to use multicast as it might not be available in your environment. In that case\nyou should configure another transport using corresponding IP finder, e.g. \u003ccode\u003eTcpDiscoveryVmIpFinder\u003c/code\u003e to use TCP sockets,\nor \u003ccode\u003eTcpDiscoveryS3IpFinder\u003c/code\u003e to use Amazon S3.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor more information on available Ignite transports and how to configure them please consult the\n\u003ca href=\"https://apacheignite.readme.io/docs/clustering\"\u003eIgnite Clustering\u003c/a\u003e documentation.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_enabling_logging\"\u003eEnabling logging\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen trouble-shooting clustering issues it\u0026#8217;s often useful to get some logging output from Ignite\nto see if it\u0026#8217;s forming a cluster properly. You can do this (when using the default JUL logging) by adding a file\ncalled \u003ccode\u003evertx-default-jul-logging.properties\u003c/code\u003e on your classpath. This is a standard java.util.loging (JUL)\nconfiguration file. Inside it set:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003eorg.apache.ignite.level=INFO\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eand also\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003ejava.util.logging.ConsoleHandler.level=INFO\njava.util.logging.FileHandler.level=INFO\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e"},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["vertx-ignite","java"]},"buildId":"KJl23CUTg6SxIXzsvS5RS","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-636e3ece1ef7a5e3df65.js"></script><script async="" data-next-page="/docs/[...slug]" src="/_next/static/KJl23CUTg6SxIXzsvS5RS/pages/docs/%5B...slug%5D.js"></script><script async="" data-next-page="/_app" src="/_next/static/KJl23CUTg6SxIXzsvS5RS/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/framework.2452a08f25aa09397355.js" async=""></script><script src="/_next/static/chunks/commons.5e3e47f192c8968126d4.js" async=""></script><script src="/_next/static/chunks/styles.a536770b8a7efd3f31c6.js" async=""></script><script src="/_next/static/runtime/main-82853df24da4e8dbe047.js" async=""></script><script src="/_next/static/chunks/5e791559a9a12799b7c8380cc031d13dc3b616ba.c1ef14f95bc9470df0df.js" async=""></script><script src="/_next/static/KJl23CUTg6SxIXzsvS5RS/_buildManifest.js" async=""></script><script src="/_next/static/KJl23CUTg6SxIXzsvS5RS/_ssgManifest.js" async=""></script></body></html>