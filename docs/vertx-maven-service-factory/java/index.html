<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><title>Maven verticle factory</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/styles.1c04e68d.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.1c04e68d.chunk.css"/><link rel="preload" href="/_next/static/w7osvGTwfmYtkb6ZcZNeN/pages/docs/%5B...slug%5D.js" as="script"/><link rel="preload" href="/_next/static/w7osvGTwfmYtkb6ZcZNeN/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2452a08f25aa09397355.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5e3e47f192c8968126d4.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.233404fc46c3d542410b.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-590ad82901df6081bdd1.js" as="script"/><link rel="preload" href="/_next/static/chunks/7f45b2959c91c8c7a63599f2d2a94aa1e936364f.a45d4def287f6d9b5832.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4="/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><a class="navbar-menu-item" href="/">Ecosystem</a><a class="navbar-menu-item" href="/docs/">Docs</a><a class="navbar-menu-item" href="/">FAQ</a><a class="navbar-menu-item" href="/">Blog</a><a class="navbar-menu-item" href="/">Community</a></div><div class="navbar-social"><span class="navbar-social-version">v4.0.0</span><a href="https://www.youtube.com/results?search_query=vert.x" class="navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://gitter.im/eclipse-vertx/vertx-users" class="navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M8.501 4.001H10.5V24H8.501V4.001zm6.999 0V24h-2V4.001h2zM3.5 0h2.001v15H3.5V0zm15 4.001h2V15h-2V4.001z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="docs-search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="docs-search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><div><div class="docs-content-inner"><h1>Maven verticle factory</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Maven verticle factory is an implementation of verticle factory loading a service dynamically from a Maven
repository at run-time. It&#8217;s useful if you don&#8217;t want to package all your service dependencies at build-time into
your application, but would rather install and deploy them dynamically at run-time when they are requested.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x picks up <code>VerticleFactory</code> implementations from the classpath, so you just need to make sure the
vertx-maven-service-factory jar file on the classpath. First you need to add the Maven verticle factory to your application&#8217;s
classpath. If you are using a fat jar, you can use the following dependencies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-maven-service-factory<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.0-milestone4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">'io.vertx:vertx-maven-service-factory:4.0.0-milestone4'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>VerticleFactory</code> uses the prefix <code>maven:</code> to select it when deploying services.
The service identifier is made up of the Maven co-ordinates of the artifact that contains the service, e.g.
<code>com.mycompany:main-services:1.2</code> followed by a double colon <code>::</code> followed by the service name. The service name is
used to find the service descriptor file inside the artifact which is named by the service name with a <code>.json</code>
extension. This is explained in the the
<a href="http://vertx.io/docs/vertx-service-factory/java">vert.x service factory documentation</a>.</p>
</div>
<div class="paragraph">
<p>For example, to deploy a service that exists in Maven artifact <code>com.mycompany:my-artifact:1.2</code> called <code>my-service</code> you
would use the string <code>maven:com.mycompany:main-services:1.2::my-service</code>. Given this string, the verticle factory</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>uses the Aether client try and locate the artifact <code>com.mycompany:my-artifact:1.2</code> and all its dependencies in
the configured Maven repositories and download and install it locally if it&#8217;s not already installed.</p>
</li>
<li>
<p>constructs a classpath including all those artifacts and creates a classloader with that classpath</p>
</li>
<li>
<p>service using the <a href="http://vertx.io/docs/vertx-service-factory/java">vert.x service factory</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that if the current Vert.x classpath contains already an artifact, then this dependency will not be
overridden and will be effectively used. Vert.x does not attempt to make some class loading magic, conflicts
should be resolved by modifying the Vert.x classpath to not contain this dependency.</p>
</div>
<div class="paragraph">
<p>The Service Verticle Factory will look for a descriptor file called <code>my-service.json</code> (in the previous example) on
the constructed classpath to actually load the service.</p>
</div>
<div class="paragraph">
<p>Given a service identifier the service can be deployed programmatically e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.deployVerticle(<span class="hljs-string">"maven:com.mycompany:my-artifact:1.2::my-service"</span>, options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or can be deployed on the command line with:</p>
</div>
<hr>
<div class="paragraph">
<p>vertx run maven:com.mycompany:my-artifact:1.2::my-service
---</p>
</div>
<div class="paragraph">
<p>The service name (<code>my-service</code>) can be omitted when the <em>META-INF/MANIFEST</em> in the jar containing the
service contains a <code>Main-Verticle</code> entry that declares the verticle to run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.deployVerticle(<span class="hljs-string">"maven:com.mycompany:my-artifact:1.2"</span>, options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the manifest contains:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Main-Verticle: service:my-service</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_declaring_the_verticle_factory_programmatically">Declaring the Verticle Factory programmatically</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also declare the verticle factory programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.registerVerticleFactory(<span class="hljs-keyword">new</span> MavenVerticleFactory());</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_repositories">Configuring repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Maven local repository location can be configured using the <code>vertx.maven.localRepo</code> system property - this should
point to the local repository directory on disc. The default value is: <code>{user.home}/.m2/repository</code></p>
</div>
<div class="paragraph">
<p>The list of remote repositories can be configured using the <code>vertx.maven.remoteRepos</code> system property - this should
contain a*space** separated list of urls to the remote repositories. The default value is
<code><a href="https://repo.maven.apache.org/maven2/" class="bare">https://repo.maven.apache.org/maven2/</a> <a href="https://oss.sonatype.org/content/repositories/snapshots/" class="bare">https://oss.sonatype.org/content/repositories/snapshots/</a></code></p>
</div>
<div class="sect2">
<h3 id="_programmatically">Programmatically</h3>
<div class="paragraph">
<p>You can also configure the repositories programmatically by passing a <code><a href="../../apidocs/io/vertx/maven/ResolverOptions.html">ResolverOptions</a></code>
object to the constructor of the <code><a href="../../apidocs/io/vertx/maven/MavenVerticleFactory.html">MavenVerticleFactory</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.registerVerticleFactory(<span class="hljs-keyword">new</span> MavenVerticleFactory(
    <span class="hljs-keyword">new</span> ResolverOptions()
        .setLocalRepository(local)
        .setRemoteRepositories(remotes))
);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remote_repository_access_through_authenticated_https">Remote repository access through authenticated https</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can specify https URLs for remote repositories, the client will uses the JSSE system properties
configuration. It can be achieved via JVM system properties, you can read more at
<a href="http://maven.apache.org/guides/mini/guide-repository-ssl.html" class="bare">http://maven.apache.org/guides/mini/guide-repository-ssl.html</a>.</p>
</div>
<div class="sect2">
<h3 id="_using_system_properties">Using system properties</h3>
<div class="paragraph">
<p>It can configured when running the JVM: for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar my-fat-jar -Djavax.net.ssl.trustStore=/my_trust_store.jks -Djavax.net.ssl.trustStorePassword=somepassword</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_programmatically_2">Programmatically</h3>
<div class="paragraph">
<p>To configure the HTTPS property, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">System.setProperty(<span class="hljs-string">"javax.net.ssl.trustStore"</span>, <span class="hljs-string">"/my_trust_store.jks"</span>);
System.setProperty(<span class="hljs-string">"javax.net.ssl.trustStorePassword"</span>, <span class="hljs-string">"somepassword"</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that programmatic configuration must be done before using the underlying Aether client (so before
instantiating the <code><a href="../../apidocs/io/vertx/maven/MavenVerticleFactory.html">MavenVerticleFactory</a></code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remote_repository_access_through_proxies">Remote repository access through proxies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_system_properties_2">Using system properties</h3>
<div class="paragraph">
<p>Repositories can be accessed using an http proxy using the <code>vertx.maven.httpProxy</code> and <code>vertx.maven.httpsProxy</code>.
The former configures a proxy for remote http repositories and the later configures a proxy for remote http repositories.</p>
</div>
</div>
<div class="sect2">
<h3 id="_programmatically_3">Programmatically</h3>
<div class="paragraph">
<p>You can also configure the repositories programmatically using the
<code><a href="../../apidocs/io/vertx/maven/ResolverOptions.html#setHttpProxy-java.lang.String-">setHttpProxy</a></code> and
<code><a href="../../apidocs/io/vertx/maven/ResolverOptions.html#setHttpsProxy-java.lang.String-">setHttpsProxy</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.registerVerticleFactory(<span class="hljs-keyword">new</span> MavenVerticleFactory(
    <span class="hljs-keyword">new</span> ResolverOptions().setHttpProxy(proxy))
);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_authentication">Configuring authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Basic authentication can be achieved by adding a username and/or password in the repository or proxy configuration.
For instance <code><a href="http://julien:secret@myrepository.com/" class="bare">http://julien:secret@myrepository.com/</a></code> will configure to use <code>julien</code> username and <code>secret</code>
password if the remote server needs authentication. Proxies are also supported.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_remote_snapshot_refresh_policy">Configuring Remote Snapshot Refresh Policy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default <em>SNAPSHOT</em> dependencies are updated once a day. This behavior can be modified using the system property
<code>vertx.maven.remoteSnapshotPolicy</code>. This can be set to <code>always</code> to ensure <em>SNAPSHOT</em> dependencies are updated every
time, <code>daily</code> to update just once a day, which is the default, or to <code>never</code> to ensure they are never updated.</p>
</div>
<div class="paragraph">
<p>It can also be set to <code>interval:X</code> where <code>X</code> is the number of minutes to allow before updating a <em>SNAPSHOT</em>
dependency.</p>
</div>
<div class="paragraph">
<p>The refresh policy can also be configured from the <code><a href="../../apidocs/io/vertx/maven/ResolverOptions.html">ResolverOptions</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.registerVerticleFactory(<span class="hljs-keyword">new</span> MavenVerticleFactory(
    <span class="hljs-keyword">new</span> ResolverOptions().setRemoteSnapshotPolicy(<span class="hljs-string">"never"</span>))
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customizing_the_resolver">Customizing the resolver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create an instance of
<code><a href="../../apidocs/io/vertx/maven/MavenVerticleFactory.html">MavenVerticleFactory</a></code> using your own <code><a href="../../apidocs/io/vertx/maven/Resolver.html">Resolver</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.registerVerticleFactory(<span class="hljs-keyword">new</span> MavenVerticleFactory(myResolver)
);</code></pre>
</div>
</div>
</div>
</div></div></div><div class="docs-content-no-search-results">No results.</div></div></div><footer></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Maven verticle factory","contents":"\u003ch1\u003eMaven verticle factory\u003c/h1\u003e\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Maven verticle factory is an implementation of verticle factory loading a service dynamically from a Maven\nrepository at run-time. It\u0026#8217;s useful if you don\u0026#8217;t want to package all your service dependencies at build-time into\nyour application, but would rather install and deploy them dynamically at run-time when they are requested.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_usage\"\u003eUsage\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x picks up \u003ccode\u003eVerticleFactory\u003c/code\u003e implementations from the classpath, so you just need to make sure the\nvertx-maven-service-factory jar file on the classpath. First you need to add the Maven verticle factory to your application\u0026#8217;s\nclasspath. If you are using a fat jar, you can use the following dependencies:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-maven-service-factory\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.0.0-milestone4\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e'io.vertx:vertx-maven-service-factory:4.0.0-milestone4'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis \u003ccode\u003eVerticleFactory\u003c/code\u003e uses the prefix \u003ccode\u003emaven:\u003c/code\u003e to select it when deploying services.\nThe service identifier is made up of the Maven co-ordinates of the artifact that contains the service, e.g.\n\u003ccode\u003ecom.mycompany:main-services:1.2\u003c/code\u003e followed by a double colon \u003ccode\u003e::\u003c/code\u003e followed by the service name. The service name is\nused to find the service descriptor file inside the artifact which is named by the service name with a \u003ccode\u003e.json\u003c/code\u003e\nextension. This is explained in the the\n\u003ca href=\"http://vertx.io/docs/vertx-service-factory/java\"\u003evert.x service factory documentation\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor example, to deploy a service that exists in Maven artifact \u003ccode\u003ecom.mycompany:my-artifact:1.2\u003c/code\u003e called \u003ccode\u003emy-service\u003c/code\u003e you\nwould use the string \u003ccode\u003emaven:com.mycompany:main-services:1.2::my-service\u003c/code\u003e. Given this string, the verticle factory\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003euses the Aether client try and locate the artifact \u003ccode\u003ecom.mycompany:my-artifact:1.2\u003c/code\u003e and all its dependencies in\nthe configured Maven repositories and download and install it locally if it\u0026#8217;s not already installed.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003econstructs a classpath including all those artifacts and creates a classloader with that classpath\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eservice using the \u003ca href=\"http://vertx.io/docs/vertx-service-factory/java\"\u003evert.x service factory\u003c/a\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote that if the current Vert.x classpath contains already an artifact, then this dependency will not be\noverridden and will be effectively used. Vert.x does not attempt to make some class loading magic, conflicts\nshould be resolved by modifying the Vert.x classpath to not contain this dependency.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Service Verticle Factory will look for a descriptor file called \u003ccode\u003emy-service.json\u003c/code\u003e (in the previous example) on\nthe constructed classpath to actually load the service.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGiven a service identifier the service can be deployed programmatically e.g.:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\"maven:com.mycompany:my-artifact:1.2::my-service\"\u003c/span\u003e, options);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOr can be deployed on the command line with:\u003c/p\u003e\n\u003c/div\u003e\n\u003chr\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003evertx run maven:com.mycompany:my-artifact:1.2::my-service\n---\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service name (\u003ccode\u003emy-service\u003c/code\u003e) can be omitted when the \u003cem\u003eMETA-INF/MANIFEST\u003c/em\u003e in the jar containing the\nservice contains a \u003ccode\u003eMain-Verticle\u003c/code\u003e entry that declares the verticle to run:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\"maven:com.mycompany:my-artifact:1.2\"\u003c/span\u003e, options);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAnd the manifest contains:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003eMain-Verticle: service:my-service\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_declaring_the_verticle_factory_programmatically\"\u003eDeclaring the Verticle Factory programmatically\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also declare the verticle factory programmatically:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.registerVerticleFactory(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MavenVerticleFactory());\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuring_repositories\"\u003eConfiguring repositories\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Maven local repository location can be configured using the \u003ccode\u003evertx.maven.localRepo\u003c/code\u003e system property - this should\npoint to the local repository directory on disc. The default value is: \u003ccode\u003e{user.home}/.m2/repository\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe list of remote repositories can be configured using the \u003ccode\u003evertx.maven.remoteRepos\u003c/code\u003e system property - this should\ncontain a*space** separated list of urls to the remote repositories. The default value is\n\u003ccode\u003e\u003ca href=\"https://repo.maven.apache.org/maven2/\" class=\"bare\"\u003ehttps://repo.maven.apache.org/maven2/\u003c/a\u003e \u003ca href=\"https://oss.sonatype.org/content/repositories/snapshots/\" class=\"bare\"\u003ehttps://oss.sonatype.org/content/repositories/snapshots/\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_programmatically\"\u003eProgrammatically\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also configure the repositories programmatically by passing a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/ResolverOptions.html\"\u003eResolverOptions\u003c/a\u003e\u003c/code\u003e\nobject to the constructor of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/MavenVerticleFactory.html\"\u003eMavenVerticleFactory\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.registerVerticleFactory(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MavenVerticleFactory(\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ResolverOptions()\n        .setLocalRepository(local)\n        .setRemoteRepositories(remotes))\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_remote_repository_access_through_authenticated_https\"\u003eRemote repository access through authenticated https\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can specify https URLs for remote repositories, the client will uses the JSSE system properties\nconfiguration. It can be achieved via JVM system properties, you can read more at\n\u003ca href=\"http://maven.apache.org/guides/mini/guide-repository-ssl.html\" class=\"bare\"\u003ehttp://maven.apache.org/guides/mini/guide-repository-ssl.html\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_system_properties\"\u003eUsing system properties\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt can configured when running the JVM: for instance:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003ejava -jar my-fat-jar -Djavax.net.ssl.trustStore=/my_trust_store.jks -Djavax.net.ssl.trustStorePassword=somepassword\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_programmatically_2\"\u003eProgrammatically\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo configure the HTTPS property, use:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSystem.setProperty(\u003cspan class=\"hljs-string\"\u003e\"javax.net.ssl.trustStore\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"/my_trust_store.jks\"\u003c/span\u003e);\nSystem.setProperty(\u003cspan class=\"hljs-string\"\u003e\"javax.net.ssl.trustStorePassword\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"somepassword\"\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote that programmatic configuration must be done before using the underlying Aether client (so before\ninstantiating the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/MavenVerticleFactory.html\"\u003eMavenVerticleFactory\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_remote_repository_access_through_proxies\"\u003eRemote repository access through proxies\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_system_properties_2\"\u003eUsing system properties\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRepositories can be accessed using an http proxy using the \u003ccode\u003evertx.maven.httpProxy\u003c/code\u003e and \u003ccode\u003evertx.maven.httpsProxy\u003c/code\u003e.\nThe former configures a proxy for remote http repositories and the later configures a proxy for remote http repositories.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_programmatically_3\"\u003eProgrammatically\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also configure the repositories programmatically using the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/ResolverOptions.html#setHttpProxy-java.lang.String-\"\u003esetHttpProxy\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/ResolverOptions.html#setHttpsProxy-java.lang.String-\"\u003esetHttpsProxy\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.registerVerticleFactory(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MavenVerticleFactory(\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ResolverOptions().setHttpProxy(proxy))\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuring_authentication\"\u003eConfiguring authentication\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBasic authentication can be achieved by adding a username and/or password in the repository or proxy configuration.\nFor instance \u003ccode\u003e\u003ca href=\"http://julien:secret@myrepository.com/\" class=\"bare\"\u003ehttp://julien:secret@myrepository.com/\u003c/a\u003e\u003c/code\u003e will configure to use \u003ccode\u003ejulien\u003c/code\u003e username and \u003ccode\u003esecret\u003c/code\u003e\npassword if the remote server needs authentication. Proxies are also supported.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuring_remote_snapshot_refresh_policy\"\u003eConfiguring Remote Snapshot Refresh Policy\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default \u003cem\u003eSNAPSHOT\u003c/em\u003e dependencies are updated once a day. This behavior can be modified using the system property\n\u003ccode\u003evertx.maven.remoteSnapshotPolicy\u003c/code\u003e. This can be set to \u003ccode\u003ealways\u003c/code\u003e to ensure \u003cem\u003eSNAPSHOT\u003c/em\u003e dependencies are updated every\ntime, \u003ccode\u003edaily\u003c/code\u003e to update just once a day, which is the default, or to \u003ccode\u003enever\u003c/code\u003e to ensure they are never updated.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt can also be set to \u003ccode\u003einterval:X\u003c/code\u003e where \u003ccode\u003eX\u003c/code\u003e is the number of minutes to allow before updating a \u003cem\u003eSNAPSHOT\u003c/em\u003e\ndependency.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe refresh policy can also be configured from the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/ResolverOptions.html\"\u003eResolverOptions\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.registerVerticleFactory(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MavenVerticleFactory(\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ResolverOptions().setRemoteSnapshotPolicy(\u003cspan class=\"hljs-string\"\u003e\"never\"\u003c/span\u003e))\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_customizing_the_resolver\"\u003eCustomizing the resolver\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can create an instance of\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/MavenVerticleFactory.html\"\u003eMavenVerticleFactory\u003c/a\u003e\u003c/code\u003e using your own \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/maven/Resolver.html\"\u003eResolver\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.registerVerticleFactory(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MavenVerticleFactory(myResolver)\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e"},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["vertx-maven-service-factory","java"]},"buildId":"w7osvGTwfmYtkb6ZcZNeN","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-c8375bd94e53fd10a8dd.js"></script><script async="" data-next-page="/docs/[...slug]" src="/_next/static/w7osvGTwfmYtkb6ZcZNeN/pages/docs/%5B...slug%5D.js"></script><script async="" data-next-page="/_app" src="/_next/static/w7osvGTwfmYtkb6ZcZNeN/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/framework.2452a08f25aa09397355.js" async=""></script><script src="/_next/static/chunks/commons.5e3e47f192c8968126d4.js" async=""></script><script src="/_next/static/chunks/styles.233404fc46c3d542410b.js" async=""></script><script src="/_next/static/runtime/main-590ad82901df6081bdd1.js" async=""></script><script src="/_next/static/chunks/7f45b2959c91c8c7a63599f2d2a94aa1e936364f.a45d4def287f6d9b5832.js" async=""></script><script src="/_next/static/w7osvGTwfmYtkb6ZcZNeN/_buildManifest.js" async=""></script><script src="/_next/static/w7osvGTwfmYtkb6ZcZNeN/_ssgManifest.js" async=""></script></body></html>